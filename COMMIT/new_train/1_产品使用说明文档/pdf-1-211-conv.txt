可编程控制器Nano使用说明书对应模块TOYOPUCNanoCPUPW2I22I12SWO29O28开发中O19O18开发中O12IO329IO328开发中SL8BS6BS4BSTUC6941TUV6942TUK6948TUK1006TUK6965TUK6947TUK1010TUK1009TUK1008TUK1007TUK6952TUK1005TUU6955TUR6943TUR6966TUR6967
TOYOPUCNano系列1系统构成12设置与布线23初始设定34试运行45异常警报56维护67规格78CPU功能89链接功能910显示器1011工具11资料资资
前言此次承蒙购买本公司的可编程序控制器谨表衷心感谢。本书为以下产品的使用说明书。TOYOPUCNanoCPUPW2I22I12SWO29O28开发中O19O18开发中O12IO329IO328开发中SL8BS6BS4BSTUC6941TUV6942TUK6948TUK1006TUK6965TUK6947TUK1010TUK1009TUK1008TUK1007TUK6952TUK1005TUU6955TUR6943TUR6966TUR6967为了保证您能安全操作本产品必须通读本使用说明书以及相关的使用说明书。另外阅读后请妥善保管并随身携带以便能在需要时调阅。希望您将本使用说明书交给最终需要者。产品规格可能会由于改良而进行更改恕不另行通知。按照外汇以及国际贸易管理法规定将符合战略物资等或者劳务的产品出口到日本国外时需要得到日本政府的出口许可。在本产品的保修期内由于本公司的责任造成的质量问题将根据本公司的判断进行修理或者更换。除上述责任以外本公司对本产品造成的直接或者间接的伤害的其他责任概不负责。关于著作权商标EtherCAT为BeckhoffAutomationGmbH的注册商标。EtherNetIP为ODVAOpenDeviceNetVendorAssociation的注册商标。Ethernet及以太网为富士施乐株式会社的注册商标。DeviceNet为ODVAOpenDeviceNetVendorAssociation的注册商标。MODBUS为SchneiderElectric的注册商标。除此之外本文中的公司名称产品名称为各公司的商标或注册商标。i
安全使用注意事项进行安装运转保养检察之前必须阅读本使用说明书并且必须正确使用。请在熟悉机器知识安全信息和所有注意事项之后再进行使用。本使用说明书将安全注意事项的等级分为警告注意2种。错误使用时会造成使用者死亡或重伤的危险状态。错误使用时会造成使用者受伤或者造成物品损坏的危险状态。请勿在接通电源的状态下分解组件或触摸组件内部有触电的危险。否则可能会触电。接通电源时请不要触摸端子部。否则可能会触电。请在设备机械的周期停止状态下进行PC运转过程中的写入。RUN时写入操作错误可能导致机器损坏或者受伤。关于锂电池的使用请认真阅读本说明书中的锂电池使用注意事项。如果错误使用会造成液体外漏过热起火破裂可能损坏机器人员受伤。安全相关信号和异常停止电路等考虑到故障保险的问题请使用外部信号而不要依靠本系统。ii
请在本使用说明书中记载的一般规格的环境下使用。请不要在接通电源的状态下进行设置作业配线作业。带有端子台的产品也请不要进行装卸。请不要直接触摸模组内部的电子电路。否则可能会由于静电破坏模组。请不要在模组的装卸运输等过程中将本模组掉落到地板等上。否则将导致误动作。装置出现故障时请与本公司联系。客户请不要自行拆解模组。否则可能导致本公司无法正确进行故障解析。保管和运输注意事项1本模组请按照使用说明书中记载的一般规格进行保管。但环境温度必须保持在20C60C之间。2请勿将其直接放置在导电性物体之上。3电子设备容易受到结露的影响因此请使用干燥剂等以避免结露。请勿在强磁场中使用。另外请勿将会产生磁力的物体靠近产品。有时会导致存储器内的数据发生变化及引起故障。iii
使用说明书修改记录使用说明书的修改记号标记在封面记载的使用说明书号码的一部分中。使用说明书编号T1000NN日文E英文系列号码修改记号修改记号修改日期修改内容12015年9月暂定版22015年9月暂定版2版追加了142PW2接线端子的说明32015年10月正式版42016年5月4版链接功能修改资1外形尺寸图修正52016年8月追加了SWIO329SL6BS4BS的说明8章勘误9章勘误62016年8月1章勘误2章勘误9章勘误72016年9月1章勘误2章勘误5章勘误7章勘误8章勘误9章勘误在12章中追加了限制事项82017年2月追加了IO328I12O28O19O18O12的说明IO328O28O18正在开发iv
相关使用说明书的结构使用说明书编号名称概要TA65NPCwin2就编程工具PCwin2的使用方法及FB程序库的编辑方法进行说明。T315NPC103系列程序库就程序库功能的内容设定使用方法进行说明。T325N事件监视器功能就事件监视器功能的内容设定使用方法进行说明。T350NSFC程序篇就SFC程序的用语及编制方法进行说明。v
前言安全使用注意事项使用说明书修改记录相关使用说明书的结构1系统构成1111概要1112主要特征1113系统构成1214系统构成设备列表1315各部分的名称和功能152设置与布线2121设置2122布线243初始设定3131CPU出厂时的设定3132CPU的设定方法334试运行4141运行时的确认事项415异常警报515152535455566维护61627规格7172737475767778797108CPU818283848586878889CPU的异常警报51计算机链路的异常报警549PC链路异常警报553FLnet的异常警报562以太网的异常警报569FL遥控器的异常报警58261更換电池61维护检查6471一般规格71CPU模块规格72电源模块的规格74输入模块规格75输出模块规格78输入输出模块规格716IO电源状态监视器功能722短路诊断功能724选择器模块规格731基板规格731功能81CPU工作模式81用户存储器的结构812变址功能与间接地址840指令854设备情报存储器8115备份功能8116RUN中写入8122程序库功能8124SFC81249链路功能9191设定链路参数9192内置计算机链路功能9293内置PC链路功能9794内置FLnet功能92595内置以太网功能94996SNIF功能96997内置FL远程M功能97098内置标准MODBUSRTU从机功能98999EtherCAT功能993目录C1
910EtherNetIP功能99410显示器10110111工具111112STATUS显示器101111IO操作面板111IO检查输出用11212限制事项12113BUSEX功能131131NanoCPUBUSEX功能131132与连接PC10P系列时的不同点132133BUSEX功能规格133134与PlusBUSEX的连接134135与BUSEXP的连接138136PCwin2中的设定方法139137PlusBUSEX状态通告1311資料1資料11CPU模块资11資料12TOYOPUCNanoAAA资11資料13电源模块输入输出模块特殊模块通信模块资12資料14主板资14外形尺寸图资11C2
1系统构成11概要TOYOPUCNano系列是经全新基础设计由以往的产品PC10G演化而来的新型PLC。与以往的产品相比实现了基本指令速度的高速化无电池化程序容量及设备信息存储器的增大机体的小型化及对于DIN轨道安装的对应丰富的通信功能的安装其他各种功能的提高。12主要特征1通过CPU的高速化和大容量化丰富的通信功能及其他的功能提高可实现多种处理。基于基本指令处理速度096ns指令最快的高速运算程序容量540kw的大容量存储器丰富的内置链接FLnetFL远程MEthernetEtherCAT选择式2端口注1PC链接计算机链接MODBUSSIOSNIF选择式2端口注2可通过USB存储器进行程序的读出写入内置扩展总线BUSEX可通过TOYOPUCBUSEXP来活用现有设备PC2J3J10系列的模块还可通过TOYOPUCPlusBUSEX来对应基板型PLCPlus系列的各种模块增设IOBUS通过增设总线电缆的长配线化基板间最大100m提高设备设计的自由度通过无电池设计免去了定期维护注3搭载设备容量8Mbyte的存储器由以往PC10G产品的4Mbyte容量倍增2通过模块的高功能化简化了计划性维护及异常的预防和检出。电源模块通过输入电压电流周围温度的测量功能来掌握设备的信息通过模块寿命诊断来提高可维护性通过电源ONOFF及发生电压骤降等时的日志及定期日志功能实现异常的早期检出输出模块可通过输出短路检测功能特定短路地址。有助于缩短设备的MTTR。全体通过端子台的无螺丝化提高布线作业性和可维护性3通过机体的小型化除了有助于控制盘的小型化还能对应在DIN轨道上进行的组装。注1EtherCAT仅可使用L1端口。EtherNetIP功能未对应。注2SNIF仅可使用L3端口。注3需要长时间使用内置时钟时可使用作为选项的蓄电池。不使用蓄电池时内置时钟的备用时间为10天。111
13系统构成表示基于TOYOPUCNano系列的系统构成的一个示例。PW2主板8BS6BS4BSFLnet等其他工DMEthernetUSBUSB存储器无电脑下的读出写入CPU模块电源模块个人电脑周边装置PCwin2各种IO通信特殊模块主板PW2选择器SL各种IO通信特殊模块凡例TUV6942TUK6965TUU6954RUN224V0VNAL2NSL3LLPW2PWRSTATUSTOYOPUCNano2ETSTATUSTUU6949STATUSLEDIO329TUK6952SW2MLSTATUSDL增设IO总线生产指示TOYOPUC安全PLCTUV6942RUN1RUN224V0VNAINCH5CH6CH7CH8NACH4CH5CH6CH7CH8NA24V0VVVIICH18E1E2ZRERV5VAAV5VBBV5VCCE1E2ZRERP0P1P2P3P4P5PWCMPWRSTATUSRUNSTATUSERRTUU6955TUK6975RACKNoCH1CH2RUNERRSTATUSTUK6976CH1CH2RUNERRSTATUSRUNCH1CH2AABBCCERRERRTUK6974V5VAAV5VBBV5VUSBOPTUC6941USBOPPUSHSTATUSBATTERYRUNEAWBUSEXTXDRXDTXDL1RXDTXDL2RXDSTATUSTUU6956MSNSERRMSL1NSPCwinL168ACL2DE232CBUSEXRUN1MSL2422L1422IOBUSSGFGLLSGFGL4FL1232CL2PW2SLADDACTPWRCPUSCH3CH4SLOTCH3SLOTCCSLOTSLOT3SLOT4SLOT5SLOT6SLOT7OUTVICMSDCH18001FL1422L1L1L1L10V0VFGFGL2L2L2L20V0VFGFG12DISPSELOFFON0L1001F203F203FL21422STARTL22PUSH3232CL1TXL1RXL1L1CSL1RSPWRCPUSSLOTSLOTSLOTSLOTSLOTSLOTSLOTSLOTRESET4232CL2TXL2RXV扩展总线BUSEXPCLinkSNIF通过扩展总线来对应以往产品PC10用BUSEXPPlusBUSEX579BL2RSCAL2L2CSNHDRAINCANLV模块名称通信名称
14系统构成设备列表下表中表示系统构成设备列表机器名称规格规格CPUTOYOPUCNanoTUC6941程序存储器540k字含FB标准用户程序库内置通信端口L1L4从任意一个功能中进行选择的选择式注1L1FLnetEthernetFL远程MEtherCAT主机L2FLnetEthernetFL远程ML3PCLINKCMPLINKMODBUSSIOSNIFL4PCLINKCMPLINKMODBUSSIO增设总线IOBUS1端口扩展总线BUSEX1端口电源PW2TUV6942输入额定DC24V输出额定DC33V最大75A输入I22TUK694832点DC24V5mA数字输入模块无螺丝端子台I12TUK100616点DC24V5mA数字输入模块无螺丝端子台SWTUK696516点开关输入模块输出O29TUK694732点晶体管数字输出模块正公共端子05A点2A8点O28TUK101032点晶体管数字输出模块负公共端子05A点2A8点O19TUK100916点晶体管数字输出模块正公共端子10A点4A8点O18TUK100816点晶体管数字输出模块负公共端子10A点4A8点O12TUK100716点继电器接点输出模块DC24V2A点5A8点输入输出IO329TUK695264点数字输入输出混合模块输入32点DC24V5mA负公共端子16点公共端子输出32点晶体管输出正公共端子03A点2A16点IO328TUK100564点数字输入输出混合模块输入32点DC24V5mA正公共端子16点公共端子输出32点晶体管输出负公共端子03A点2A16点选择器SLTUU6955基板增设用模块主板8BSTUR69438插槽基板模块6BSTUR69666插槽基板模块4BSTUR69674插槽基板模块通信注22ETTUU6949FLnetEthernetFL远程MEtherNetIPEtherCAT主机兼用端口2端口2MLTUU6954PCLINKCMPLINKMODBUSRTUSIO兼用端口2端口但是RS422作为4线式仅可使用1端口DLTUU6956DeviceNet基准的主机从机兼用模块13
机器名称规格规格特殊注2CTTUK69742ch高速计数器模块输入信号电平DC51224V差动RS422最大计数速度DC输入时200kbps差动输入时8MbpsADTUK69758ch模拟输入模块电压电流输入选择式电压输入范围1010V010V05V15V电流输入范围020mA420mADATUK69768ch模拟输出模块电压电流输出选择式电压输出范围1010V010V05V15V电流输出范围020mA420mANanoAAATUK6987大数据解析模块注1EtherCAT主机仅可使用L1端口。EtherNetIP功能未对应。注2关于通信特殊模块的使用方法请参照各自的使用说明书。注3CPU与电脑周边装置的USB端口之间的连接请使用与SUB20标准对应的USB电缆。推荐USB电缆ELECOM株式会社制U2CBNBK详细内容请参照2262USB连接前的确认事项。注4是内置时钟的长时间后备用可选购电池。CPU在出厂时未配备蓄电池。不使用蓄电池时内置时钟的备用时间为10天。机器名称规格规格编程PCwin2TJB6983SFC对应程序设计软件日语CDROM版注3机器名称规格规格电池选购件TOYOPUCNano电池TUP6990TOYOPUCNanoCPU内置时钟长期后备用电池注414
15各部分的名称和功能151TOYOPUCNanoCPU7USB开关8USB存储器端口9L1通信用连接器10L2通信用连接器11增设总线连接器右侧面图正面图TOYOPUCNanoUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEX1显示器2电池连接用端子3复位起动开关4周边装置用USB端口5扩展总线BUSEX6L3L4通信用端子1512端口L3RS422232C切换开关13端口L4RS422232C切换开关14端口L3SNIF终端电阻设定开关
No名称内容1显示器显示CPU的状态。RUN灯表示正在执行顺序程序。与电源组件的RUN继电器输出连锁。EA发生重度轻度异常警报时亮灯W写入闪存中时亮灯BUSEX表示与扩展总线的通信状态。STATUS显示状态RUN圆点呈8字形旋转严重轻度异常报警用代码显示状态USBOP表示USBOP端口的状态。2电池连接用端子是连接可选电池的端子。3复位起动开关将开关扳至RESET侧则CPU处于复位状态OFF外部输出和内部继电器停止程序运行。在停止程序运行状态下将开关扳至STRAT侧则开始执行程序。通过停止信号停止外围装置运行时不开始执行程序。而且为了防止误操作只有在按下且7段LED的圆点变为亮灯状态后操作才会有效。4周边装置用USB端口是与周边装置进行通信时与PC连接的端口。用USBFullspeed12Mbps进行高速通信。5扩展总线BUSEX与扩展模块连接的USBminiB母连接器6L3L4通信用端子是串行通信用的无螺丝端子台。L3从PC链接计算机连接SIOSNIF中选择L4从PC链接计算机连接SIO中选择7USB开关未定8USB存储器用端子是连接USB存储器用的USBA母连接器。9L1通信用连接器通过从FLnetEthernetFL远程MEtherCAT注中选择的通信功能进行通信。10L2通信用连接器通过从FLnetEthernetFL远程M中选择的通信功能进行通信。注11增设总线用连接器是与选择器模块SL的输入端口连接用的带LED的RJ45母连接器。12端口L3RS422232C切换开关是将L3的通信标准设定为RS422或232C的开关。左侧为RS422右侧为RS232C。422232CL313端口L4RS422232C切换开关是将L4的通信标准设定为RS422或RS232C的开关。左侧为RS422右侧为RS232C。422232CL414端口L3SNIF终端电阻设定开关在L3中选择SNIF时为ON是使SNIF的终端电阻为有效的开关。选择PC链接计算机链接SIO时请置于OFF。LTONOFF注EtherCAT仅可使用L1端口。EtherNetIP功能未对应。16
152PW2电源模块DC24V输入No1名称内容2端子台STATUS是连接RUN继电器输出DC24V电源的无螺丝端子台。显示器显示PW2的状态。表示输入电压的电压值。PWR204V以下橙色204288V绿色288312V橙色312V以上红色发生电压骤降灭灯显示PW2模块的状态。正常绿色异常红色寿命下降橙色PW2PWRSTATUSTUV6942RUN1RUN224V0V1显示器NANARUN1RUN2是RUN继电器输出部。与CPURUN信号同步进行开闭。CPURUN闭CPURUN以外开24V0VNA未使用172端子台DC24V电源输入部DC204288V
153I2232点数字输入1显示器2端子台No名称07内容1显示器在输入端子上加载电压时亮灯不加载电压时灭灯。LED的行端子的对应最上段第2列8F第3列1017最下段181F2端子台是连接输入端子与公共端子的无螺丝端子台。18
154I1216点数字输入No12名称内容在输入端子上加载电压时亮灯不加载电压时灭灯。LED的行端子的对应最上段07第2列8F是连接输入端子与公共端子的无螺丝端子台。显示器端子台I12TUK100601234567C1C189ABCDEFC2C21显示器192端子台
155SW开关输入SWTUK6965OFFON0123456789ABCDEF1显示器2开关No名称内容1显示器是显示开关输入状态的LED。开关为ON时亮灯OFF时灭灯。2开关是16点的开关。110
156O2932点数字输出正公共端子1显示器2端子台No名称内容1显示器输出端子为ON时亮灯OFF时灭灯。LED的行端子的对应最上段07第2列8F第3列1017最下段181F2端子台是连接输出端子与公共端子的无螺丝端子台。111
157O2832点数字输出负公共端子No12名称内容输出端子为ON时亮灯OFF时灭灯。显示器端子台LED的行最上段第2列第3列最下段端子的对应078F1017181FO28TUK101001234567C1C189ABCDEFC2C21011121314151617C3C318191A1B1C1D1E1FC4PW1显示器2端子台是连接输出端子与公共端子的无螺丝端子台。112
158O1916点数字输出正公共端子No12名称内容输出端子为ON时亮灯OFF时灭灯。LED的行端子的对应最上段07第2列8F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O19TUK100901234567C1C189ABCDEFC2PW1显示器1132端子台
159O1816点数字输出负公共端子No12名称内容输出端子为ON时亮灯OFF时灭灯。LED的行端子的对应最上段07第2列8F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O18TUK100801234567C1C189ABCDEFC2PW1显示器1142端子台
1510O1216点继电器接点输出No12名称内容输出端子为ON时亮灯OFF时灭灯。LED的行端子的对应最上段07第2列8F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O12TUK1007DC24V2A1显示器01234567C1P189ABCDEFC2P22端子台115
1511IO32932点32点数字输入输出正公共端子1显示器2LED切换开关3连接器No名称内容1显示器亮灯正在向输入中加载电压或输出端子为ON时灭灯未向输入中加载电压或输出为OFF时LED的行端子的对应LED切换开关在上面时LED切换开关在下面时最上段072027第2列8F282F第3列10173037最下段181F383F2LED切换开关是将显示器的显示内容切换为各32点的开关。3连接器是连接输入端子与公共端子的连接器。116
1512IO32832点32点数字输入输出负公共端子IO328No123名称显示器LED切换开关连接器内容亮灯正在向输入中加载电压或输出端子为ON时灭灯未向输入中加载电压或输出为OFF时TUK1005001FDISPSEL203F1显示器2LED切换开关3连接器001F203FLED的行端子的对应LED切换开关在上面时078F1017181FLED切换开关在下面时2027282F3037最上段第2列第3列最下段383F是将显示器的显示内容切换为各32点的开关。是连接输入端子与公共端子的连接器。117
1513SL选择器正面左侧面SLTUU6955RACKNoINOUTRUNERR1显示器2机架No开关3增设总线输入连接器4增设总线输出连接器5设定开关SW2不需变更SW2SW2全部为OFFNo1显示器2机架No开关3增设总线输入连接器4增设总线输出连接器5设定开关SW2不可变更内容名称显示模块与通信的状态。是设定机架No用的旋转开关。是增设总线的输入端口带LED的RJ45母连接器。与CPU模块的IOBUS端口或其他SL模块的输出端口连接起来使用。是增设总线的输出端口带LED的RJ45母连接器。与其他SL模块的输入端口连接。本模块为网络的最终端时本端口什么也不连接。SW214在出厂状态下全部设定在OFF上。用于系统程序维护本开关绝对不可变更。118
15148BS8插槽基板是拥有8个SLOT07IO插槽的基板。4SLOT06SLOT28SLOT410SLOT62PW1FG端子3CPUSLPWRCPUSL5SLOT17SLOT39SLOT511SLOT7SLOT7SLOT0SLOT1SLOT2SLOT3SLOT4SLOT5SLOT6No名称内容1FG端子是连接FG配线的端子。2PW是安装电源模块PW2的插槽。3CPUSL是安装CPUSL的插槽。4SLOT0在CPUSL上安装CPU时由CPU占用5SLOT16SLOT27SLOT3是安装输入输出输入输出通信特殊模块的插槽。8SLOT49SLOT510SLOT611SLOT7119
15156BS6插槽基板是拥有6个SLOT05IO插槽的基板。No1FG端子2PW3CPUSL4SLOT05SLOT16SLOT27SLOT38SLOT49SLOT5名称2PW1FG端子3CPUSL5SLOT1SLOT0SLOT1SLOT27SLOT39SLOT5SLOT5PWRCPUSLSLOT3SLOT4内容4SLOT06SLOT28SLOT4是连接FG配线的端子。是安装电源模块PW2的插槽。是安装CPUSL的插槽。在CPUSL上安装CPU时由CPU占用120是安装输入输出输入输出通信特殊模块的插槽。
15164BS4插槽基板是拥有4个SLOT03IO插槽的基板。No1FG端子2PW3CPUSL4SLOT05SLOT16SLOT27SLOT3是连接FG配线的端子。是安装电源模块PW2的插槽。是安装CPUSL的插槽。在CPUSL上安装CPU时由CPU占用2PW1FG端子名称3CPUSLPWRCPUSL5SLOT14SLOT06SLOT27SLOT3SLOT3内容是安装输入输出输入输出通信特殊模块的插槽。121SLOT0SLOT1SLOT2
2设置与布线介绍安装及布线的方法注意事项。21设置211设置环境安装时要避免以下环境。1周围温度超过055C范围的场所2周围湿度超过1095RH范围的场所3因急剧的温度变化而产生凝水的场所4有腐蚀性气体可燃性气体的场所5尘埃铁粉等有导电性的粉末油烟盐分有机溶剂多的场所6产生强电场强磁场的场所7日光直射的场所8直接受到震动冲击的场所使用环境如上所述时请将其收纳于密闭的控制盘内等保证设置环境具备良好条件。控制盘的门请不要一直敞开着。此外使用控制盘内的风扇等时应设置在风无法直接吹到的位置。被风直接吹到的部分会大量附着尘埃等有时会招致预料之外的事态因此请多加注意。212
2121安装注意事项为了方便通风及更换模块模块上部及下部要与建筑物零件相隔50mm以上。min50mmmin50mm2竖向安装及水平方向的安装在使用时会使模块难以通过要绝对避免。竖直安装不可min50mmmin50mm水平方向安装不可22
213各模块的安装1向主板上安装的方法1将固定齿脚插入主板固定孔内。2压下模块进行安装直到发出咔嚓声响为止。检查齿角是否确实插入了主板机架是否确实插入。请注意如果没有彻底固定会造成错误动作。请注意如果没有彻底固定会造成错误动作。而且各模块请务必用螺丝固定在基板上。螺丝固定部位2模块的拆卸方法1卸下模块主板的固定螺丝。2将模块上部的钩子向下推到底。3按住钩子以模块下部为支点向身体方向拉从主板上卸下。23
22布线221TOYOPUC总体布线的注意事项介绍铺设电源线或输入输出线通信线等时的注意事项。此外在配线过程中及配线后不要粗暴地按压端子台连接器等。否则可能导致配线脱落断线接触不良或机器损坏。1PC本体电源模块的电源与输入输出设备及主体电路设备要分离进行布线。主电源主电路电源电源电源输入输出设备主电路机器2线路之间及线路与地面之间要使用低干扰的电缆。干扰多时请连接绝缘变压器。绝缘变压器3输入输出信号线要尽量远离高电压大电流的主线路线最少分离100mm以上。同时要尽量避免平行布线。4DC24V的输入输出线应与AC100V的线分开。PC输入输出PC本体增设机架PC本体24输入输出设备
5端子台推荐电线规格端子台为无螺丝连接器。仅将棒形端子压在电缆末端覆膜剥离后的部位并将棒形端子插入连接器的电线插入口内即可夹紧。拆除电缆时请在用小型一字起子压住橙色拉杆上部的状态下将电缆拆下。模块名称信道No端子台PHOENIXCONTACT公司制推荐电线规格PW2FKC255ST508LR075mm2相当AWG19125mm2相当AWG16TOYOPUCNanoL3L4DFMC154ST35LR05mm2相当AWG21075mm2相当AWG19I22O28O29DFMC1520ST35LR05mm2相当AWG21075mm2相当AWG19I12O12O18O19DFMC1520ST35LR05mm2相当AWG21075mm2相当AWG19模块名称信道No推荐端子台注推荐电线规格IO328IO329FCN367J040AUFW富士通元件株式会社制扁平带状电线间距127mm绞合线相当AWG28单线相当AWG30注产品中未配备。6压接端子最好使用以下产品。其他公司也有相当的产品作为例子写了PHOENIXCONTACT公司的产品。裸线容易发生晶须导致的短路因此请务必使用带有绝缘套管的棒形端子。生产厂家电线规格型号产品编号电线种类mm2AWG例PHOENIXCONTACT公司通常电线0521AI0510WH320127507519AI07510GY320128812516AI1510BK3200195MTW电线0520AI07510GY3201288魏德米勒公司MTW电线07518H10169025950000专用压接工具CRIMPFOXZA3或CRIMPFOXUD63或PHOENIXCONTACT公司推荐品注棒形端子上套有防短路标记管。7输入输出信号线在控制面板内和控制面板外均应与动力线路在不同的电缆插槽中布线。采用配管式布线时确保给配管做好D型设置接地。8不得不在同一电缆插槽中布线时要使用全面密封的电缆密封端要连接到主板模块的FG端子或控制盘的接地块上。9输出模块烧损保护输出模块中内置了用于烧损保护的保险丝。请务必在额定值内使用。保险丝熔断时不可仅更换保险丝所以请以模块单位进行更换。关于各输出模块的保护功能请参阅7章规格。10在CPU模块前面50mm以内不要设强电线。25
11FG连接FG安装在各基板的左端。安装增设的机架时FG请以一点进行接地。在进行D型接地的接地块使用2mm2以上的电线从各主板进行直接配线。1次配线D型接地控制盘FGFG主板主板26接地块
222电源模块的布线075或125mm2扭绞线RUN1RUN1RUN224VIN0VRUN2075或125mm2扭绞线24V0V向顺序控制电路DC204288VPW2端子台上的配线请务必使用带有绝缘套管的棒形端子。正确连接例DC24VPW2IO电缆不良连接例DC24VPW2DC24VPW2CPU机架增设IO机架CPU机架增设IO机架27IO电缆增设IO机架使用另设电源。
223PC链接计算机链接MODBUSSIOSNIF的布线1PC链接计算机链接MODBUS的2线式和SIO的配线如下所示请分别连接在各端子上。功能链接参数链路No支架号PC10模式时隙号端子名称模式LL3L内容通信通信通信0V屏蔽内壳FG屏蔽外壳L3PC链路SG计算机链路MODBUSSIO模块任意内置FGL通信L通信注变更计算机链接的通信标准时请用TOYOPUCNano右侧的开关进行设定。左侧为RS422右侧为RS232C。USBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSa推荐电缆中国电线工业株STATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEX生产厂家TOYOPUCNanoTOYOPUCNano右侧面图端口L3RS422232C切换开关端口L4RS422232C切换开关规格备注UL24642SB220AWG注1必须在切断电源的状态下进行连接。NanoL4L4SG通信0V屏蔽内壳FGFG屏蔽外壳OVCTFSS2C075mm2UL2464DSS2C20AWG双重屏蔽仓茂电工株注2必须按从模块到模块的顺序依次进行配线不得进行多向配线。注3为了避免因外部噪声导致误动作应避免使通信电缆平行接近动力线等高压强电流线。28
b布线图PC链接MODBUS的布线图以下是表示PC链接时的例子有关MODBUS的部分同上。0V0V0V0VFGFGFGFGPC链路主局PC链路子局1PC链路子局2最大1km计算机链接布线图0V0V0V0VFGFGFGFGSIO布线图最大1kmTXDRXD0VFGTXDRXD0VFGPC链路子局n高位计算机计算机链接0局子局1计算机链接1局子局1计算机链接n局子局1高位计算机主局SIO子局最大15m29
2SNIF的配线注1如下所示请分别连接在各端子上。推荐电缆与1相同。功能端子名称LSNIFLSG注1仅L3标准。不做链接参数的设定时为SNIF。注2请将TOYOPUCNano右侧的终端电阻开关设定在LTON侧。左侧为ON右侧为OFF。不使用SNIF时请设定在OFF上。注3请将TOYOPUCNano右侧的RS422232C切换开关设定在RS422侧左侧为RS422右侧为RS232C。L3端子放大图USBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEXTOYOPUCNano正面图TOYOPUCNanoTOYOPUCNano右侧面图端口L3RS422232C切换开关端口L3SNIF终端电阻开关注4作为SN1F使用时不要将屏蔽外壳连接到TOYOPUCNano侧和TOYOPUCPCS侧。a布线图TOYOPUCTOYOPUCNano0V最大3m0V安全PLC210内容通信通信通信0V屏蔽内壳
224FLnetEthernetFL远程MEtherCAT增设IOBUS的配线注意TOYOPUCNanoCPU内置端口中的EtherNetIP功能的使用未对应。2241布线所需的外部机器建构FLnetEthernetFL遥控器MEtherCAT系统需要以下外部机器。外部机器请客户准备。通信机器应使用符合IEEE8023规格规定的产品。1指定LAN电缆FLnetEthernetFL远程MEtherCAT及增设IOBUS中使用的指定LAN电缆ASSY类别5e相当品如下所示。TUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4STATUSLEDL1L2L1L2指定直线电缆或交叉电缆使用中继时全长请控制在100m以下。分类种类制造商型号FLGS80m时FLGS800FLGX002电缆长度01m100m02m电缆ASSY制造商株进和株KOM日合通信电线株指定LAN电缆注直线电缆交叉变换用电缆PW2PWRSTATUSTOYOPUCNano2ETRUNSTATUSTXDEAWBUSEXTUU6949RXD通信电缆要避免与动力线等高压强电线平行接近布线。为防止发生连接器接触不良请勿进行电缆的末端加工模块化插头的再加工。2指定HUB分类口数3EtherCAT分支从机分类口数产品名称FESWH05捷太格特型号TCU64145口8口SWHUB注HUB应接地。详细内容参见FESWH0508的使用说明书t759n。EtherCAT分支从机3口6口产品名称EC03JSEC06JS捷太格特型号TCU6925TCU69262242EthernetFlnetFL远程M的配线与相对的节点进行1对1连接时FESWH08TCU6415TOYOPUCNano2ET与对方节点用直线电缆或交叉电缆连接。211
经过HUB连接的时候FLnetEthernetFL远程M时可通过HUB作为中继进行连接。EtherCAT时通过专用的分支从机作为中继进行连接。请勿将FLnetEthernetFL远程MEtherCAT混合用于同系统的网络中。FL远程M时的构成例TOYOPUCNanoCPU2ETFL远程M和HUB之间及HUB和HUB之间可用直线电缆或交叉TUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHSTATUSBATTERYSTARTPUSHRESETPCwinL1L2主机HUB之间最长100mHUBHUB之间最长100mPW2PWRSTATUSTOYOPUCNano2ETRUNSTATUSTXDEAWBUSEXTUU6949RXDDC24VHUB从机之间最长100mTUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4STATUSLEDL1L2L1L2节点HUB之间最长100mHUBHUB之间最长100mPW2PWRSTATUSTOYOPUCNano2ETRUNSTATUSTXDEAWBUSEXTUU6949RXDDC24VHUB节点之间最长100m电缆进行连接。为了电缆共通化建议使用直线电缆进行敷设。MSL1NSMSBUSEXL2STATUSLEDL1L2NSIOBUSL3LLSGFGLLSGFGL4指定的HUB和FRMT为自动协议。自动协商模式之间相互连接时将达到100Mbps。212FRMTFRMT单元用电源DC24VIO电源与通讯电源要分开使用TOYOPUCNanoCPU2ETFLnetEthernet和HUB之间及HUB和HUB之间可用直线电缆FLnetEthernet时的构成例或交叉电缆进行连接。为了电缆共通化建议使用直线电缆进行敷设。IO用电源DC24V
2243EtherCAT的配线与对象节点1对1连接时TOYOPUCNanoCPU2ET与对方局之间请用直线电缆进行连接。TUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4STATUSLEDL1L2L1L2EtherCAT从机等PW2PWRSTATUSTOYOPUCNano2ETRUNSTATUSTXDEAWBUSEXTUU6949RXD将分支从机作为中继进行连接时全长直线电缆请控制在100m以下。EtherCAT时的构成例TOYOPUCNanoCPU2ETEtherCAT与分支从机之间及分支从机与分支从机之间请用直线电缆进行连接。TUV6942RUN1RUN224V0VNASTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4L2PW2PWRSTATUSTOYOPUCNanoUSBOPSTATUSTUC6941USBOPBATTERYPUSHRUNEAWBUSEX2ETSTATUSTXDTUU6949RXDL1STATUSLED分支从机从机之间最长100mDC24V分支从机从机之间最长100m单元用电源DC24VIO用电源DC24VMSL1NSMSL2NSIOBUSL1L2主机分支从机之间最长100m213IO电源与通讯电源要分开使用
2244增设IOBUS的配线TOYOPUCNanoCPU与选择器模块SL之间及SL与SL之间请用直线LAN电缆进行连接。增设IOBUS中请勿混入其他网络。CPUSL之间请连接CPU的IOBUS端口和SL的IN端口。SLSL之间请从OUT端口连接到另一个SL的IN端口。CPU机架机架No0上最多可增设7个机架机架No17。电缆无需按机架No的顺序进行连接。各机架之间最长请控制在100m。机架No0CPUCPUSL之间最长100m机架No1SLSL之间最长100m机架No2SLSL之间最长100m机架No3SLSL之间最长100m机架No4SLSL之间最长100m机架No5SLSL之间最长100m机架No6SLSL之间最长100m机架No7SL之间是从OUT连接IN上总长度700m无需按机架No顺序进行连接从CPU的IOBUS连接到SL的IN上214
225电缆施工铺设进行电缆施工时请注意以下几点。1拉拽电缆时切勿施加过大的力。因过度拉抻而拉长2固定部分的弯曲半径应为电缆外径的4倍以上。电缆外形的4倍215弯曲半径低于电缆外径的2倍
3固定电缆时不要用电缆束带等将其拧得过紧。电缆被压扁4请勿使电缆产生扭曲或扭结。所谓扭结是指电缆在成为环状的状态下用力牵拉后折曲为锐角并将导致特性不良。一旦产生扭结后即使外观上恢复原状电缆特性也不会完全恢复。电缆产生了扭结5尽可能不要进行多余部分的处理。卷缠直径小及卷缠次数过多的话有可能同色对的电缆之间会发生过程的串音引起故障。串音是指传送信号漏到其它传送路。216
6包好电缆远离噪声源。请尽可能地使通信电缆和HUB中枢远离焊接设备或发动机的动力线大电流的电源电缆等干扰源。7应使用金属套管进行屏蔽。无法采用6中所示方法时应使用金属套管等对通信电缆HUB集线器进行屏蔽。噪声源通信电缆HUB通信电缆HUB存放箱金属制套管金属制217噪声源
2262261对PLC与电脑进行USB连接时的注意事项在电脑使用AC电源过程中在PLC上连接了USB电缆的状态下绝对不可以进行插拔电脑侧USB电缆的行为。另外用USB电缆连接PLC和电脑时请事先确认2262并按2263的连接步骤进行USB连接。采用其他方法连接USB电缆时PLC的USB端口有时会发生故障。PLC的USB端口故障原因如果电脑的AC电源及屏蔽不进行接地因为以下的理由PLC的USB端口有时会发生故障。PLC的USB端口发生故障时虽然与PCwin2的通信将无法进行但PLC的动作等其他功能将会正常工作。1连接USB电缆时会因为AC适配器或来自电脑的漏电流在USB电缆的连接器金属部分和PLC的USB连接器金属部分之间产生电位差所以在连接时PLC的USB端口有时会发生故障。USB连接器的金属部分AC插头三芯插座AC适配电脑PLCUSB电缆电位差DC电缆漏电流电位差屏蔽器FGFG电接地接地极未接地AC插头两芯屏蔽位差接地线未接地PLC有发生故接地障的可能性接地线未接地接地2由于电脑的屏蔽与USB的0V信号GND是根据电脑的种类来连接所以有时会因为USB电缆内的屏蔽线断线及电脑的USB连接器金属部分和USB电缆的连接器金属部分接触不良导致电脑的AC电源漏电流潜行到PLC造成PLC的USB端口发生故障。电脑VbusDC电缆D漏电流屏蔽PLCD0VFGD0FG屏蔽线断线金属部分接触不良电位差VbusUSB电缆DV接地FG存在着因漏电流的潜行而导致PLC发生故障的可能性。218
2262USB连接前的确认事项进行USB连接之前请确认以下事项。1使用前请确认USB电缆屏蔽线的导通状态。请勿使用屏蔽线已断线的USB电缆。屏蔽线的导通确认方法USB电缆请轻轻地弯曲电缆确认导通状况。金属部分之间的电阻值应在数以下2请确认电脑侧的USB连接器金属部分与电缆侧的连接器金属部分是否处于导通状态。为确认是否确实处于接触状态请上下左右前后轻轻地活动连接器部分确认导通状况。即使只有瞬间有非导通的情况也请勿使用该端口。USB连接器金属部分的导通确认方法电脑USB连接器屏蔽请上下左右前后轻轻地活动确认导通状况。USB电缆电脑机箱或其他连接器金属部分与USB电缆的连接器金属部分之间的电阻值应在数以下。3为减少因电脑漏电流而引起的USB端口故障USB电缆请使用下述的本公司推荐产品。USB电缆形状生产厂家型号长度ELECOM株U2CBN07BK07mA公B公型RoHS标准的产品U2CBN10BK10mU2CBN15BK15mU2CBN20BK20mU2CBN30BK30mU2CBN50BK50mUSB2FS0505mA公B公型USB2FS1515mUSB2FS330m219
4USB中继电缆请使用下述的推荐产品。而且使用中继电缆时请遵守以下注意事项。种类生产厂家型号长度形状USB中继电缆HARTING株0945452191005mB母B公型注意根据USB的规格电缆的最大长度定为5m。使用中继接头延长电缆时总延长距离不得超过5m。正确连接例NG例控制盘内USB中继电缆05m中继接头USB电缆3mDMPCwinPLC控制盘内USB中继电缆05mUSB电缆5mDMPCwinPLC220
2263PLC与电脑的USB电缆连接步骤请按下述14的其中一个步骤来连接USB电缆。1电脑的AC电源插头为三芯带接地极时AC插头三芯接地极应接地插座接地AC适配器AC适配器接地AC插头两芯接地线USB电缆PW2PWRSTATUSTOYOPUCNano插座TUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEX将USB电缆连接到PLC上的顺序将USB电缆从PLC上拔下的顺序2电脑的AC电源插头有接地线时将接地线接地应与AC供电电源的接地为同一个接地将USB电缆连接到PLC上的顺序将USB电缆从PLC上拔下的顺序221电脑电脑PLCUSB电缆TUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEXPLCPW2PWRSTATUSTOYOPUCNano
3电脑的AC电源插头为两芯且没有接地线时电脑PLCUSB电缆PW2PWRSTATUSTOYOPUCNanoAC插头两芯AC适配器USBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSRUNEAWBUSEXBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4插座将电脑的屏蔽接地应与AC供电电源的接地为同一个接地TUV6942RUN1RUN224V0VNA接地电脑侧串行端口等将USB电缆连接到PLC上的顺序将USB电缆从PLC上拔下的顺序4以蓄电池供电来使用电脑时不使用AC电源时不必对电脑进行接地直接即可使用。电脑TOYOPUCNanoUSB电缆PW2PWRSTATUSTUV6942RUN1RUN224V0VNAUSBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL4RUNEAWBUSEX将USB电缆连接到PLC上的顺序将USB电缆从PLC上拔下的顺序PLC222连接到固定螺丝部接地线
3初始设定31CPU出厂时的设定311程序与参数CPU出厂时设定为以下状态。程序CPU动作模式的初始设定为Nano模式。参数在参数的CPU设定中写入了下表中的设定值。项目设定值程序名称项目空白CPU工作模式CPU工作模式Nano闪存器Kbyte0错误时的RUN状态设定IO表对照异常停止整体扫描超时停止数据异常停止用户存储器自动恢复无效继续执行蓄电池可选无扫描超时CPU1ms100CPU2ms100CPU3ms100313
312蓄电池内置时钟使用超级电容器作为后备需要长时间的后备时作为选项可使用蓄电池。CPU在出厂时未配备蓄电池。由于用户程序顺控程序与参数数据存储器设备信息存储器内容注释等保存在停电时内容也会被保留的非易失性存储器中所以即使在没有蓄电池的状态下也能保留内容。在TOYOPUCNano中追加蓄电池时请在参数的CPU设定中将蓄电池可选设定在being有上。在拆下蓄电池的状态下请设定在nothing无上。32
32321CPU的设定方法CPU工作模式的设定首先通过外围装置设定CPU工作模式。CPU的工作模式有PC10模式并可根据需要选择程序容量。CPU工作模式与程序容量数据容量的关系补充闪存器用于初始化存储在闪存存储器中的数据时向RAM上的闪存器转发数据然后在RAM上的闪存器上使用。此时可通过与EB区域相同的命令直接指定。但向闪存存储器本身写入数据时需要专用命令。即使向闪存器中写入通常的命令也需要切断电源或重新启动CPU才能返回原来的闪存存储器中的内容。注意如果变更工作模式迄今为止的顺序程序和数据将会失去。另外在PC10模式下作为CPU工作模式可以通过参数来选择程序23的执行与否以及与RUN信号的连锁。模式程序容量KW基本区域数据容量KW扩充区域数据容量KWPRG1PRG2PRG3PRG1PRG2PRG3继电器寄存器数据缓冲区PC10模式6060603232321612825612060018000项目选择值程序执行1程序1有效执行固定程序2有效无效执行非执行程序3有效无效执行非执行RUN信号连锁2程序1连锁固定程序2连锁非连锁程序3连锁非连锁1程序23可以通过参数设定选择程序的执行。如果选择了无效应用程序程序2或程序3将不执行。2程序23可以通过参数选择与RUN信号的连锁。选择了连锁的程序停止后连锁的RUN信号OFF所有程序停止。33
322设定链路参数时的支架号时隙号TOYOPUCNano作为通信端口拥有L1L4等4个端口。进行链接参数设定时的支架号及时隙号请按照下表设定。链路号可以任意设定。不使用内置链路时不必进行本项设定。将L3标准作为SNIF使用时不需进行链接参数的设定。可选择的通信功能链路号支架号时隙号模块名称PC10模式Nano模式EthernetFLnetFL远程MEtherCATM注1任意内置L1L1以太网32端口FLnetFL远程MEtherCATMEthernetFLnetFL远程M任意内置L2L2以太网32端口FLnetFL远程MPCLINKCMPLINKMODBUSSIOSNIF注2任意内置L3L3PC链路计算机链路MODBUSSIO模块PCLINKCMPLINKMODBUSSIO任意内置L4L4PC链路计算机链路MODBUSSIO模块注1EtherCAT主机仅可使用L1端口。EtherNetIP功能未对应。注2如果不在L3标准中设定链接参数则会成为SNIF。作为SNIF使用时应将L3的终端开关置于ON位置。不作为SNIF使用时应将其置于OFF位置。34
323程序的编制顺序请参照PCwin2的使用说明书。324参数的设定方法请参照PCwin2的使用说明书。35
4试运行41运行时的确认事项寄存器设定是否进行了寄存器清零参数设定参数设定是否正确电池1是否确实连接了电池接插件电池是否进行了充分的充电时间设定是否进行了内装时钟的时间设定模块安装是否确实安装了各模块固定螺丝有无切实紧固。端子台的配线各端子电线的连接是否正确电线尺寸是否正确端子螺栓是否松动1仅使用电池时414
5异常警报51511CPU的异常警报异常级别异常级别可大致分为以下几类。警报继续运行系统没有马上停机但其故障状态若继续的话系统将会出现停机异常。RUN灯及运行状态监视器的RUN显示仍正常。特殊继电器V003启动。轻度异常继续运行主要是用户程序或用户设定引起的异常即使不马上停止顺序程序的执行也不会对系统造成重大影响的异常。RUN灯及RUN接点均照常ON。特殊继电器V002启动。重度异常停止运行主要是系统硬件引起的异常是系统难以继续运行的异常。顺序程序的执行被停止RUN灯熄灭RUN接点OFF。特殊继电器V001启动。重度异常时输出将保留。需使输出为OFF时请在外部硬盘上使输出的公共部分为OFF。515
512异常显示1CPU发生异常时EA灯红色亮灯。2信息显示器在信息显示器为运行状态监视器模式的情况下显示错误代码。21运行过程中的报警代码显示例如发生应用命令错误代码717显示不显示1显示不显示07秒01秒07秒2秒22在扩展功能执行过程中显示强制ONOFF跟踪扫描单位强制输出跟踪扫描单位强制输入ONOFF注意报警时不显示。52
513异常显示一览表电源电池存储器停电0013CPU003D004C004D004E004F03013系统方面的异常程序方面的异常表示对应的程序号码。00AF亮灯熄灯异常项目错误代码LED灯错误解除POWERRUNEA重新接通电源复位电池电压降低程序存储器和数校验错误附属信息和数校验错误未定义指令CPU间USB断线CPU间USB刷新停止无内置Ethernet用MACID无电源模块应答002202102302400100011001200140015CPU间USBVBUS异常USB存储器用5V电源异常0016特殊继电器VC1V01VF0V03VC2V01VC2V01VC9V01VC0V01VC0V01VC0V01VF5V03VC2V01VC0V01VC2V03由参数的发生故障时的运转状态决定。左侧为出厂时的设定。002A蓄电池安装异常系统管理处理器异常顺序处理字处理器异常系统RAM异常系统中断异常输入输出端口异常CPU软件异常IO总线异常BUSEX连接异常增设机架异常基板用总线异常系统内存不足RTC异常00A3系统程序异常00A6顺序RAM异常00A9系统参数报警00AA备用存储器写入错误00AB数据异常00AD未确认数据异常00AE时钟未设定0035003600320039003C00A0VCAV01VC2V0102VCBV03VF5V0353
异常项目使用IO机架FIO支架号重复IO地址重叠IO电源停电输入输出IO表对照异常IO模块异常IO模块报警IO模块参数异常IO地址设定异常输入输出总线IO地址总线奇偶校验错误事件监控器错误扫描超时应用指令错误1用户程序存储溢出无END指令无START指令主控制错误用户程序应用指令错误2特殊模块用FORNEXT错误RET错误RETI错误程序库调用错误PRGEND执行标签表错误变址错误错误代码LED灯错误解除POWERRUNEA重新接通电源复位特殊继电器VC8V01VC8V01VC8V01VC1V0100410045004600470048004A0043004B00420049004402903107107207307407507807907A07B07C07D07607FVE0V0102VC7V01VC7V03VC5V01VC8V01VC3V01VC2V01VE11VE22VC93V01VC93V01VC93V01VC93V01V0102V0201VE22VC93V01VC93V01VC93V01V0201VE22VC93V01VC64V01V0201VE22VC64V01V0201用户设定参数设定值异常077亮灯熄灯由参数的发生故障时的运转状态决定。左侧为出厂时的设定。1程序13VE8VEA2各程序的特殊继电器3程序13VD0VD24程序13VD8VDA030系统方面的异常13程序方面的异常表示对应的程序号码。54
异常项目错误代码LED灯错误解除特殊继电器POWERRUNEA重新接通电源复位特殊模块特殊模块参数异常0082VC5V01特殊模块数溢出0088VC8V01特殊模块异常084VC4V01链接参数异常085V03链路模块分配异常0089VF2V03链路通信异常086V03030系统方面的异常13程序方面的异常表示对应的程序号码。亮灯熄灯由参数的发生故障时的运转状态决定。左侧为出厂时的设定。55
514输出错误信息用特殊寄存器检出异常时将错误代码错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。由于此寄存器是64段移动寄存器结构可以记忆64次异常。异常达到65次以上时将从最初保存的错误信息开始依次消失参照下述内容。在该寄存器存储的异常信息可由外围装置PCwin2等读取。另外可在信息显示器的错误监视器模式中确认错误信息。通过履历清除该寄存器将被清零。HL异常0异常1异常62异常63程序No异常代码相关信息2相关信息1相关信息4相关信息3相关信息6相关信息5相关信息8相关信息7时刻分时刻秒时刻日时刻时时刻年时刻月S1000S1000S1008S1001S1002S1003S1004S1005S11F0S1006S11F8S1007注1错误相关信息以16进制数保存。注2储存内置时钟的当前时刻。数据为BCD码2个字节表示1位数。年份数据显示为公历年的最后2位。这些寄存器里保存的信息在异常恢复后也不被清除。需要清零时请通过外围装置PCwin2等向寄存器写入0000。56
515错误代码001000110012001300140015001602100220230240029002A0310032003500360039003C003D004100420043错误相关信息S1000S11FF根据异常的内容可以有效查找异常原因及异常部位的信息作为错误相关信息被存储用16进制存储。程序计数器步号的相关信息分4段显示。在以往的S200S24F中为2级错误内容错误相关信息备注12345678CPU间USB断线CPU间USB刷新停止无内置Ethernet用MACID停电无电源模块应答机架编号CPU间USBVBUS异常USB存储器用5V电源异常程序存储器和数校验错误区域划分1顺序电池电压降低附属信息和数校验错误区域划分1参数未定义指令程序计数器低位程序计数器低位程序计数器高位程序计数器高位事件监控器错误2和数数据和数计算值蓄电池安装异常扫描超时分类1初始2主要3全体系统RAM异常1系统RAM系统管理处理器异常顺序处理字处理器异常系统中断异常分类07INTO7FFNMI输入输出端口异常CPU软件异常使用IO机架FIO模块参数异常机架编号插槽编号IO模块异常机架编号插槽编号保险丝断等57
错误代码错误内容错误相关信息备注123456780044IO地址总线奇偶校验错误机架编号0045IO支架号重复0046IO地址重叠机架编号1机架编号20047IO电源停电0048IO表对照异常机架编号插槽编号登记数据安装模块0049IO地址设定异常机架编号004BIO模块报警机架编号插槽编号0046IO地址重叠机架编号1机架编号2004CIO总线异常004DBUSEX连接异常Ver高位Ver低位004E增设机架异常支架号01004F基板用总线异常支架号071应用指令错误1程序计数器低位程序计数器低位程序计数器高位程序计数器高位串行号码低位串行号码高位072用户程序存储溢出073无END指令074无START指令075主控制错误分类MC号MCR号1嵌套溢出2号码不一致3无MCR4无MC076标签表错误分类1分类2标识号码低位标识号码高位11转移2调用3中断4START5扩展标签21无标签2不一致3号码外077参数设定值异常参数号码078应用指令错误2程序计数器低位程序计数器低位程序计数器高位程序计数器高位串行号码低位串行号码高位与特殊模块的IO异常079FORNEXT错误分类程序计数器低位程序计数器低位程序计数器高位程序计数器高位1无NEXT2无FOR3嵌套溢出4地址异常07ARET错误分类程序计数器低位程序计数器低位程序计数器高位程序计数器高位1无RET2无CALL58
错误代码07B错误相关信息1234567807C错误内容RETI错误程序库调用错误调不出程序库程序计程序计数器低数器低程序计程序计备注11无RETI2无中断2无RETI时中断级别11没有指定为程序库可用状态2程序库已在执行中3标签号码超过范围4无标签指令5标签号码不一致6无SYS4157非可用程序号码8不是可用的动作模式。2AFB程序库B用户程序库C标准程序库无END或RETRETI指令0084特殊模块异常085链接参数异常0086链路通信异常分类号链接编号链接编号号0088特殊模块数溢出0089链路模块分配异常机架编插槽编号号00A0程序溢出00A3RTC异常00A6系统程序异常分类分类分类00A9顺序RAM异常00AA系统参数报警分类00AB备用存储器写入错误1ROM2RAM分类1分类1分类2数器高数器高位2位位2位2读取部读取部程序计程序计数器低数器低读取部读取部程序计程序计数器高数器高程序库内线路故障07D执行PRGEND程序计程序计程序计程序计07F变址错误数器低数器低数器高数器高位位位位0082特殊模块参数异常机架编插槽编号号位位位位机架编插槽编1ALM2CPU检测3IO模块检测标识号标识号码低位码高位00AD数据异常00AE未确认数据异常00AF时钟未设定59无链路参数设定1IF2备用1ROM2RAM
516CPU的异常处理本章在使用TOYOPUCNano的设备不正常工作时帮助用户找出其原因迅速进行处理。在阅读本章之前请熟读本使用说明书的其他各项及程序设计手册掌握TOYOPUCNano的功能以及编程的方法。异常原因的种类被控制系统异常动作一般是指停止的主要原因可以大致分为以下几个部位。1输入输出设备限位开关螺线管阀等的故障。2控制线路程序不良。3TOYOPUC的故障a输入输出模块的故障。bCPU模块的故障。本章对2及3进行说明。故障查找1首先需要确认的事项。a同时发生多项异常根据存放错误信息的寄存器数据确认发生故障时间时有时会在同一时间发生几项异常。这时要从最先发生的异常开始进行故障检查。b确认错误相关情报。利用外围装置确认错误相关情报错误发生时间以作为故障查找的参考信息。2故障查找的方法请参考517异常显示与推测原因或者518异常检查流程图分析原因。根据这些原因进行故障检查仍不能恢复时请确认有无CPU模块IO模块的安装不当及IO电缆的连接不当。如果仍然不能恢复请更换CPU模块选择器模块电源模块IO模块IO电缆底板。510错误履历的新旧错误0新错误63旧
CPU模块的更换顺序如果故障检查的结果需要更换CPU模块请按照以下顺序进行更换作业。1从TOYOPUCNano模块留下程序参数寄存器根据需要还有其他数据的备份。2切断电源。3卸下TOYOPUCNano模块的线路取出TOYOPUCNano模块。4准备新的TOYOPUCNano模块连接蓄电池1设定开关。5安装新的TOYOPUCNano模块将线路复原。6打开电源。7将在1留下的程序参数寄存器根据需要还有其他数据的备份写入新的TOYOPUCNano模块。8设定时刻。1仅使用电池时。511
517异常显示与推测原因错误代码名称内容主要推测原因排除方法10CPU间USB断线CPU间USB的断线异常1输入了严重的外部噪音。2CPU模块的故障。1重新接入电源2更换CPU模块11CPU间USB刷新停止CPU间USB刷新的停止异常1输入了严重的外部噪音。2CPU模块的故障。1重新接入电源2更换CPU模块12无内置Ethernet用MACID内置Ethernet用MACID未写入1内置Ethernet用MACID未写入1更换为已写入内置Ethernet用MACID的CPU模块13停电CPU处的5V电源电压降低。1AC输入电压超出额定范围。2电源模块的故障。3AC电源瞬间停电。1将输入电压设为额定值。2更换电源模块。3复位启动或重新加电。14无电源模块应答无法从电源模块接收数据1输入了严重的外部噪音。2PWR模块的故障3CPU模块的故障1重新接入电源2更换PWR模块3更换CPU模块15CPU间USBVBUS异常CPU间USBVBUS中未进行5V输入1输入了严重的外部噪音。2CPU模块的故障。1重新接入电源2更换CPU模块16USB存储器用5V电源异常USB存储器用5V电源电压下降。1输入了严重的外部噪音。2CPU模块的故障。1重新接入电源2更换CPU模块21程序存储器和数校验错误程序区的数据与和数校验数据不一致。1由于严重的外部噪音等影响程序存储器被改写。2存储器元件的故障。1重新写入程序。2更换CPU模块22电池电压降低存储器备用锂电池的电压降低。1锂电池过期。2锂电池未连接。1更换锂电池。2连接锂电池。23附属信息和数校验错误参数区的数据与和数校验数据不一致。1由于严重的外部噪音等影响程序存储器被改写。2存储器元件的故障。1重新写入参数。2更换CPU模块51
错误代码名称内容主要推测原因排除方法24未定义指令顺序程序执行过程中发现未定义指令。1程序员在写入程序过程中连接电缆脱落处理中断。2通过计算机链路写入程序时出现未定义指令。3由于严重的外部噪音等影响程序存储器被改写。4存储器元件的故障。1重新写入程序。2修改程序后重新写入。3重新写入程序。4更换CPU模块29事件监控器错误事件监控器数据异常1对未写入事件监控器数据的CPU使用了事件监控器启动命令SYS4002使用了设定数据不正确的事件监控器。1请删除程序中的事件监控器启动命令SYS400在CPU中写入程序。或者正确设定事件监控器设定数据将事件监控器数据写入CPU。2请正确设定事件监控器设定数据将事件监控器数据写入CPU。2A蓄电池安装异常参数设定内容与蓄电池实际安装不一致1参数设定内容不同2蓄电池未安装1重新设定参数2确认蓄电池有无安装31扫描超时顺序程序的执行时间超过参数设定的扫描时间定时器值。1参数的扫描时间定时器值不适当。2顺序程序的处理时间过长。3顺序程序中有无限循环结构。1将扫描时间定时器的值设为适当的值。2修改顺序程序。3修改顺序程序。32系统RAM异常写入系统RAM的数据不能正确读取。1由于严重的外部噪音等影响系统RAM被改写。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块35系统管理处理器异常系统管理处理器的处理时间超长。1由于严重的外部噪音等影响系统管理处理器失控。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块36字处理器异常应用指令运算用的字处理器的处理时间超长。1由于严重的外部噪音等影响字处理处理程序发生动作错误。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块39系统中断异常对系统管理处理器输入了原因不明的中断要求。1输入了严重的外部噪音。2CPU模块安装不当。1复位启动或重新加电。2切实安装CPU模块。3C输入输出端口异常系统管理处理器的输入输出端口数据不正确1CPU模块的故障1更换CPU模块3DCPU软件异常CPU软件已中止。1输入了严重的外部噪音。2CPU模块的故障。1重新接入电源2更换CPU模块51
错误代码名称内容主要推测原因排除方法42IO模块参数异常IO模块内的占有点数参数为异常值。1IO模块安装不当。2IO模块故障。3主板模块故障。1切实安装IO模块。2更换IO模块。3更换主板模块。43IO模块异常占有输出模块或者IO地址的高功能单位高速计数器等发生异常。1发生输出模块保险丝断裂。2高功能模块发生异常。1更换保险丝。2请参照各模块的使用说明书排除异常。44IO地址总线奇偶校验错误在选择模块发现地址总线的奇偶校验错误。1IO电缆连接不当。2IO电缆断线。3由于严重的外部噪音影响地址数据发生变化。1切实连接IO电缆。2更换IO电缆。3复位启动或重新加电。45IO支架号重复IO电源模块上的机架编号选择开关的设定为0或8以上或与其他机架重复。1设定错误。1不要重复设定支架号选择开关。46IO地址重叠1个IO支架占用的地址区域与其他IO支架占用的地址区域之间有重叠。1选择模块上的IO地址选择开关的设定错误。1正确设定IO地址选择开关。47IO电源停电增设IO支架侧的5V电源电压下降。1电源模块的AC输入电压超过额定范围。2设置在主板上的IO模块消耗电流过大。3增设IO支架部的电源模块故障。4尽管接通了CPU支架部的电源增设IO支架部的电源仍然没有接通。5只有增设IO支架侧发现AC输入的瞬间停电。6增设IO支架侧没有安装电源模块也没有进行5V线路布线。1将输入电压设定为额定输入电压。2将设置在主板上的IO模块的总体消耗电源设定在额定输出电流以内。3更换电源模块。4将CPU电源部分与IO电源部分设为同一系统。5复位启动或重新加电。6在增设IO支架侧安装电源模块或者进行5V线路布线。48IO表对照异常作为参数设定的IO模块安装状态与实际安装状态不一致。1参数的设定错误。2CPU选择器或者IO模块安装不当。3安装了错误的IO模块。4选择器模块的支架号设定错误。5IO电缆安装不当。1正确设定参数。2切实安装模块。3安装正确IO模块。4正确设定支架号。5切实安装IO电缆。4A49IO地址设定异常IO地址的设定超过规定值1IO地址的分配超过1FF。2选择模块上的IO地址选择开关的故障。1变更IO地址分配。2更换选择器模块。51
错误代码名称内容主要推测原因排除方法4BIO模块报警占有输出模块或者IO地址的高功能单位高速计数器等发生异常。1发生输出模块保险丝断裂。2高功能模块发生异常。1更换保险丝。2请参照各模块的使用说明书排除异常。4CIO总线异常IO总线的设定连接顺序断线异常1IO模块与实际安装的模块不一致2IO总线的电缆连接顺序不同3电缆断线1确认IO模块与实际安装的模块是否一致。2确认电缆的连接顺序3更换电缆。4DBUSEX连接异常BUSEX的连接异常1BUSEX不是Nano对应品1将BUSEX更换为Nano对应品。4E增设机架异常增设机架的电缆异常增设机架内存在硬件异常的模块。1电缆连接不当2增设机架内存在硬件异常的模块。1确认电缆的连接情况。2解除增设机架内模块的硬件异常。4F基板用总线异常基板用CAN总线的异常1输入了严重的外部噪音。2主板模块故障。3CPU模块的故障1重新接入电源2更换主板模块。3更换CPU模块71应用指令错误1应用指令的运算域值或运算结果超出规定范围。1应用指令的运算域值或运算结果超出规定范围。2运算数据的形式不同。BCDBIN1修改顺序程序。2修改顺序程序或者数据。72用户程序存储溢出顺序程序用的存储区域不够。子程序中断用存储1子程序内调用自己本身。1修改顺序程序。73无END指令在2次执行START指令之间没有执行END指令。1顺序程序中没有END指令。2顺序程序中有2个以上START指令。3程序结构为跳过END指令。1追加END指令。2将START指令改为1个。3修改顺序程序。74无START指令没有执行START指令便执行了END指令。1顺序程序中没有START指令。2程序结构为跳过START指令。1追加START指令。2修改顺序程序。75主控制错误MC指令或者MCR指令的使用方法有误。1主控制的嵌套超过16层。2MC指令或MCR指令不成对。1将嵌套设为16层以内。2成对使用MC指令和MCR指令。76标签表错误指定的去处无LABEL指令。1有JMP指令没有所去之处的LABEL指令。2有CALL指令没有所去之处的LABEL指令。1修改顺序程序。2修改顺序程序。77参数设定值异常参数的设定值超出规定范围。1因外部噪音太大等的影响参数存储器被改写。2用计算机链路写入参数时写入了规定范围外的数据。1重新写入参数。2重新写入参数。51
错误代码名称内容主要推测原因排除方法78应用指令错误2对特殊IO模块的应用指令不能正常执行。1对没有安装该特殊IO模块的插槽执行了应用指令。2特殊IO模块异常。1安装特殊IO模块。2更换特殊IO模块。79FORNEXT错误FORNEXT指令或FORNEXT指令的使用方法有误。1有FOR指令或FORN指令没有NEXT指令。2有NEXT指令没有FOR指令或FORN指令。3FORNEXT指令或FORNNEXT指令的嵌套超过128层。1FOR指令或FORN指令与NEXT指令成对使用。2FOR指令或FORN指令与NEXT指令成对使用。3将嵌套设为128层以内。7ARET错误CALL指令或RET指令的使用方法有误。1有CALL指令没有对应的RET指令。2有RET指令没有对应的CALL指令。1成对使用CALL指令和RET指令。2成对使用CALL指令和RET指令。7BRETI错误顺序中断程序的结构有误。1顺序中断程序的最后没有RETI指令。2顺序中断程序以外的部分使用了RETI指令。1追加END指令。2追加RET或RETI指令。7C程序库调用错误FB程序库的使用方法有误。FB程序库有误。1没有指定为程序库可用状态2程序库已经在执行从程序库中调用了程序3标签号码超过范围4无标签指令5标签号码不一致6无SYS4157不是可用程序号码8不是可用的动作模式。1FB程序库的顺序线路出错。修改顺序程序。7D执行PRGEND执行了PEND指令。1顺序程序中没有END指令。2子例程中无RET或RETI指令。1追加END指令。2追加RET或RETI指令。7F变址错误变址寄存器无法正常运行。1没有设定变址寄存器却运行了变址相关的应用指令或者使用了变址寄存器。2区域外偏移中使用了多个标识符或者标识符相同使用了不连续的地址。3定时器指令中使用了变址寄存器。1请修改顺序程序。82特殊模块参数异常特殊模块内的存储器容量参数为异常值。1特殊模块安装不当。2特殊模块故障。3主板的故障。1切实安装特殊模块。2更换特殊模块。3更换主板。51
错误代码名称内容主要推测原因排除方法84特殊模块异常特殊模块发生异常。1特殊模块发生异常。2CPU或选择器模块或特殊模块安装不当。3有机架No开关的特殊模块的开关设定不恰当1参照特殊模块的使用说明书排除异常。2正确安装。3修改机架No开关避免重复。85链接参数异常链路参数异常1链路参数的设定有误。1修改链路参数。86链路通信异常链路模块的通信发生异常。1链路模块的通信发生异常。1参照各链路模块的使用说明书排除异常。88特殊模块数溢出特殊模块数超过8个。1特殊模块的使用个数超过8个。1减少特殊模块的使用个数。89链路模块分配异常链路模块分配参数链路参数中最开始的4字节出现异常。1链路模块分配参数出现异常。1修改链路模块分配参数。A0程序溢出系统内存不足1系统内存不足2CPU模块的故障。1请将顺序程序写入CPU。然后复位启动或再次接通电源。2更换CPU模块A3RTC异常RTC发生了异常。1由于严重的外部噪音影响引起错误动作。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块A6系统程序异常系统程序发生异常。1由于严重的外部噪音影响系统程序被破坏。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块A9顺序RAM异常顺序RAM发生异常。1由于严重的外部噪音影响顺序RAM的数据被破坏。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块AA系统参数报警实施了参数复原。1由于严重的外部噪音影响引起错误动作。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块AB备用存储器写入错误备用存储器发生了写入错误。1由于严重的外部噪音影响引起错误动作。2CPU模块的故障。1复位启动或重新加电。2更换CPU模块AD数据异常实施了顺序程序数据存储器的复原。1由于严重的外部噪音影响数据消失。1确认恢复数据后复位启动或重新加电。AE未确认数据异常发生数据异常时未确认异常。1未进行确认操作。1通过外围设备确认数据。2打开程序1用的特殊继电器V5E。AF时钟未设定内部配备时钟未设定。1未进行设定操作。2后备用电容器发生了放电。3蓄电池放电。1通过外围设备设定内部时钟。51
518异常检查流程图检查开始电源灯亮NYY错码13N复位启动Y恢复NRUN灯亮N有错误显示YAYD输入电源电压检查NYN结束NY程序中有STOP指令NYY额定输入电压输入电压请在额定范围内检查检查主板上各模块的耗电情况额定输出电压YN恢复N靠外围装置进行STOP操作N靠链路进行STOP操作N更换电源模块检查更换CPU模块设置在主板上的CPU以下的全部模块耗电应在额定输出电流以下恢复Y结束Y结束解除STOP后再启动或者再接通电源查找使用STOP指令的原由修改程序更换CPU模块更换主板518
YNA有报警显示BSTARTEND指令的程序位置是否合适YN修改STARTEND指令的程序位置IO地址分配是否正确检查参数及选择模块SL的标题地址开关N参数OK修改参数Y标题地址开关OKYN修正开关设定判断循环线图电气回路图出现异常输出是在ON处还是在OFF处异常输出灯和周边监视器结果一致Y异常输出灯和上述判断一致N是否满足条件NFNYN更换输出模块N输出灯ONY用监视器查看是否满足电气回路图的输入条件Y输出端子和COM短路时外部设备ONYY更换输出模块输出端子的进线脱落时外部机器ONNE外部机器不良519外部机器不良
EF检查是否是电气回路图的程序程序OKY更换输出模块恢复N影响NNYY恢复修改程序一致N更换输入模块恢复N更换选择模块SLYN更换IO电缆YN更换主板比较未满足条件的输入灯和外围监视器结果外部机器不良YY结束结束检查是否有双倍输出检查结束修改程序布线故障1IO电缆接触不好或断开接好IO电缆更换IO电缆2主板不良更换主板3CPU模块不良更换CPU模块恢复结束结束YN恢复520更换CPU模块
B确认存储错误信息用的特殊寄存器的错码Y错码22Y错码ADN错码AAYNN错码31N2231487178858689YA3ADAAYAEYAFY错码48YN错码AEN错码AFN更换CPU模块Y错码71NY错码78NY错码85NY错码86NY错码89N错码A3N521
DG错码21N错码23N错码24N错码31NY错码43Y43444546YY212324Y31NYNYY错码44YN错码45YN错码46Y错码47NN错码32错码35323539474849YYY72YN错码48N错码39NY错码49YNYNN错码3C错码4B错码71N错码72NH错码41YN3C41424B71YN错码42G522
HIYY7475Y76Y77YY错码7FYN7F错码73N错码74N错码75N错码76N错码77N错码78N错码79N错码7AN7ANAB73错码82YN82YY84Y88YA0YA678错码84N错码88N错码A0N错码A6N79错码A9YNA9YY错码AB错码7BN错码7DNIY7BY7D错码ADN更换CPU模块。N恢复Y结束YAD5231择器模块SL不良2主板不良3IO电缆不良更换各部分
21程序存储器24奇偶错误未定义指令N使用了没有后援的应用指令Y23参数是否改写Y复位启动从外围装置读取程序N复位启动N附属信息和数校验错误复位启动YN更换CPU模块程序是否改写1YN恢复YN结束恢复Y结束复位启动YN更换CPU模块恢复结束恢复结束从外围装置读取参数从外围装置正确写入的程序从外围装置正确写入的程序1依据相关错误信息知道发生异常的地址。524
RTC异常系统程序异常顺序RAM异常备用存储器写入错误A332A635A936AB39系统RAM异常系统管理处理器异常字处理器异常系统中断异常输入输出端口异常22是否已接好锂电池N接好锂电池YN更换锂电池Y结束3CY该错误是否屡次发生N复位启动YY恢复N结束恢复结束N切实安装好是否安装好CPU选择器模块SLIO模块IO电缆Y更换CPU模块Y恢复N更换CPU模块恢复N结束1择器模块SL不良2主板不良3IO电缆不良4IO模块不良5通信模块不良6电源模块不良错误代码3532时再次接通电源525
46IO地址重叠检查各支架占用的NY各支架的占用地址有重复修改地址设定不要使地址重复恢复N1Y结束结束Y结束结束更换CPU模块Y恢复N更换选择模块SL恢复N更换IO电缆Y恢复N更换主板1从错误相关信息得知支架号526
45IO支架号重复NY支架号重复修改设定使之不重复YN结束结束结束结束恢复更换CPU模块YN恢复更换选择模块SLYN恢复更换IO电缆YN更换主板恢复527
47IO电源停电Y注増設多个IO支架时检查选择模块SL的电源LED灯灭的支架增设IO支架电源模块N5V0V布线是否okN正确进行5V0V布线YNNY更换选择模块SLY更换CPU模块Y更换IO电缆Y恢复N更换主板YCPU支架的电源要比增设IO支架的电源先接通N额定输入电压Y额定输出电流Y恢复N复位启动恢复YN检查増設IO支架側电源模块的输入电源电压检查将CPU机架電源和増設的IO机架電源做成同一系统结束恢复N额定输入电压Y额定输出电流YN结束输入电压请在额定范围内检查电源模块的输入电源电压检查增设IO支架的IO模块的消耗电流检查CPU支架及增设IO支架的IO模块的耗电电流更换増設IO支架側的电源模块将设置在增设IO支架侧主板上的IO模块的耗电电流限制在输出电流以下输入电压请在额定范围内YN结束结束结束结束恢复N摘掉5V0V布线在增设IO支架上追加电源模块恢复N528
48IO表对照异常依据错误相关信息可得知异常的支架号时隙号Y正确设定支架NoY安装正确的模块从外围装置读出IO模块种类的参数电源电压检查参数与实际安装状态不同NCPU模块是否切实安装YYN正确安装CPU模块N选择模块的支架No设定与参数不一样N安装了错误的模块N修改参数切实安装IO电缆切实安装IO模块结束结束结束结束选择模块SL是否切实安装正确安装YIO电缆是否切实安装YNYIO模块的安装不完整N依据错误信息更换异常的模块Y更换CPU模块YY更换IO电缆Y恢复N恢复N更换选择模块SL恢复N恢复N更换主板529
434BIO模块异常42IO模块报警IO模块参数异常YY除去异物结束Y结束结束参考该模块使用说明书检查是否有异常依据错误相关信息确认哪个模块异常IO模块的安装不完整N依据错误相关信息或IO模块的ALM灯确认哪个模块异常IO模块与主板连接的接线盒内有异物N更换IO模块模块恢复NYY结束有异常N异常模块是输出模块YY保险丝断开N异常模块是输入YN更换保险丝N更换该模块更换CPU模块恢复恢复更换主板YNNN更换CPU模块Y恢复N更换主板恢复N更换IO电缆Y恢复切实安装IO模块参考该模块使用说明书检查是否有异常结束Y更换IO电缆结束530
44IO地址奇偶校验错31扫描超时Y该错误是否屡次发生N复位启动Y恢复N结束NY修改扫描时间超时值扫描时间不够YNYN结束YY与该支架之间的IO电缆连接是否正确恢复切实连接IO电缆Y更换与该机架连接的IO电缆用外围装置读取程序恢复N程序为循环的NY更换该机架的选择模块SL结束结束结束结束同一个扫描内执行多个应用命令N更换CPU模块恢复N修改程序恢复N更换该支架的主板YY恢复N更换CPU模块531外围装置读取扫描时间超时值参数依据错误相关信息或选择模块SLERR灯确认哪个支架异常
71应用指令错误1YPC10模式N错误相关信息S1000S11FF检测出异常的步号用16进制表示1步号低位2步号低位3步号高位4步号高位5序列号低位6序列号低位7序列号高位8序列号高位错误相关信息S200S24F检测出异常的步号用16进制表示1步号低位2步号高位3序列号低位4序列号高位将错误相关信息的数据转换为10进制数432110进制步号为10进制将错误相关信息的数据转换为10进制数2步号高位1步号低位16进制10进制步号为10进制显示外围装置步号指定回路1回路显示中显示的应用指令的操作値数据范围数据数等超出规定范围2运算数据形式不同BCDBIN等参考编程手册中記載的应用指令禁止事项修改回路532
72用户程序存储溢出外围装置读取顺序程序AD数据异常AE未确认数据异常NYN确认恢复数据YN修改数据将V5E做成ON。复位启动结束使用子例程OK子例程内自己可调用Y修改程序Y结束恢复N更换CPU模块AF时钟未设定在外围装置设定时钟结束533
73无END指令外围装置读取顺序程序74无START指令外围装置读取顺序程序NNYY追加END指令追加START指令YY恢复恢复N结束N结束有2个以上N将START指令START指令做成转移程序构造YY修改程序YY恢复恢复N结束N结束更换CPU模块无END指令无START指令N做成1个START指令NY将END指令做成转移程序构造修改程序Y结束恢复N更换CPU模块534
75主控制错误外围装置读取顺序程序N78应用指令错误2依据相关错误信息得知异常的应用指令NY没有与应用命令对应的特殊模块主控制嵌套超过16层1安装该特殊模块Y嵌套做成16层以内恢复N恢复Y结束YN结束N应用命令的运算域数据错误YNYMC指令与MCR指令不成对1更换該特殊模块修改程序使MC指令与MCR指令成对修改应用指令的运算域和数据更换CPU模块YYY恢复N更换CPU模块结束结束结束恢复N更换IO电缆恢复N更换主板535
79FORNEXT错误外围装置读取顺序程序N7ARET错误外围装置读取顺序程序NYYNFOR指令或FORN指令与CALL指令与RET指令不成对NEXT指令不成对1Y结束FORNEXT或FORNNEXT的嵌套超过128层1将嵌套做成128层以内Y1Y结束修改程序使FOR指令或FORN指令与NEXT指令成对恢复N恢复N更换CPU模块1参考错误相关信息Y恢复N更换CPU模块结束536修改程序使CALL指令与RET指令成对
RETI错误外围装置读取顺序程序NN7B中断程序的最后是不是RETI指令1追加RETI指令Y恢复NY结束中断程序的最后以外的地方是RETI指令1Y删除RETI指令Y恢复N更换CPU模块1参考错误相关信息结束537
7DPRGEND执行外围装置读取顺序程序NN无END指令YY追加END指令76标签表错误外围装置读取顺序程序结束1Y结束Y没有对应JMP指令的LABEL指令1Y恢复YN将END指令做成转移程序构造Y修改程序Y结束恢复N结束NN没有对应CALL指令的LABEL指令恢复NY恢复NN子例程中无RET指令Y追加RET指令重新写入程序和参数恢复YN结束恢复N结束更换CPU模块更换CPU模块1参考错误相关信息538修改成JMP指令和LABEL指令对应的程序修改成CALL指令和LABEL指令对应的程序
N参数值在规定范围外Y修改参数值进行写入恢复N更换CPU模块49IO地址设定异常IO地址分配超过了1FFYN更换选择模块SLYY77参数设定异常外围装置读取顺序程序结束恢复N结束结束Y结束更换CPU模块Y恢复N顺序更换IO电缆恢复N更换主板539根据错误相关信息确认哪个模块异常设定IO地址的分配不要超过1FF
88特殊模块数溢出检查特殊模块的使用数量N特殊模块的使用数量超过24块Y恢复N更换CPU模块Y结束Y结束减少特殊模块的使用数量Y结束恢复N更换选择模块SL恢复N更换主板540
82特殊模块参数异常84特殊模块异常2根据错误相关信息确认哪个模块异常依据错误相关信息或特殊模块的异常显示确认哪个模块异常N特殊模块的安装不完整Y切实安装特殊模块参考该模块使用说明书检查是否有异常YN有异常YN参照该模块使用说明书排除异常有异常恢复NY结束检查CPU模块选择模块SLIO模块特殊模块IO电缆的安装状态N切实安装好Y与特殊模块的主板连接时连接部位中进入了异物Y除去异物更换CPU模块恢复恢复YN结束N更换特殊模块恢复Y结束结束N按顺序更换选择模块SL恢复N更换主板YY结束结束恢复N顺序更换IO电缆541
85链接参数异常修改该模块的链路参数89链路模块分配异常修改该模块的链路参数依据相关错误信息确认哪个通信模块异常依据相关错误信息确认哪个通信模块异常86链路通信异常AA系统参数报警依据相关错误信息确认哪个通信模块异常参考该通信模块的使用说明书排除异常Y该错误是否屡次发生N复位启动Y恢复N更换CPU模块结束542
29事件监控器错误7CY错码71程序库调用错误Y使用了事件监控器功能N确认在错误7C前有无发生应用指令错误71或78。如有发生则为程序库内线路错误。删除程序中的事件监控器启动命令SYS400在CPU中写入程序。或者正确设定事件监控器设定数据将事件监控器数据写入CPU。N错码78N71Y78正确设定事件监控器设定数据将事件监控器数据写入CPU。依据错误相关信息确认是以下哪个类型。同时请确认程序库的种类FB程序库用户程序库标准程序库1没有指定为程序库可用状态2程序库已经在执行从程序库中调用了程序3标签号码超过范围4无标签指令5标签号码不一致6无SYS4157不是可用程序号码8不是可用的动作模式。针对对象程序库修改顺序程序排除18各项内容。此外可能使用了不恰当的程序库。请确认写入的程序库写入正确的程序库。543
7F变址错误YPC10模式N错误相关信息S1000S11FF检测出异常的步号用16进制表示1步号低位2步号低位3步号高位4步号高位5序列号低位6序列号低位7序列号高位8序列号高位错误相关信息S200S24F检测出异常的步号用16进制表示1步号低位2步号高位3序列号低位4序列号高位将错误相关信息的数据转换为10进制数432110进制步号为10进制将错误相关信息的数据转换为10进制数2步号高位1步号低位16进制10进制步号为10进制显示外围装置步号指定回路A0程序溢出Y结束1没有设定变址寄存器却运行了变址相关的应用指令或者使用了变址寄存器。2区域外偏移中使用了多个标识符或者标识符相同使用了不连续的地址。3定时器指令中使用了变址寄存器。本手册的变址寄存器中记载了使用方法参考并修改回路恢复N更换CPU模块544请将顺序程序写入CPU。然后复位启动或再次接通电源。
519IO模块的故障分析以下说明输入线路输出线路的故障内容及其处置方法。1异常内容的探明方法输出模块的输出负荷未ON时LS1X000X001例LS2Y020输出负荷未ON输出模块的动作显示LED是否亮灯YY020NNNON器是否ON输出状态监视Y保险丝是否折断N输出模块的外部供给电源是否连接Y是否加上了负荷用电源的电压YOFF输入模块动作N显示LED是否亮灯Y更换输出模块的保险丝0V与COM端子之间的更换保险丝后又熔断输入模块的输入电压多少V输入模块不良NYNYIO地址的分配参数是否正确是否在输出模块的规格范围内变更输出继电器的号码让负荷同时打开最大电流进入规格以内连接外部供给电源确认输入信号的OFF确认负荷同时打开最大时的冲电流检查负荷用电源的布线使电源复位修改参数检查负荷的布线及负荷复位0V电源的电压是否加上了负荷用负荷用供给电源电压值输出模块不良请联系本公司检查负荷的布线及负荷复位检查外部布线及外部输入机器复位注1当输出模块的保险丝熔断时CPU所输出的故障代码为43。注2运行状态LED是光电耦合器是靠绝缘后的内部线路亮灯所以即使加了外部输入端子电压如果不提供DC5V的电源电压也不能亮灯。INCOM动作显示LED输入线路光电耦合器绝缘输出线路DC5V545
2输入线路的故障及其对策现象原因对策例1输入信号未OFF。在输入模块的端子之间放入分泄电阻让外部机器的漏泄电流分流减少对输入模块的输入电流。AC输入模块采用小的输入电流输入模块OFF电流或者漏泄电流。分泄电阻例2输入信号未OFF。与动力线平行布线其结果是过大的噪音连续进入输入模块内的噪音排除线路也无法排除。与动力线分离。2线式传感器非接触式开关光电开关有LED的限位开关的漏泄电流漏泄电流DC输入模块546
前页有记号的分泄电阻的决定方式输入机器INCOMINCOM设输入机器OFF时的电流为I此时端子和公用之间的电压V为VI34k输入电阻这个V如果不能满足OFF电压72V以下便不能OFF。因此要连接分泄电阻降低输入阻抗。I机器的漏泄电流mAR分泄电阻值kW分泄电阻的W数W电流I分泄电阻的值只要端子与公用之间电压V为72V以下即可所以根据34RkI72V34R245Rk34I72电阻的W数为根据24V2W2余地WWRk115R例如漏泄电流为5mA时根据245R34I72R25kR24k。分泄电阻的W数根据115WWRW048W1WW2547
3输出线路的故障及其对策现象原因对策例1输出晶体管被破坏白炽灯泡的突入电流OUTCOML开灯的瞬间有时会流入10倍以上的突入电流。为了控制突入电流送白炽灯泡额定电流的1315左右的暗电流。OUTCOM输出模块COML暗电流例2连接了诱导性负荷时输出模块的保险丝熔断。因为连接在同一保险丝上的负荷同时起动时这个起动电流的合计大幅超过保险丝额定值。同时起动的负荷的起动电流合计不要超过保险丝额定值。例3输出晶体管被破坏在检查输出信号线布线时其他电源强行对负荷增加了电压其他电E2E负荷不要采用下述检查方法。即使关闭了E1的输入电压如左图所示仍有电流流动的电源。548
52计算机链路的异常报警在内置式计算机链路不能对于高位计算机发送的指令正常返回响应情况下内置式计算机链路以无应答或者异常应答的形式处理。1无应答在以下情况下内置式计算机链路不进行响应。不能在接收数据内检测开始代码。不能在接收数据内检测指令代码。不能在接收数据内检测结束代码CR。局号码与本局不同。不能正确检测响应时间RI。2异常应答在检测出了附表1错误代码表中所示的内容异常时对高位计算机发送以下格式的响应。16进制2位错误代码ADHADLRIECHECLSCHSCLCR521无应答时No推定原因处置1通信速率的设定错误根据高位计算机的通信速率设定内置式计算机链路的通信速率。2高位计算机的通信数据格式不同。正确核对高位计算机的通信数据形式。3内置式计算机链路的局号设定与高位计算机的局号指定不同。使内置式计算机链路的局号设定一致或修改高位计算机指令内的局号指示。4通信电缆的连接错误及断线。检查通信电缆的极性以及有无断线。5高位计算机的指令数据的开始代码中没有。在指令前面加上。6高位计算机的指令数据中没有结束代码CR。在指令最后加上CR。7未进行高位计算机通信线路的收发转换。在高位计算机发出指令后切换到接收状态。549
522异常应答时1错误代码012错误代码033错误代码054错误代码0A5错误代码0D6错误代码0E7错误代码138错误代码20No推定原因处置1高位计算机的指令数据内的格式不正确。修改指令的格式。No推定原因处置1高位计算机的指令数据内的地址指定不正确。修改指令内的地址指定。No推定原因处置1高位计算机的指令数据内的数据传送数超过了0或256字节。修改指令内的传输字节数。No推定原因处置1通信数据因噪音等遭到破坏。确认通信电缆是否确实连接以及通信电缆是否和强电线过于接近。No推定原因处置1高位计算机创建的和数校验数据有误。修改和数校验数据。2通信数据因噪音等遭到破坏。确认通信电缆是否确实连接以及通信电缆是否和强电线过于接近。No推定原因处置1没有利用EWR指令执行写入许可设定或重新开始许可设定便进行写入或允许扫描重新开始。先利用EWR指令设定写入许可或扫描重新开始许可后再进行写入或重新开始扫描。No推定原因处置1与TOYOPUCCPU的接口异常检查内置式计算机链路与CPU之间是否切实连接。2内置式计算机链路异常执行复位启动。执行后如果内置式计算机链路表面的LED灯仍然同样显示时更换内置式计算机链路。3链接参数异常确认链路参数的设定。No推定原因处置1高位计算机的指令数据的通信指令异常。检查通信指令。550
9错误代码21No推定原因处置1正在进行CPU复位输入处理重新发送指令。10错误代码2211错误代码3112错误代码3213错误代码3414错误代码3515错误代码3616错误代码3817错误代码39No推定原因处置1没用RDA指令进行地址的设定就执行了RDM指令。在RDM指令进行读出之前用RDA指令设定地址。No推定原因处置1顺序程序执行中想要写入程序。在通过HLT指令PSC指令等停止了顺序程序执行后进行程序写入。No推定原因处置1没有通过RUN指令进行停止释放扫描。通过RUN指令进行扫描停止释放后执行STA指令。2正在由程序等的外围装置输出扫描停止指令停止。在释放外围装置发出的扫描停止指令停止后执行STA指令。No推定原因处置1禁止了顺序程序以及附属信息的读出写入。允许在外围装置等进行顺序程序以及附帯信息的读出写入。No推定原因处置1没有执行权。用限定执行权的装置解除限定设定。No推定原因处置1设有执行权的限定。用限定执行权的装置解除限定设定。No推定原因处置1E2PROM有写入互锁解除E2PROM的写入互锁。No推定原因处置1IO分配参数发生变更。将CPU复位启动。551
18错误代码3CNo推定原因处置1CPU的硬件异常检查CPU侧的动作。19错误代码3D20错误代码3F523其他情况1从内置式计算机链路到高位计算机的响应格式不正确。2直接接收了高位计算机作为指令发出的数据。3高位计算机侧发生了和数校验错误。No推定原因处置1由外围装置或者其他的链路同时写入了顺序程序及付帯信息。重新写入。No推定原因处置1顺序程序中没有用定时器计数器等指定的设备地址。确认设备地址。No推定原因处置1在某局发送响应中他局也发出了响应。重新评估到高位计算机各局的指令发送定时。2内置式计算机链路发出响应后高位计算机可以接收信息。根据高位计算机的处理速率设定响应时间。No推定原因处置1不进行高位计算机通信线路的收发转换。在高位计算机侧进行线路控制。No推定原因处置1通信数据因噪音等遭到破坏确认通信电缆是否切实连接以及通信电缆是否和强电线过于接近。552
53PC链路异常警报如果在PC链路检测出异常就对CPU通知异常。在CPU显示异常信息的同时设定特殊继电器CPU异常信息输出用寄存器以及链路异常信息用特殊寄存器。531异常显示1链路相关特殊继电器地址内容VA1VA5VA9VADVB1VB5VB9VBD链路1参数异常链路2参数异常链路3参数异常链路4参数异常链路5参数异常链路6参数异常链路7参数异常链路8参数异常VA2VA6VAAVAEVB2VB6VBAVBE链路1通信异常链路2通信异常链路3通信异常链路4通信异常链路5通信异常链路6通信异常链路7通信异常链路8通信异常VC4特殊模块异常通信模块故障VC8IO构成异常安装25个以上通信模块VF2特殊模块分配异常链路参数的支架No时隙No链路模块名称与安装状态不同。553
2链路错误代码链路错误代码存储在CPU的特殊寄存器。CPU链路存储错误信息的CPU错码特殊寄存器的地址S30S31S30S3185S3001S31左记地址的内容错误内容处置异常等级1001链路参数异常设定未进行BCD。主子检查并修改链路参数的内容。检查设定。警报00821001链路参数异常主子的设定不是01。主子00831001链路参数异常传输字节数的合计大于65字节。主子00851001链路参数异常超出了通信区域的最后地址。主子00861001链路参数异常链路区域和实际IO重叠。00871001平均每1局的发送点数超过48字节。0088子局地址6270100和子局的局的连接顺序错误子局发来的接收数据有垂直奇偶。主检查子局局是否连接以及电源接通顺序。检查设定。检查通信线的布线警报00D0子局地址6270100和子局的局的连接顺序错误子局发出否定响应。主00D1子局地址6270100和子局的局的连接顺序错误接收到意外的地址数据。主00D2期待的地址数据接收数据100和子局的局的连接顺序错误子局局没有响应主00D3子局地址6270100和子局的局的连接顺序错误子局发来的接收数据有水平奇偶。主00D6子局地址6270100和子局的局的连接顺序错误子局没有发送水平奇偶数据。主00D8子局地址627085018501S3001S31S3001S31S3085S3101S32S3086S310S32LS3086S3108608585S30S31LS32HS3086S310S32LS3086S310S32S30链路No代码表。S310S3286表中的表示进入了发生错误的PC链路的链路No的代码。链路号码12345678链路No代码13579BDF注意1标记表示子局的局号。554
左记地址的内容错误内容处置异常等级101在子局的局主局和子局设定的输入输出字节数不同。主子检查链路参数的内容。警报00D7子局地址6270接收数据主子的字节数接收数据子主的字节数自局设定数据主子的字节数自局设定数据子主的字节数102有未在连接顺序中设定的子局的局的应答。主检查子局的链路参数内容。警报00D9子局地址6270109未进行子局的局之间的连接顺序。在1台的子局设定了多个局时尽管有未完成连接顺序的局还是开始了普通顺序。子检查主局的链路参数的内容。警报00D4通信选择标记17局通信选择标记815局连接顺序完成标记17局连接顺序完成标记815局1008尽管连接顺序结束后过了10秒也没开始普通顺序。子请检查主局的错误代码。警报00D5104和子局的局的通常顺序错误接收数据存在垂直奇偶错误。主检查子局的局的布线是否脱落。警报00E8子局地址6270104和子局的局的通常顺序错误子局发出否定响应。主00E1子局地址6270104和子局的局的通常顺序错误接收到意外的地址数据。主00E2期待的地址6270接收的地址104和子局的局的通常顺序错误子局的局没有响应。主00E3子局地址6270CPU链路存储错误信息的CPU错码特殊寄存器的地址S30S31LS32HLS33HS34LS3086S312S32LS30S31LS3286H9LS33H86186S3008S31S3086S31486S314864S32LS30S32LS30S31LS32HS3086S314表中的表示进入了发生错误的PC链路的链路No的代码。链路No代码表注1标记表示子局的局号。S32L链路No12345678链路No代码13579BDF555
CPU链路错码存储错误信息的CPU特殊寄存器的地址左记地址的内容错误内容处置异常等级864S30104和子局的局的通常顺序错误子局的局接收的水平奇偶有奇偶错误。主检查子局的局的布线是否脱落。警报S3100E7S32子局地址6270864S30104和子局的局的通常顺序错误子局没有发送水平奇偶数据。主S3100E6S32子局地址62708607S301007主局未发过来普通顺序的数据子请检查主局的错误代码。警报S3100E489链路参数的支架No时隙No链路模块名称设定错误检查并修改链路参数的内容。警报84模块的硬件异常。与CPU模块间接口异常。重新加电或CPU的复位启动SW的操作。仍然出现异常时请更换链路模块。警报表中的表示进入了发生错误的PC链路的链路No的代码。注1链路No代码表注2表中的子局地址如下所示。链路号码12345678链路No代码13579BDF子局地址子局No子局地址子局No62子局16A子局963子局26B子局1064子局36C子局1165子局46D子局1266子局56E子局1367子局66F子局1468子局770子局1569子局8注3标记表示子局的局号。556
3链接错误信息输出用特殊寄存器链路错误代码为8段移动寄存器构成可以记忆8次异常。如果超过8次则从最初的数据开始删除。链路号错误存储地址地址内容1S310S31FS30错误代码2S330S33F3S350S35FS31S32S33S34错误详细内容4S370S37F5S390S39F6S3B0S3BFS35S36S37S38S39S3AS3B错误代码存储1新234567旧7S3D0S3DF8S3F0S3FF注表中的表示进入了发生错误的PC链路的链路No的代码。链路No代码表4分离子局的异常报警分离指定的子局在由于电源中断等原因而不能对主局进行应答时不成为通信异常。因此通信区域的各种数据为OFF不变并且也不存储通信错误代码。链路号12345678链路No代码13579BDF557
532PC链路异常确认流程图开始无有S301001S31发生异常A1041007BCDEFGH008300858810010110210910080082利用BCD重新设定链路参数代码。注表中的表示进入了发生错误的PC链路的链路No的代码。链路No代码表注标志表示子局的局号。重新指定主局子局。1链路区域2确认链路点数字节数是否正确。链路号12345678链路No代码13579BDF558
ABY确认有无分离将分离寄存器设为0。和子局之间的连接顺序中发生通信异常重新接通主局电源恢复N结束分离寄存器一览表结束N发生异常Y更换模块结束1子局电源是否接通接通子局电源2子局的局号是否正确将子局的局号正确设定。3通信速度波特率是否正确设定正确的波特率。4布线是否正确正确布线。链路号分离寄存器恢复N结束Y结束1S31C2S33C3S35C4S37C5S39C6S3BC7S3DC8S3FC更换模块559
CE在子局n主局和子局的输入输出字节数不同。设定正确的链路参数。D1主局链路参数是否正确重新设定正确的主局链路参数。2子局的局号是否正确将子局的局号正确设定。恢复N结束Y结束更换模块560
FH连接顺序结束后普通顺序不开始。G恢复N结束Y结束561主局没有发送普通顺序。确认主局是否正常与子局之间普通顺序的通信异常子局电源是否接通接通子局电源子布线是否正确正确布线重新接通电源更换模块
54FLnet的异常警报FLnet检测出异常时在EALED中显示异常的同时向CPU发出异常警报。CPU将按照该异常内容来设置特殊继电器错误信息输出用特殊寄存器链接错误信息输出用特殊寄存器。541错误代码FLnet检测到异常时将向CPU发出异常警报并将异常的详细代码保存在S30地址之后。通信非正常进行时首先确认此错误代码。错误代码的确认方法请参考54222特殊寄存器4链路错误信息输出用特殊寄存器。错误代码错误内容原因和处理方法E5链接参数未设定未设定链路参数时请设定。已完成链路参数设定时请确认链路参数设定的支架No或时隙No是否与实际安装位置一致。E6链接参数异常链路参数有误。参考下一章读取链路错误信息特殊寄存器进行对应处理。E7节点号码重复在参加FLnet通信前与自节点节点号码相同的其它节点已经参加通信的情况下发生。请按自节点或者其他节点的链路参数设定确认节点号码是否正确。E8共用内存发送区域地址重复继电器链路在FLnet的数据链路通信中各节点通过共享数据的虚拟内存空间共用内存进行数据的发送接收。必须使各节点与其它节点不重复设定共用内存上的发送区域。但是在自节点参加通信时如果自节点发送区域的一部分或者全部重复的区域里存在发送数据的其它节点就出现E8继电器链路区域的重复或者E9寄存器链路区域的重复错误。同一网络中有FL远程设备混入时请断开与FLnet的网络连接。请参考9710146数据链路的设定确认自节点或其他节点的发送区域设定是否正确。E9共用内存发送区域地址重复寄存器链路562
错误代码错误内容原因和处理方法EA标记监视超时令牌监视超时错误在链路参数的Network网络上设定的令牌监视超出时间内不能发送自节点的所有数据时发生。请打开令牌监视超时时间的AUTO自动复选框或者延长设定时间。Ed超出数据寄存器区域设定超出CPU模组的数据寄存器范围的链路区域时发生此异常。例如PC2JCPU的数据寄存器范围是D0000D0FFF但是如果超出此地址设定链路区域则出现Ed异常。请修改链路区域的地址。环回测试异常FLnet在电源接通时或者复位启动时自动测试数据发送是否正常。测试出错误时出现回送测试异常。回送测试异常时自动重复测试直至正常OK时开始通信。回送测试异常时自动重复测试直至正常OK时开始通信。请参考245FLnet以太网FL遥控器的布线确认以下项目。1模块上是否切实安装LAN电缆的连接器2HUB上是否切实安装LAN电缆的连接器3LAN电缆有无发生断线或短路4HUB上是否切实安装无线电收发器电缆的连接器是否用固定件锁定5存储使用HUB时HUB之间是否正确连接6无线电收发器上切实安装无线电收发器电缆的连接器是否用固定件锁定7收发器电缆有无发生断线或短路8无线电收发器与干线电缆的连接是否存在问题9干线电缆的两端有无连接端接器10干线电缆是否断线或者短路网络的所有FLnet模块出现此异常时普遍认为9或者10的可能性较大等待接收参加网络的节点不存在时显示。请确认以下的项目。1HUB的电源是否断开2其他节点的电源有无OFF3模块中是否切实安装有LAN电缆的连接器4HUB中是否切实安装有LAN电缆的连接器LAN电缆有无断线或者短路HFLnet硬件异常可能是因为ToyopucNano内置的FLnet发生故障。请交换ToyopucNano模块563
542CPU的错误显示5421特殊继电器异常时下述特殊继电器ON。地址内容VA1VA5VA9VADVB1VB5VB9VBD链路No1链路No2链路No3链路No4链路No5链路No6链路No7链路No8链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常VA2VA6VAAVAEVB2VB6VBAVBE链路No1通信异常链路No2通信异常链路No3通信异常链路No4通信异常链路No5通信异常链路No6通信异常链路No7通信异常链路No8通信异常VC4特殊模块的异常通信模块故障VC8IO构成异常VF2特殊模块的分配异常链路参数的支架No时隙No链路模块名称与安装状态不同564
5422特殊寄存器特殊寄存器整图地址内容S200S24FCPU错误信息输出用寄存器注S30S3FFLnet网络节点参与状态显示各节点的通信状态参加1未参加0。请参考978监视功能。S3x0S3xB链接错误信息输出用寄存器S3xF自身节点地址输出用寄存器上述地址x及部分由链路No決定。各链路No的x如下表所示。例链路No为1时节点参加状态保存到S300S30F链路错误信息保存到S310S31B。注特殊寄存器S200S24F和S3x0S3xB中储存的信息在异常恢复后不会被清除。必须清除时通过PCwin2等向寄存器写入0000。上述特殊寄存器地址是在PC2兼容模式及PC3JG模式数据区域分割模式的场合。Ver300的版本中S200中储存的异常信息会同时储存在S1000。链接No1234567802468ACEx13579BDF565
1CPU错误信息输出用寄存器检出异常时将错误代码错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。该寄存器为8级PC10模式时为64级移位寄存器结构可存储最大8次的异常发生。异常超过8次时将从最初保存的错误信息开始依次消失。保存在此寄存器中的错误信息可用周边装置等读出。CPU错误信息输出用特殊寄存器的内容地址S200S20AS214S21ES228S232S23CS246S24F错误0信息错误代码错误1信息错误相关信息1低位2高位错误2信息错误相关信息3低位4高位错误3信息错误检出时刻秒错误4信息错误检测时刻分错误5信息错误检测时刻时错误6信息错误检测时刻日错误7信息错误检测时刻月错误检测时刻年错误检出时刻星期06周日周六错误相关信息消失错误代码IO监视器的错误讯息错误内容相关1相关2相关3相关4备注重度异常84IOMODULEERROR2通信模块故障分类机架编号插槽编号2CPU检出13链接检出警报85LINKPRAMERROR链路参数异常链路号86LINKERROR通信异常链路号89FUNCIOALARM链路参数的支架No时隙No模块名异常机架编号插槽编号VF2ONVer300的版本中S200中储存的异常信息会同时储存在S1000。参考514项输出错误信息用特殊寄存器566
2链路错误信息输出用特殊寄存器FLnet一旦检测出异常就向CPU发出异常警报。CPU将在链接错误信息输出用特殊寄存器中保存该异常内容。链接错误信息输出用特殊寄存器为8级移位寄存器结构最大可存储过往发生的8次异常。如果异常超过8次则从最初保存的错误信息开始消失。保存在此寄存器中的错误信息可用周边装置等读出。链路错误信息输出用特殊寄存器的内容链路号码错误显示地址1S310S31F2S330S33F3S350S35F4S370S37F5S390S39F6S3B0S3BF7S3D0S3DF8S3F0S3FF地址MSB内容LSBS3x0自身节点编号hex错误代码hex1S3x1链路参数异常详细代码hex2S3x20000固定S3x30000固定S3x4软件版本BCD3S3x5S3x6S3x7S3x8S3x9S3xAS3xB节点号码错误代码存储1新节点号码错误代码存储2节点号码错误代码存储3节点号码错误代码存储4节点号码错误代码存储5节点号码错误代码存储6节点号码错误代码存储7旧S3xF自节点地址1和模块前面显示的错误代码相同。2只有链路参数异常错误代码E6的情况下。其他错误时0000固定。3版本123时0123BCD。注1x由链路No决定。例如链路No5的FLnet里保存错误信息到S390S39F。链接No12345678x13579BDF567
链路参数异常详细代码链路参数中有异常时显示器的FLnet异常显示中显示E6保存错误代码E6到链路错误信息输出用特殊寄存器S30的同时向S3x1里保存链路参数异常详细代码。请参考下表修改链路参数。而且链接参数的确认请从CPU中将参数读出到周边装置之后进行。周边装置内的参数有时会与CPU内的参数不一致。此外在PCwin2上设定链路参数后为了检查外围装置的设定不能设定异常参数。即便如此可以认为在链路参数异常时通过计算机链路等指令使CPU内的链路参数被重写。0024除去开关设定异常S31的异常详细代码hex异常内容原因通信方式0001继电器链接区域起始地址异常继电器链路区域起始地址未指定字符NN0002寄存器链接区域起始地址异常寄存器链接区域起始地址非文字指定0003继电器链接发送区域起始地址异常继电器链接发送区域起始地址有异常继电器链路发送区域字符数异常继电器链接区发送域起始地址非文字指定0004寄存器链接发送区域起始地址异常寄存器链接发送区域起始地址有异常寄存器链接发送区域文字数量有异常寄存器链接发送区域起始地址非文字指定0005继电器链接区域超出继电器链接区域文字数量有异常继电器链接区域起始地址文字数量有异常继电器链接区域顶部与发送区域顶部的识别不一致0006超出寄存器链路区域寄存器链接区域文字数量有异常寄存器链路区域起始地址字符数异常寄存器链路区域起始与发送区域起始的标示不一致0010继电器链接接收区域起始地址异常继电器链路区域起始地址未指定字符1N0011寄存器链接接收区域起始地址异常寄存器链接区域起始地址非文字指定0012继电器链接区域超出继电器链路的设定中接收字符数异常发送区域字符数异常接收区域起始地址发送接收信息字符数异常共用内存地址异常0013超出寄存器链路区域寄存器链路的设定中接收字符数异常发送区域字符数异常接收区域起始地址发送接收信息字符数异常共用内存地址异常0014继电器链接发送公用存储器地址异常继电器链路发送区域的共用内存地址异常0015寄存器链接发送公用存储器地址异常寄存器链接发送区域的公用存储器地址有异常0016主局节点号码异常主站节点编号为1254以外的数字主站节点编号与自站节点编号相同0020网络地址异常网络地址为000或255255255NN1N通用0021XY区域重复异常实际IO使用的XY区域与链路区域重复0022通信方式未设定通信方式不是NN或者1N0023自节点号码异常自站节点编号为1254以外的数字0024开关设定异常开关的设定异常0025链路参数替代码异常链接参数的子代码有异常0026标记监视超时异常标记监视超时时间的设定为不足10ms0027最小允许帧间隔异常最小允许帧间隔的设定不是1ms5ms注1x由链路No决定。链接No12345678x13579BDF568
555511234以太网的异常警报异常分类以太网的异常警报分以下几种。硬件异常以太网故障时或与CPU的信息交换无法正常进行时发生。CPU中发生特殊模块异常错误代码84。参考552硬件异常。链路参数异常CPU中设定的链路参数的链路模块名存在异常时发生。CPU中发生链路模块分配异常错误代码89。注异常仅有链路模块名异常。通过链路参数的详细设定或顺序程序的SPW指令写入的IP地址等设定数据存在异常时为3通信异常。通信异常通信参数或顺序程序存在异常时发生。CPU中发生通信异常错误代码86在S30号以后设置详细数据。由以太网的链路No来确定参考554通信异常。连接异常与对象节点通信上发生错误时发生。若发生连接异常则在文件内存中设置连接错误代码打开连接异常标记。各连接的连接错误代码也可以在监视器区域中读出。参考1096状态监视器功能若发生连接异常则打开文件内存的连接异常标记在文件内存中设置连接错误代码。即使发生连接异常CPU也不会发生异常。请参照555连接异常。569
5线路异常接通电源或复位启动时线路未进入可使用状态时的异常。发生这种情况时可能是由于下列原因。1通信电缆没有连接或者接触不良。2通信电缆的对象机器HUB或计算机等没有启动。3使用交叉电缆与HUB连接。4使用直线电缆直接连接计算机等终端机器。5电缆断线6以太网故障注以太网的LAN电缆有直线电缆和交叉电缆2种。连接HUB时使用直线电缆1对1直接连接对象机器时使用交叉电缆。6没有初始数据接通电源或复位启动后无法从CPU接收IP地址等初始数据时的异常。发生这种情况时可能是由于下列原因。1利用顺序程序初始化时打开文件内存初始要求标记的顺序程序存在错误或者没有组成程序。2利用链路参数初始化时没有选择InitializationbasedonLinkParameters根据链路参数初始化。570
552硬件异常由于以太网异常或者外围机器故障导致无法正常运行时发生。CPU中发生特殊模块异常错误代码84。详细异常代码被保存在S30号之后因此请参考下表进行处理。553链路参数异常链路参数的链路模块名存在错误时发生。请将链路模块名设定为Ethernet以太网。详细异常代码原因和处理方法H有可能是以太网异常。更换NanoCPU。571
554通信异常以太网中设定的通信参数存在错误时或者使用文件内存方式通信时的发送字节数不在规定范围内时发生。CPU中发生错误86。通过以太网的链路No将有错误的详细代码储存到不同CPU特殊寄存器如下的地址中。链接No错误代码详细数据1详细数据2详细数据31S310S311S312S3132S330S331S332S3333S350S351S352S3534S370S371S372S3735S390S391S392S3936S3B0S3B1S3B2S3B37S3D0S3D1S3D2S3D38S3F0S3F1S3F2S3F3参考下页的表进行处理。572
通信异常错误代码表错误代码内容详细数据1详细数据2详细数据3处理方法0113初始指令中自节点IP地址不正确000000000000确认是否正确设定了自节点IP地址。另外下列IP地址无法设定。网络ID的所有比特都为0或者所有比特为1主机ID的所有位数为0或所有位数为1子网ID的所有比特都为0或者所有比特为1最上位字节为1277Fh参考资料50114初始指令中网关IP地址不正确000000000000确认是否正确设定了网关IP地址。0115在初始命令中其他节点IP地址为非法000000000000确认是否正确设定了其他节点IP地址。另外下列IP地址无法设定。网络ID的所有比特都为0或者所有比特为1主机ID的所有位数为0或所有位数为1子网ID的所有比特都为0或者所有比特为1最上位字节为1277Fh参考资料50116在初始命令中其他节点端口NoTCP为非法000000000000确认是否正确设定了其他节点端口No。端口No必须为0401hFFFEh102565534。0117初始指令中协议不正确000000000000确认是否正确设定了协议TCP00或UDP01。0118初始指令中模式不正确000000000000确认协议为TCP时模式主动00特定对象被动01不特定对象被动02是否已经正确地写入到文件内存中。0119在初始命令中自身节点端口NoTCP为非法000000000000确认是否正确设定了自节点端口No。端口No必须为0401hFFFEh102565534。011A在初始命令中其他节点表No为非法000000000000确认是否正确设定了其他节点端口No。另外请确认指定的表是否通过初始参数的表使用设定为使用。011B初始指令中自节点端口NoTCP重复000000000000确认是否重复设定了自节点端口No。011C初始指令中自节点端口NoUDP重复000000000000确认是否重复设定了自节点端口No。011D初始指令中重发定时器数据值不正确000000000000确认定时器值是否在规定范围内。011E初始指令中重发定时器SYNFIN的定时器值不正确000000000000确认定时器值是否在规定范围内。011F初始指令中关闭定时器值不正确000000000000确认定时器值是否在规定范围内。0120在初始命令中数据包生存时间为非法000000000000确认定时器值是否在规定范围内。0121初始指令中IP构造定时器值不正确000000000000确认定时器值是否在规定范围内。573
错误代码内容详细数据1详细数据2详细数据3处理方法0125初始指令中子网掩码不正确000000000000将子网掩码的10的转点设置为一处。参考资料50126在初始命令中网关IP地址未进行设定000000000000确认是否设定网关IP地址以及自节点IP地址和其他节点IP地址中是否有错误。参考资料50127在初始命令中重传次数为非法000000000000请确认重发次数是否在规定范围内。0134主动开放命令的其他节点表No无效接线No00000000TCP主动指定的连接中没有设定其他节点表No的异常。请确认其他节点表No是否正确以及指定的表是否被设定为使用。2080初始数据的响应定时器值异常000000000000确认定时器值是否在规定范围内。2081初始数据的无接收计时器值异常000000000000确认定时器值是否在规定范围内。2082发送数据的传送数异常接线No传输数量0000确认发送数据区域首个传送数数据是否为0或者是否没有超过20447FCh以及传送数据数是否正确写入文件内存。2085文件接收结束时接收确认标记已经打开接线No00000000确认接收确认标记是否一直处于打开状态。574
555连接异常从对象节点接收的数据有异常等情况时发生。连接异常发生时使用下列方法发出警报。1通过状态监视器发出警报发生错误时在CPU模块的特殊寄存器的以下区域中储存连接异常代码。错误解除后储存00。可以通过特殊寄存器进行监视的连接为18。对于932使用SPR2命令监视状态。链接No连接错误代码保存区域1S308S30FS3x8连接1连接异常代码2S328S32F3S348S34F4S368S36F5S388S38F6S3A8S3AF7S3C8S3CF通过外围装置监视该区域可以读取连接异常代码。2通过文件内存的警报数据储存到文件内存的连接异常代码区域。为了读出此数据必须通过顺序程序的SPR指令在IO寄存器上读出数据。另外连接异常发生时有时会向对象节点发送错误响应。请参考下一页之后的连接异常错误代码表进行处理。575S3x9S3xE连接2连接异常代码S3xA连接3连接异常代码S3xB连接4连接异常代码S3xC连接5连接异常代码S3xD连接6连接异常代码连接7连接异常代码8S3E8S3EFS3xF连接8连接异常代码
5551连接异常错误代码表关于表中的符号14异常处置内容14发生异常时以太网进行14的指定处理。1连接异常代码写入连接异常标记打开2连接复位3向对象节点发送错误响应数据4将RC设为10还原下列错误响应数据。80100100错误代码错误代码的内容请参考错误响应数据错误代码表5552。错误响应数据通过下列数据发送错误响应数据的帧类型FT。对于文件内存接收的错误响应时E0对于计算机链路指令的错误响应时80接收的帧类型FT数据的最高位比特为1的数据576
i连接为TCP被动时内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法文件存储器发送响应数据接收超时124002发送请求标志的OFF由以太网发送文件内存数据在初始参数响应定时器默认值6秒期间对象节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。文件存储器发送字节数量异常14003发送请求标志的OFF文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。无法接收传送数部分的数据123400405从对方节点开放已经接收了文件内存数据或者计算机链路指令时传送数数据LLLH比实际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及1帧的数据是否已全部发送。接收数据帧格式异常FT异常123400501从对方节点开放接收数据的起始数据FT帧类型异常时发生。FT必须为下列任意一个。FT00计算机链接命令FT60文件存储器发送FTE0文件存储器接收确认响应接收数据帧格式异常RC异常123400502从对方节点开放已经接收了文件内存或计算机链路指令时接收数据的第2个数据RC响应代码在00范围之外时发生。请确认发送数据。接收数据帧格式异常传送数异常123400503从对方节点开放接收数据的传送数数据LLLH为0000以及超出1274字节时计算机链路指令或者超出2044字节时文件内存发送发生。请确认发送数据。计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令12340068006从对方节点开放接收计算机链路指令在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。1234007E007从对方节点开放接收文件内存数据在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。中继命令格式异常12340088004从对方节点开放中转指令的传送数或者ENQ代码异常时发生。请确认中转指令的内容。文件内存发送处理过程中连接被复位或者关闭14009发送请求标志的OFF文件内存发送处理过程中连接被复位或者关闭时发生。无接收定时器延时124010从对方节点开放超过用初始参数的无接收定时器默认00无设定设定的时间仍无法接收对象节点的数据时发生。请检查无接收定时器的设定因TCP重传超时而对连接进行了重置。124013从对方节点开放用初始参数的复位待机重发次数指定的次数进行通信重试也无法从对象节点接收到接收确认ACK信号时发生。对象节点的电源关闭或电缆断线时发生。参考74章通过由相同IP地址的其他端口的多重连接打开要求复位了当前连接124014从对方节点开放如果被TCP不特定对象被动打开指定的连接为打开状态则由其他节点向相同端口发出打开要求时复位当前打开的连接。此后如果再有来自其他节点的打开要求则打开与此节点的连接。参考74章577
内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法从对方节点针对文件存储器发送的错误响应接收响应代码RC1230发送请求标志的OFF发送文件内存数据从对象处接收的响应代码RC不为00时发生。请确认响应数据。在计算机链接命令处理中从JCPU中接收到了NAK响应34接收的计算机链路指令的内容存在某些异常无法正常处理时发生。请确认计算机链路指令的内容。上述以外的连接异常12013从对方节点开放从对方节点接收到非法的开放请求关闭请求时会发生。请确认对方节点的通信程序。ii连接为TCP主动时内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法主动打开失败14001开放请求标志的OFF无法向对象节点主动打开时发生。请确认线路是否正确连接对象节点是否启动自节点与对象节点的IP地址的网络ID是否相同参考资料5。文件存储器发送响应数据接收超时124002发送请求标志的OFF由以太网发送文件内存数据在初始参数响应定时器默认值6秒期间对象节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。文件存储器发送字节数量异常14003发送请求标志的OFF文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。无法接收传送数部分的数据123400405开放请求标志的OFF已经接收了文件内存数据或者计算机链路指令时传送数数据LLLH比实际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及1帧的数据是否已全部发送。接收数据帧格式异常FT异常123400501开放请求标志的OFF接收数据的起始数据FT帧类型异常时发生。FT必须为下列任意一个。FT00计算机链接命令FT60文件存储器发送FTE0文件存储器接收确认响应接收数据帧格式异常RC异常123400502开放请求标志的OFF已经接收了文件内存或计算机链路指令时接收数据的第2个数据RC响应代码在00范围之外时发生。请确认发送数据。接收数据帧格式异常传送数异常123400503开放请求标志的OFF接收数据的传送数数据LLLH为0000以及超出1274字节时计算机链路指令或者超出2044字节时文件内存发送发生。请确认发送数据。计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令12340068006开放请求标志的OFF接收计算机链路指令在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。1234007E007开放请求标志的OFF接收文件内存数据在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。中继命令格式异常12340088004开放请求标志的OFF中转指令的传送数或者ENQ代码异常时发生。请确认中转指令的内容。文件内存发送处理过程中连接被复位或者关闭14009发送请求标志的OFF文件内存发送处理过程中连接被复位或者关闭时发生。578
内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法无接收定时器延时124010开放请求标志的OFF超过用初始参数的无接收定时器默认00无设定设定的时间仍无法接收对象节点的数据时发生。请检查无接收定时器的设定连接被从对方节点关闭14011开放请求标志的OFF通过主动打开由自节点打开连接后由对象节点关闭连接时发生。连接被从对方节点重置14012开放请求标志的OFF通过主动打开由自节点打开连接后由对象节点复位连接时发生。因TCP重传超时而对连接进行了重置。14013开放请求标志的OFF用初始参数的复位待机重发次数指定的次数进行通信重试也无法从对象节点接收到接收确认ACK信号时发生。对象节点的电源关闭或电缆断线时发生。参考74章从对方节点针对文件存储器发送的错误响应接收响应代码RC1230发送请求标志的OFF发送文件内存数据从对象处接收的响应代码RC不为00时发生。请确认响应数据。在计算机链接命令处理中从JCPU中接收到了NAK响应34接收的计算机链路指令的内容存在某些异常无法正常处理时发生。请确认计算机链路指令的内容。连续开放120132开放请求标志的OFF发送处理中发送完成标志为OFF且再次进行发送处理时会发生。发生后请重置CPU模块。请修改程序以确保发送请求标志在发送完成或发生连接异常后为OFF。iii连接为UDP时内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法文件存储器发送响应数据接收超时14002发送请求标志的OFF由以太网发送文件内存数据在初始参数响应定时器默认值6秒期间对象节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。文件存储器发送字节数量异常14003发送请求标志的OFF文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。无法接收传送数部分的数据305已经接收了文件内存数据或者计算机链路指令时传送数数据LLLH比实际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及1帧的数据是否已全部发送。接收数据帧格式异常FT异常301接收数据的起始数据FT帧类型异常时发生。FT必须为下列任意一个。FT00计算机链接命令FT60文件存储器发送FTE0文件存储器接收确认响应接收数据帧格式异常RC异常302已经接收了文件内存或计算机链路指令时接收数据的第2个数据RC响应代码在00范围之外时发生。请确认发送数据。接收数据帧格式异常传送数异常303接收数据的传送数数据LLLH为0000以及超出1274字节时计算机链路指令或者超出2044字节时文件内存发送发生。请确认发送数据。579
内容处置连接异常代码向对象节点发送的错误响应数据清除异常的时间发生异常的原因和处置方法计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令38006接收计算机链路指令在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。3E007接收文件内存数据在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。中继命令格式异常38004中转指令的传送数或者ENQ代码异常时发生。请确认中转指令的内容。从对方节点针对文件存储器发送的错误响应接收响应代码RC130发送请求标志的OFF发送文件内存数据从对象处接收的响应代码RC不为00时发生。请确认响应数据。在计算机链接命令处理中从JCPU中接收到了NAK响应34接收的计算机链路指令的内容存在某些异常无法正常处理时发生。请确认计算机链路指令的内容。上述内容以外的错误代码被退回时请重新确认所有指令数据。580
5552错误响应数据错误代码表计算机链路指令中通过错误响应80100100错误代码或者中转指令的响应NAK异常做出应答时请参考下表进行指令数据的检查。错误代码11202123242526313233343536393C3D3E3F404142435266707273请参照指令22执行权限定状态读出或者23执行权限定设定。上述内容以外的错误代码被退回时请重新确认所有指令数据。错误内容CPU的硬件异常无法进行处理中转指令中的固定数据ENQ不为05传输数量异常中继命令中的传输字节数量中有错误指令代码不正确子命令代码为非法指令格式的数据字节不正确功能调用的运算数数量为非法想要在顺序运算过程中禁止写入的区域进行写入或者想要使用在顺序运算过程中禁止执行的函数调用在停止持续期间有禁用的命令发来不是调试模式却要进行调试函数调用通过访问禁止设定禁止访问由于设定了执行权限定所以不可执行由于通过其他装置设定了执行权限定所以不可执行进行了IO点数参数IO分配点数参数的写入后不进行复位便试图开始扫描在重大故障发生过程中发出了重大故障中无法执行的指令执行其他原因的指令过程中处理发生冲突无法执行由于正在进行重置所以命令无法执行由于处于停止状态所以命令无法执行读出写入指令中地址不在范围内或者指令的地址数据数脱离地址范围字数量或字节数量超出范围接收到指定范围之外的数据函数调用的运算域有误尽管未使用计时器计数器却仍然发来了设定值当前值的读出写入命令中转指令指定的链路No局号的链路模块没有应答指定的连接模块不存在电源关闭或者线路异常等无法使用中转指令指定的链路No的模块指定的链路No错误或者链路模块异常中转指令指定的链路No局号的链路模块没有应答指定的连接模块不存在电源关闭或者线路异常等CPU内多个中转指令在相同链路模块反复发行无法进行指令处理。请再次发送命令581
56FL遥控器的异常报警在FL远程中进行异常检测时将向FL远程和CPU进行异常通告。在FL远程中采用硬件状态通信状态的指示灯和信息显示器来进行异常通告。在CPU中采用特殊继电器特殊寄存器错误信息输出用寄存器链接错误信息输出用寄存器与信息显示器来进行异常通告。另外可用特殊寄存器来确认FL远程的通信状态。1硬件状态通信状态硬件状态通信状态的各指示灯中分别有绿色和红色的指示灯通过亮灯闪烁熄灯来表示以下的状态。灯名称颜色状态状态定义内容硬件状态绿正常状态模块正常状态未设定状态正在初始化红致命故障硬件异常轻微故障链接参数异常没有供给电源没有向主机模块供给电源正在复位初期处理开始等待通信状态绿正常状态网络正常状态未连接状态网络正常但未确立通信状态红致命通信异常网络上检测出不能通信的异常节点地址重复通信异常部分子局通信异常网络电源异常未连接电缆582亮灯闪烁熄灯
561CPU中的错误通告1特殊继电器正常时所有局通信中标记ON异常时其他标记ON。地址内容正常异常VA0VA4VA8VACVB0VB4VB8VBC链路No1链路No2链路No3链路No4链路No5链路No6链路No7链路No8所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中注脱离设定后为0ONOFFVA1VA5VA9VADVB1VB5VB9VBD链路No1链路No2链路No3链路No4链路No5链路No6链路No7链路No8链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常OFFONVA2VA6VAAVAEVB2VB6VBAVBE链路No1通信异常链路No2通信异常链路No3通信异常链路No4通信异常链路No5通信异常链路No6通信异常链路No7通信异常链路No8通信异常OFFONVC4特殊模块的异常通信模块故障OFFONVC8IO构成异常安装了规定数量以上的通信模块。OFFONVF2特殊模块分配异常链路参数的支架No时隙No链路模块名与安装状态不同。OFFON583
2特殊寄存器FL遥控器将异常时及通信状态的信息保存于PLC的下列地址中。地址内容S200S24FCPU错误信息输出用寄存器S30S31S32S33正常子机信息区域显示各子机的通信状态正常异常。S34主机状态区域显示主机和网络的状态。1S35软件版本BCDS36标记重发次数S37标记保持超时次数S38标记监控超时次数S3CS3F连接局设定状态S30S3B链接错误信息输出用寄存器S3CS3DS3ES3F分离寄存器上述地址及部分由链路No决定。各链路No的如下表所示。注这些寄存器S200S24F和S30S3B中保存的信息在异常恢复后不会被清除。必须清除时请通过PCwin2等向寄存器写入0000。1S34主机状态区域1514131211109876543210节点地址重复E7传输异常D9对照异常D6主机通信速度010M1100M通信准备中1通信准备中加电后到确立通信的期间公用存储器发送区域重复异常E8E9异常发生中发生Bit16710错误IO通信中链接No1234567802468ACE13579BDF584
3CPU错误信息输出用寄存器检出异常时将错误代码错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。该寄存器为8级PC10模式时为64级移位寄存器结构可存储最大8次的异常发生。如果异常超过8次则从最初保存的错误信息开始消失。此寄存器保存的错误信息可以通过外围装置等读出。CPU错误信息输出用特殊寄存器的寄存器内容地址S200S20AS214S21ES228S232S23CS246S24F错误0信息错误代码错误1信息错误相关信息1低位2高位错误2信息错误相关信息3低位4高位错误3信息错误检出时刻秒错误4信息错误检出时刻分错误5信息错误检出时刻时错误6信息错误检出时刻日错误7信息错误检出时刻月错误检出时刻年错误检测时刻星期06日六消失错误相关信息错误代码IO监视器的错误信息错误内容相关1相关2相关3相关4备注重度异常84IOMODULEERROR2通信模块故障分类机架编号插槽编号2CPU检出13链接检出88FUNCIOOVER124个以上通信模块的安装VC8ON警报85LINKPRAMERROR链路参数异常链路号86LINKERROR通信异常链路号89FUNCIOALARM链路参数的支架No时隙No模块名异常机架编号时隙号VF2ON注与内置FL遥控器的错误代码不同。Ver300的版本中S200中储存的异常信息会同时储存在S1000。参考514项错误信息输出用特殊寄存器585
4错误信息输出用特殊寄存器在内置FL遥控器中进行异常检测后向CPU进行异常报警同时将内置FL遥控器的错误代码保存到链路错误信息输出用特殊寄存器中。该寄存器为8级移位寄存器结构最大可存储8次的异常发生。异常超过8次时将从最初保存的错误信息开始依次消失。链接错误信息输出用特殊寄存器的寄存器内容链路号错误显示地址1S310S31F2S330S33F3S350S35F6S3B0S3BF7S3D0S3DF8S3F0S3FF地址MSB内容LSBS30节点地址HEX错误代码hexS31实际输入字节数HEX低位实际输出字节数HEX低位S32输入字节数量HEX下位输出字节数量HEX下位节点地址错误代码存储1新字节地址错误代码存储2节点地址错误代码存储3节点地址错误代码存储4节点地址错误代码存储5节点地址错误代码存储6节点地址错误代码存储7旧S35S36S37S38S39S3AS3B注1将根据链接No确定。注2S31S34保存对照异常输入输出字节数不一致时的输入输出字节数。S31实际从机的输入输出字节数量下位S32链路参数中的输入输出字节设定值低位例S3002D6S310400S320004从机02的对照异常从机02为输入04字节输出00字节在参数中输入00字节输出04字节链接No1234567813579BDF586
详细错误代码和内置FL遥控器的错误显示FL远程错误代码显示内容S030S031内容89E5链接参数未设定85E700F000F2自节点号码重复异常85ED00ED0000区域超出85E600210000字节数合计超过限制值85E600220000有字节数为0的局号85E6002300001个从机的输入或输出字节数量超过了限制值85E600250000通信区域超出85E600260000CPU的输入输出与通信区域重复85E600270000模块子代码异常85E600280000模块No异常85E600290000最小允许帧间隔异常85E6002A0000自身节点编号异常85E6002B0000网络地址异常86E8E80000共用内存1重复异常86E9E90000共用内存2重复异常86EAEA0000标记监视超时异常86EBEB0000循环数据读入异常86ECEC0000循环数据写入异常86D6D6II00对照异常S031H实际输入字节数HEXS031L实际输出字节数HEXS032H输入字节数量HEXS032L输出字节数HEX86D9D90000传输异常84H其他硬件故障注1特殊寄存器S30的部分由链路No决定。S30的内容异常子机的节点地址注2主机错误代码的E0E2显示在错误状况被解除后会变为局号的闪烁显示。链接No1234567813579BDF587
562通信状态内置FL遥控器将通信状态输出到特殊寄存器中。1正常从机信息区域是表示各从机的通信正常异常状态的区域各从机的状态标志将输出到特殊寄存器S3033中。各比特No表示节点地址局号。MSBLSBS30S31S32S33特殊寄存器的部分由链路No决定。注1在子机为分离指定状态或根据链路参数的设定通信异常时通信不停止的情况下标记仍发挥功能。2通信状态确认功能本功能可作为通信线路稳定性的基准。即使发生错误也不一定就是通信异常。错误多发时导致通信异常的可能性会变大。通信错误信息区域的内容按错误内容6种输出到特殊寄存器S36S38中。地址部分由链路No决定。错误次数最多可以计算到65535FFFFh次。错误次数在电源断开及CPU复位时被清除。但是通信复位并不能清除错误次数。151413121110987654321313029282726252423222120191817164746454443424140393837363534333263626160595857565554535251504948各比特1通信正常状态各比特0通信异常状态或未使用局发生传输异常或对照异常。链接No1234567802468ACE地址内容S36标记重发次数S37标记保持超时次数S38标记保持超时次数链接No1234567802468ACE588
错误次数保存回路错误次数错误信息区域的内容在电源断开及由于通信异常CPU复位时被清除。因此为了保存发生异常时错误次数的内容请制作以下所示的顺序线路。例以下为发生通信异常时将子机状况主机状态错误次数发生时刻保存到寄存器的顺序例。通信异常标志链接No1VA2T000T000TMRWBMOVWBMOVK101秒定时器PS30D0FF00012dS019D0FFC003d传输子机状况主机状态错误次数发生时刻传输特殊寄存器的部分由链路No决定。通信异常标记的地址由链路No决定。根据上述指令D0FF0如下所示。D0FF0123456789ABCDE链接No1234567802468ACE链接No12345678通信异常标记VA2VA6VAAVAEVB2VB6VBAVBE正常子机信息区域主机状态区域错误次数时刻分秒BCD时刻日时BCD时刻年月BCD589
3连接站设定信息区域是表示CPU的链接参数中设定的从机连接状态的区域。各子机的状态标记输出到特殊寄存器S3C3F中。0表示主机各比特No表示节点地址局号。MSBS3CS3DS3ES3F各比特1连接各比特0不连接特殊寄存器的部分由链路No决定。LSB151413121110987654321313029282726252423222120191817164746454443424140393837363534333263626160595857565554535251504948链接No1234567802468ACE590
563错误内容与推定原因特殊寄存器内容注主机7段显示错误内容主要推测原因排除方法H硬件异常CPU本体发生异常请检查CPU本体的状态及噪音环境在此基础上重新接通电源。若再次发生请更换CPU模块。0021E6字节数量的合计超出了限制值链接参数异常CPU本体的存储器中发生了异常。请重新写入正常的参数并进行重置或电源重新接入。详细内容请参照各CPU的使用说明书。0022E6存在字节数量为0的站0023E61子机的输入或输出字节数超过限制值0024E6IO指定异常0025E6区域超出0026E6CPU的输入输出与区域重复0027E6子代码异常64F0E7主机重复2台以上的主机模块连接在网络上FLnet模块连接在同一网络上请将其他主机模块从网络上断开后重新接入电源。请将FLnet模块从网络上断开后重新接入电源。00E8E8公用存储器发送区域地址重复继电器链接00E9E9公用存储器发送区域地址重复寄存器链接00EBEB循环数据读入异常FLnet模块连接到同一网络中请将FLnet模块从网络上断开后重新接入电源。00ECEC循环数据读入异常00EAEA令牌监视超时令牌监视超时错误在链路参数的网络上设定的令牌监视超时时间内不能发送自节点的所有数据时发生。请打开令牌监视超时时间的自动复选框或者延长设定时间。591
特殊寄存器内容主机7段显示错误内容主要推测原因排除方法D6D6对照异常字节数量不一致从机的输入输出字节数量与链接参数的输入输出字节数量有不一致。请确认所连接的从机输入输出字节数量并变更链接参数。变更子机的节点地址后请重新接通子机电源并变更链路参数。拆下子机后也需要变更链路参数。D9D9传输异常从机已脱离。请确认子机连接器的连接是否正确。请确认有无向子机供给电源。确认HUB电源。请确认节点地址的重复。请确认连接器的布线部中有无断线或短路的通信线。使用其他公司生产的从机时请参照该从机的使用说明书。00硬件状态指示灯通信状态指示灯均亮绿灯并正常通信但输入输出数据不正确。存在已指定脱离的子站。通信区域重复。输入输出地址顺序设定错误顺序程序覆盖通信区域请确认分离寄存器的相应子局是否设定为0无分离指定。请确认在主机的参数中设定的通信区域有无与其他链接模块的通信区域重复。请确认主机的参数中设定的输入输出地址顺序设定是否正确。请确认顺控程序中有无覆盖通信区域。异常子机的节点地址592
6维护61更換电池1锂充电电池TOYOPUCNano在内置时钟的后备电源中作为选项可使用专用的可充电锂电池TUP6990。每天充电4小时电池就可以处于常有电状态。如果是完全充满的状态则常温25C下可备用2个月以上。检测出电池电压降低时蓄电池就会报警错误代码0022特殊继电器V03和VF0为ON。如果充电8小时以上仍不能解除蓄电池警报或者即使充电蓄电池警报也马上出现时要考虑是否电池的寿命到期请更换新的电池。根据使用情况电池寿命不同一般是以5年为更换的标准。更换时请务必更换为TOYOPUCNano专用的电池TUP6990。更换电池应由有专业知识的维护人员进行。锂充电电池的外观导线黑2Pin接插件导线红CPU侧接插件616
2电池更换顺序电池更换顺序1在周边装置中进行数据备份。2准备更换用的电池。3切断电源拆下TOYOPUCNano前面的电池盖板。4从TOYOPUCNano中取出电池。5卸下电池接插件。请不要拔出导线否则会导致故障。6更换新电池。按取出电池时的顺序反向装上。注安装电池接插件时请注意安装方向。另外不要使电池导线露到主板外面。黑红7接通电源从外围装置确认停止蓄电池报警特殊继电器VF0为OFF。8关闭电源在电池更换贴纸上记上日期。注更换电池更换电池顺序28需在关闭电源5分钟后再进行。切断电源后的短暂期间内置时钟由大容量电容器提供后备电源。由于用户程序顺控程序与参数数据存储器设备信息存储器内容注释等保存在停电时内容也会被保留的非易失性存储器中所以即使在拆去电池的状态下存储器内容也不会消失。62电池盖板
使用锂电池时的注意事项更换锂电池时按使用说明书正确实施。锂电池在正常状态下用于本公司产品中时可放心使用。备品保管时或将使用过的电池扔掉时会因使用不当使电池液体泄漏电池发热着火破裂从而对机器造成毁坏人员受伤。为防止事故的发生请一定遵守以下各项。1请不要将电池扔进火中。2请不要将电池放入水中。3请不要让电池沾上焊锡。4请不要加热。5请不要拆开。6请不要接错和极。7请不要加压使之变形。8请不要强制放电。9请不要充电。10请不要串联或并联使用。11电池要保管在避开高温高湿场合不要有结露。另外扔掉时在注意上述各项的同时也应注意以下几点按照不燃物或各自治体的条例等进行处理。1电池不能乱放为防止短路应将电池一个一个地放入塑料袋中。2电池的收装容器请使用绝缘材料。3不能混入其它金属材料钉子或铁丝等。4请勿被雨水淋湿。5不要将电池混入消防条例规定的危险物品中或放置在危险物品附近。6不要放置在离火近的地方或高温处。该划掉垃圾桶标记仅在欧盟内的国家有效。该划掉垃圾桶标记表示在废弃电池及蓄电池时必须与一般垃圾分别进行处理的意思。在欧盟对于使用过的电池及蓄电池有一个分别收集系统因此请按照各地区的规则正确处理电池及蓄电池。63
62维护检查为保证可编程控制器的长期使用建议您定期对其进行检查。定期检查时请实施表621所示的维护检查项目。检查时使用检查表以防止漏检同时对检查结果制作履历进行管理从而有助于在下一次检查时或发生故障时进行调查。表621维护检查项目检查部位使用年数检查内容判定基准10年以内10年以上PLC整个PLC确认PLC有无1污垢2灰尘3结露PLC无1污垢2灰尘3结露确认PLC的LED亮灯正常亮灯无熄灭的LED确认PLC机箱的破损罩盖等无变形破损确认PLC模块的安装状态模块的基板按照螺丝应没有松动牢固固定确认PLC的布线连接状态端子连接器有无脱开应切实插入电源输入电压的测量DC24V电源额定电压以内确认是否因机箱部分发热而变色机箱顶部应没有变色CPU前方面板部分的开关状态没有破损连接器松动端子台松动状态无松动被锁部分仍保持为锁定状态电池购买后长时间ex5年以上没有使用IO模块端子台松动锁定应未被解除没有发生倾斜布线光纤芯线的状态芯线没有破损是否破裂被夹住弯曲成半径10cm以下的状态拉扯通信电缆破损破裂屏蔽层的状态端子台的破损电缆应没有破损压扁屏蔽线有无断线屏蔽层有无部分露出端子台有无破损电源电缆破损破裂端子台的破损电缆应没有破损压扁端子台有无破损请根据使用年数对所示项目实施检查。64
621备品的定期检查将新品作为备品保管时其不会一直都保持为新品。尤其是电源模块会随着时间的转移而发生变化需要交替使用。此外建议您定期进行动作确认。这时建议您从本公司HP处获取各模块的生产中止信息考虑补充备品。表622为备品的检查项目表623为模块更换时的注意事项。表622备品的检查项目检查部位经过年数检查内容判定基准10年以内10年以上动作确认确认通电状态下的动作确认作业困难时请委托本公司进行动作确认和检修无异常版本确认版本不明时请向本公司确认支持对象设备的版本程序数据备份数据能否使用拥有对象设备的最新备份PCwin2中的对应模块TOYOPUCNano系列请根据经过年数对所示项目实施检查。表623模块更换时的注意事项No项目1准备好更换模块的使用说明书2备品和待更换装置的型号是否一致3软件版本是否一致4确保有足够放置拆下物品的空间放置时在下面垫上布纸以免其弄脏。5拆卸时注意不要让螺丝掉落。十字螺丝刀前端最好带磁。6端子台及连接器的配线要在拆除之前进行标记管及机箱前面标志的确认。请做好记录以便恢复。常会发生标记管信号名称不一致的问题。还会存在无标记管的物品。7将拆下的物品和更换品依次排列并将具有设定开关短路针的物品摆放在一起。8通过目测确认主板连接器和安装侧模块的连接器有无异常。9将具有锁定机构的连接器牢牢锁定。如仍有顾虑拆卸然后再重新确认安装。10更换后在接通电源之前再次检查布线连接器等是否有误。11更换CPU时请先准备好备份数据。12拆下的机器和模块按现状保存以备将来再次使用。13使用尺寸一致的工具。14不要对布线施加蛮力。15必须检查电压。此时请注意不要因疏忽而发生短路。16使用照明在明亮环境下作业。65PLC外围装置
7规格71一般规格No项目规格1电源PW2额定DC24V允许范围DC24V1520204V288V应使用符合以下基准的电源。IECEN609501EN50178ULClass2SELV2耗电量PW230VA以下输出最大负荷75A时关于各模块的消耗电流请参照各模块的规格。3周围温度055C4相对湿度1095但应无结露5大气环境应无腐蚀性气体抗震频率加速度振幅扫描次数6587Hz35mm10次1倍频程1分钟87150Hz98ms27耐冲击147ms23方向各3次项目试验基准试验规格静电放电抗扰度EN6100042大气放电8kV接触放电4kV辐射射频电磁场抗扰度EN610004380AM1kHz801000MHz10Vm1420GHz3Vm8抗噪音性以欧洲EMC指令EN611312为准注2EFTB抗扰度EN6100044信号线1kVDC电源线1kV7浪涌抗扰度EN6100045DC电源线DM05kVCM05kVIO电源线DM05kVCM05kVDCIO线CM10kV通信线CM10kV射频电磁场传导抗干扰性注1上述的一般规格为TOYOPUCNano共通规格。注2使装入本机的设备符合CE标志时请务必设置在控制盘内。注3所谓污染程度是指在设备的设置环境中导电性污染固体液体气体的增加程度。污染程度2是非导电性污染以及由于结露而发生临时性导电的环境。注4所谓过电压类别是指对设备的暂态过电压脉冲电压耐受性进行规定的类别。类别II的设备假定由固定设备电源插座等供电暂态过电压的允许值在50Vacdc以内时为500V在150Vac以内时为1500V在300Vac以内时为2500V。71EN610004610V01580MHz80AM1kHz工频磁场抗扰度试验EN610004830Am50Hz60Hz辐射发射的测量CISPR162310m法30230MHz40dBVm2301000MHz47dBVm9绝缘耐压AC1500V1分钟AC外部端子地线之间DC500V1分钟DC外部端子地线之间10绝缘电阻DC100V10M以上外部端子地线之间11瞬时停电PW2瞬时停电容许时间10ms以下瞬时停电间隔1s以上12污染程度污染程度2以下符合IEC611312注213过电压类别类别II以下符合IEC611312注314使用标高2000m以下15设置位置设置在控制盘内16海外基准请从本公司HP海外基准对应页面中确认最新的状况。URLhttpwwwjtektcojpproductstoyopuccsahtml
72CPU模块规格721基本规格722性能规格No项目规格1消耗电流1220mA2外形尺寸WHD55100121mmTOYOPUCNano标准2插槽尺寸3重量195gNo项目规格1程序模式存储程序模式参数设定的事件监控器功能2程序控制模式循环演算模式定期中断功能3程序语言SFCLDFBDST4输入输出控制模式图像寄存器模式5基本指令处理速度基本指令096ns1指令最快6基本指令20种7定时器计数器指令23种8应用指令700种以上数据形式BINBCD带符号BIN浮点单精度双精度容量字节文字双文字9变址寄存器有10程序容量程序库容量全部加起来540K字程序FB程序库标准程序库用户程序库11存储器备用电源通过非易失性存储器闪存MRAMFRAM进行备份12时钟功能有超级电容器可备用10天并可在选项中追加电池13外部输入输出点数4096点14内部输出点数86016点4096点38192点65536点15保持继电器点数6400点768点34096点16定时器功能计数器功能0165535秒00165535秒000165535秒165535秒合计9728点1655352560点32048点17链路继电器点数38912点10240点38192点18起动停止检查11776点2560点34096点19数据寄存器164KW12KW3128KW扩展缓冲寄存器256KW可直接指定闪存寄存器4Mbyte闪存存储器读取专用可以以64Kbyte为单位写入20链接寄存器6KW16Bit2KW321设备情报存储器8Mbyte22特殊模块安装个数通信链接模块MAX24链接消耗存储器无个数限制72
723内置通信规格通信端口通信功能内置以太网1L1Ethernet内置以太网2L2Ethernet内置串行1L3PCLINKCMPLINKMODBUSSIOSNIF选择式内置串行2L4PCLINKCMPLINKMODBUSSIO选择式周边装置用USB端口USBFullSpeed12Mbps固定USB存储器端口USBHighSpeed480MbpsFullSpeed12Mbps自动识别增设总线IOBUSEtherCAT基板的独自通信标准不可将通常的EtherCAT产品连接到增设总线上Ver100以后对应扩展总线BUSEXUSBHighSpeed480Mbps预定在Ver110以后对应724IO总线规格No项目规格1增设电缆长度机架间最大100mCat5ESTPLAN电缆2机架数量CPU机架1台增设机架7台合计8台3模块数量CPU机架机架No0最大7个增设机架机架No17各机架最大8个合计63个4通信链接数量最大24个链接51插槽的最大IO点数64点6IO点数最大4096点7空插槽可8空插槽的点数设定默认32点064点725与周边装置功能的对应功能对应事件监控器可使用强制ONOFF可使用扫描单位追踪可使用维护支持可使用IO记录仪可使用测试模式可使用生产指示功能可使用73
73电源模块的规格731性能规格No项目规格1输入电压DC24V1520204V288V2耗电量30VA以下3冲击电流25A以下4额定输出电压DC33V5最大输出电流75A6过电流保护7875A以上7效率80typ8RUN继电器额定电压电流DC24V1Amax9RUN继电器输出浪涌抑制器CR001uF10010外形尺寸WHD27121100mm不含突起物11重量145g732功能规格No项目规格1断电报警电源断开时熄灭PWRLED。2输入电压测量通过PWRLED来表示输入电压。输入电压大于312V时亮红灯312V288V或低于204V时亮橙灯288V204V时亮绿灯。3输入电流测量测量输入电流并保存在特殊寄存器S033中。4周围温度测量测量周围温度并保存在特殊寄存器S034中。5模块寿命诊断根据周围温度来诊断模块寿命模块寿命下降到剩余30时将点亮橙色的STATUSLED6事件日志功能将电源ON时间电源OFF时间发生电压暂降检出等事件时的日志等保存在内部存储器中。7定期日志功能将每个小时的输入电压备用电压输入电流周围温度的日志保存在内部存储器中。8通电时间将通电时间的日志保存在内部存储器中。74。
74输入模块规格741性能规格I12TUK1006名称规格DC24V数字输入模块I12识别代码07h线路数16点绝缘方式光电耦合器绝缘额定输入电压DC24V额定输入电流5mA使用电压范围DC18288VON电压ON电流168V以下35mA以下OFF电压OFF电流72V以上15mA以上输入电阻约5k响应时间OFFON1ms8ms可用1ms单位在每8点上进行设定初始值8msONOFF内部消耗电流33mA公用方式8点1个公用动作显示ON时LED亮灯极性无极性正极公用负极公用均可使用外部连接方法20针无螺丝端子台1个端子台附属于模块型号DFMC1510ST35LR菲尼克斯电气重量100g外部连接内部框图001234567C1C189ABCDEFC2C2内部线路C1DC24V8FC2DC24V7光电耦合器CPU方向75接插件针排列
I22TUK6948名称规格DC24V输入模块I22识别代码00h线路数32点绝缘方式光电耦合器绝缘额定输入电压DC24V额定输入电流5mA使用电压范围DC18288VON电压ON电流168V以下35mA以下OFF电压OFF电流72V以上15mA以上输入电阻约5k响应时间OFFON1ms8ms可用1ms单位在每8点上进行设定初始值8msONOFF内部消耗电流95mA公用方式8点1个公用动作显示ON时LED亮灯极性无极性正极公用负极公用均可使用外部连接方法40针无螺丝端子台1个端子台附属于模块型号DFMC1520ST35LR菲尼克斯电气重量120g7外部连接内部框图001234567C1C189ABCDEFC2C21011121314151617C3C318191A1B1C1D1E1FC4C4内部线路DC24V10DC24VC1DC24V8C2F17C3DC24V181FC4光电耦合器CPU方向76接插件针排列
SWTUK6965名称开关输入模块SW识别代码07h规格线路数响应时间内部消耗电流质量功能OFFONONOFF16点10ms以下注110ms以下注130mA100g开关No开关No模块前面开关的ONOFF状态可以作为直接输入信息放入本模块指定的地址。地址0X002X024X046X068X08AX0ACX0CEX0E地址1X013X035X057X079X09BX0BDX0DFX0F注1注2基于周边装置的应答速度的设定请设定为初始值的8ms。各输入开关为减少误操作拉杆的突出部分都控制在最小必要限度内并不是产品不良。另外各输入开关中并没有锁定机构因此请注意避免错误地操作相邻的开关。功能与开关配置图77
75输出模块规格751O19TUK1009性能规格名称规格晶体管输出模块COMO19识别代码0Bh线路数16点绝缘方式光电耦合器绝缘额定负荷电压DC12V24V使用负荷电压范围DC10288V最大负荷电流10A点4ACOMOFF时泄漏电流01mA以下ON时最大电压下降15V以下响应时间OFFON1ms以下ONOFF1ms以下内部消耗电流134mA外部供给电源DC1224V电涌抑制器公共端子输出之间齐纳二极管过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原短路诊断功能有详细内容请参照78短路诊断功能公用方式8点1个公共端子C107用公共端子C28F用公共端子注2公共端子保险丝额定4ACOM用于印刷电路板烧损保护所以不可更换动作显示ON时LED亮灯外部连接方法20针无螺丝端子台1个附属于模块型号DFMC1510ST35LR菲尼克斯电气重量100g注1注2每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝工作时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。公共端子C1作为交叉布线用途端子准备了2个引脚。交叉布线时各公共端子的输入电流请设定在4A以下。78
外部连接内部框图0234567C1C189ABCDEFC2PW1保险丝07保险丝C28FPWC1内部线路输出控制短路诊断热敏开关FET光电耦合器LL注3LL注3使用其他电源时请勿对公共端子间进行短接。79接插件针排列
752O18TUK1008开发中名称规格晶体管输出模块COMO18识别代码0Ah线路数16点绝缘方式光电耦合器绝缘额定负荷电压DC12V24V使用负荷电压范围DC10288V最大负荷电流10A点4ACOMOFF时泄漏电流01mA以下ON时最大电压下降15V以下响应时间OFFON1ms以下ONOFF1ms以下内部消耗电流134mA外部供给电源DC1224V电涌抑制器公共端子输出之间齐纳二极管过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原短路诊断功能有详细内容请参照78短路诊断功能公用方式8点1个公共端子C107用公共端子C28F用公共端子注2公共端子保险丝额定4ACOM用于印刷电路板烧损保护所以不可更换动作显示ON时LED亮灯外部连接方法20针无螺丝端子台1个附属于模块型号DFMC1510ST35LR菲尼克斯电气重量100g注1注2每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝工作时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。公共端子C1作为交叉布线用途端子准备了2个引脚。交叉布线时各公共端子的输入电流请设定在4A以下。暂定外部连接内部方框图01234567C1P189ABCDEFC2P2内部线路短路诊断输出控制光电耦合器P107L热敏开关FETL保险丝FC2C1P28LL保险丝710接插件针排列
753O29TUK6947名称规格晶体管输出模块COMO29识别代码09h线路数32点绝缘方式光电耦合器绝缘额定负荷电压DC12V24V使用负荷电压范围DC10288V最大负荷电流05A点2ACOMOFF时泄漏电流01mA以下ON时最大电压下降15V以下响应时间OFFON1ms以下ONOFF1ms以下内部消耗电流263mA外部供给电源DC1224V电涌抑制器CE间齐纳二极管过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原短路诊断功能有详细内容请参照78短路诊断功能公用方式8点1个公用公共端子保险丝额定4ACOM用于印刷电路板烧损保护所以不可更换动作显示ON时LED亮灯外部连接方法40针无螺丝端子台1个附属于模块型号DFMC1520ST35LR菲尼克斯电气重量200g注1注2每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝工作时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。公共端子C1C3作为交叉布线用途端子准备了2个引脚。但是交叉布线时的合计电流请设定在4A以下。711
外部连接内部框图01234567C1C189ACDEFC2C21011121314151617C3C318191A1B1C1D1E1FC4PWB保险丝07C内部线路光电耦合器输出控制短路诊断1热敏开关FETLL注318保险丝C4L1FPWL注3使用其他电源时请勿对公共端子间进行短接。712接插件针排列
754O28TUK1010开发中名称规格晶体管输出模块COMO28识别代码08h线路数32点绝缘方式光电耦合器绝缘额定负荷电压DC12V24V使用负荷电压范围DC10288V最大负荷电流05A点2ACOMOFF时泄漏电流01mA以下ON时最大电压下降15V以下响应时间OFFON1ms以下ONOFF1ms以下内部消耗电流244mA外部供给电源DC1224V电涌抑制器CE间齐纳二极管过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原短路诊断功能有详细内容请参照78短路诊断功能公用方式8点1个公用公共端子保险丝额定32ACOM用于印刷电路板烧损保护所以不可更换动作显示ON时LED亮灯外部连接方法40针无螺丝端子台1个附属于模块型号DFMC1520ST35LR菲尼克斯电气重量120g注1注2每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝工作时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。公共端子C1C3作为交叉布线用途端子准备了2个引脚。但是交叉布线时的合计电流请设定在4A以下。713
暂定外部连接内部方框图01234567C1P189ACDEFC2P21011121314151617C3P318191A1B1C1D1E1FC4P4B内部线路短路诊断输出控制光电耦合器FETP107L热敏开关L保险丝1FC4C1P418LL保险丝714接插件针排列
755O12TUK1007名称规格继电器接点输出模块O12识别代码0Ch线路数16点绝缘方式继电器绝缘额定开关电压额定开关电流DC24V2A点5ACOM最小开关负荷DC5V10mA最大开闭负载DC30V响应时间OFFON13ms以下DC24V时ONOFF13ms以下DC24V时继电器寿命电动的电阻负荷感应负载20万次以上机械性2000万回以上最大开关频率ON时1秒以上OFF时1秒以上电涌抑制器无内部消耗电流630mA公用方式8点1个公用公共端子保险丝额定63ACOM用于印刷电路板烧损保护所以不可更换动作显示ON时LED亮灯外部连接方法20针无螺丝端子台1个附属于模块型号DFMC1510ST35LR菲尼克斯电气重量150g注1注2注3保险丝工作时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。保险丝是不可更换型的所以请更换模块。进行感应负载开闭时请使用二极管以用于电涌抑制器。不使用保险丝熔断功能时不需进行P1P2的连接。外部连接内部框图01234567C1P189ABCDEFC2P2内部线路输出控制短路诊断0L7LC1DC24VP1保险丝保险丝熔断检测光电耦合器CPU方向8C2P2DC24VLFL715接插件针排列
76输入输出模块规格761IO329TUK6952基本规格7611输入性能规格No项目规格1内部消耗电流270mA2动作显示ON时LED亮灯输入16点输出16点合计32点依次用开关切换显示3外部连接方法富士通FCN360型40针矩形连接器4重量150gNo项目规格1线路数32点2绝缘方式光电耦合器绝缘3额定输入电压DC24V4额定输入电流5mA5使用电压范围DC18288V6ON电压ON电流168V以下35mA以下7OFF电压OFF电流72V以上15mA以上8输入电阻约5k9响应时间OFFON18ms可用1ms单位在每8点上进行设定ONOFF10公用方式16点公用1个COM1COM311极性负公共端子12引脚X00X0FCOM1X20X2FCOM313同时ON点数24V时13点COMX000X00FCOM1X020X02FCOM3DC24VDC24V光电耦合器光电耦合器716
7612输出性能规格No项目规格1线路数32点2绝缘方式光电耦合器绝缘3输出模式FET开路漏极输出4额定负荷电压DC24V5使用负荷电压范围DC216288V6最大负荷电流03A点2ACOM7OFF时泄漏电流01mA以下8ON时最大电压下降15V以下9响应时间OFFON1ms以下ONOFF1ms以下10电涌抑制器CE间齐纳二极管11公用方式16点1公用COM2COM412公共端子保险丝额定4ACOM用于模块烧损保护所以不可更换13极性正公共端子14引脚Y10Y1FCOM2PWR2Y30Y3FCOM4PWR415短路诊断功能有详细内容请参照78短路诊断功能16过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原注1每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝熔断时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。保险丝COM2Y010Y01FPWR2COM4LY03F内部线路输出控制短路诊断热敏开关FETLL光电耦合器Y030LPWR4717
7613针排列针排列01F正面左侧接插件203F正面右侧接插件从模块正面看时针号码信号名称针号码信号名称针号码信号名称针号码信号名称A1COM224VB1PWR20VA1COM424VB1空白A2COM224VB2COM10VA2COM424VB2COM3PWR40VA3COM224VB3空白A3COM424VB3空白A4COM224VB4空白A4COM424VB4空白A5Y1FB5X0FA5Y3FB5X2FA6Y1EB6X0EA6Y3EB6X2EA7Y1DB7X0DA7Y3DB7X2DA8Y1CB8X0CA8Y3CB8X2CA9Y1BB9X0BA9Y3BB9X2BA10Y1AB10X0AA10Y3AB10X2AA11Y19B11X09A11Y39B11X29A12Y18B12X08A12Y38B12X28A13Y17B13X07A13Y37B13X27A14Y16B14X06A14Y36B14X26A15Y15B15X05A15Y35B15X25A16Y14B16X04A16Y34B16X24A17Y13B17X03A17Y33B17X23A18Y12B18X02A18Y32B18X22A19Y11B19X01A19Y31B19X21A20Y10B20X00A20Y30B20X20关于公共端子COM2为Y101FCOM1为X000FCOM4为Y303FCOM3PWR4为X202F的公共端子及Y303F的POWER端子0V。PWR2是Y101F的POWER端子0V。作为外部连接用连接器可使用下述连接器。引脚配置与PC10系列的输入输出模块IO329GTHK6410相比虽然在203F的A3A4中追加了COM424V但用以往的配线仍然会动作。以往配线时303F的电流规格为005A点08ACOM。生产商型号规格富士通元件株式会社FCN367J040AUFW40针方形连接器压接用718
762IO328TUK1005开发中基本规格7621输入性能规格No项目规格1内部消耗电流270mA2动作显示ON时LED亮灯输入16点输出16点合计32点依次用开关切换显示3外部连接方法富士通FCN360型40针矩形连接器4重量150gNo项目规格1线路数32点2绝缘方式光电耦合器绝缘3额定输入电压DC24V4额定输入电流5mA5使用电压范围DC18288V6ON电压ON电流168V以下35mA以下7OFF电压OFF电流72V以上15mA以上8输入电阻约5k9响应时间OFFON18ms可用1ms单位在每8点上进行设定ONOFF10公用方式16点公用1个COM1COM311极性正公共端子12引脚X00X0FCOM1X20X2FCOM313同时ON点数24V时13点COMDC24VX000X00FCOM1X020X02F光电耦合器光电耦合器COM3DC24V719
7622输出性能规格No项目规格1线路数32点2绝缘方式光电耦合器绝缘3输出模式FET开路漏极输出4额定负荷电压DC24V5使用负荷电压范围DC216264V6最大负荷电流03A点2ACOM7OFF时泄漏电流01mA以下8ON时最大电压下降15V以下9响应时间OFFON1ms以下ONOFF1ms以下10电涌抑制器CE间齐纳二极管11公用方式16点1公用COM2COM412公共端子保险丝额定4ACOM用于模块烧损保护所以不可更换13极性负公共端子14引脚Y10Y1FCOM2PWR2Y30Y3FCOM4PWR415短路诊断功能有详细内容请参照78短路诊断功能16过电流保护2A通过热敏开关FET保护注1在使输出为OFF之前保持保护状态并通过输出为ON进行复原注1每个输出点的过电流保护虽然是2A但每个公共端子的电流瞬间超过5A时公共端子上的保险丝有时会先于通过热敏开关FET进行的过电流保护而发挥作用。保险丝工作时请更换模块。保险丝熔断时IO电源状态监视器的相关位数将变为OFF详细内容请参照77IO电源状态监视器功能。过电流保护动作时有可能是外部配线发生短路或负载容量超出了额定值因此请在确认连接设备及配线等之后再进行复位。PWR2Y010Y01FCOM2PWR4Y030Y03FCOM4内部线路短路诊断输出控制光电耦合器LL热敏开关FET保险丝LL720
7623针脚阵列暂定针排列01F正面左侧接插件203F正面右侧接插件从模块正面看时针号码信号名称针号码信号名称针号码信号名称针号码信号名称A1COM20VB1PWR224VA1COM40VB1PWR424VA2COM20VB2COM124VA2COM40VB2COM324VA3COM20VB3空白A3COM40VB3空白A4COM20VB4空白A4COM40VB4空白A5Y1FB5X0FA5Y3FB5X2FA6Y1EB6X0EA6Y3EB6X2EA7Y1DB7X0DA7Y3DB7X2DA8Y1CB8X0CA8Y3CB8X2CA9Y1BB9X0BA9Y3BB9X2BA10Y1AB10X0AA10Y3AB10X2AA11Y19B11X09A11Y39B11X29A12Y18B12X08A12Y38B12X28A13Y17B13X07A13Y37B13X27A14Y16B14X06A14Y36B14X26A15Y15B15X05A15Y35B15X25A16Y14B16X04A16Y34B16X24A17Y13B17X03A17Y33B17X23A18Y12B18X02A18Y32B18X22A19Y11B19X01A19Y31B19X21A20Y10B20X00A20Y30B20X20关于公共端子COM2为Y101FCOM1为X000FCOM4为Y303FCOM3PWR4为X202F的公共端子及Y303F的POWER端子0V。PWR2是Y101F的POWER端子0V。作为外部连接用连接器可使用下述连接器。引脚配置与PC10系列的输入输出模块IO329GTHK6410相比虽然在203F的A3A4中追加了COM424V但用以往的配线仍然会动作。以往配线时303F的电流规格为005A点08ACOM。生产商型号规格富士通元件株式会社FCN367J040AUFW40针方形连接器压接用721
77IO电源状态监视器功能输出模块O29O28O12O18O19输入输出模块IO329IO328每输出8点IO电源状态就会保存在表771的地址内。另外各Bit的详细内容请参照表772。如果在IO电源中输入24V则会在对象Bit中记录下1。表771IO电源状态地址寄存器地址IO电源状态信息地址1内容支架号HF8L70支架号HF8L70GS1D100GS1D11GS1D12GS1D13GS1D14GS1D15GS1D16GS1D17Slot1Slot0GS1D30Slot1Slot0Slot3Slot2GS1D31Slot3Slot2Slot5Slot4GS1D32Slot5Slot4Slot7Slot6GS1D33Slot7Slot6Slot9Slot8GS1D34Slot9Slot8SlotBSlotAGS1D35SlotBSlotASlotDSlotCGS1D36SlotDSlotCSlotFSlotEGS1D37SlotFSlotEGS1D502GS1D51GS1D52GS1D53GS1D54GS1D55GS1D56GS1D57Slot1Slot0GS1D703Slot1Slot0Slot3Slot2GS1D71Slot3Slot2Slot5Slot4GS1D72Slot5Slot4Slot7Slot6GS1D73Slot7Slot6Slot9Slot8GS1D74Slot9Slot8SlotBSlotAGS1D75SlotBSlotASlotDSlotCGS1D76SlotDSlotCSlotFSlotEGS1D77SlotFSlotEGS1D904GS1D91GS1D92GS1D93GS1D94GS1D95GS1D96GS1D97Slot1Slot0GS1DB05Slot1Slot0Slot3Slot2GS1DB1Slot3Slot2Slot5Slot4GS1DB2Slot5Slot4Slot7Slot6GS1DB3Slot7Slot6Slot9Slot8GS1DB4Slot9Slot8SlotBSlotAGS1DB5SlotBSlotASlotDSlotCGS1DB6SlotDSlotCSlotFSlotEGS1DB7SlotFSlotEGS1DD06GS1DD1GS1DD2GS1DD3GS1DD4GS1DD5GS1DD6GS1DD7Slot1Slot0GS1DF07Slot1Slot0Slot3Slot2GS1DF1Slot3Slot2Slot5Slot4GS1DF2Slot5Slot4Slot7Slot6SlotBSlotAGS1DF3Slot7Slot6Slot9Slot8GS1DF4Slot9Slot8GS1DF5SlotBSlotASlotDSlotCGS1DF6SlotDSlotCSlotFSlotEGS1DF7SlotFSlotE表772IO电源状态地址bitBit7FBit6EBit5DBit4CBit3BBit2ABit19Bit08GS1DY383FY3037Y282FY2027Y18Y1FY10Y17Y080FY0007722
各输出输入输出模块的例子如下所示。以各公共端子的电源状态来表示。16点输出模块O18O19的例子安装在机架0插槽1中32点输出模块O28O29的例子安装在机架1插槽2中64点输入输出模块IO329IO328的例子安装在机架7插槽F中IO电源状态监视器功能的对应Ver如下所示。输出输入输出模块Ver140以上CPUVer130以上SLVer110以上周边装置PCwin2Ver12R03以上O29是从Ver140B开始硬件变更的所以不能从Ver130以下开始进行版本升级软件更新。Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1D10HY080FC2Y0007C1Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1D31LY181FC4Y101FC3Y080FC2Y0007C1Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1DF7HY303FC4Y303FC4Y101FC2Y101FC2723
78短路诊断功能输出模块但是O12除外输入输出模块的输出中具有以下的短路诊断功能。输出为ON时检出接地故障引起的过电流的功能输出为OFF时检出IO电源和有无短路的功能检出有短路时记录到表781中记载的寄存器中。检出短路后结果将被保留锁存。清除短路诊断的结果时请解除短路状态并在将IO电源置于OFF后再进行短路诊断结果重置参照781或CPU重置。短路诊断功能的对应Ver如下所示。输出输入输出模块Ver140以上O29为Ver140B以上CPUVer130以上SLVer110以上周边装置PCwin2Ver12R03以上O29是从Ver140B开始硬件变更的所以不能从Ver130以下开始进行版本升级软件更新。781设定方法从PCwin2的IO模块设定中选择输出模块O18O19O28O29中的任意一个。点击上述红框内的诊断设定。请在希望启用的诊断功能的bit上进行勾选。IO328IO329时上述设定画面的000F分别表示Y010Y01F101F分别表示Y030Y03F的短路诊断功能有效无效设定。724
782783784短路诊断功能有无寄存器将内置有短路诊断功能的IO模块所安装的插槽bit置于ON。机架0的例子短路诊断结果寄存器各Slot使输出发生短路的IO模块的对象插槽bit为ON。机架0的例子短路诊断结果寄存器各点使输出发生短路的点bit为ON。机架0插槽1的例子短路诊断结果重置寄存器通过使短路诊断结果重置寄存器的相关bit为ON即可对诊断结果进行重置。请解除短路状态并在将IO电源置于OFF之后再执行重置。机架0的例子Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1D0ESlot7Slot6Slot5Slot4Slot3Slot2Slot1Slot0Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1D0FSlot7Slot6Slot5Slot4Slot3Slot2Slot1Slot0Bit15Bit14Bit1Bit0GS1E04Y00FY00EY001Y000GS1E05Y01FY01EY011Y010GS1E06Y02FY02EY021Y020GS1E07Y03FY03EY031Y030785Bit7Bit6Bit5Bit4Bit3Bit2Bit1Bit0GS1D1FSlot7Slot6Slot5Slot4Slot3Slot2Slot1Slot0725
地址GS1D0EGS1D0FGS1D1FGS1D4EGS1D4FGS1D5FGS1D8EGS1D8FGS1D9FGS1DCEGS1DCFGS1DDFGS1E00GS1E01GS1E02GS1E03GS1E04GS1E05GS1E06GS1E07GS1E08GS1E09GS1E0AGS1E0BGS1E0CGS1E0DGS1E0EGS1E0FGS1E10GS1E11GS1E12GS1E13GS1E14GS1E15GS1E16GS1E17GS1E18GS1E19GS1E1AGS1E1BGS1E1CGS1E1DGS1E1EGS1E1FGS1E20GS1E21GS1E22GS1E23GS1E24GS1E25GS1E26GS1E27GS1E28GS1E29GS1E2AGS1E2BGS1E2C表781机架0机架2机架4机架6机架0短路诊断功能寄存器内容地址内容短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断结果SlotSlotSlotSlotSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9SlotASlotBGS1D2EGS1D2FGS1D3FGS1D6EGS1D6FGS1D7FGS1DAEGS1DAFGS1DBFGS1DEEGS1DEFGS1DFF0FGS1E40101FGS1E41202FGS1E42303FGS1E430FGS1E44101FGS1E45202FGS1E46303FGS1E470FGS1E48101FGS1E49202FGS1E4A303FGS1E4B0FGS1E4C101FGS1E4D202FGS1E4E303FGS1E4F0FGS1E50101FGS1E51202FGS1E52303FGS1E530FGS1E54101FGS1E55202FGS1E56303FGS1E570FGS1E58101FGS1E59202FGS1E5A303FGS1E5B0FGS1E5C101FGS1E5D202FGS1E5E303FGS1E5F0FGS1E60101FGS1E61202FGS1E62303FGS1E630FGS1E64101FGS1E65202FGS1E66303FGS1E670FGS1E68101FGS1E69202FGS1E6A303FGS1E6B0FGS1E6C机架1机架3机架5机架7机架1短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断功能有无短路诊断结果各短路诊断结果重置短路诊断结果SlotSlotSlotSlotSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9SlotASlotB0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F726
地址内容地址内容GS1E2DGS1E2EGS1E2FGS1E30GS1E31GS1E32GS1E33GS1E34GS1E35GS1E36GS1E37GS1E38GS1E39GS1E3AGS1E3BGS1E3CGS1E3DGS1E3EGS1E3FGS1E80GS1E81GS1E82GS1E83GS1E84GS1E85GS1E86GS1E87GS1E88GS1E89GS1E8AGS1E8BGS1E8CGS1E8DGS1E8EGS1E8FGS1E90GS1E91GS1E92GS1E93GS1E94GS1E95GS1E96GS1E97GS1E98GS1E99GS1E9AGS1E9BGS1E9CGS1E9DGS1E9EGS1E9FGS1EA0GS1EA1GS1EA2GS1EA3GS1EA4GS1EA5GS1EA6GS1EA7机架0短路诊断结果SlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9101FGS1E6D202FGS1E6E303FGS1E6F0FGS1E70101FGS1E71202FGS1E72303FGS1E730FGS1E74101FGS1E75202FGS1E76303FGS1E770FGS1E78101FGS1E79202FGS1E7A303FGS1E7B0FGS1E7C101FGS1E7D202FGS1E7E303FGS1E7F0FGS1EC0101FGS1EC1202FGS1EC2303FGS1EC30FGS1EC4101FGS1EC5202FGS1EC6303FGS1EC70FGS1EC8101FGS1EC9202FGS1ECA303FGS1ECB0FGS1ECC101FGS1ECD202FGS1ECE303FGS1ECF0FGS1ED0101FGS1ED1202FGS1ED2303FGS1ED30FGS1ED4101FGS1ED5202FGS1ED6303FGS1ED70FGS1ED8101FGS1ED9202FGS1EDA303FGS1EDB0FGS1EDC101FGS1EDD202FGS1EDE303FGS1EDF0FGS1EE0101FGS1EE1202FGS1EE2303FGS1EE30FGS1EE4101FGS1EE5202FGS1EE6303FGS1EE7机架1短路诊断结果SlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F机架2机架3727
地址内容地址内容GS1EA8GS1EA9GS1EAAGS1EABGS1EACGS1EADGS1EAEGS1EAFGS1EB0GS1EB1GS1EB2GS1EB3GS1EB4GS1EB5GS1EB6GS1EB7GS1EB8GS1EB9GS1EBAGS1EBBGS1EBCGS1EBDGS1EBEGS1EBFGS1F00GS1F01GS1F02GS1F03GS1F04GS1F05GS1F06GS1F07GS1F08GS1F09GS1F0AGS1F0BGS1F0CGS1F0DGS1F0EGS1F0FGS1F10GS1F11GS1F12GS1F13GS1F14GS1F15GS1F16GS1F17GS1F18GS1F19GS1F1AGS1F1BGS1F1CGS1F1DGS1F1EGS1F1F机架2短路诊断结果SlotASlotASlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot70FGS1EE8101FGS1EE9202FGS1EEA303FGS1EEB0FGS1EEC101FGS1EED202FGS1EEE303FGS1EEF0FGS1EF0101FGS1EF1202FGS1EF2303FGS1EF30FGS1EF4101FGS1EF5202FGS1EF6303FGS1EF70FGS1EF8101FGS1EF9202FGS1EFA303FGS1EFB0FGS1EFC101FGS1EFD202FGS1EFE303FGS1EFF0FGS1F40101FGS1F41202FGS1F42303FGS1F430FGS1F44101FGS1F45202FGS1F46303FGS1F470FGS1F48101FGS1F49202FGS1F4A303FGS1F4B0FGS1F4C101FGS1F4D202FGS1F4E303FGS1F4F0FGS1F50101FGS1F51202FGS1F52303FGS1F530FGS1F54101FGS1F55202FGS1F56303FGS1F570FGS1F58101FGS1F59202FGS1F5A303FGS1F5B0FGS1F5C101FGS1F5D202FGS1F5E303FGS1F5F机架3短路诊断结果SlotASlotASlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot5Slot6Slot70F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F机架4机架5728
地址内容地址内容GS1F20GS1F21GS1F22GS1F23GS1F24GS1F25GS1F26GS1F27GS1F28GS1F29GS1F2AGS1F2BGS1F2CGS1F2DGS1F2EGS1F2FGS1F30GS1F31GS1F32GS1F33GS1F34GS1F35GS1F36GS1F37GS1F38GS1F39GS1F3AGS1F3BGS1F3CGS1F3DGS1F3EGS1F3FGS1F80GS1F81GS1F82GS1F83GS1F84GS1F85GS1F86GS1F87GS1F88GS1F89GS1F8AGS1F8BGS1F8CGS1F8DGS1F8EGS1F8FGS1F90GS1F91GS1F92GS1F93GS1F94GS1F95GS1F96GS1F97机架4短路诊断结果Slot8Slot9Slot9SlotASlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot50FGS1F60101FGS1F61202FGS1F62303FGS1F630FGS1F64101FGS1F65202FGS1F66303FGS1F670FGS1F68101FGS1F69202FGS1F6A303FGS1F6B0FGS1F6C101FGS1F6D202FGS1F6E303FGS1F6F0FGS1F70101FGS1F71202FGS1F72303FGS1F730FGS1F74101FGS1F75202FGS1F76303FGS1F770FGS1F78101FGS1F79202FGS1F7A303FGS1F7B0FGS1F7C101FGS1F7D202FGS1F7E303FGS1F7F0FGS1FC0101FGS1FC1202FGS1FC2303FGS1FC30FGS1FC4101FGS1FC5202FGS1FC6303FGS1FC70FGS1FC8101FGS1FC9202FGS1FCA303FGS1FCB0FGS1FCC101FGS1FCD202FGS1FCE303FGS1FCF0FGS1FD0101FGS1FD1202FGS1FD2303FGS1FD30FGS1FD4101FGS1FD5202FGS1FD6303FGS1FD7机架5短路诊断结果Slot8Slot9Slot9SlotASlotBSlotCSlotDSlotESlotFSlot0Slot1Slot2Slot3Slot4Slot50F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F机架6机架7729
地址内容地址内容GS1F98GS1F99GS1F9AGS1F9BGS1F9CGS1F9DGS1F9EGS1F9FGS1FA0GS1FA1GS1FA2GS1FA3GS1FA4GS1FA5GS1FA6GS1FA7GS1FA8GS1FA9GS1FAAGS1FABGS1FACGS1FADGS1FAEGS1FAFGS1FB0GS1FB1GS1FB2GS1FB3GS1FB4GS1FB5GS1FB6GS1FB7GS1FB8GS1FB9GS1FBAGS1FBBGS1FBCGS1FBDGS1FBEGS1FBF机架6短路诊断结果Slot6Slot7Slot8Slot9SlotASlotBSlotCSlotDSlotESlotF0FGS1FD8101FGS1FD9202FGS1FDA303FGS1FDB0FGS1FDC101FGS1FDD202FGS1FDE303FGS1FDF0FGS1FE0101FGS1FE1202FGS1FE2303FGS1FE30FGS1FE4101FGS1FE5202FGS1FE6303FGS1FE70FGS1FE8101FGS1FE9202FGS1FEA303FGS1FEB0FGS1FEC101FGS1FED202FGS1FEE303FGS1FEF0FGS1FF0101FGS1FF1202FGS1FF2303FGS1FF30FGS1FF4101FGS1FF5202FGS1FF6303FGS1FF70FGS1FF8101FGS1FF9202FGS1FFA303FGS1FFB0FGS1FFC101FGS1FFD202FGS1FFE303FGS1FFF机架7短路诊断结果Slot6Slot7Slot8Slot9SlotASlotBSlotCSlotDSlotESlotF0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F0F101F202F303F730
79791基本规格选择器模块规格在安装有TOYOPUCNanoCPU的基板之外增设基板机架时将使用选择器模块SL。No项目规格1消耗电流290mA2外形尺寸WHD27121100mm不含突起物3重量100g792功能规格No项目规格1通信速度100Mbps2连接机架数量CPU机架最大7台增设机架合计8台机架3可安装模块所有的模块4通信规格EtherCAT基板的独自通信标准不可将通常的EtherCAT产品连接到增设总线上5协议本公司专属规格6增设电缆长度机架间最大100mCat5ESTPLAN电缆710基板规格基板根据可安装的输入输出模块数量有4插槽基板4BS6插槽基板6BS8插槽基板8BS等几种基板。CPU基板与增设基板的任意一个皆可使用。基板与模块的嵌合部多少会有点左右晃动这是连接器减震构造的原因不是产品不良。规格项目8BS6BS4BSTUR6943TUR6966TUR6967输入输出模块特殊模块通信模块可安装数量注18个6个4个外形尺寸WHD不含突起物311511012255511012199511012安装尺寸WHmm293586237586181586安装孔6锁眼形孔M5螺丝用质量kg500g415g325g注1安装TOYOPUCNanoCPU的CPU机架机架No0将占用插槽1所以可设置的输入输出模块数量将减少一个。731
8CPU功能81CPU工作模式CPU的工作模式有兼容模式并可根据需要选择程序容量。兼容模式追加了程序容量的选择及闪存寄存器。闪存尺寸04096Kbyte可以64Kbyte为单位进行设定未使用时选择0。CPU工作模式与程序容量数据容量的关系另外作为CPU工作模式可以通过参数来选择程序23的执行与否以及与RUN信号的连锁。1程序23可以通过参数选择程序的执行。如果选择了无效应用程序程序2或程序3将不执行。2程序23可以通过参数选择与RUN信号的连锁。选择了连锁的程序停止后连锁的RUN信号OFF所有程序停止。模式程序容量KW基本区域数据容量KW扩充区域数据容量KWPRG1PRG2PRG3PRG1PRG2PRG3继电器寄存器数据缓冲区兼容模式6060603232321612825612060018000项目选择值程序执行1程序1有效执行固定程序2有效无效执行非执行程序3有效无效执行非执行RUN信号连锁2程序1连锁固定程序2连锁非连锁程序3连锁非连锁818
811程序数据的分割方式TOYOPUCNano通过设定CPU的动作模式可以根据需要选择程序容量数据容量。兼容模式PRG1程序160KWPRG2输入输出0128KWPRG3程序260KW程序360KW基本区域32KW基本区域32KW共享区域400KW基本区域32KW共享区域闪存器2048KW程序容量可变P160KWP1120KWP1180KWP260KWP260KWP20KWP360KWP30KWP30KW82与PCwin2之间的通信容量可变04096Kbyte可以64Kbyte为单位进行设定
8128121程序的执行运算处理方法可执行多个程序最多可以执行3个顺序程序。按程序1程序2程序3终端处理的顺序执行反复进行操作。程序的个数以及执行非执行1程序2和程序3由CPU工作模式的参数设定。此外CPU工作模式的参数也可以设定程序2和程序3与RUN信号的连锁非连锁2。1程序23可以通过参数选择程序的执行。选择了无效未执行的程序程序2或程序3不执行。2程序23可以通过参数选择与RUN信号之间的连锁。选择了连锁的程序停止后连锁的RUN信号OFF所有程序停止。程序的执行顺序1接通电源或复位启动更新输入输出数据PRG1PRG3初始程序3初始程序3STARTSTART主程序END主程序ENDLABEL4LABEL4子程序子程序RETRETPENDPEND仅限第1扫描33初始程序是只在接通电源时或复位启动时执行1次的顺序程序。4PRG2初始程序3START主程序ENDLABEL4子程序RETPEND仅限仅限第1扫第1扫描3描3CALLRET表示子程序的标签号码。每个程序有1个子程序S000S127的128个转移和子程序通用。可制作EL0000EL1023共1024个。83
2程序的执行与非执行程序2和程序3的执行非执行由CPU工作模式的参数设定。选择非执行的程序不执行。执行程序13执行程序13执行程序12只执行程序13程序与RUN信号的连锁程序2和程序3可以通过参数选择与RUN信号的连锁。选择了连锁的程序停止后连锁的RUN信号OFF所有程序停止。PRG1执行固定PRG2执行PRG3执行终端处理更新输入输出数据PRG1执行固定PRG2非执行PRG3执行终端处理更新输入输出数据PRG1执行固定PRG2执行PRG3非执行终端处理更新输入输出数据PRG1执行固定PRG2非执行PRG3非执行终端处理更新输入输出数据与RUN信号的连锁参数设定程序停止时的RUN信号状态程序1程序2程序3程序1程序2程序3连锁固定连锁连锁OFFOFFOFF连锁固定非连锁连锁OFF继续OFF连锁固定连锁非连锁OFFOFF继续连锁固定非连锁非连锁OFF继续继续4执行SFC程序在各程序的主程序结束时执行用SFC编程的程序。START主程序END84SFC程序
8122子程序在顺序程序中有几处相同的处理时可将该部分汇总在一处作为子程序。如果在程序中有CALL命令则使用CALL命令执行在标签上已指定子程序号码的子程序用RET命令返回原来的程序处理。处理顺序1524子程序号码为S000S127也可采用下图所示嵌套nest结构。处理顺序16反复进行以下26的操作5243STARTCALLSCALLSEND6反复进行以下26的操作3LABELS子程序RETSTARTCALLSENDLABELSCALLSRETLABELSRET85
8123中断程序定期中断在兼容模式中可用1ms单位设定的定期中断为max4。中断程序以LabelI0I3开始可以RETI命令结束的子程序形式记述P1P2P3中的任意一个。但是禁止在P1P2P3上翻倍。中断周期可分别在065535ms单位为1ms范围内进行设定它们可通过PCwin2作为参数进行设定。此时如果指定为0则表明设定为没有中断。允许中断时根据其周期分别执行具有中断号码I0I3标签的程序用RETI命令返回原来的程序处理。程序1程序2程序3STARTENDPENDSTARTENDPENDSTARTENDPENDLabelI1RETILabelI0RETILabelI2RETI86
中断程序的注意事项1可通过应用命令中的DIEIPDIPEI命令禁止或允许执行中断程序。详细内容参见编程手册T307。2由于在接通电源或复位启动时处于禁止执行中断程序的状态DI状态为了执行中断程序需要先执行EI命令。3中断响应速度数s数10s。但符合下列条件时最长可能延迟至100应予以注意。1系统侧的中断处理数s数10s2命令执行中在执行基本命令和应用命令过程中发生中断时会在该命令的处理结束后再执行中断程序。因此使用块传送命令等处理时间较长的应用用命令等时中断响应时间会延迟应予以注意。特别是在执行特殊模块用命令SPRSPW等过程中有时也有延迟数100s的情况。4中断原因的优先顺序如下所示。如有顺序比执行中的中断程序靠前的中断处于EI状态则优先处理该中断。另一方面即使顺序比执行中的中断程序靠后的中断处于EI状态也要等到执行完RETI命令之后再进行处理。前优先顺序后中断等级64656667中断号码I0I1I2I387
5即使在执行中断程序过程中也可以处于允许中断状态EI状态。因此在执行中断过程中只要到了优先顺序靠前的中断程序的执行时间就会执行优先顺序靠前的中断程序。优先顺序中断程序I0中断程序I1中断程序I2中断程序I3主程序时间中断程序I2执行中断程序I2结束中断程序I2执行过程中到达优先顺位较高的I0的执行时间后就会执行I0。中断程序I0结束后会从中途开始执行I2余下的程序。在执行中断程序过程中不想执行其它中断程序时应使用禁止部分中断PDI和允许部分中断PEI。例LABELI3PDIPEIRETI64d3d64d3d6中断程序的执行以图像存储器为对象。因此在中断处理中运算的输出数据无法在扫描1次END命令结束之前输出到外部输出模块。要立即向外部输出中断处理结果时应在RETI命令之前使用输入输出控制用命令RIORIROARIO。88
8124等速扫描功能通过在P1的START命令之后立即记述下列命令进行等速扫描。P1SYS20h时间0用BCD设定以ms为单位的扫描定时间上例中为10ms指定等速扫描20h设定了小于实际扫描时间的值时当然无法进行等速扫描因此应设定比扫描时间max值更大的数值。上次的扫描时间超时时在执行本命令时应打开V56CY。不得设定多个时间。注意扫描时间的设定值范围为199。OP2的有效数字为2位。设定3位以上的数值时则最上位的数值将被忽略。STARTSYS2010089
813程序之间的数据利用由于TOYOPUCNano可以执行多个程序因此最多可执行3个顺序程序。各程序之间的数据无需特殊设定便可互相利用。12互换模式基本区域的数据是按各程序独立的数据。输入输出区域和扩充区域的数据为各程序共享数据。11基本区域顺序程序输入输出区域基本区域数据扩充区域数据PRG1STARTM100EM0000ENDPENDP2M100X000Y200X000STARTP2M110M100ENDPENDPRG2STARTM100PRG3EM000Y20000ENDPENDX000Y200M100D0000M100M110EM0000M100指定其它程序的数据区域时应在地址前标示程序NoPP1程序1P2程序2P3程序3。例P2M100程序2的M100P3D0000L程序3的D0000LD0000的下位字节810
12输入输出区域扩充区域PRG1STARTM100EM0000ENDPENDP2M100X000顺序程序输入输出区域基本区域数据扩充区域数据Y200X000STARTM100P2M110ENDPENDPRG3EM0000PRG2STARTM100Y20000ENDPENDX000Y200M100M110M100D0000EM0000M100811
82821用户存储器的结构参数用户可以设定的参数包括以下各项。可以根据程序来设定这些参数。设定方法参见Pcwin2的使用说明书。。项目设置范围用户存储器兼容模式程序执行程序1有效执行固定程序23有效执行无效非执行RUN信号连锁程序1连锁固定程序23连锁非连锁扫描时间定时器值全体165535ms初始程序主程序发生错误时的运行状态扫描超时停止继续运行IO表对照异常应用命令错误数据异常IO模块的分配10E支架07时隙种类识别代码模块识别代码分配点数064点时隙中断定期中断功能中断No0No3065535ms程序123链路模块链路参数2根据链路模块种类其他程序名64字节半角8221CPU具有识别IO模块安装状态的功能在接通电源或者复位的时候首先进行参数中设定的IO配置和实际安装状态的比较。因此如果IO模块的配置种类发生错误或忘记参数的设定的情况下会导致IO表对照异常。也可以对各时隙进行IO地址占有点数的分配进行设定这个数据比实际的IO模块点数优先。2实际可安装24个通信链路模块。但对于一个程序而言最多只能安装8个模块。内置链路也可作为一个模块分配。程序容量数据容量程序内部继定时电器器计数M07FF器EM01FTC01FFFFGM0FFETC07FFFF点点保持继电器K02FFEK0FFF点链路继电器L07FFEL01FFF点起动停止检查P01FFEP0FFF点容量KWNo1输入输出点链路寄存器R07FFKW数据寄存器KW扩充缓冲寄存器KWCPU工作模式扩充闪存器KW6014096602基本2048409676876825602560102401024025602560221212兼容模式60340967682560102402560212程序123共享扩充675847372840962048819240961282562048合计204886016640097283891211776616425620481各程序的输入输出是共享的。扩充输入输出不能作为实际IO使用。812CPU工作模式基本性能数据区
823757611111111IO地址一览表兼容模式名称比特地址点数字符地址字符数间接地址4保持领域P分区检查P000P1FF512P00WP1FW32K保持继电器K000K2FF768K00WK2FW48409FV特殊继电器V00VFF256V0WVFW16A0BFTC定时器计数器T000T1FF512T00WT1FW32C0FFL链路继电器L000L7FF2048L00WL7FW1281001FFXY输入输出X000X7FF2048X00WX7FW1282002FFM内部继电器M000M7FF2048M00WM7FW1283003FFS特殊寄存器S0000S3FFF16384S000S3FF1024400BFFN现在值寄存器N0000N1FFF8192N000N1FF512C00FFFR链路寄存器R0000R7FFF32768R000R7FF204810001FFFD数据寄存器D00000D2FFFF196608D0000D2FFF1228820007FFFP分区检查P1000P17FF2048P100WP17FW128C000C0FFV特殊继电器V1000V17FF2048V100WV17FW128C100C1FFTC定时器计数器T1000T17FF2048T100WT17FW128C200C2FFM内部继电器M1000M17FF2048M100WM17FW128C300C3FFL链路继电器L1000L2FFF8192L100WL2FFW512C400C7FFS特殊寄存器S10000S13FFF16384S1000S13FF1024C800CFFFN现在值寄存器N10000N17FFF32768N1000N17FF2048D000DFFF813地址分类比特地址区域字符地址区域比特地址区域字符地址区域基本区域识别码
名称比特地址点数字符地址字符数间接地址4保持领域EP外区域1扩充分区检查EP000EPFFF4096EP00WEPFFW256EK扩展保持继电器EK000EKFFF4096EK00WEKFFW2562003FFEV扩展特殊继电器EV000EVFFF4096EV00WEVFFW2564005FFET扩充定时器计数器ET000ET7FF2048ET00WET7FW1286006FFEL扩充链路继电器EL0000EL1FFF8192EL000WEL1FFW512700AFFEX扩展输入输出EX000EX7FF2048EX00WEX7FW128B00BFFEM扩展内部继电器EM0000EM1FFF8192EM000WEM1FFW512C00FFFES扩充特殊寄存器ES0000ES7FFF32768ES000ES7FF204810001FFFEN扩充当前值寄存器EN0000EN7FFF32768EN000EN7FF204820002FFFH扩充设定值寄存器H0000H7FFF32768H000H7FF204830003FFFGXGY外区域2扩展输入输出GX0000GXFFFF65536GX000WGXFFFW4096C000DFFFGM扩展内部继电器GM0000GMFFFF65536GM000WGMFFFW4096E000FFFFU扩充数据寄存器U000000U1FFFFF2097152U00000U1FFFF13107222EB扩展缓存寄存器EB000000EB3FFFFF4194304EB00000EB3FFFF26214422FR扩充闪存器FR0000000FR1FFFFFF33554432FR000000FR1FFFFF2097152227676631基本区域的新添加分地址不能参照外区域1中4000号以后的间接地址。此外PC10模式中的扩充区域PVTCMLSN全部从1000号开始。不连接以往区域。通信更新区域的设定和以块为单位使用的应用命令不能使用跨接以往区域与扩充区域的使用方法。2关于UEBFR区域的间接地址见下页。3扩充闪存器参见872闪存器。4源处于OFF复位时位于数据保持区域。5X和YEX和EYGX和GYT和CET和EC不能使用重复的地址。指定X000Y000EX000EY000T000C000ET000EC000作为地址是错误的6R058007FF用于SFC控制通常不能使用。使用SFC时限制使用扩充定时器计数器ETCENH。7特殊继电器特殊寄存器用于系统不得用于定义之外的其它用途。814地址分类比特地址区域字符地址区域比特地址区域字符地址区域识别码
识别码UEBUEBFR区域的间接地址在以下的每64K0FFFF地址空间内使用。因此保存间接地址的寄存器需要使用用间接地址指定空间的寄存器。用应用命令间接指定UEBFR时应使用变址寄存器功能。名称地址间接地址U00000扩充数据寄U08000存器U10000U18000EB00000EB08000EB10000扩展缓存寄EB18000存器EB20000EB28000EB30000EB38000U07FFF0FFFFU0FFFF0FFFFU17FFF0FFFFU1FFFF0FFFFEB07FFF0FFFFEB0FFFF0FFFFEB17FFF0FFFFEB1FFFF0FFFFEB27FFF0FFFFEB2FFFF0FFFFEB37FFF0FFFFEB3FFFF0FFFFFR007FFF0FFFFFR00FFFF0FFFFFR017FFF0FFFFFR01FFFF0FFFFFR027FFF0FFFFFR02FFFF0FFFFFR037FFF0FFFFFR03FFFF0FFFFFR047FFF0FFFFFR04FFFF0FFFFFR057FFF0FFFFFR05FFFF0FFFFFR067FFF0FFFFFR06FFFF0FFFFFR077FFF0FFFFFR07FFFF0FFFFFR087FFF0FFFFFR08FFFF0FFFFFR097FFF0FFFFFR09FFFF0FFFFFR0A7FFF0FFFFFR0AFFFF0FFFFFR0B7FFF0FFFFFR0BFFFF0FFFFFR0C7FFF0FFFFFR0CFFFF0FFFFFR0D7FFF0FFFFFR0DFFFF0FFFFFR0E7FFF0FFFFFR0EFFFF0FFFFFR0F7FFF0FFFFFR0FFFFF0FFFFFR107FFF0FFFFFR扩充闪存器FR000000FR008000FR010000FR018000FR020000FR028000FR030000FR038000FR040000FR048000FR050000FR058000FR060000FR068000FR070000FR078000FR080000FR088000FR090000FR098000FR0A0000FR0A8000FR0B0000FR0B8000FR0C0000FR0C8000FR0D0000FR0D8000FR0E0000FR0E8000FR0F0000FR0F8000FR100000815
识别码名称地址FR108000FR10FFFFFR110000FR117FFFFR118000FR11FFFFFR120000FR127FFFFR128000FR12FFFFFR130000FR137FFFFR138000FR13FFFFFR140000FR147FFFFR148000FR14FFFFFR150000FR157FFFFR158000FR15FFFFFR160000FR167FFFFR168000FR16FFFFFR170000FR177FFFFR178000FR17FFFFFR180000FR187FFFFR188000FR18FFFFFR190000FR197FFFFR198000FR19FFFFFR1A0000FR1A7FFFFR1A8000FR1AFFFFFR1B0000FR1B7FFFFR1B8000FR1BFFFFFR1C0000FR1C7FFFFR1C8000FR1CFFFFFR1D0000FR1D7FFFFR1D8000FR1DFFFFFR1E0000FR1E7FFFFR1E8000FR1EFFFFFR1F0000FR1F7FFFFR1F8000FR1FFFFF间接地址0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF0FFFF816
824Ex号在兼容模式中用8位16进制的字节地址来表示整个数据区域。在变址功能和闪存器中有时使用8位字节地址和Ex号。8位字节地址00Ex号2位间接字节地址高位2位000102030405060708090A0B0C0D0E0F101112131415161718EB819EB91AEB101BEB111CEB121DEB131EEB141FEB15低位4位高位2位低位4位高位2位低位4位高位2位606162636465666768696A6B6C6D6E6F707172737475767778797A7B7C7D7E7F低位4位基本区域的指定应使用Ex号0D0F。00用于指定自区域。例P1D0000000D2000EB0123400102468hEM0L00010C00h自区域EGU0000FFFFU10000FFFFU20000FFFFU30000FFFFFR000000FFFFFR010000FFFFFR020000FFFFFR030000FFFFFR040000FFFFFR050000FFFFFR060000FFFFFR070000FFFFFR080000FFFFFR090000FFFFFR100000FFFFFR110000FFFFFR120000FFFFFR130000FFFFFR140000FFFFFR150000FFFFFR160000FFFFFR170000FFFFFR180000FFFFFR190000FFFFFR200000FFFFFR210000FFFFFR220000FFFFFR230000FFFFFR240000FFFFFR250000FFFFFR260000FFFFFR270000FFFFFR280000FFFFFR290000FFFFFR300000FFFFFR310000FFFFFR320000FFFFFR330000FFFFFR340000FFFFFR350000FFFFFR360000FFFFFR370000FFFFFR380000FFFFFR390000FFFFFR400000FFFFFR410000FFFFFR420000FFFFFR430000FFFFFR440000FFFFFR450000FFFFFR460000FFFFFR470000FFFFFR480000FFFFFR490000FFFFFR500000FFFFFR510000FFFFFR520000FFFFFR530000FFFFFR540000FFFFFR550000FFFFFR560000FFFFFR570000FFFFFR580000FFFFFR590000FFFFFR600000FFFFFR610000FFFFFR620000FFFFFR630000FFFF2040214122422343244425452646U207000U1FFFF472848FR0000FR1FFFFF29492A4A2B4B2C4C2D4D2E4E2F4F305031513252335334543555系统用P10000FFFFP20000FFFFP30000FFFFEB00000FFFFEB10000FFFFEB20000FFFFEB30000FFFFEB40000FFFFEB50000FFFFEB60000FFFFEB70000FFFFEB0000EB3FFFF36563757385839593A5A预定3B5B3C5C3D5D3E5E3F5F817
基本区域P1链接寄存器0D数据寄存器1数据寄存器2分区特殊继电器定时器计数器内部继电器链路继电器特殊寄存器现在值寄存器分区保持继电器特殊继电器定时器计数器链路继电器输入输出内部继电器特殊寄存器现在值寄存器P2链接寄存器0E数据寄存器1数据寄存器2分区特殊继电器定时器计数器内部继电器链路继电器特殊寄存器现在值寄存器参考地址表名称分区保持继电器特殊继电器定时器计数器链路继电器输入输出内部继电器特殊寄存器现在值寄存器ExNo16进制地址P000P1FFK000K2FFV000V0FFTC000TC1FFL000L7FFXY000XY7FFM000M7FFS0000S03FFN0000N01FFR0000R07FFD0000D0FFFD1000D2FFFP1000P17FFV1000V17FFTC1000TC17FFM1000M17FFL1000L2FFFS1000S13FFN1000N17FFP000P1FFK000K2FFV000V0FFTC000TC1FFL000L7FFXY000XY7FFM000M7FFS0000S03FFN0000N01FFR0000R07FFD0000D0FFFD1000D2FFFP1000P17FFV1000V17FFTC1000TC17FFM1000M17FFL1000L2FFFS1000S13FFN1000N17FF字节地址0000003F0040009F00A000BF00C000FF010001FF020002FF030003FF04000BFF0C000FFF10001FFF20003FFF40007FFFC000C0FFC100C1FFC200C2FFC300C3FFC400C7FFC800CFFFD000DFFF0000003F0040009F00A000BF00C000FF010001FF020002FF030003FF04000BFF0C000FFF10001FFF20003FFF40007FFFC000C0FFC100C1FFC200C2FFC300C3FFC400C7FFC800CFFFD000DFFF818
基本区域P30F扩展区域1扩充区域2扩充区域3拡張領域40102030405061011121314151617名称分区保持继电器特殊继电器定时器计数器链路继电器输入输出内部继电器特殊寄存器现在值寄存器链接寄存器数据寄存器1数据寄存器2分区特殊继电器定时器计数器内部继电器链路继电器特殊寄存器现在值寄存器扩展边缘扩展保持继电器扩充特殊继电器扩展计时器计数器扩展链接继电器扩展输入输出扩充内部继电器扩展特殊寄存器扩展当前值寄存器扩展设定值寄存器扩展输入输出扩充内部继电器扩展数据寄存器扩充缓冲寄存器ExNo16进制地址P000P1FFK000K2FFV000V0FFTC000TC1FFL000L7FFXY000XY7FFM000M7FFS0000S03FFN0000N01FFR0000R07FFD0000D0FFFD1000D2FFFP1000P17FFV1000V17FFTC1000TC17FFM1000M17FFL1000L2FFFS1000S13FFN1000N17FFEP000EPFFFEK000EKFFFEV000EVFFFETC000ETC7FFEL0000EL1FFFEXY000EXY7FFEM0000EM1FFFES0000ES07FFEN0000EN07FFH0000H07FFGXY0000GXYFFFFGM0000GMFFFFU00000U07FFFU08000U0FFFFU10000U17FFFU18000U1FFFFEB00000EB07FFFEB08000EB0FFFFEB10000EB17FFFEB18000EB1FFFFEB20000EB27FFFEB28000EB2FFFFEB30000EB37FFFEB38000EB3FFFF字节地址0000003F0040009F00A000BF00C000FF010001FF020002FF030003FF04000BFF0C000FFF10001FFF20003FFF40007FFFC000C0FFC100C1FFC200C2FFC300C3FFC400C7FFC800CFFFD000DFFF000001FF020003FF040005FF060006FF07000AFF0B000BFF0C000FFF10001FFF20002FFF30003FFFC000DFFFE000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF819
拡張領域5闪存寄存器名称ExNo16进制404142434445464748494A4B4C4D4E4F505152535455565758595A5B5C5D5E5F606162636465666768696A6B6C6D地址FR000000FR007FFFFR008000FR00FFFFFR010000FR017FFFFR018000FR01FFFFFR020000FR027FFFFR028000FR02FFFFFR030000FR037FFFFR038000FR03FFFFFR040000FR047FFFFR048000FR04FFFFFR050000FR057FFFFR058000FR05FFFFFR060000FR067FFFFR068000FR06FFFFFR070000FR077FFFFR078000FR07FFFFFR080000FR087FFFFR088000FR08FFFFFR090000FR097FFFFR098000FR09FFFFFR0A0000FR0A7FFFFR0A8000FR0AFFFFFR0B0000FR0B7FFFFR0B8000FR0BFFFFFR0C0000FR0C7FFFFR0C8000FR0CFFFFFR0D0000FR0D7FFFFR0D8000FR0DFFFFFR0E0000FR0E7FFFFR0E8000FR0EFFFFFR0F0000FR0F7FFFFR0F8000FR0FFFFFFR100000FR107FFFFR108000FR10FFFFFR110000FR117FFFFR118000FR11FFFFFR120000FR127FFFFR128000FR12FFFFFR130000FR137FFFFR138000FR13FFFFFR140000FR147FFFFR148000FR14FFFFFR150000FR157FFFFR158000FR15FFFFFR160000FR167FFFFR168000FR16FFFF字节地址0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF820
名称ExNo16进制地址字节地址6EFR170000FR177FFF0000FFFF6FFR178000FR17FFFF0000FFFF70FR180000FR187FFF0000FFFF71FR188000FR18FFFF0000FFFF72FR190000FR197FFF0000FFFF73FR198000FR19FFFF0000FFFF74FR1A0000FR1A7FFF0000FFFF75FR1A8000FR1AFFFF0000FFFF76FR1B0000FR1B7FFF0000FFFF77FR1B8000FR1BFFFF0000FFFF78FR1C0000FR1C7FFF0000FFFF79FR1C8000FR1CFFFF0000FFFF7AFR1D0000FR1D7FFF0000FFFF7BFR1D8000FR1DFFFF0000FFFF7CFR1E0000FR1E7FFF0000FFFF7DFR1E8000FR1EFFFF0000FFFF7EFR1F0000FR1F7FFF0000FFFF7FFR1F8000FR1FFFFF0000FFFF821
825特殊继电器一览表有各种特殊继电器可以用于CPU状态应用命令链路模块等特殊用途。在这种情况下在各顺序程序中使用的应用命令方面的特殊继电器被置于其程序所对应的特殊继电器区域。其他则全部被置于PRG1用的特殊继电器中。在使用SFC进行编程时V58V5DEV800EVBFF被用于SFC的执行控制因此用户请不要使用。其他的则全部置于PRG1用的特殊寄存器中。对于一览表中没有的地址则全部成为预定区域用户无法使用。兼容模式地址PRG1PRG1PRG2PRG3名称0没有ERR01正在发生ERR0一直10正在扫描1正在停止概要发生严重故障时ON解除异常时OFF和工作状态无关一直ON正在顺序扫描时OFF但在步执行中ON解说V01重度异常V02轻度异常0没有ERR11正在发生ERR1发生轻度故障时ON解除异常时OFFV03警报0没有ALM1正在发生ALM发出警报时ON解除异常时OFFV04一直ONV05一直OFF一直0和工作状态无关一直OFFV06第1扫描END命令ON复位OFF复位时ONEND处理时OFFV24疑似停止中0不在模拟停止中1模拟停止中执行模拟扫描停止时ON解除后OFFV25停止请求持续中0没有停止要求1有停止要求要求扫描停止时ON解除后OFFV26正在停止V27RUN0不是执行顺序命令1执行顺序命令正在执行顺序命令时ONV38数据存储器模式0单一模式1分割模式数据区域分割模式时ONV390不是FUN标记清除模式1是FUN标记清除模式程序1是FUN标记清除模式时ONV3A正在数据备份0不是正在数据备份1正在数据备分正在备份用户数据时ONV400不是执行顺序命令1执行顺序命令程序1正在执行顺序命令时ONV410不是执行顺序命令1执行顺序命令程序2正在执行顺序命令时ONV420不是执行顺序命令1执行顺序命令程序3正在执行顺序命令时ONV48测试模式0测试模式OFF1测试模式工作中测试模式工作时ONV49事件监控器0非进行事件监控1正在进行事件监控事件监控器启动时ONV4AFB程序库0FB程序库无效1FB程序库有效FB程序库启动时ONV4B用户程序库0用户程序库无效1用户程序库有效用户程序库启动时ONFUN标记清除模式RUNRUNRUN828
概要标准程序库启动时ON解说0标准程序库无效1标准程序库有效0没有错误1有错误程序1中有应用命令错误时ON没有时OFF但是只用有禁止事项的命令才能成为对象0比较结果不是小1比较结果是小程序1的应用命令的比较命令结果0比较结果不是相等1比较结果是相等程序1的应用命令的比较命令结果0比较结果不是大1比较结果是大程序1的应用命令的比较命令结果0结果不是01结果是0程序1的应用命令运算结果为0时ON0没有退位1有退位程序1的应用命令运算结果比0小0没有进位1有进位程序1的应用命令运算结果在位数以上0没有错误1有错误程序1中有变址错误时ON没有时OFF1数据异常清除通过启动特殊继电器V5E清除未确认数据异常的警报005秒005秒周期01秒50duty的时钟01秒周期02秒50duty的时钟01秒05秒05秒周期1秒50duty的时钟1秒1秒周期2秒50duty的时钟30秒30秒周期60秒50duty的时钟1扫描每一次扫描进行ONOFF的时钟1扫描n扫描m扫描根据应用命令设定的扫描时间间隔进行ONOFF的时钟n扫描根据应用命令设定的扫描时间间隔进行ONOFF的时钟m扫描1P1执行中0停止或P2P3执行中只在执行P1程序时ON1P2执行中0停止或P1P3执行中只在执行P2程序时ON1P3执行中0停止或P1P2执行中0复位OFF1复位ON只在执行P3程序时ON0复位OFF1复位ON0复位OFF1复位ON0复位OFF1复位ON地址名称V4C标准程序库PRG1应用命令错误1ERV50V51PRG1V52PRG1V53PRG1V54PRG1零ZV55PRG1借位BOV56PRG1进位CYV57PRG1变址错误ERV5E数据异常清除V7001秒时钟V7102秒时钟V721秒时钟V732秒时钟V7460秒时钟V78扫描时钟V79用户定义时钟1V7A用户定义时钟2V7CP1执行中V7DP2执行中V7EP3执行中V80PRG1链路1通信复位V81PRG1链路2通信复位V82PRG1链路3通信复位V83PRG1链路4通信复位829
地址名称概要解说V84PRG1链路5通信复位0复位OFF1复位ONV85PRG1链路6通信复位0复位OFF1复位ONV86PRG1链路7通信复位0复位OFF1复位ONV87PRG1链路8通信复位0复位OFF1复位ONV90PRG1链路1链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV91PRG1链路1链路命令错误标记V92PRG1链路2链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV93PRG1链路2链路命令错误标记V94PRG1链路3链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV95PRG1链路3链路命令错误标记V96PRG1链路4链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV97PRG1链路4链路命令错误标记V98PRG1链路5链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV99PRG1链路5链路命令错误标记V9APRG1链路6链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV9BPRG1链路6链路命令错误标记V9CPRG1链路7链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV9DPRG1链路7链路命令错误标记V9EPRG1链路8链路命令可使用标记0不可使用特殊单元命令1可使用特殊单元命令分层通信执行特殊单元命令或分层通信时OFF执行时ONV9FPRG1链路8链路命令错误标记830
解说地址名称VA0正进行全局通信VA1链接参数异常VA2通信异常VA3VA4正进行全局通信VA5链接参数异常VA6通信异常VA7VA8正进行全局通信VA9链接参数异常VAA通信异常VABVAC正进行全局通信VAD链接参数异常VAE通信异常VAFVB0正进行全局通信VB1链接参数异常VB2通信异常VB3VB4正进行全局通信VB5链接参数异常VB6通信异常VB7VB8正进行全局通信VB9链接参数异常VBA通信异常VBBVBC正进行全局通信VBD链接参数异常VBE通信异常VBF概要PRG10无异常链路11有异常PRG10无异常链路21有异常PRG10无异常链路31有异常PRG10无异常链路41有异常PRG10无异常链路51有异常PRG10无异常链路61有异常PRG10无异常链路71有异常PRG10无异常链路81有异常注关于通信链路模块参照其各自的使用说明书。831
地址名称概要解说VC0CPU异常0无异常1有异常检测出CPU模块异常时ONVC1电源异常0无异常1有异常检出停电时ON复位或再次接通电源时OFFVC2存储器数据异常0无异常1有异常检出程序或参数数据异常时ONVC3IO总线异常0无异常1有异常检出IO总线异常时ONVC4特殊模块异常0无异常1有异常检出特殊模块异常时ON解除异常时OFFVC5模块参数异常0无异常1有异常CPU不能正确识别IO模块时ONVC6参数异常0无异常1有异常检出参数异常时ONVC7IO模块异常保险丝断裂等0无异常1有异常检出IO模块异常时ON解除异常时OFFVC8IO构成异常0无异常1有异常检出IO模块构成异常时ON特殊卡的片数和IO地址的分配VC9用户程序异常0无异常1有异常检出与用户程序相关部分异常时ON解除异常时OFFVCA备份存储器异常0无异常1有异常检出备份存储器异常时ONVCB未确认数据异常0已确认1未确认检出存储器数据异常VC2时ON开启V5E或者通过使用外围装置时OFFVD0PRG1用户程序异常0无异常1有异常检出程序1的用户程序关联部分异常时ONVD1PRG2用户程序异常0无异常1有异常检出程序2的用户程序关联部分异常时ONVD2PRG3用户程序异常0无异常1有异常检出程序3的用户程序关联部分异常时ONVD8PRG1参数异常0无异常1有异常检出程序1的参数异常时ONVD9PRG2参数异常0无异常1有异常检出程序2的参数异常时ONVDAPRG3参数异常0无异常1有异常检出程序3的参数异常时ONVE0IO对照异常0无异常1有异常参数的IO识别代码与安装的IO模块不同时ONVE1扫描超时0无异常1有异常检出扫描超时时ON复位或再次接通电源时OFFVE2PRG1应用命令错误锁定0无异常1有异常发生程序1的应用命令错误V50时ON复位或者写入0之前保持此状态VE8PRG1扫描超时0无异常1有异常检出程序1的扫描超时时ON复位或再次接通电源时OFFVE9PRG2扫描超时0无异常1有异常检出程序2的扫描超时时ON复位或再次接通电源时OFFVEAPRG3扫描超时0无异常1有异常检出程序3的扫描超时时ON复位或再次接通电源时OFFVF0电池异常0无异常1有异常检出异常时ON解除异常时OFF832
地址名称概要解说VF2特殊模块分配异常0无异常1有异常通信链路模块分配异常时ONVF3诊断模块异常0无异常1有异常诊断模块异常时ONVF5时钟异常0无异常1有异常检出内置时钟异常时ON兼容模式扩展区域地址名称概要解说EV100可写入闪存器0无法写入闪存器1可写入闪存器可写入闪存器的闪存存储器时ONEV101写入闪存器失败0无异常1写入失败写入闪存器的闪存存储器失败时ONEVE00EVEFFSNIF输入数据链路区域EVF00EVFFFSNIF输出数据链路区域833
826特殊寄存器一览表有各种各样的寄存器可以用于CPU状态内置时钟和链路模块等特殊的用途。在兼容模式中各个程序中都有基本区域的特殊继电器。这种情况下在各顺序程序中使用的专门用于内置时钟的时刻信号器链路模块等的特殊寄存器被置于此程序对应的特殊寄存器区域。其他则全部被置于PRG1用的特殊继电器中。其他的则全部置于PRG1用的特殊寄存器中。对于一览表中没有的地址则全部成为预定区域用户无法使用。11兼容模式PRG1地址名称内容S001扫描时间最大值顺序程序的扫描时间的最大值s2进制S002扫描时间最小值扫描程序的扫描时间的最小值s2进制S003扫描时间当前值顺序程序的扫描时间的最新值s2进制S004时刻秒S005时刻分S006时刻时S007时刻日S008时刻月S009时刻年S00A时刻星期存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示1位数。比如0102表示12。表示年的数据时用公历年的后两位数表示。表示星期的数据时06分别对应星期天星期六。即使重写直接寄存器也不能更改时刻。设定时刻时用PCwin2的CPU的日期时刻变更功能或专用应用命令进行。应用命令参照编程手册309SYS时钟调整命令FUN300PC3J系列26以后的版本。BCD1位字节S00C累计通电时间CPU模块通电时间累计值hS00D2进制数退位2进制数进位S00E累计运行RUN时间顺序程序运行时间累计值hS00F2进制数退位2进制数进位S010终端处理时间最大值顺序程序的终端处理时间的最大值s2进制S011终端处理时间最小值顺序程序的终端处理时间的最小值s2进制S012终端处理时间当前值顺序程序的终端处理时间的最新值s2进制S019时刻分秒存储内置时钟的当前时刻。S01A时刻日时用BCD代码来表示数据的时候1个字节表示2位数。S01B时刻年月比如1234表示为12分34秒。BCD2位字节S02201ms定时器以接通电源时为0以1ms为单位动作的类型。同步扫描2进制S02310ms定时器以接通电源时为0以10ms为单位动作的类型。同步扫描2进制S024100ms定时器以接通电源时为0以100ms为单位动作的类型。同步扫描2进制S02501ms定时器以接通电源时为0以01ms为单位动作的类型。同步扫描2进制S0A8链路模块代码参见94特殊继电器特殊寄存器。S0AF834
地址名称内容S0C0S0C1PRG1S0C2S0C3S0C4S0C5PRG2S0C6S0C7S0C8S0C9PRG3S0CAS0CBS0E0S0E1程序变更履S0E2历1S0E3S0E4S0E5程序变更履S0E6历2S0E7S0E8S0E9程序变更履S0EA历3S0EBS0ECS0ED程序变更履S0EE历4S0EFS0F0S0F1程序变更履S0F2历5S0F3S0F4S0F5程序变更履S0F6历6S0F7S0F8S0F9程序变更履S0FA历7S0FBS0FCS0FD程序变更履S0FE历8S0FF初始扫描时间扫描时间最大值扫描时间最小值扫描时间当前值初始扫描时间扫描时间最大值扫描时间最小值扫描时间当前值初始扫描时间扫描时间最大值扫描时间最小值扫描时间当前值变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月变更位置时刻分秒时刻日时时刻年月2进制2进制2进制2进制2进制2进制2进制2进制2进制2进制2进制2进制位8参数位BCD2位字程序1的初始顺序程序执行时间s程序1的顺序程序的扫描时间的最大值s程序1的顺序程序的扫描时间的最小值s程序1的顺序程序的扫描时间的最新值s程序2的初始顺序程序执时间s程序2的顺序程序的扫描时间的最大值s程序2的顺序程序的扫描时间的最小值s程序2的顺序程序扫描时间的最新值s程序3的初始顺序程序执行时间s程序3的顺序程序的扫描时间的最大值s程序3的顺序程序的扫描时间的最小值s程序3的顺序程序扫描时间的最新值s位BPRG3位APRG2位9PRG1存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD2位字用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD2位字用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节2位字位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节2位字位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节2位字位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节位BPRG3位APRG2位9PRG1位8参数位存储内置时钟的当前时刻。BCD2位字用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。节2位字835
地址名称内容S130TOYOPUCPCS信息通信状态bit0正在通信ON与TOYOPUCPCS正在通信bit1RUN信号ONTOYOPUCPCS处于RUN状态bit2ERR0信号ON在TOYOPUCPCS发生ERR0bit3ERR1信号ON在TOYOPUCPCS发生ERR1bit4ALM信号ON在TOYOPUCPCS发生ALMbit8链路命令可使用标记ON可以对TOYOPUCPCS发出链路命令bit9链路命令异常ON发出的链路命令发生异常S131结构异常次数在CPUTOYOPUCPCS之间的通信中发生的结构异常次数S132奇偶性异常次数在CPUTOYOPUCPCS之间的通信中发生的奇偶性异常次数S133溢出异常次数在CPUTOYOPUCPCS之间的通信中发生的超越异常次数S140S14FSNIF输入数据链路区域从TOYOPUCPCS输入。可创建TOYOPUCPCS用回路。S150S15FSNIF输出数据链路区域TOYOPUCPCS的输出。可创建TOYOPUCPCS用回路。S200S24F错误信息请参照514错误信息输出用特殊寄存器。S250S2CFPRG1PRG1链路请参照编程手册。S2D1CPU版本存储CPU版本。CPU版本寄存器值S2D110001001010101S300S3FFPRG1链路通信链接模块状态信息参照各通信链路模块的使用说明书。18兼容模式时信号器信息地址名称内容S1000S11FF错误信息请参照514错误信息输出用特殊寄存器。836
12兼容模式PRG2地址时刻星期名称存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示1位数。比如0102表示12。表示年的数据时用公历年的后两位数表示。表示星期的数据时06分别对应星期天星期六。即使重写直接寄存器也不能更改时刻。设定时刻时用PCwin2的CPU的日期时刻变更功能或专用应用命令进行。应用命令参照编程手册309SYS时钟调整命令FUN300系列26以后的版本。PC3J内容S004时刻秒S005时刻分S006时刻时BCD1位字节S007时刻日S008时刻月S009时刻年S00AS019时刻分秒存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。BCD2位字节S01A时刻日时S01B时刻年月S0A8S0AF链路模块代码参见94特殊继电器特殊寄存器。S250S2CFPRG2PRG2链路请参照编程手册。S300S3FFPRG2链路通信链接模块状态信息参照各通信链路模块的使用说明书。18信号器信息837
13兼容模式PRG3地址名称存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示1位数。比如0102表示12。表示年的数据时用公历年的后两位数表示。表示星期的数据时06分别对应星期天星期六。即使重写直接寄存器也不能更改时刻。设定时刻时用PCwin2的CPU的日期时刻变更功能或专用应用命令进行。应用命令参照编程手册309SYS时钟调整命令FUN300系列26以后的版本。内容S004时刻秒S005时刻分S006时刻时BCD1位字节S007时刻日S008时刻月S009时刻年S00A时刻星期PC3JS019时刻分秒时刻日时存储内置时钟的当前时刻。用BCD代码来表示数据的时候1个字节表示2位数。比如1234表示为12分34秒。BCD2位字节S01AS01B时刻年月S0A8S0AF链路模块代码参见94特殊继电器特殊寄存器。S250S2CFPRG3PRG3链路请参照编程手册。S300S3FFPRG3链路通信链接模块状态信息参照各通信链路模块的使用说明书。18信号器信息838
链路模块代码一览模块名称代码备注模块名称代码备注2ETFLnet7001CPU内置PC链接FF112ETEthernetIP7002CPU内置CMP链接FF122ETEtherCAT7003CPU内置SIOFF132ETEthernet7004CPU内置MODBUSFF142ETFL远程70052MLPC链接71112MLCMP链接71122MLSIO71132MLMODBUS7114DLDLINK主机7220DLDLINK从机7221CPU内置FLnetFF01CPU内置EthernetIPFF02CPU内置EterCATFF03CPU内置EthernetFF04CPU内置FL远程FF05839
83831变址功能与间接地址变址寄存器变址寄存器是指保存寄存器地址信息的专用寄存器。共有IX0IXF16个。具有与以往的间接指定类似的功能。与间接指定的不同点间接指定存在的问题8311进行间接指定时对能够进行间接指定的命令是有限制的。通过使用变址寄存器使得以往只能直接指定的指令可以间接指定了。在使用间接指定的回路中即使进行回路监控地址信息也只能用16进制表示因此无法实现回路的可视性。在使用变址寄存器的回路中具有可以同时监控间接指定地址及该地址内容的功能提高了回路的可视性。在变址寄存器中添加了复位功能和执行前的增量减量以及执行后的增量减量功能使编程更兼简便。变址寄存器操作命令新增量8312建议将以往执行间接指定命令的回路置换为变址指定以提高回路的可视化。INDXD000LIX0STIDXIX1D0LDIDXD0IX2IDXD0IX3IDXH120hIX4IDXD120IX4间接指定的替换使用例在变址寄存器中设定地址信息的命令相当于间接指定中的MOVADD0000D0100。在变址寄存器中设定32bit的字节地址。使变址寄存器的地址信息保存在寄存器中的命令转发地址需要2个字符。使用STIDX保存的地址信息返回到变址寄存器中。在寄存器中需要32bit的地址信息。在变址寄存器中进行16位寄存器内容的加法运算。加法运算的数据包括符号。在变址寄存器中进行16bit16进制的常数加法运算。常数数据中包括符号。在变址寄存器中进行16bit10进制的常数加法运算。常数数据中包括符号。MOVADD120LD0MOVADD200LD1MOVHD0D1INDXD120LIX0INDXD200LIX1MOVEIX0IX1直接指定用命令MOVE与MOVH进行相同的处理。不必在所有的运算域中使用变址寄存器。处于混用状态也可。可用直接指定用命令进行间接指定。840
8313变址寄存器的偏移指定指定变址时可将变址寄存器指定为作为起始地址的相对地址。INDXD120LIX0IX0IX01IX2将进行IX0D120L与IX01D120H的乘法运算结果保存在IX02D121L中。移值可用10进制或16进制进行设定。可进行偏移指定的范围与用变址寄存器指定的区域与识别符号的范围相同。PC10G中的扩充本区域M1000M17FF和基本区域M000M7FF被认为是外区域。另外在FR寄存器等的广大区域内可指定到max3FFFFh256kbyte。接点线圈中的变址寄存器使用变址寄存器也可用于接点和线圈。使用接点线圈的bit地址时偏移数值也变为位偏移。INDXM01LIX1IX111hIX15hM021M015偏移值不能进行与应用命令的运算域相同的跨区域指定。即使在使用变址寄存器时也可添加设定线圈注释。此外还可进行回路监控。注意在定时器计数器命令中不能使用变址。运算前运算后增量减量功能自动更新变址寄存器的地址信息。指定格式IX0运算前增量在执行命令之前根据数据类型进行变址寄存器地址信息的1字节型2字符型4双字符型以及8双精度。IX0运算前减量在执行命令之前根据数据类型进行变址寄存器地址信息的1248。IX0运算后增量在执行命令之后根据数据类型进行当前的变址寄存器地址信息的1248。IX0运算后减量在执行命令之后根据数据类型进行当前的变址寄存器地址信息的1248。接点线圈等的位地址不能使用。根据各命令自动判别数据类型。例WIX0IX1IX2在224乘法运算命令中为使结果变为32bit而4。83148315841
8316使用变址寄存器的回路的回路监控执行时的地址D0008R008U1010WIX010hIX110hIX220h1234h2345h3579h8317详细规格变址命令U1010的数据INDX变址地址设定将OP1的地址设定在OP2的变址寄存器中。例INDXD0000LIX0在变址寄存器IX0中设定D0LDIDX载入变址将保存在OP1的寄存器中的32位变址地址信息作为地址设定在OP2的变址中例LDIDXD0000IX0设定保存在IX0的D1D0中的地址信息的地址。STIDX保存变址将OP1变址寄存器中的32位地址信息保存在OP2寄存器中。例STIDXIX0D0000保存D1D0的IX0地址信息。IDX变址加法运算将OP1的寄存器内容字符作为偏移补充地址设定在OP2的变址寄存器中。偏移范围7FFFh7FFFh8000h7FFFh3276832767例IDXD0000IX0在IX0中补充D0内容的偏移。IDXD变址常数加法运算10进制将OP1的10进制数作为偏移补充地址设定在OP2的变址寄存器中。偏移范围3276832767例IDXD99IX0在IX0种补充偏移99d。IDXH变址常数加法运算16进制将OP1的16进制数作为偏移补充地址设定在OP2的变址寄存器中。偏移范围7FFFh7FFFh例IDXDFFIX0在IX0中补充偏移FFh。842加法运算的单位为字节
变址寄存器IX0IXF16个变址寄存器1地址的识别单位在接点线圈等中输入位单位的地址时作为IXn偏移自动识别例D0000LIX0D00001IX01IXn为IX0IXF偏移范围03FFFFFh位07FFFFh字节在运算域输入字节单位的地址时按通常的字节单位识别例D0000LIX0在运算域输入字符单位的地址时按通常的字单位识别例D0000LIX0orD0000HIX0D0000IX0在运算域输入双字符单位的地址时按通常的字单位识别例D0000LIX0orD0000HIX0D1D0000IX02变址寄存器为P1P2P3共用寄存器。地址设定的顺序为循环设定P1P2P3补充以32位识别所有的地址。3偏移位指定除外。位指定见上述1中说明IX16进值或10进制偏移数偏移范围03FFFF字节比位的偏移小例INDXD0000LIX0偏移通过字节识别DMOV12345678IX03h向D2D1传送12345678。即使OP2为IX02h也向D2D1传送。将D0000L作为0加3个字节后D0001H作为字符识别成为D0001。4运算前运算后增量减量Ixn执行前设定的地址1Ixn执行前设定的地址1IXn执行后设定的地址1IXn执行后设定的地址1IXn为IX0IXF例INDXD0000LIX0MOV12IX0IDXH1IX0在IX0中设定D0L向D0L发送12然后IX0D0H将IX0的设定地址偏移1个字节。IX0D0HIX0D1L向D1传送1234将D1L作为字符地址识别然后将地址1个字符使IX0D2L。向D3D2传送12345678按字符地址识别D2L然后将在地址上2个字符。WMOV1234IX0DMOV12345678IX05定时器计数器不能在定时器计数器中使用变址。843地址的数据类型自动识别字节字符双字符设定的变址寄存器值本身不会变更设定的变址寄存器值在实际中会发生变化
6不能使用变址寄存器的应用命令BBMOV位块传送7切断电源时复位时不保持变址寄存器内的内容。清零变址错误错误7F发生条件123执行未设定变址地址的与变址相关的应用命令或使用变址寄存器。区域外通过偏移跨接识别符号时。但即使跨接识别符号相同但不相连的地址时也会发生错误。例M7FF和M1000补充在UEBFR的相同识别符号内即使跨接64K的区域也可正常进行变址。执行定时器命令时在T或ET之外使用变址寄存器。标记V57变址错误ON。VE2应用命令错误锁定ON。补充V50应用命令错误1不处于ON状态。错误时的RUN状态进行运算命令错误检查时停止。错误时的动作1接点OFF2线圈什么都不做因为没有执行的寄存器本身3接点类型应用命令比较命令OFF4输出类型应用命令不执行因为没有执行的寄存器本身功能说明例P1INDXD5LIX0WMOV1234IX0DMOV12345678IX0MOVABIX03WMOV9876IX04WMOVABCDIX05STIDXIX0D10LDIDXD10IX1IDXH20IX1P2WMOVEIX1D0在IX0中设定D5L向D5传送1234h然后IX0D6L向D7D6传送12345678h然后IX0D8L向D9H传送ABIX0D8L向DA传送9876IX0D8L向DA传送ABCDIX0D8L在D11D10中保存IX0D8L的地址信在IX1中设定D8L在IX1中设定D18LIX1D8L20hD18L向P2D0传送P1D18L844以字符单位识别DALDAHDA
Pcwin2显示及注意事项1将变址作为线圈包括输出型应用命令使用时无法进行程序检查中的输出重叠印检测。2监控时变址寄存器显示所示地址。3在各变址上有变址串行号码。4各变址串行号码均具有注释。变址注释5块对照包括变址变址串行号码对照。6在应用命令中即使是间接地址的运算域也可使用变址。7在SFC步中不能将变址作为直接地址使用。8在FB程序库中不能使用变址。变址注释注释变址注释变址注释变址注释变址注释注释注释变址注释注释注释845
8318运算前运算后增量减量地址的加减法运算值一览表运算前运算后的增减量IxnIxnIXnIXnIXn为IX0IXF自动判别各应用命令的地址数据类型字节字符双字符后改变变址寄存器的地址。FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度0WMOVE1WMOVP2WXCH3WBIN4WBCD5DIV6PUP7WMOVR8WMOVQ9NOT10WP11WP12WCP13AND14OR17CP18XOR20CMOV21CLR36WSFR37WSFL50DECO51ENCO52SEG53SXCH54BPU62MOVT63WINC64WDEC68SFIN69SFOUT70BMOV171BMVI72BDIV73BPUP74MOVF2字节直接传送传送BCD4位常数16位转换BCD4位BINBINBCD4位分配字节抽取字节传送10进制5位常数传送8进制6位常数反转字节BCD加法运算4位BCD减法运算4位字符比较逻辑乘法字节逻辑和字节字节比较异逻辑和字节清零确认传送字节重合数据清零字节右移1位字符左移1位字符416解码164编码7段解码4位转换位抽取字节16进制2位常数2处传送2进制增量字符2进制减量字符存入移位IN字节存入移位OUT字节字节块传送1字节间接块传送块分配字节块抽取字节1个字节间接传送14发送地址接收地址4常数数据接收地址4转换地址接收地址4转换起始地址接收地址4转换起始地址接收地址5发送地址接收地址基本地址5发送地址基本地偏移保存地址址4常数数据接收地址4常数数据接收地址4转换起始地址接收地址5S地址D地址5S地址D地址4比较的起始地址比较的目标地址5S地址D地址5S地址D地址4比较的起始地址比较的目标地址5S地址D地址5发送地址接收地址清零确认5比较的起始地址比较清零目标地址3移位地址3移位地址4解码起始地址解码目标地址4编码起始地址编码目标地址5解码起始地址解码目标地址4转换地址接收地址4位的位置保存抽取起始地址5常数数据接收地址4比较的起始地址1地址31地址4起始地址结束地址5起始地址结束地址5发送起始地址接收地址起始5发送起始间接接收起始间接5传送基本地址偏接收地址移2202222222偏移保存地址111接收地址111020211R地址222R地址22222R地址111R地址11111R地址111数据数量110数据数量110221221数据数量1101111接收地址01122211接收地址111接收结束地址111传送数间接222传送数间接222传送数间接2225发送地址4发送地址传送起始基本地址偏移接收地址间接12846
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度75MOVG76MOVH77FIL178FILI181MKP282PCH283MKP184PCH185CDSET86CDO187CDO288SRH189WSRH190MOVE91UP192W93W94W95WB100MOV101WMOV102DMOV103MOVP104DMOVP105MOVR106DMOVR107MOVQ108DMOVQ109JIS110WMOVT111DMOVE112WMOVF113DMOVF114WMOVG115DMOVG116WMOVH117DMOVH118BMOV2119WBMOV120WBMVI1个字节间接传送24发送地址间接1个字节间接传送34发送地址间接接收地址间接220111221111111111111111112221111222222224212010200400100401004010040010224422422224222211022022215常数数据起始结束地址15常数数据间接起始间接结束地址间接4发送地址接收地址3检查起始4发送地址接收地址3检查起始5发送地址接收地址偏移接收地址基本地址15发送地址偏移发送地址基本地接收地址址25发送地址偏移发送地址基本地转换输出目标址15搜索数据保存地起始结束址字节数据加注间接数据加注偶数奇偶编制偶数奇偶检查奇数奇偶编制奇数奇偶检查代码转换设定代码转换输出代码转换输出字节数据搜索字符数据搜索1字节直接传送4发送地址高位方向移位1个字节4起始2进制加法运算字符S地址2进制减法运算字符S地址2进制乘法运算字符S地址2进制除法运算字符S地址传送16进制2位常数4常数数据传送16进制4位常数4常数数据传送16进制8位常数5常数数据低位传送BCD2位常数4常数数据传送BCD8位常数5常数数据低位传送10进制3位常数4常数数据传送10进制10位常数5常数数据低位传送8进制3位常数4常数数据传送8进制11位常数5常数数据低位JIS代码存储5常数数据低位16进制4位常数2处5常数数据传送4字节直接传送4发送地址2字节间接传送14发送地址4字节间接传送14发送地址2字节间接传送24发送地址间接4字节间接传送24发送地址间接2字节间接传送34发送地址间接4字节间接传送34发送地址间接字节块传送25发送地址起始字符块传送5发送地址起始字符间接块传送5发送起始间接15搜索数据保存地起始结束址847接收地址21接收地址结束D地址R地址D地址R地址D地址R地址D地址R地址接收地址接收地址常数数据高位接收地址接收地址常数数据高位接收地址接收地址常数数据高位接收地址接收地址常数数据高位接收地址常数数据高位接收地址接收地址接收地址接收地址接收地址间接接收地址间接接收地址接收地址接收地址间接接收地址间接接收地址起始传送数接收地址起始传送数接收起始间接传送数间接568568569569
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度122WDIV123DDIV124WPUP125DPUP126WBDIV127WBPUP128FIL2129WFIL130FILI2131WFILI132XCH133DXCH134BXCH135WBXCH136BSET137WBSET138DBSET139BRST140WBRST141DBRST142WBPU143DBPU144MOVJ145WMOVJ146DMOVJ147MOVK148WMOVK149DMOVK152BIN153DBIN154BCD155DBCD156JBIN157BJIS158WTIM1159WTIM2160FIFW161WFIFW162DFIFW163FIFR164WFIFR165DFIFR分配字符分配32位抽取字符抽取32位块分配字符块抽取字符字节数据加注2字符数据加注间接字节数据加注2间接字符数据加注8位转换32位转换块转换字节块转换字符位设定字节位设定字符位设定32位位复位字节位复位字符位复位32位位抽取字符位抽取32位寄存器文件字节寄存器文件字符寄存器文件32位寄存器文件字节寄存器文件字符寄存器文件32位BCD2位BINBCD8位BINBINBCD2位BINBCD8位JISBINBINJIS时分秒秒秒时分秒FIFO写入字节FIFO写入字符FIFO写入32位FIFO读出字节FIFO读出字符FIFO读出32位5发送地址5发送地址5发送地址基本地址5发送地址基本地址5传送基本地址偏移5发送地址间接5常数数据5常数数据5常数数据间接5常数数据间接4发送地址目的地4发送地址目的地5发送地址目的地5发送地址目的地4位的位置4位的位置4位的位置4位的位置4位的位置4位的位置4位的位置4位的位置4发送地址4发送地址4发送地址4发送地址4发送地址4发送地址4转换起始地址4转换起始地址4转换起始地址4转换起始地址5转换起始地址5转换起始地址4转换起始地址4转换起始地址5发送地址5发送地址5发送地址5文件起始5文件起始5文件起始接收地址基本地址接收地址基本地址发送地址偏移发送地址偏移接收地址间接传送起始基本地址偏移接收地址起始接收地址起始接收起始间接接收起始间接发送地址目的地发送地址目的地发送地址目的地发送地址目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地接收地址接收地址接收地址接收地址接收地址接收地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址文件起始文件起始文件起始偏移偏移偏移接收地址偏移222接收地址偏移422接收地址222接收地址424传送数间接222传送数间接222数据数量010数据数量020数据数间接122数据数间接2221144数据数量110数据数量220111214111214121411224411224411441144数据数量110数据数量1101221偏移112偏移222偏移442接收地址121接收地址222接收地址424848
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度556556557557558558559559166WCMOV167WCLR168169D170171D172173D174175W176D177P178DP179P180DP181P182WP183DP184P185WP186DP187WAND188DAND189WOR190DOR191WNOT192DNOT193WXOR194DXOR195INC196DINC197DEC198DDEC199INCP200WINCP201DINCP202DECP203WDECP204DDECP208SUM209WSUM210DSUM211DCP212SRH2213WSRH2清零确认传送字节重合数据清零字符2进制加法运算字节2进制加法运算32位2进制减法运算字节2进制减法运算32位2进制乘法运算字节2进制乘法运算32位2进制除法运算字节2进制除法运算字符22进制除法运算32位BCD加法运算2位BCD加法运算8位BCD减法运算2位BCD减法运算8位BCD乘法运算2位BCD乘法运算4位BCD乘法运算8位BCD除法运算2位BCD除法运算4位BCD除法运算8位逻辑乘法字符逻辑乘法32位逻辑和字符逻辑和32位反转字符反转32位异逻辑和字符异逻辑和32位2进制增量字节2进制增量32位2进制减量字节2进制减量32位BCD2位增量BCD4位增量BCD8位增量BCD2位减量BCD4位减量BCD8位减量ON位计数字节ON位计数字符ON位计数32位32位比较字节数据搜索2字数据搜索25发送地址起始接收地址清零确传送数认5比较起始清零目标起始数据数量5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址5S地址D地址R地址4发送地址接收地址4发送地址接收地址5S地址D地址R地址5S地址D地址R地址4比较目标地址1地址4比较目标地址1地址31地址31地址4比较目标地址1地址4比较目标地址1地址4比较目标地址1地址31地址31地址31地址4计数起始接收地址4计数起始接收地址4计数起始接收地址4比较目标地址比较的起始地址5搜索数据地址起始数据数量5搜索数据地址起始数据数量2202201114441114441124481112224441114441114441122244481112224441114441114442244422244411441411224412411214144210220849
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度214DSRH217SFR218DSFR219SFL220DSFL221SRL222WSRL223DSRL224BSFR225WBSFR226DBSFR227BSFL228WBSFL229DBSFL230BSRL231WBSRL232DBSRL233RRC234WRRC235DRRC236RLC237WRLC238DRLC239RLRC240WRLRC241DRLRC242RR243WRR244DRR245RL246WRL247DRL248RLR249WRLR250DRLR32位数据搜索右移1位字节右移1位32位左移1位字节左移1位32位左右移1位字节左右移1位字符左右移1位32位右移N位字节右移N位字符右移N位32位左移N位字节左移N位字符左移N位32位左右移N位字节左右移N位字符左右移N位32位带CY循环右移字节带CY循环右移字符带CY循环右移32位带CY循环左移字节带CY循环左移字符带CY循环右左移32位带CY循环左右移字节带CY循环左右移字符带CY循环左右移32位不带CY循环右移字节不带CY循环右移字符不带CY循环右移32位不带CY循环左移字节不带CY循环左移字符不带CY循环右左移32位不带CY循环左右移字节不带CY循环左右移字符不带CY循环左右移32位5搜索数据地址3移位地址13移位地址43移位地址13移位地址43移位地址13移位地址23移位地址44移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数404移位地址移位数104移位地址移位数204移位地址移位数40850起始数据数量440
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度251SUP252UP2253WUP254DUP255SDOWN256DOWN257WDOWN258DDOWN259STURN260TURN261WTURN281RI282RO283REF284REFO291ANN302MSET304SPR306SPW316HCR317HCW318IOR319IOW320MOVAD323H324WH325DH326HP327WHP328DHP329H330WH331DH332HP333WHP334DHP335H336WH上位方向移位4位上位方向移位字节上位方向移位字符上位方向移位32位下位方向移位4位下位方向移位字节下位方向移位字符下位方向移位32位倒置4位倒置8位倒置16位输入更新输出更新外部输入传送外部输出传送信号器DLNK信息发送特殊模块字节读出特殊模块字节写入高速计数器RD高速计数器WR共享IORD共享IOWR地址常数传送BIN常数加法运算字节BIN常数加法运算字符BIN常数加法运算32位BCD2位常数加法运算BCD4位常数加法运算BCD8位常数加法运算BIN常数减法运算字节BIN常数减法运算字符BIN常数减法运算32位BCD2位常数减法运算BCD4位常数减法运算BCD8位常数减法运算BIN常数乘法运算字节BIN常数乘法运算字符4移位起始移位数4移位起始移位数4移位起始移位数4移位起始移位数4移位起始移位数4移位起始移位数4移位起始移位数4移位起始移位数5发送地址接收地址5发送地址接收地址5发送地址接收地址4起始数据数量4起始数据数量5发送地址接收地址5发送地址接收地址4代码发送地址5链路NO传送数发送地址间接5链路NO传送数发送地址间接数据数量数据数量数据数量数据数量数据数量接收地址间接接收地址间接101020401010204011011022010101101100101122222222220220220021012024001012024001012024041012024041022044模块地址5模块地址5模块地址5模块地址4地址常数5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址接收地址发送地址数据数量接收地址数据数量发送地址数据数量接收地址常数数据R地址常数数据R地址常数数据低位常数数据高位常数数据R地址常数数据R地址常数数据低位常数数据高位常数数据R地址常数数据R地址常数数据低位常数数据高位常数数据R地址常数数据R地址常数数据低位常数数据高位常数数据R地址常数数据R地址560560561561851
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度337DH338HP339WHP340DHP341H342WH343DH344HP345WHP346DHP347ANDH348WANDH349DANDH350ORH351WORH352DORH353XORH354WXORH355DXORH362STI1363WSTI1364DSTI1369FRWR370CSET371BRSET372WBR373WBW374MAX375WMAX376DMAX377MIN378WMIN379DMIN380AVE381WAVE382DAVE576H577D578N579WHBIN常数乘法运算32位BCD2位常数乘法运算BCD4位常数乘法运算BCD8位常数乘法运算BIN常数除法运算字节BIN常数除法运算字符BIN常数除法运算32位BCD2位常数除法运算BCD4位常数除法运算BCD8位常数除法运算常数逻辑乘法字节常数逻辑乘法字符常数逻辑乘法32位常数逻辑和字节常数逻辑和字符常数逻辑和32位常数XOR字节常数XOR字符常数XOR32位X字节BINX字符BINX32位BIN闪存器写入发行IO寄存器读出EB地址设定从EB地址读出向EB地址写入最大值检索字节最大值检索字符最大值检索32位最小值检索字节最小值检索字符最小值检索32位平均字节平均字符平均32位比较AND16进制字节比较AND10进制字节比較AND变量字节比较AND16进制字符5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5S地址5起始地址5起始地址5起始地址5起始地址5数据数量5EB地址L5发送地址5发送地址5起始地址5起始地址5起始地址5起始地址5起始地址5起始地址5起始地址5起始地址5起始地址4S地址4S地址4S地址4S地址常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位接收地址接收地址接收地址接收地址FR寄存器发行目标地址EB地址H接收地址接收地址接收地址接收地址接收地址接收地址接收地址接收地址接收地址接收地址接收地址间接指定间接指定D地址间接指定常数数据高位R地址R地址常数数据高位R地址R地址常数数据高位R地址R地址常数数据高位R地址R地址常数数据高位R地址R地址常数数据高位R地址R地址常数数据高位数据数量数据数量数据数量数据数量保存目标地址接收地址传送数传送数数据数量数据数量数据数量数据数量数据数量数据数量数据数量数据数量数据数量4005625621022044001012024005635631012024001012024001012024001012024001222224225645642200110042202201122224245655651122224245665661122224245675671112852
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度928928929929580WD581WN582DH583DD584DN585H586D587N588WH589WD590WN591DH592DD593DN594H595D596N597WH598WD599WN600DH601DD602DN603H604D605N606WH607WD比较AND10进制字符比较AND变量字节比较AND16进制32位比较AND10进制32位比较AND变量32位比较AND16进制字节比较AND10进制字节比较AND变量字节比较AND16进制字符比较AND10进制字符比较AND变量字符比较AND16进制32位比較AND10進32位比较AND变量32位比较AND16进制字节比较AND10进制字节比较AND变量字节比较AND16进制字符比较AND10进制字符比较AND变量字符比较AND16进制32位比较AND10进制32位比较AND变量32位比较AND16进制字节比较AND10进制字节比较AND变量字节比较AND16进制字符比较AND10进制字符4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定常数高位常数高位22444111222853常数高位4常数高位44111229309309319312常数高位4常数高位4411122932932933933
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度608WN609DH610DD611DN612H613D614N615WH616WD617WN618DH619DD620DN621H622D623N624WH625WD626WN627DH628DD629DN640H641D644N648WH649WD652WN比较AND变量字符比较AND16进制32位比较AND10进制32位比较AND变量32位比较AND16进制字节比较AND10进制字节比较AND变量字节比较AND16进制字符比较AND10进制字符比较AND变量字符比较AND16进制32位比较AND10进制32位比较AND变量32位比较AND16进制字节比较AND10进制字节比较AND变量字节比较AND16进制字符比较AND10进制字符比较AND变量字符比较AND16进制32位比较AND10进制32位比较AND变量32位比较STR16进制字节比較STR10进制字节比较STR变量字节比较STR16进制字符比较STR10进制字符比较STR变量字符4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址2常数高位4854常数高位49349344935935111222常数高位4常数高位49369364937937111222常数高位4常数高位49389384939939111222
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度940940941941656DH657DD660DN664H665D668N672WH673WD676WN680DH681DD684DN688H689D692N696WH697WD700WN704DH705DD708DN712H713D716N720WH721WD724WN728DD729DD比较STR16进制32位比较STR10进制32位比较STR变量32位比较OR16进制字节比较OR10进制字节比较OR变量字节比较OR16进制字符比较OR10进制字符比较OR变量字符比较OR16进制32位比较OR10进制32位比较OR变量32位比较STR16进制字节比较STR10进制字节比较STR变量字节比较STR16进制字符比较STR10进制字符比较STR变量字符比较STR16进制32位比较STR10进制32位比较STR变量32位比较OR16进制字节比较OR10进制字节比较OR变量字节比较OR16进制字符比较OR10进制字符比较OR变量字符比较OR16进制32位比较OR10进制32位5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位855常数高位4常数高位44111222常数高位4常数高位44111222942942943943常数高位4常数高位4411122244944944945945常数高位常数高位946946
FUN助记符NO号732DN736H737D740N744WH745WD748WN752DH753DD756DN760H761D764N768WH769WD772WN776DH777DD780DN784H785D788N792WH793WD796WN800DH801DD804DN808H步带名称数OP1OP2OP3INDX符号浮动小数点单双精精度度比较OR变量32位比较STR16进制字节比较STR10进制字节比较STR变量字节比较STR16进制字符比较STR10进制字符比较STR变量字符比较STR16进制32位比较STR10进制32位比较STR变量32位比较OR16进制字节比较OR10进制字节比较OR变量字节比较OR16进制字符比较OR10进制字符比较OR变量字符比较OR16进制32位比较OR10进制32位比较OR变量32位比较STR16进制字节比较STR10进制字节比较STR变量字节比较STR16进制字符比较STR10进制字符比较STR变量字符比较STR16进制32位比较STR10进制32位比较STR变量32位比较OR16进制字节4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4947947111222常数高位4856常数高位49489484949949111222常数高位4常数高位49509504951951111222常数高位4常数高位495295249539531
FUN助记符步带NO号名称数OP1OP2OP3INDX符号浮动小数点单双精精度度809D812N816WH817WD820WN824DH825DD828DN832H833D836N840WH841WD844WN848DH849DD852DN856H857D860N864WH865WD868WN872DH873DD876DN880H881D884N888WH比较OR10进制字节比较OR变量字节比较OR16进制字符比较OR10进制字符比较OR变量字符比较OR16进制32位比较OR10进制32位比较OR变量32位比较STR16进制字节比较STR10进制字节比较STR变量字节比较STR16进制字符比较STR10进制字符比较STR变量字符比较STR16进制32位比较STR10进制32位比较STR变量32位比较OR16进制字节比较OR10进制字节比较OR变量字节比较OR16进制字符比较OR10进制字符比较OR变量字符比较OR16进制32位比较OR10进制32位比较OR变量32位比较STR16进制字节比较STR10进制字节比较STR变量字节比较STR16进制字符4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址5S地址常数低位5S地址常数低位4S地址D地址4S地址间接指定4S地址间接指定4S地址D地址4S地址间接指定11222常数高位4857常数高位49549544955955111222常数高位4常数高位49569564957957111222常数高位4常数高位495895849599591112
FUNNO助记符号名称步数OP1OP2OP3带符号浮动小数点INDX单精度双精度889WD比较STR10进制字符4S地址间接指定2892WN比较STR变量字符4S地址D地址2896DH比较STR16进制32位5S地址常数低位常数高位4897DD比较STR10进制32位5S地址常数低位常数高位4960960900DN比较STR变量32位4S地址D地址4961961904H比较OR16进制字节4S地址间接指定1905D比较OR10进制字节4S地址间接指定1908N比较OR变量字节4S地址D地址1912WH比较OR16进制字符4S地址间接指定2913WD比较OR10进制字符4S地址间接指定2916WN比较OR变量字符4S地址D地址2920DH比较OR16进制32位5S地址常数低位常数高位4921DD比较OR10进制32位5S地址常数低位常数高位4962962924DN比较OR变量32位4S地址D地址4963963858
832间接指定可以与以往一样使用间接地址。8321间接地址继电器寄存器的地址区域有以下四种。执行顺序程序及参照寄存器如下所示。自区域本程序内的基本区域文件寄存器B外区域1外程序内的基本区域P扩展区域1EH外区域2扩充区域2G扩充数据寄存器区域扩展数据寄存器U程序的执行程序的执行P1执行中P1执行中P2执行中P2执行中P3执行中P3执行中参照寄存器参照寄存器扩充数据寄存器扩充数据寄存器区域区域自区域自区域外区域外区域地址地址地址地址地址地址扩充扩充注该图为数据分割1模式例。参照下页内容直接指定地址时其它模式的地址标记不必特意区别上述3个地址空间。若将地址指定为则存取当前执行中的本程序的基本区域。若指定为P则存取外程序的基本区域若指定为EH则存取扩充区域若指定为U则存取扩充数据寄存器区域。859扩展数据寄存器扩展数据寄存器随着程序执行的切换本区域的随着程序执行的切换本区域的寄存器也会切换寄存器也会切换
在指定间接地址的时候为了区别上述3个地址空间存放间接地址的寄存器有必要使用用间接地址指定的区域的寄存器。间接指定地址保存目标地址寄存器1本区域的间接地址B本区域的寄存器B2外区域1的间接地址PEH外区域1的寄存器PEH3外区域2的间接地址G外区域2的寄存器G4扩充数据寄存器间接地址U扩展数据寄存器U1对本区域间接指定地址的时候在保存间接地址运算域的寄存器中使用本区域的寄存器。用间接字节地址指定间接地址。2对外区域1扩充区域1以及外程序的数据区域间接指定地址的时候在保存间接地址运算域的寄存器中使用用间接地址指定区域的寄存器。用偏移间接字节地址指定间接地址。在扩充区域偏移为0000h在程序1为4000h在程序2为8000h在程序3为C000h。例如把扩充区域从EX000至EX007之间的8点1字节向程序2的D0000的低位字节传送。MOVHEM00WP2D0100在此要预先对扩充内部继电器EMOOWEM000EMOOF设定扩充区域的EX000EX007的间接字节地址0B00h0000h0B00h对程序2的数据寄存器P2D0100设定D0000的低位字节的间接字节地址A000h8000h2000h。3对外区域2扩展区域2间接指定地址的时候存放间接地址的运算域寄存器使用G。4对扩充数据寄存器区域间接指定地址的时候在保存间接地址运算域的寄存器中使用扩充数据寄存器。用间接字节地址指定间接地址。为了用间接地址指定扩充区域需要在运算域中使用扩充区域寄存器EM00W。为了用间接地址指定程序2的区域需要在运算域中使用程序2的寄存器P2D0100。860
8322字节地址的表述方法用字节地址表示时在字符地址标记上带上HL用字符数据内的低位字节表示高位字节。对于位地址区域在字符地址右端添附W是字节地址时则通过添附HL表示。字符地址区域内的内容在字符地址的右端加注位则可使之成为位地址。例位数地址X000X001X002X003X004X005X006X007X008字地址字节地址LSBLSBX00L低位字节MSBX00WLSBX009X00AX00BX00CX00DX00EX00FD00000D00001D00002D00003D00004D00005D00006D00007D00008D00009D0000AD0000BD0000CD0000DD0000ED0000F高位字节X00HMSBMSBLSBLSBD0000L低位字节MSBD0000LSB高位字节D000HMSBMSB861位地址区域范例字符地址区域范例
位地址位数据字节数据字符数据0010213034h415160701234h8091A0B012hC1D0E0F0h表示16进制数。862
84指令841以往的指令1基本命令步数内为指定外区域或扩充区域数据时。No符号语言步数功能1STR12开始演算a接点2STRNOT12开始演算b接点3AND12串行连接a接点4ANDNOT12串行连接b接点5OR12并行连接a接点6ORNOT12并行连接b接点789ANDSTRORSTROUT1112逻辑块间的串行连接逻辑块间的并行连接线圈输出10SET12保持继电器设置11RST12保持继电器复位12PTS12上升微分13NTS12下降微分14FPS1开始多线圈分支15FRD1多线圈分支16FPP1结束多线圈分支17FST1用于无条件输出18NOT1条件反转19NOP1无处理854
2定时器计数器指令分类功能助记符号步数符号例子演算内容直接指定10ms定时器TMRH4T000TMRHK65535设定值为65535秒的10ms定时器。计时器间接指定10ms定时器TMRH4T001TMRHSD0100将D0100的内容作为设定值的10ms定时器直接指定100ms定时器TMR4T002TMRK65535设定值为65535秒的100ms定时器。间接指定100ms定时器TMR4T003TMRSD0100将D0101的内容作为设定值的100ms定时器直接指定10ms累计定时器TMRSH4T004TTMRSHK12345R设定值为12345秒的10ms累计定时器。累计定时器间接指定10ms累计定时器TMRSH4T005TTMRSHSD0102R将D0102的内容作为设定值的10ms累计定时器直接指定100ms累计定时器TMRS4T006TTMRSK12345R设定值为12345秒的100ms累计定时器间接指定100ms累计定时器TMRS4T007TTMRSSD0103R将D0103的内容作为设定值的100ms累计定时器升序计数器直接指定升序计数器CNT4C008CKCNTK65535R设定值为65535的升序计数器间接指定升序计数器CNT4C009CKCNTSD0104将D0104的内容作为设定值的升序计数器R递降计数器直接指定递降计数器CNTD4C00ACKCNTDK12345R设定值为12345的递降计数器间接指定递降计数器CNTD4C00BCKCNTDSD0105将D0105的内容作为设定值的递降计数器R直接指定升降计数器CNTH4C00CCKCNTHK65535UD升降计数器R设定值为65535的升降计数器间接指定升降计数器CNTH4C00DCKCNTHSD0106UD将D0106的内容作为设定值的升降计数器RUD输入升序计数的指令或者递降计数的指令条件满足则是升序计数条件不满足就是递降计数。855
3扩充定时器计数器指令分类功能助记符号步数符号例子演算内容扩充10ms定时器ETMRH3将扩充设定值寄存器H0000的内容作为设定值的10ms定时器计时器ET000ETMRHSH0000扩充100ms定时器ETMR3ET001ETMRSH0001将扩充设定值寄存器H0001的内容作为设定值的100ms定时器扩充10ms累计定时器ETMRSH3ET002TETMRSHSH0002将扩充设定值寄存器H0002的内容作为设定值的10ms定时器累计定时器R扩充100ms累计定时器ETMRS3ET003TETMRSSH0003将扩充设定值寄存器H0003的内容作为设定值的100ms累计定时器R升序计数器扩充升序计数器ECNT3EC004CKECNTSH0004R将扩充设定值寄存器H0004的内容作为设定值的升序计数器递降计数器扩充递降计数器ECNTD3EC005CKECNTDSH0005将扩充设定值寄存器H0005的内容作为设定值的递降计数器R升降计数器扩充升降计数器ECNTH3将扩充设定值寄存器H0006的内容作为设定值的升降计数器REC006CKECNTHSH0006UD扩充设定值寄存器与线圈地址相对应的固定的设定值寄存器。UD输入升序计数指令或者递降计数指令条件满足则是升序计数条件不满足就是递降计数。856
4应用命令41接点类型的应用命令分类号指令符号功能16进2位制4位间接指8位STRAND640576648579656582641577649580673WDHWHSHDHDWDSKDDNWNS1S2DNHWHSHDDWDSKDDNWNS1S2DNHWHSHDHDWDSKDDNWNS1S2DNHWHSHDHDWDSKDDNWNS1S2DNHWHSHDHDWDSKDDNWNS1S2DNHWHSHDHDWDSKDD3位5位定10进制10位8位寄存器16位32位16进2位4位657583644587652581660584688585696588704591689586697589705592692587700590708593736594744597752600737595745598753601740596748599756602784603792606800609785604793607801610788605796608804611832612840615848618833613841616849619836614844617852620880621888624896627881622889625897628884623892626900629681DD668N676WN684DN712H720WH728DH713D721WD729DD716N724WN732DN760H768WH776DH761D769WD777DD764N772WN780DN808H816WH824DH809D817WD825DD812N820WN828DN856H864WH872DH857D865WD873DD860N868WN876DN904H912WH920DH905D913WD921DD908N916WN924DN对寄存器与常数或者寄存器与寄存器进行比较如果SHSKS1S2则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较如果SHSKS1S2则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较如果SHSKS1S2则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较如果SHSKS1S2则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较如果SHSKS1S2则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较如果SHSKSS则接点进入接通状态。12间接指制定10进寄存器间接指定寄存器间接指定寄存器间接指定寄存器间接指定8位3位5位制10位8位16位32位16进2位寄存器SD寄存器NWNDNS1S2制10进制8位16位32位16进制10进制8位16位32位16进制10进制8位16位32位16进制10进制8位16位32位4位8位3位5位10位2位4位8位3位5位10位2位4位8位3位5位10位2位4位8位3位5位10位OR664H672WH680DH665D比较接点类型H16进制常数K10进制常数857
42输出类型的应用命令分类2位16进制常数传送4位8位3位BCD常数传送5位10位3位10进制常数传送5位10位3位8进制常数传送6位11位16进制常数2处2位传送4位8位直接传送16位32位8位16位32位号指令符号功能间接传送MOVEWMOVESDMOVEMOVFWMOVFSDMOVFMOVGWMOVGSDMOVGDDD1间接传送8位2间接传送8位MOVHWMOVHSDDMOVHBMOV1SD1D2BMOV21SD1D2WBMOVSDK16位332位直接传送8位1直接传送8位216位8位16位8位数据分配16位32位8位块分配16位8位数据抽取16位32位BMV1S1WBMV1DIVWDIVS1DDIVBDIVWBDIVS1PUPWPUPS1DPUPBPUPS1WBPUP块抽取8位16位4位间接传送DS2DS2DS2S2DDS2数据变更8位16位32位块变更8位16位JIS代码保存SXCHXCHD1D2WXCHDXCH对于4位的变更D1的高位4位和低位4位被改变并被保存在D中。对于8和16位的变更D16位32位100MOV101WMOV102DMOV103MOVP1WMOVP104DMOVP105MOVR7WMOVR106DMOVR107MOVQ8WMOVQ108DMOVQ62MOVT110WMOVT90MOVE0WMOVE111DMOVE74MOVF112WMOVF113DMOVF75MOVG114WMOVG115DMOVG76MOVH116WMOVH117DMOVH70BMOV1118BMOV2119WBMOV71BMV1120WBMV15DIV122WDIV123DDIV72BDIV126WBDIV6PUP124WPUP125DPUP73BPUP127WBPUP53SXCH132XCH2WXCH133DXCH134BXCH135WBXCH109JISMOVWMOVHDDMOV向D传送16进制常数H248位。向D传送BCD常数H248位。向D传送10进制常数K3510位。向D传送8进制常数K3611位向DD2处传送16进制常数H24位。S数据传送到D。S数据被传送到地址内容为D的寄存器。S数据被传送到地址内容为D的寄存器。寄存器中数据地址为S的内容被传送到地址为D的寄存器中内容中。本区域中初始地址为S的数据被传送到区域为D1和D2之间范围内。初始地址为S的以K所表示的数值数据被传送到以D为起始地址的区域。将以S1的内容作为起始地址的区域中的数据传输到以D的内容作为起始地址的区域内。S的内容2为传输数量。S1的数据被传送到列示的地址内。D的地址S2的偏移量。传送数据区域的数为S2中的内容传送数据的起始地址是S1地址S1内容所列示偏移。S1的地址S2内容中所示的偏移量为地址中列示的内容被传送到D所列示的地址。起始地址为S1的内容数量在S2的内容中的数据被传送到起始地址为D地址D的内容的偏移量的区域中。MOVPWMOVPDMOVPMOVRWMOVRDMOVRMOVQWMOVQDMOVQHDKDQDMOVTHD1D2WMOT12寄存器间接传送块传送传送BXCHD1D2WBXCH本区域中的数据其各自的起始地址分别是D1和D2地址并且以常数K表示被变更的区域的数据。将文字常数C1C2JIS代码从D的地址保存到4字节部分的区域中。KJISC1C2D85821和D2的内容被改变。
分类号指令FIL1符号HD1D2功能数据填充18位77FIL1将16进制2位常数H保存在用D1所示的地址到用D2所示的地址之间的区域中。数据填充28位128FIL2FIL2WFILH被传送到一个区域S的内容是起始地址K的内容是数据的数量。HSK16位129WFIL间接数据填充18位78FILI1FILI1FILI2WFILISD1DD2KS的内容被存储到一个区域D1的内容是起始地址D2的内容是数据的数量。间接数据填充28位130FILI2S1DS2S1的内容被存储到一个区域D的内容为起始地址S2的内容表示其数据的数量。16位131WFILI清除检查传送8位20CMOVCMOVWCMOV如果部分来自于D地址的数据K全是0那么数据部分来自于是S地址的从D被传送到数据区。S16位166WCMOV8位21CLR如把K部分开始于S地址的数据和K部分开于开始于S地址的数据进行匹配K部分的数据开始于D被清除。CLRWCLR匹配数据清除16位167WCLRSDK扩充输入输出传送283REFREFSDK将来自S地址的K字节部分的外部输入数据传送到以D为起始地址的区域。外部输出传送284REFOREFOSDK将来自S地址的K字节部分的数据传送到以D为起始地址的外部输出中。SD寄存器H16进制常数K10进制常数Q8进制常数C文字常数859传送
文件文件寄存寄存器器传送文件寄存器加法减法乘法除法增量减量32位8位16位WMOVJSDMOVJDD分类号指令符号功能寄存器8位16位144MOVJMOVJ32位寄存器MOVKWMOVKS8位2进制16位32位2位BCD4位8位8位2进制16位32位2位BCD4位8位8位2进制16位32位2位BCD4位8位8位WS1S2DDS2D2进制WBS1S2DWBCD4位8位8位2进制16位32位2位BCD4位8位8位2进制16位32位2位BCD4位8位8位195INCINCWINCSDDS2DS2DDS2DS2S3S2K数存入D1中。数据全部被作为BCD处理。将D的内容1后与S1的内容进行比较。数据作为2进制数处理。将D的内容1后与S1的内容进行比较。数据作为BCD数据处理。D的内容1。数据作为2进制数处理。D的内容1。数据作为BCD数据处理。进行S1的内容和S2的内容的逻辑与AND将结果保存在D中。进行S1的内容和S2的内容的逻辑相加OR将结果保存在D中。将S内容进行反转将位进行变换如是1则为0如为0则是1。将结果保存在D中。将S1的内容和S2的内容进行排他的逻辑加XOR将结果保存在D中。从S1地址到S2地址如果有和S3的内容一致的数据开启进位标记将该位置数据保存在S11中。从S2地址开始到用K指定数据数的区域如果有和S1内容一致的数据开启进位标记将这个位置与S2一致的数据存入S11。逻辑与AND16位32位187WAND188DANDWANDS1DAND逻辑加OR反转NOT排他的逻辑加XOR数据搜索1数据搜索28位16位32位8位16位32位8位16位32位8位16位8位16位32位14ORORWORS1SD寄存器K10进制常数86016位16位32位2位S1的内容除以S2的内容将商存入D中将余数存入D1中。数据全部作为2进制数处理。S的内容除以S的内容将商存入D中将余WPS1S2D12145WMOVJ146DMOVJ147MOVK148WMOVK149DMOVKDMOVK168将S的内容传送到文件寄存器D。将文件寄存器S的内容传送到D。进行S1的内容和S2的内容的加法运算将结果保存在D中。数据全部作为2进制数处理。进行S1的内容和S2的内容的加法运算将结果保存在D中。数据全部被作为BCD处理。从S1的内容中减去S2的内容将结果保存在D中。数据全部作为2进制数处理。从S的内容中减去S的内容将结果保存在12D中。数据全部被作为BCD处理。进行S1的内容和S2的内容的乘法运算将结92W169D177P10WP178DP17093W171D179P11WP180DP172WS1S2DDPWPS1S2DDPWS1S2DDPWPS1S2DDP95WB175W176D184P185WPDP186DP94W173D181P182WP183DP174果保存在D中。数据全部作为2进制数处理。进行S的内容和S的内容的乘法运算将结63WINCDINC196DINC199INCPINCP200WINCP201DINCPWINCPSDINCP197DECDEC64WDEC198DDEC202DECPDECP203WDEC204DDECWDECPDDECP13ANDAND189WORDOR190DOR9NOTNOTWNOTS191WNOTDNOT192DNOT18XORXOR193WXOR194DXOR88SRH189WSRH1212SRH2213WSRH2214DSRHH16进制常数WXORS1DXORSRH1WSRH1S1SRH2WSRH2S1DSRHPWPS1DPDPWDECDDECDD12果保存在D中。数据全部被作为BCD处理。传送数学运算逻辑运算搜索
分类功能将S的内容的低位7位作为原数据为了使1生成奇偶性位数这个位数成为奇数MKP1偶数MKP2将最高位的位进行设置或复位结果存入D。奇偶性检查BCD2进制的转换S的内容的奇偶性检查。如果1的位数不是奇数PCH1偶数PCH2则接通进位标记。将保存在S中的BCD数据转换为2进制数据后保存在D中。号指令符号奇数83MKP1MKP1MKP2SD偶数81MKP2奇数84PCH1PCH1PCH2S偶数82PCH22位8位152BINBINWBINDBIN4位16位3WBINSD8位32位153DBIN8位2位154BCDBCDWBCDDBCD16位4位4WBCDSD32位8位155DBCD156JBINJBINSDK157BJISBJISSDK50DECODECOSEGCDSETCDO1SS1SDS2DENCOSD51ENCO52SEGKWTIM1SD158WTIM1WTIM2SD159WTIM285CDSETD86CDO1S1S2D87CDO2CDO2S1S2D8位17CPCPWCPDCP16位12WCPS1S232位211DCP8位136BSETBSETWBSETDBSET16位137WBSETSD32位138DBSET8位139BRSTBRSTWBRSTDBRST16位140WBRSTSD32位141DBRST8位54BPUBUPWBPUDBPU16位142WBPUS1S232位143DBPU8位208SUMSUMWSUMDSUMSD16位209WSUM32位210DSUM将保存在S中的2进制数据转换为BCD数据后BCD的转换保存在D中。2进制JIS2进制的转换2进制JIS的转换416解码164编码7段解码时分秒秒的转换秒时分秒的转换代码转换设定代码转换输出1代码转换输出2比较位设定位复位位抽取ON位计数器从S的地址开始将以K表示的文字数的数据看作是JIS代码将此变为2进制数存入以D为起始地址的区域内。从S的地址开始将以K表示的位数看作16进制数将此转变为JIS代码存入以D为起始地址的区域内。将S的内容的低位4位解码为16进制数据存于D。在S的内容的16位中将ON位地址变为2进制数复数ON位时低位优先存于D的下位4位中。从S的地址开始只将以K表示的位数从2进制4位数据变为7段数据存入以D为起始地址的区域内。将以S为起始地址存储在4字节中的BCD形式的时分秒数据转换为01秒单位的2进制数据存于D。将S的内容视作01秒单位的2进制数据转变为BCD形式时分秒数据存于以D为起始地址的4字节中。将S1的内容传送到用D的地址S2的内容表示的寄存器中。S1的内容作为BCD处理。将用S2的地址S1内容表示的寄存器内容传送到D中。S1的内容作为BCD处理。将保存在用S2的地址S1内容表示的寄存器中的BCD数据传送到D1中然后转换为2进制数据后传送到D中。将S1的内容和S2的内容进行比较根据其大小关系启动三个标记中的一个。设定用S的内容指定的D的位复位用S的内容指定的D的位将用S1的内容指定的S2的位的内容向进位标记传送。对在S内容中处于ON状态的位的总和进行计数将其结果保存在D中。861奇偶性运算转换比较位操作
分类号指令符号功能8位217SFR将S内容右移1位。将D输入内容向最高位移位最低位的内容进入进位标记。DTSFRWSFRDSFRS右移1位16位36WSFR32位218DSFR8位224BSFRBSFRWBSFRDBSFR右移n位16位225WBSFRSK只将指定了S内容的位数K向右移位。32位226DBSFR219SFLSFLWSFLDSFL左移1位8位16位37WSFLTS将S内容左移1位。将D输入内容向最高位移位最低位的内容进入进位标记。32位220DSFL8位227BSFLBSFLWBSFLDBSFL左移n位16位228WBSFLSK只将指定了S内容的位数K向左移位。32位229DBSFL8位221SRLLRSRLWSRLDSRLST将S内容向左LRON右LROFF移动1位。左右移1位16位222WSRL32位223DSRLLRTBSRLWBSRLDBSRLS左右移n位8位16位230231BSRLWBSRL将指定了S内容的位数K向左LRON右LROFF移动1位。32位232DBSRLDDSD寄存器H16进制常数K10进制常数862移位
高位方向移位低位方向移位4位251SUP8位252UP216位253WUP32位254DUP8位91UP14位255SDOWN8位256DOWN16位257WDOWN32位258DDOWN8位160FIFWSUPUP2SWUPDUPUP1S1SDOWNDOWNWDOWNSDDOWNKS2KD1D2D1D2将S作为起始地址使用K指定了数据数区域的数据向高位移位。最低位的数据为0。以1个字节为单位使S1至S2区域数据移位。最低位数据不变。将S作为起始地址使用K指定了数据数区域的数据向低位移位。将最高位数据作为0。将S内容传送到用D1的地址D2的内容内容表示的偏移值表示的地址。然后D2的内容1。分类号指令符号功能写入FIFO16位32位162DFIFWFIFWWFIFWDFIFWFIFRWFIFRDFIFRSFINSFOUTRRCWRRCDRRCRRWRRDRRRLCWRLCDRLCRLWRLDRLLRRLRCSSSD1SSSSFIFO累积位移输入累积位移输出右旋转左旋转带进位16位左右旋32位转8位无进位16位SDD2KKKK161WFIFW8位163FIFR将S的内容传送到D2。将S作为起始地址使将D的内容作为数据数的区域的数据向低位移读取FIFO16位32位165DFIFR无进位16位32位244DRR转移子例程调用从子例程的返回开始重复开始重复间接结束重复主控程序输出输入更新输入更新输出更新启动主程序设定440MC复位444MCR280RIO281RI282RO448STARTDDKK243WRR8位236RLC带进位16位32位238DRLC164WFIFR1位。然后D1的内容1。68SFIN69SFOUT8位233RRC将从S的地址到D的地址的区域作为存储将S的内容累积起来。但是将0视为没有数据。将S的内容传送到D2。使D1地址到S1为止的数据向高位移位。将D1的内容变为0。使S的内容以及进位标记只以用K指定的位数向右旋转。使S的内容只以用K指定的位数向右旋转。使S的内容以及进位标记只以用K指定的位数向左旋转。使S的内容只以用K指定的位数向左旋转。将S的内容以及进位标记只以用K指定的位数向左LRON右LROFF旋转。将S的内容只以用K指定比特数向左LRON右LROFF旋转。向标号数Ln转移。执行标号数Sn的子例程用RET指令从本指令的下一步执行。终止子例程从调用该子例程的CALL指令的下一步开始执行。从本指令到NEXT指令重复K次从本指令到NEXT指令以用S的内容表示的次数重复。S的内容每次执行1。将从FORFORN命令到本命令的程序以用FORFORN命令指定的次数重复。控制从设定到复位的主控制范围的输出命令。MC命令输入处于ON状态则进行通常工作处于OFF状态则停止所有工作。将外部输入的ONOFF信息向设备X传输。从D的地址将K字节的外部输入数据向设备X传输。从D的地址将K字节的设备Y的ONOFF信息传送至外部输出。表示启动主顺序程序。带进位16位32位235DRRC234WRRC8位242RR237WRLC8位245RL无进位16位32位247DRL246WRL8位239RLRC240WRLRC241DRLRC248RLR249WRLRTWRLRCDRLRCSSLnSnKSK32位250DRLR272JMP273CALL464RET472FOR476FORN480NEXTLRRLRTWRLRDRLRJMPCALLRETFORFORNNEXTMCMCRRIORIROSTART移位旋转程序分支输出输入控制标识863
终止主程序分类号指令符号功能452ENDEND表示终止主顺序程序。终止程序456PENDPEND表示包含子例程在内的顺序程序的终止。标识460LABELLABELLn表示顺序程序的间隔和去向。SD寄存器H16进制常数K10进制常数n标识号SD寄存器H16进制常数K10进制常数分类号指令符号功能读取高速计数器数据316HCRHCRS1S2直接读取高速计数器模块的内部存储器。写入高速计数器数据317HCWHCWS1S2H向高速计数器模块的内部存储器直接写入数据。读取共享IO数据318IORIORS1S2H直接读取模拟模块的内部存储器。写入共享IO数据319IOWIOWS1S2H直接向模拟模块的内部存储器写入数据。读取特殊模块字节数据304SPRSPRS1S2S3直接读取串行IO模块的内部存储器。向特殊模块写入字节数据306SPWSPWS1S2S3向串行IO模块的内部存储器直接写入数据。信号器291ANNANNHS向特殊寄存器的信号器区域传输以代码H和S为起始地址的16字节的区域的信息数据和时刻。用户定义时钟293USCUSCK1K2K3设定特殊继电器的用户定义时钟12的动作。内置时钟30秒校正292ADJADJ内置时钟的30秒校正。不满30秒舍去超过30秒的进位。设定外设用通信速度288BAUDBAUDK将外设用通信速度变更位用K指定的速度。终止程序287STOPSTOP停止执行顺序程序。扫描时间复位46WDRWDR使扫描时间监控用定时器复位。864特殊模块其他
5在PC3J中追加的应用命令分类号指令符号功能以S的h1表示的位的位置为起始地址将用K位块传送121BBMOV4位259STURNBBMOVSTURNTURNWTURNSh1SDh2KDKDDH2DKDHDKHKHKDHDHHDH表示的点数的位数据向用D的h2表示的位的位置为起始地址的区域传送从以S为起始地址用K表示的数目的数据区域的最终数据反方向向以D为起始地址的区域传送。将S变为间接地址存入D。S的内容和常数H相加结果存入D。数据全部作为2进制数处理。S的内容和常数H2H1相加将结果存入S的下一个地址。数据全部被作为2进制数处理。S的内容和常数K相加结果存入D。数据全部被作为BCD处理。S的内容和常数K相加将结果存入S的下一个地址。数据全部被作为BCD处理。进行S的内容和常数H的相减结果存入D。数据全部作为2进制数处理。S的内容和常数H相减将结果存入S的下一个地址。数据全部被作为2进制数处理。S的内容与常数K相减结果存入D。数据全部被作为BCD处理。S的内容和常数K相减将结果存入S的下一个地址。数据全部被作为BCD处理。乘以S的内容和常数H结果存入D。数据全部作为2进制数处理。S的内容和常数H相乘将结果存入S的下一个地址。数据全部被作为2进制数处理。S的内容和常数K相乘结果存入D。数据全部被作为BCD处理。S的内容和常数K相乘将结果存入S的下一个地址。数据全部被作为BCD处理。S的内容和常数H相除将结果存入D余数存入下一个地址数据全部作为2进制数处理。S的内容和常数H相除将结果存入S的下一个地址余数存入再下一个地址数据全部作为2进制数处理。S的内容和常数K相除将结果存入D余数存入下一个地址数据全部作为BCD处理。S的内容和常数H相除将结果存入S的下一个地址余数存入再下一个地址数据全部作为BCD处理。进行S的内容和常数H的逻辑与AND结果存入D。进行S的内容和常数H的异逻辑乘与AND结果存入S的下一个地址。进行S的内容和常数H的逻辑加OR结果存入D。进行S的内容和常数H的逻辑加OR结果存入S的下一个地址。进行S的内容和常数H的排他逻辑加XOR结果存入D。进行S的内容和常数H的排他逻辑加XOR结果存入S的下一个地址。倒置8位16位261WTURN地址常数传送2进16位324WHWH325DHDHSHH1KHKHKHKHH常数加法BCD4位常数减法BCD4位常数乘法BCD4位BCD常数逻辑与常数逻辑加2进16位制32位336WHWH常数排他的逻辑16位加32位354WXORHWXORH355DXORHDXORHS260TURN320MOVADSSSSSSSSSSSSSSSSSSSSMOVAD8位323HHS制32位2位326HPHP2进16位制32位330WHWH331DHDH327WHPWHP8位328DHPDHP8位329HH2位332HPHP333WHPWHP8位334DHPDHP8位335HHDDD337DHDH2位338HPHP339WHPWHP8位340DHPDHP8位341HH342WHWH2进16位制DH常数除法32位4位345WHPWHP343DH2位344HPHP8位346DHPDHP8位347ANDHANDH16位348WANDHWANDH32位349DANDHDANDH8位350ORHORH16位351WORHWORH32位352DORHDORH8位353XORHXORHD传送数学运算逻辑运算865
分类32位号指令符号功能8位362STI1将以S1作为起始地址以S2的内容表示的数的数据区域的总和存入D。数据全部作为2进制数处理。STI1WSTI1DSTI1总和16位363WSTI1S1DS232位364DSTI18位374MAX将以S1作为起始地址以S2的内容表示的数的数据区域的最大值存入D。MAXWMAXDMAX最大值检索16位375WMAXS1DS2376DMAX8位377MIN将以S1为起始地址用S2内容标示的数值的数据区域的最小值存入D。MINWMINDMIN最小值检索16位378WMINS1DS232位379DMIN8位380AVE将以S1作为起始地址以S2的内容表示的数的数据区域的平均值存入D。数据全部作为2进制数处理小数点以下的四舍五入。AVEWAVEDAVE平均16位381WAVES1DS232位382DAVE附带条件的返回285CRETCRET条件满足时终止子例程从调用该子例程的CALL指令的下一步开始执行。区域指定输出输入更新295ARIOARIODK从D的地址开始更新K字节的外部输出输入。设定应用命令标记清除模式解除应用命令标记清除模式300SYSSYS410设定当读入应用命令时清除应用命令标记300SYSSYS400设定当读入应用命令时不清除应用命令标记SYS时钟调整命令300SYS调整保存在以S地址为起始地址的4字符中的BCD分秒日时年月时钟。SYS5S0SD寄存器H16进制常数K10进制常数6在PC3JG中追加的应用命令SD寄存器H16进制常数K10进制常数分类号指令符号功能缓冲寄存器传送寄存器地址设定371BRSETBRSETSD将S指定的缓冲寄存器EB的间接地址设置到以D为起始地址的2字符区域。间接读出372WBRWBRSDK将以S为起始地址的2字符区域的内容作为地址的缓冲寄存器中的内容用K指定的字符数传送到以D为起始地址的寄存器中。间接写入373WBWWBWSDK将以S为起始地址的寄存器区域用K指定的字符数传送到以D为起始地址的2字区域的内容作为地址的缓冲寄存器中。DLNKM2用信息发出指令302MSETMSETHSD用以H指定的DLNKM2为目标以H指定的尺寸大小发送以S为初始地址的信息。将来自DLNKM2的响应保存在以D为起始地址的寄存器中。CSET发出向TOYOPUCPCS进行IO寄存器的读出的指令370CSETCSETHSDPCS中以S为起始地址的IO寄存器读出的指令通过H仅发送指定的尺寸部分。将来自PCS的响应保存在以D为起始的寄存器中。866统计处理其他传送其他
浮动小数点加法运算单精度双精度16进制助记符号FDFUNNo55622C步数9步运算域OP1被加数据OP2加数据OP3运算结果可指定区域寄存器地址寄存器地址寄存器地址变址指定数据类型可单精度双精度可单精度双精度可单精度双精度PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP144OP244OP344地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能浮动小数点加法运算OP1OP2OP3444444OP18OP28OP38888888888FDD000D002D004dFDD000D004D008根据运算结果输出标记单精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CV57V56V55V54CYBOZErrErrV50非数字ZV5400CYV56运算规则00数值数值数值1非数字ERRERRERR10or数值oror被加数据0数值ERR865V53非数字ERRERRERRERRERRERRERRV52V51V50
浮动小数点减法运算单精度双精度16进制助记符号FDFUNNo步数9步运算域OP1被减数据OP2减数据OP3运算结果可指定区域55722DFR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP144OP244OP344444444OP18OP28OP38888888888地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C寄存器的偶数地址寄存器的4的倍数的地址寄存器地址寄存器地址寄存器地址变址指定数据类型可单精度双精度可单精度双精度可单精度双精度PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。功能浮动小数点减法运算FDdFDOP1OP2OP3D000D002D004D000D004D008单精度双精度根据运算结果输出标记V57V56V55V54CYBOZErrErrV50非数字ZV5400CYV56运算规则00数值数值数值1非数字ERRERRERR被减数据0数值10or数值oror866ERRV53非数字ERRERRERRERRERRERRERRV52V51V50
浮动小数点乘法运算单精度双精度16进制助记符号FDFUNNo55822E步数9步运算域OP1被乘数据OP2乘数据OP3运算结果可指定区域寄存器地址寄存器地址寄存器地址变址指定数据类型可单精度双精度可单精度双精度可单精度双精度PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIX888888OP144OP244OP344444444OP18OP28OP38888地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能浮动小数点乘法运算OP1OP2OP3FDD000D002D004例D000D002D004D006D000D004D008D00CCYBOZErrErrV50非数字ZV5400CYV56dFDD000D004D008单精度双精度根据运算结果输出标记运算规则数值非数字01ERRERRERRERRERRERRERRERRERRERR寄存器的偶数地址寄存器的4的倍数的地址V57V56V55V54V53V52V51V50被乘数据0数值非数字000ERRERRERR10or数值oror867
浮动小数点除法运算单精度双精度16进制助记符号FDFUNNo55922F步数9步运算域OP1被除数据OP2被除数据OP3运算结果可指定区域寄存器地址寄存器地址寄存器地址变址指定数据类型可单精度双精度可单精度双精度可单精度双精度PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP144OP244OP344444444OP18OP28OP38888888888地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C功能浮动小数点除法运算FDdFDOP1OP2OP3D000D002D004D000D004D008单精度双精度根据运算结果输出标记寄存器的偶数地址寄存器的4的倍数的地址V57V56V55V54CYBOZErrV50非数字ZV5400CYV56运算规则0ERR020020非数字ERRERRERRERRERR非数字ERRERRERRERRERRERRERRERR数值0110or数值oror2下溢结果为0被除数据0数值868V53V52V51V50Err
浮动小数点常数加法运算单精度双精度16进制助记符号FDFHFUNNo560230步数9步运算域OP1OP2加数据常数不可OP3可指定区域单精度双精度单精度双精度OP144OP2OP344被加数据寄存器地址可PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP18888OP2OP3地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C功能浮动小数点常数加法运算FDFHdFDFHOP1OP2OP1下一个寄存器寄存器的偶数地址寄存器的4的倍数的地址V57V56V55CYBOZErrErrV50非数字ZV5400CYV56运算规则非数字00数值ERR数值数值1ERR非数字10or数值oror869根据运算结果输出标记D00001D00002单精度向D002输出双精度向D004输出被加数据0数值变址指定数据类型V54V53V52V51V50
浮动小数点常数减法运算单精度双精度16进制助记符号FDDHFUNNo步数9步运算域OP1被减数据OP2减数据OP3可指定区域561231FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP18888OP2OP3OP144OP2OP344地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C功能浮动小数点常数减法运算FDDHdFDFHOP1OP2OP1下一个寄存器根据运算结果输出标记寄存器的偶数地址寄存器的4的倍数的地址D00001D00002单精度向D002输出双精度向D004输出寄存器地址可常数不可单精度双精度单精度双精度PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。V57V56V55CYBOZErrErrV50非数字ZV5400CYV56运算规则非数字00数值ERR数值数值1ERR非数字10or数值oror870被减数据0数值V54V53V52V51V50变址指定数据类型
浮动小数点常数乘法运算单精度双精度16进制助记符号FDFHFUNNo562232步数9步运算域OP1OP2乘数据常数不可OP3可指定区域单精度双精度单精度双精度被乘数据寄存器地址可PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP18888OP2OP3OP144OP2OP344地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C功能浮动小数点常数乘法运算FDFHdFDFHOP1OP2OP1下一个寄存器根据运算结果输出标记寄存器的偶数地址寄存器的4的倍数的地址D00001D00002单精度向D002输出双精度向D004输出V57V56V55CYBOZErrErrV50非数字ZV5400CYV56运算规则数值非数字10or数值oror871被乘数据0数值非数字000ERRERRERR01ERR变址指定数据类型V54V53V52V51V50
浮动小数点常数除法运算单精度双精度16进制助记符号FDFHFUNNo563233步数9步运算域OP1OP2除数据常数不可OP3可指定区域单精度双精度单精度双精度功能浮动小数点常数除法运算FDFHdFDFHOP1OP2OP1下一个寄存器被除数据寄存器地址可PVKTLXMSNRDJLJSEPEVEKETELEXEMESHENGSGZGFGXGMUEBFRCYECEYGYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP18888OP2OP3OP144OP2OP344地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C根据运算结果输出标记寄存器的偶数地址寄存器的4的倍数的地址D00001D00002单精度向D002输出双精度向D004输出V57V56V55CYBOZErrErrV50非数字ZV5400CYV56运算规则数值非数字被除数据0数值0ERR01非数字ERRERR10or数值oror872变址指定数据类型V54V53V52V51V50
浮动小数点总和单精度双精度16进制助记符号FDSTI1FUNNo564234步数9步运算域OP1起始地址寄存器地址可OP2运算结果寄存器地址可OP3数据数量寄存器地址可可指定区域PVKTLXMSNRDJLJSEPEVEKETELEXCYECEYOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度IXIXIXIX双精度IXIXIXIXOP144OP244OP322444422OP18OP28OP32888888222地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。例D000D002D004D006D000D004D008D00C寄存器的偶数地址寄存器的4的倍数的地址功能浮动小数点总和将以OP1为起始地址的区域的数据总和输出到OP2中。数据数为OP3的寄存器值BIN值。FDSTI1D000D100D104dFDSTI1D000D200D204根据运算结果输出标记V57V56V55V54CYBOZ单精度双精度V53V52V51V50ErrOFFOFFErrV50ZV54CYV56运算规则00数值数值数值1非数字ERRERRERR10or数值oror比非数字or数据数8192大00被加数据0数值非数字ERRERRERRERRERRERRERRERR873变址指定数据类型单精度双精度单精度双精度BIN16bitEMESHENGSGZGFGXGMUEBFRGY
浮动小数点最大值单精度双精度16进制助记符号FDMAXFUNNo565235步数9步可指定区域PVKTLXMSNRDCYECEYGY运算域OP1OP2运算结果寄存器地址可寄存器地址可寄存器地址可单精度双精度单精度双精度BIN16bit起始地址OP3数据数量变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能检索浮动小数点最大值FDMAXdFDMAX将在OP1为起始地址的区域的数据中搜索出的最大值输出到OP2中。数据数为OP3的寄存器值BIN值。根据运算结果输出标记ErrV50比非数字or数据数8192大ZV5400CYV56双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CD000D100D104D000D200D204单精度双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP32222IXIXIXIXOP18888OP28888OP32222V57V56V55V54V53V52V51V50CYBOZErrOFFOFF874
浮动小数点最小值单精度双精度16进制助记符号FDMINFUNNo566236步数9步可指定区域PVKTLXMSNRDCYECEYGY运算域OP1OP2运算结果寄存器地址可寄存器地址可寄存器地址可单精度双精度单精度双精度BIN16bit起始地址OP3数据数量变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能检索浮动小数点最小值FDMINdFDMIN将在OP1为起始地址的区域的数据中搜索出的最小值输出到OP2中。数据数为OP3的寄存器值BIN值。根据运算结果输出标记ErrV50比非数字or数据数8192大ZV5400CYV56双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CD000D100D104D000D200D204单精度双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP32222IXIXIXIXOP18888OP28888OP32222V57V56V55V54V53V52V51V50CYBOZErrOFFOFF875
浮动小数点平均单精度双精度16进制助记符号FDAVEFUNNo567237步数9步运算域OP1OP2运算结果寄存器地址可寄存器地址可寄存器地址可单精度双精度单精度双精度BIN16bit起始地址OP3数据数量可指定区域PVKTLXMSNRDCYECEYGY变址指定数据类型单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRJLJSGSGZGFOP1OP2OP3JLJSGSGZGF为系统区域用户禁止使用。FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值IXIXIXIXOP14444OP24444OP32222IXIXIXIXOP18888OP28888OP32222寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能浮动小数点平均将以OP1为起始地址的区域的数据的平均值输出到OP2中。数据数为OP3的寄存器值BIN值。FDAVED000D100D104dFDAVED000D200D204根据运算结果输出标记ErrV50比非数字or数据数8192大ZV5400CYV56单精度双精度V57V56V55V54V53V52V51V50CYBOZErr876
10进制常数传送单精度双精度16进制助记符号FDMOVRFUNNo569239步数9步运算域OP1OP2接收地址寄存器地址可OP3可指定区域PVKTLXMSNRDCYECEYGY传送数据常数可单精度双精度单精度双精度变址指定数据类型JLJSOP1OP2FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP1OP24444OP3IXIXIXIXOP1OP28888OP3dFDMOVR02D200根据运算结果输出标记双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能浮动小数点10进制常数传送向OP2的寄存器传送浮动小数点常数FDMOVR01D100单精度V57V56V55V54V53V52V51V50CYBOZErr877
BIN16浮动小数点单精度双精度16进制助记符号FFLTFUNNo57023A步数7步可指定区域BIN16bit单精度双精度PVKTLXMSNRDCYECEYGY运算域OP1OP3寄存器地址可寄存器地址可转换起始地址OP2转换目标地址变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CEPEVEKETELEXEMESHENGXGMUEBFRGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP12222OP24444OP3IXIXIXIXOP12222OP28888OP3功能BIN16浮动小数点将OP1寄存器的带符号16bit二进制数据转换为浮动小数点输出到OP2的寄存器中。FFLTD000D100单精度dFFLTD000D200双精度根据运算结果输出标记GSGZV57V56V55V54V53V52V51V50CYBOZErr878
BIN32浮动小数点单精度双精度16进制助记符号FDFLTFUNNo57123B步数7步BIN32bit单精度双精度PVKTLXMSNRDCYECEYGY运算域OP1OP2转换目标地址OP3可指定区域寄存器地址可寄存器地址可转换起始地址变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFROP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP14444OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能BIN32浮动小数点将OP1寄存器的带符号32bit二进制数据转换为浮动小数点输出到OP2的寄存器中。FDFLTD000D100单精度dFDFLTD000D200双精度根据运算结果输出标记GSGZV57V56V55V54V53V52V51V50CYBOZErr879GF
浮动小数点BIN16单精度双精度16进制助记符号FINTFUNNo57223C步数7步运算域OP1OP3可指定区域寄存器地址可寄存器地址可PVKTLXMSNRDCYECEYGY转换起始地址OP2转换目标地址单精度双精度BIN16bit变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP22222OP3IXIXIXIXOP18888OP22222OP3功能浮动小数点BIN16FINTErrV50非数字ZV5400CYV563276832767以外范围外寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C将OP1寄存器的浮动小数点数据的整数部分转换为BIN输出到OP2的寄存器中。D000D100单精度例353D000D200双精度根据运算结果输出标记dFINTV57V56V55V54V53V52V51V50CYBOZErrOFF880
浮动小数点BIN32单精度双精度16进制助记符号FDINTFUNNo57323D步数7步运算域OP1OP3寄存器地址可寄存器地址可PVKTLXMSNRDCYECEYGY转换起始地址OP2转换目标地址单精度双精度BIN32bit变址指定数据类型可指定区域JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP24444OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能浮动小数点BIN16将OP1寄存器的浮动小数点数据的整数部分转换为BIN输出到OP2的寄存器中。FDINTD000D100单精度例353dFDINTD000D200双精度根据运算结果输出标记ErrV50非数字ZV5400CYV5621474836482147483647以外范围外V57V56V55V54V53V52V51V50CYBOZErrOFF881
文字列浮动小数点单精度双精度16进制助记符号FVALFUNNo57423E步数9步转换起始地址寄存器地址可可指定区域PVKTLXMSNRDCYECEYGY变址指定数据类型运算域OP1OP2转换目标地址寄存器地址可OP3文字数常数ASCII单精度双精度10进制数JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。EPEVEKETELEXEMESHENGXGMUEBFROP2双精度GSGZGFOP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP12222OP24444OP3IXIXIXIXOP12222OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能ASCII浮动小数点将以OP1寄存器的低位作为起始地址的ASCII文字列OP3的数据数部分转换为浮动小数点输出到OP2中。FVALD000D100dFVALD000D200根据运算结果输出标记ErrV50不能转换数据数超过256ZV540CYV56上溢8d单精度8d双精度V57V56V55V54V53V52V51V50CYBOZErrOFF882
文字列浮动小数点单精度双精度16进制助记符号FSTRFUNNo57523F步数9步运算域OP1OP2转换目标地址寄存器地址可OP3文字数常数单精度双精度ASCII10进制数转换起始地址寄存器地址可变址指定数据类型可指定区域PVKTLXMSNRDCYECEYGYJLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。转换规格OP3的指定文字数小于16时小数点以下的位数为6位。OP3的指定文字数大于16时小数点以下的位数为12位。OP3的指定文字数为0时用指数方式表示。转换数据比指定文字数还大时出现FUN异常。虽然是123456但文字数为5时异常123456时为1234转换数据被舍入。双精度EPEVEKETELEXEMESHENGXGMUEBFROP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP22222OP3IXIXIXIXOP18888OP22222OP3功能浮动小数点文字列FSTRD000D1008d单精度dFSTRD000D2008d双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C将OP1寄存器的数据作为浮动小数点数据转换为ASCII后向OP2的寄存器中输出OP3的位数部分。OP3的位数为0000时用指数方式表示。根据运算结果输出标记ErrV50非数字位数不足数据数超过256V57V56V55V54V53V52V51V50CYBOZErrOFFOFFOFF883GSGZGF
弧度角度单精度双精度16进制助记符号DEGFUNNo9853D9步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能弧度角度将OP1寄存器的浮动小数点弧度转换为浮动小数点角度输出到OP2的寄存器中DEGD000D100单精度dDEGD000D200根据运算结果输出标记双精度V57V56V55V54V53V52V51V50CYBOZErrOFF884
角度弧度单精度双精度16进制助记符号RADFUNNo9863DA步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。dRADD000D200根据运算结果输出标记双精度双精度OP2寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CEPEVEKETELEXEMESHENGXGMUEBFROP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3功能角度弧度将OP1寄存器的浮动小数点角度转换为浮动小数点弧度输出到OP2的寄存器中。RADD000D100单精度GSGZGFV57V56V55V54V53V52V51V50CYBOZErr885
SIN单精度双精度16进制助记符号SINFUNNo9873DB步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能SIN将OP1寄存器的浮动小数点弧度作为SIN正弦输出到OP2的寄存器中。SIND000D100单精度dSIND000D200双精度根据运算结果输出标记EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErrOFF886
COS单精度双精度16进制助记符号COSFUNNo9883DC步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能COS将OP1寄存器的浮动小数点弧度作为COS余弦输出到OP2的寄存器中。COSD000D100单精度dCOSD000D200根据运算结果输出标记双精度V57V56V55V54V53V52V51V50CYBOZErrOFF887
TAN单精度双精度16进制助记符号TANFUNNo9893DD步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值EPEVEKETELEXEMESHENGXGMUEBFROP2单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度GSGZGFOP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能TAN将OP1寄存器的浮动小数点弧度作为TAN正切输出到OP2的寄存器中。TAND000D100单精度dTAND000D200双精度根据运算结果输出标记V57V56V55V54V53V52V51V50CYBOZErr888
ASIN单精度双精度16进制助记符号ASINFUNNo9903DE步数7步运算域OP1OP2转换目标地址OP3可指定区域变址指定寄存器地址可寄存器地址可数据类型单精度双精度单精度双精度转换起始地址PVKTLXMSNRDEPEVEKETELEXEESHENGXGMUEBFRCYFR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值GYJLJSOP1单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址寄存器的4的倍数的地址D000D002D004D006D000D004D008D00C功能ASIN将弧度值作为OP1寄存器的浮动小数点正弦值输出到OP2的寄存器中。ASIND000D100单精度dASIND000D200根据运算结果输出标记双精度ECEYMOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3例GSGFV57V56V55V54V53V52V51V50CYBOZErrOFF889GZ
ACOS单精度双精度16进制助记符号ACOSFUNNo9913DF步数7步变址指定数据类型运算域OP1转换起始地址寄存器地址可单精度双精度OP2转换目标地址寄存器地址可单精度双精度OP3可指定区域PVKTLXMSNRDEPEVEKETELEXEMESHENGXGMUEBFRCYECEYGYJLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。双精度GSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能ACOS将弧度值作为OP1寄存器的浮动小数点余弦值输出到OP2的寄存器中。ACOSD000D100单精度dACOSD000D200根据运算结果输出标记双精度V57V56V55V54V53V52V51V50CYBOZErrOFF890
ATAN单精度双精度16进制助记符号ATANFUNNo9923E0步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。dATAND000D200根据运算结果输出标记双精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能ATAN将弧度值作为OP1寄存器的浮动小数点正切值输出到OP2的寄存器中。ATAND000D100单精度EPEVEKETELEXEMESHENGXGMUEBFRGSGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErrOFF891GZ
平方根单精度双精度16进制助记符号SQRFUNNo9933E1步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能平方根将OP1寄存器的平方根输出到OP2中。SQRD000D100单精度dSQRD000D200根据运算结果输出标记双精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CEPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErrOFF892
乘方单精度双精度16进制助记符号POWFUNNo9943E2步数9步运算域OP1OP2幂指数可指定区域寄存器地址可寄存器地址可寄存器地址可PVKTLXMSNRDCYECEYGY幂底数OP3运算结果单精度双精度单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。POWD000D102D004dPOWD000D004D008根据运算结果输出标记单精度双精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能乘方用OP2寄存器求出OP1寄存器的乘方输出到OP3寄存器中。EPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP34444IXIXIXIXOP18888OP28888OP38888V57V56V55V54V53V52V51V50CYBOZErrOFF893
指数单精度双精度16进制助记符号EXPFUNNo9953E3步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能指数将OP1寄存器的指数低e输出到OP2寄存器中。EXPD000D100单精度dEXPD000D200根据运算结果输出标记双精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CEPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErrOFF894
对数e单精度双精度16进制助记符号LOGEFUNNo9963E4步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。功能对数e将OP1寄存器的对数低e输出到OP2寄存器中LOGED000D100单精度dLOGED000D200根据运算结果输出标记双精度双精度寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00CEPEVEKETELEXEMESHENGXGMUEBFRGSGZGFOP2OP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErr895
对数10单精度双精度16进制助记符号LOG10FUNNo9963E4步数7步运算域OP1OP2转换目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY转换起始地址寄存器地址可寄存器地址可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。dLOG10D000D200根据运算结果输出标记双精度双精度OP2寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C功能对数10将OP1寄存器的对数低10输出到OP2寄存器中LOG10D000D100单精度EPEVEKETELEXEMESHENGXGMUEBFRGSGFOP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3V57V56V55V54V53V52V51V50CYBOZErr896GZ
比较单精度双精度助记符号各种FUNNo步数79步运算域OP1OP2比较目标地址OP3可指定区域PVKTLXMSNRDCYECEYGY比较的起始地址寄存器地址可寄存器地址或常数可单精度双精度单精度双精度变址指定数据类型JLJSOP1FR区域为闪存器区域电源断电或复位后会恢复到原来的数值。指定变址前后指定时的变址加减值单精度地址指定规则单精度4字节边界双精度8字节边界指定了违反规则的地址时在运算过程中会在自动修正后进行运算。EPEVEKETELEXEMESHENGXGMUEBFROP2功能比较接点型FNdFN将OP1和OP2作为浮动小数点进行比较满足条件时OND000D100单精度D000D200双精度种类寄存器之间的比较常数比较FNFDFNFDFNFDFNFDFNFDFNFD根据使用场所有STRANDOR型。双精度GSGZGFOP3JLJSGSGZGF为系统区域用户禁止使用。IXIXIXIXOP14444OP24444OP3IXIXIXIXOP18888OP28888OP3寄存器的偶数地址寄存器的4的倍数的地址例D000D002D004D006D000D004D008D00C897
84284211PC10GToyopucNano专用应用命令定时器命令1ms1s在以往的10ms100ms单位的定时器上追加了1ms1s单位的定时器命令。与1ms单位定时器的不同点TMRHHTMRSHH受1ms单位定时器的限制程序在同一扫描内要反复执行多次。因此在循环处理内设置定时器命令则在超时的情况下也可在循环外进行程序处理。2LabelL0TMRHHT05msT0JMPL01s单位定时器TMRLTMRSL可进行长时间定时。Max65535秒定时器误差01秒18小时12分15秒分类功能助记符号步数符号例子演算内容处理时间s直接指定1ms计时器TMRHH4T000TMRHHK65535设定值为65535秒的1ms计时器。计时器间接指定1ms计时器TMRHH4T001TMRHHSD0100将D0100的内容作为设定值的1ms定时器。直接指定1000ms定时器TMRL4T002TMRLK65535设定值为65535秒的1000ms定时器。间接指定1000ms定时器TMRL4T003TMRLSD0100将D0101的内容作为设定值的1000ms定时器。直接指定1ms累计定时器TMRSHH4T004TTMRSHK12345R累计定时器设定值为12345秒的1ms累计计时器。间接指定1ms累计定时器TMRSHH4T005TTMRSHSD0102R将D0102的内容作为设定值的1ms累计定时器直接指定1000ms累计定时器TMRSL4T006TTMRSK12345R设定值为12345秒的1000ms累计计时器。间接指定1000ms累计定时器TMRSL4T007TTMRSSD0103R将D0103的内容作为设定值的1000ms累计定时器。898
8422翻转线圈追加在满足条件时进行反向输出的线圈。通常与边缘命令成对使用。ABAB翻转翻转翻转可在切换可编程显示器等的模式时使用。8423带符号运算可指定BIN型四则运算带符号的比较运算。1字节型8bit将最高位的bit7作为符号处理。12812780h7Fh2字符型16bit将最高位的bit15作为符号处理。32768327678000h7FFFh3双字符型32bit将最高位的bit31作为符号处理。214748364821478364780000000h7FFFFFFFh在加法运算和减法运算中带符号与否运算结果均相同。但在处理上溢下溢时会有变化应予以注意。不带符号字符FFFFh0001h0000h上溢带符号字符FFFFh0001h0000h不上溢1根据Pcwin2在回路监控中进行带符号运算时监控结果也带符号显示。899此时由于是字节型命令因此将最高位的bit7作为符号处理。复选有s则可进行带符号运算。
8424PID命令PIDD0000D0010D0020格式OP1各种参数的起始地址单精度浮动小数点OP2偏差输入保存地址单精度浮动小数点OP3PID输出保存地址单精度浮动小数点参数表OP1地址内容备注OP10mode工作模式0位置算法1速度算法OP12Kp比例系数OP14Ki积分系数OP16Kd微分系数OP18work0偏差积分值ei仅限mode0时OP110work1上次偏差e1在运算过程中保存数据用OP112work2上次偏差的差e1e2仅限mode1時OP114work3预约KiKpTsTiKdKpTdTsTi积分时间Ts取样周期定期分割间隔Td微分时间位置算法0MpKpe0KieiKde0e1速度算法1MpKpe0e1Kie0Kde0e1e1e2e0本次偏差e1上次偏差e2大上次偏差MpPID输出操作量时执行PID基本算式的命令在进行PID控制时使用。没有自动调谐等功能。本命令只能在定期分割过程中执行。定期分割的间隔则按原样成为取样周期。8100
8425浮动小数点命令选择浮动小数点对应的应用命令。选择单精度双精度。84251浮动小数点命令一览表助记符号内容单精度双精度浮动小数点运算的注意要点寄存器的使用方法单精度从寄存器的偶数地址例指定D0000D000和D001禁止从奇数地址开始指定双精度从寄存器的4符字境界例D000指定D000D001D002D003只能指定最低位048CFD加法运算浮动小数点FD减法运算浮动小数点FD乘法运算浮动小数点FD除法运算浮动小数点FDFH常数加法运算浮动小数点FDFH常数减法运算浮动小数点FDFH常数乘法运算浮动小数点FDFH常数除法运算浮动小数点FDSTI1X浮动小数点FDMAX最大值检索浮动小数点FDMIN最小值检索浮动小数点FDAVE平均浮动小数点FDMOVR10进制常数传送浮动小数点FFLTBIN16浮动小数点FDFLTBIN32浮动小数点FINT浮动小数点BIN16FDINT浮动小数点BIN32FVAL文字列浮动小数点FSTR文字列浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较AND10进制浮动小数点FFN比较AND变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点数据格式根据IEEE754规定进行单精度32bit双精度64bit8101
助记符号内容FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点FFD比较STR10进制浮动小数点FFN比较STR变量浮动小数点FFD比较OR10进制浮动小数点FFN比较OR变量浮动小数点DEG弧度角度RAD角度弧度SIN正弦单精度双精度COS余弦COSTAN正切TANASIN反正弦ASINACOS反余弦ACOSATAN反正切ATANSQR平方根SQRTPOW乘方POWEXP指数运算EXPLOGE对数运算LOGeLOG10对数运算LOG108102
84252浮动小数点数命令的内部表示方式1小数点数的内部表示方式参见IEEE标准。afloat型31302322指数部分8位符号部分1位double型和longdouble型63625251指数部分11位符号部分1位0尾数部分23位b0浮动小数点数的符号。为0时为正为1时为负。2指数部分用2次方表示浮动小数点的指数。3尾数部分对应浮动小数点有效数字的数据。3表示值的种类浮动小数点除了用通常的实数值表示之外还可用无限大等数值表示。浮动小数点的表示值种类如下所示。1标准化数指数部分为0或所有位数不为1时。以通常的实数值来表示。2非标准化数指数部分为0尾数部分不为0时。以绝对值较小的实数值来表示。3零指数部分及尾数部分为0时。以值00来表示。4无穷大指数部分所有位数为1尾数部分为0时。以无穷大来表示。5非数字指数部分所有位数为1尾数部分不为0时。作为与数值不对应的运算结果得到0000等结果。8103尾数部分52位2内部表示方式的各组成要素意义如下。1符号部分
84253浮动小数点数命令的数据格式详细内容afloat型1标准化数用符号部分为0正或1负表示数值符号。指数部分取1254282范围内的数值。实际指数是从该值延减去127后的值其范围为126127。尾数部分取02231范围内的数值。将223位假定为1其后有小数点的部分可解释为实际的尾数。标准化数的表示值为1符号部分2指数部分1271尾数部分223。例313023220符号指数1000001021273尾数101121375值137523112表示2进制数。15010000010011000000000000000000002非标准化数用符号部分为0正或1负表示数值符号。指数部分为0实际的指数则为126。在12231范围内将实际的尾数223的位假定为0可将其后的小数点部分解释为尾数部分。非标准化数的表示值为1符号部分2126尾数部分223。例31302322符号指数126尾数001120375值0375212602表示2进制数。15000000000011000000000000000000003零用符号部分为0正或1负分别表示0000。指数部分尾数部分均为0。0000作为数值均用00。4无穷大用符号部分为0正或1负分别表示。指数不f分为255281。尾数部分为0。5非数字指数不f分为255281。尾数部分为0以外的数值。8104
bdouble型和longdouble型1标准化数用符号部分为0正或1负表示数值符号。指数部分取120462112范围内的数值。实际指数是从该值减去1023后的值其范围为10221023。尾数部分取02521范围内的数值。将252位假定为1其后有小数点的部分可解释为实际的尾数。标准化数的表示值为1符号部分2指数部分10231尾数部分252。例63625251符号指数1111111111210230尾数10111214375值143752014375000111111111101110000000000000000000000000000000000000000000000002非标准化数用符号部分为0正或1负表示数值符号。指数部分为0实际的尾数则为1022。在12231范围内将实际的尾数223的位假定为0可将其后的小数点部分解释为尾数部分。非标准化数的表示值为1符号部分21022尾数部分252。例63625251符号指数1022尾数00111204375值043752102202表示2进制数。10000000000011100000000000000000000000000000000000000000000000003零用符号部分为0正或1负分别表示0000。指数部分尾数部分均为0。0000作为数值均用00。4无穷大用符号部分为0正或1负分别表示。指数部分为20472111。尾数部分为0。5非数字指数部分为20472111。尾数部分为0以外的数值。81052表示2进制数。
84254浮动小数点数命令的四则运算规则1结果数值的舍入方法虽然浮动小数点的四则运算结果正确但内部表示的尾数超出有效数字时按以下规则进行舍入。1在近似该值的两个浮动小数点内部表示中向更接近的舍入结果数值。2该值处于近似的两个浮动小数点正中央时向尾数最末位为0的方向舍入结果数值。2上溢下溢无效运算时的处理对实际中发生的上溢下溢无效运算进行如下处理。1上溢时根据结果符号为正或负无穷大。2下溢时根据结果符号为正或负零。3在进行不同号无穷大的加法运算同号无穷大的减法运算零和无穷大的乘法运算用零除零或用无穷大除无穷大时会出现无效运算。此时结果为非数字。3与特殊数值零无穷大非数字运算相关的注意事项1正的零和负的零之和为正的零。2同号的零的差为正的零。3运算一方或双方含有非数字时的运算结果始终为非数字。4在比较运算中将正的零和负的零作为相同的数字处理。84255浮动小数点命令的数据寄存器上的排列单精度D0000D0001必须从偶数地址开始双精度D0000D0001D0002D0003必须从4的倍数的地址开始15141312111098765432103130292827262524232221201918171615141312111098765432103130292827262524232221201918171647464544434241403938373635343332636261605958575655545352515049488106
8431分层通信用应用命令概要记载了由TOYOPUCNano越过网络分层进行事件通信用的功能。PLCFLnetPLCPLCPLCFLnet从TOYOPUCNano经过分层进行消息通信。FLnet2通信的方法分层通信用的消息中继命令可在TOYOPUCNano的梯形程序中通过执行专用的应用命令来发送接收。专用应用命令将不等到响应就结束并返回顺序运算所以命令结束时响应接收并不同时。响应接收以相关链接的可使用链接标志来确认。TOYOPUCNano8108
3应用命令的规格LCSET链接命令发布FUN3831可用设备XYMKVTCLPDRNSB常数OP1OP2OP3PC3PC2PC3扩展PC10扩展EXEYEMEKEVETECELEPUHENESGXGYGMGSGZGFJLJSEBFROP1OP2OP3GSGZGFJLJS是系统区域所以禁止使用。FR区域是闪存寄存器所以已写入的数据要通过电源OFF或重置来恢复2步骤数53符号LCSET4功能从OP2的寄存器中向链接模块发出用OP1表示的容量区域中所设定的消息。另外接收到响应时将响应保存在OP3的寄存器中。应用命令结束后响应数据仍未进行设置。响应数据的设置完成后即可设置链接命令使用许可标志。本命令以链接模块分配的程序编号来执行。OP1格式命令大小FCB0LCSET100AhD0100U0000链接No5标志数据容量最大550字节CYBOZER错误标志ER保存区域超出数据存储器区域时为ON。6程序例M0为ON发给链接No3中分配的FLnet的链接命令可使用时发布以R0200至R0204的10字节进行定义的消息命令。将响应保存在以D0800为起始的区域内。M000P000V90OP1300AhOP2R0200OP3D0800LCSET300AhR0200D08008109
4消息格式以TOYOPUC以太网的计算机链接方式中继命令格式为准。但是应用命令中的命令数据设定中不需要报头部分从起始开始的6字节。表示在D0100中设定命令并将响应保存在U0000中时的例子。命令D0100D0101D0102D0103D0104D010n参考以太网中继命令不需要响应U0000U0001U0002U0003U0004U000n链接模块的局号与实际发出命令的CPU模块相对的命令局号上位局号下位LL05命令代码LH数据数据数据数据00数据将中继命令第7字节以下的部分设置在寄存器中。0000LLLHCMD05LLLH数据00正常响应局号上位局号下位U0000U0001U0002U0003U0000U0001U0002U0003U0004U0005U0006异常响应第2分层时异常响应第1分层时局号上位局号下位LL06LL15命令代码LHNAK代码LH数据数据XX数据数据局号上位局号下位LL0660LH局号下位链接No15局号上位LHLLXXNAK代码00数据注响应数据长度最大为512字节命令报头部分除外8110链路No局号下位局号上位命令代码
5使用例1数据写入PLCTOYOPUCNano程序No3局号100FLnet程序No1局号100PLCFLnetPLC局号100FLnet程序No1在上述网络中当P1M500为ON时发出在TOYOPUCNano的P2D0800中写入1234h的命令。命令设置在P1D0100中。响应用U0400来接收。顺控程序M500P000V98V98P001M510程序OP1101ChLCSET101ChD0100LU0400LOP2D0100L响应接收处理8111M510SM510ROP3U0400LM510命令执行中
命令数据中继命令代码21640005160060136400050E0060326400050600950200183412000000局号P1L32的字节数1的字节数P3L2局号局号上位下位1数据扩展文字写入在最终数据中追加0000641605600064130500000E32600064060595000002341800120000D0100D0101D0102D0103D0104D0105D0106D0107D0108D0109D010AD010BD010CD010D响应数据26400061100601364000609006032640006010095XXXXXXACK061的字节数ACK062的字节数ACK06数据扩展文字写入上位下位U0400U0401U0402U0403U0404U0405U0406U0407U0408U0409U040AU040B0064110660006413060000093260006401069500XXXXXX8112
PLC2数据读出程序No3PLCFLnetTOYOPUCNano局号100FLnet局号100FLnet程序No1局号100程序No1顺控程序M120P010V98V98P011M180程序LCSET101Dh响应接收处理EB00000LEB00800LOP1101DhOP2EB00000LOP3EB00800LPLC在上述网络中当P1M120为ON时发布将TOYOPUCNano的FR01000至FR10FF512字节读出的命令。命令设置在EB00000中。响应用EB00800来接收。8113M180SM180命令执行中M180R
命令数据中继命令代码21640005170060136400050F0060326400050700C2002040000002000000局号P1L32的字节数EB00000EB00001EB00002EB00003EB00004EB00005EB00006EB00007EB00008EB00009EB0000AEB0000BEB0000CEB0000DEB0000E1的字节数P3L2局号局号上位下位数据扩展文字写入在最终数据中追加0000641705600064130500000F326000640705C200200000400200000000响应数据响应数据为FR000000000FR000010001FR000020002时1264000611026013640006090260326400060102C20000010002000300FD00FE00FF00XXXXXXACK06PC10数据字节读出ACK061的字节数EB00800EB00801EB00802EB00803EB00804EB00805EB00806EB00807EB00808EB00809EB0080AEB0080BEB0080CEB00908EB00909EB0090AEB0090BACK062的字节数上位下位006411066002641306000209326000640106C20200000001000200FE00FFXXXXXX8114
85设备情报存储器设备信息存储器是与顺序程序参数数据不同的是单独存放顺序线路注释的存储器。设备信息存储器的容量为4MB。在只有地址注释的时候通常能够存储10000件以上的注释。能够容纳的注释数随着注释内容的变化而变化。通过PCwin2将注释等存入设备信息存储器。读出存在设备信息存储器中的信息PCwin2可以显示附带注释的线路图和循环线路图等。对设备情报存储器的存入和读出可以通过与CPU工作模式无关的PCwin2来进行。不能通过顺序程序变更存在设备信息存储器中的信息也不能将数据存入设备信息存储器。也不能通过顺序程序参考存入的信息。CarryCarryoutDooroutunderopenpositionpositionpositionRestartStart外部设备PCwin2UnclampPaletteNCstartpositionpositionreturnpositionStartStartContinuousReturnContinuousStandIntensivpositionoffbyerreCycleoffStart8115设备信息存储器4MB命令等Startposition用户存储器顺序程序参数数据显示以设备信息存储器中保存的信息为基础的带有注释的回路图等。ToyopucNano
86861862备份功能存储器的备份功能用户程序顺控程序和参数数据存储器设备信息存储器中的内容注释等在即使停电也能保留其内容的非易失性存储器中做了备份所以不会发生数据消失的情况。内置时钟的后备支持功能内置时钟的时刻信息可通过电容器来做后备支持。保留期限为10天以上因此即使是长假连休等保留时间上也毫无问题。万一时刻信息消失时会检出错误代码AF时刻未设定的警报因此请在PCwin2中进行时刻设定。进行时刻设定后警报就会消失。8116
8638631闪存寄存器与PCwin2的通信设定可用参数指定来限制容量。可用这种方法来减少数据备份等中的不必要的处理未使用区域的备份实现备份的高速化。8632闪存器闪存存储器中保存的数据在挥发性RAM上已展开的状态下使用闪存器。闪存存储器挥发性RAMFR寄存器4Mbyte在初始化时传送只传送设定的容量。可随时存取顺控程序MOVDM8117FR0D0注意虽然可随时在FR寄存器上进行存取但在向FR寄存器中写入时电源中断或进行复位操作则写入的内容会被原来闪存存储器上的数据替换。因此通常将其作为只读专用寄存器使用。
8633闪存器与其它寄存器的不同点FR闪存器与其它寄存器的规格不同。请在充分了解FR寄存器规格的基础上使用。特征1闪存器不在删除其内容后就无法写入。因此对同一地址而言只需删除1次后便可写入。在删除状态下数据变为FFFFh。特征2闪存器的删除只能以64kbyte为单位进行。因此只能在有限的几个字节范围内进行删除。特征3FR寄存器保存在非易失性存储器中因此即使停电时数据也会被保留下来。特征4写入删除需要一定的处理时间。删除1块64kbyte约需05秒。写入1个字符约需6s。特征5进行某一区域的删除写入时不能进行其它区域的删除写入操作。8634用途例1用途1保存工件的加工条件各种设定条件等常数数据不会因运算而发生变化的数据用。作为只读专用寄存器使用通过PCwin2等编制常数数据再通过寄存器写入功能写入到ToyopucNano中。通过PCwin2写入寄存器中时不仅写入FR寄存器区域挥发性RAM中同时也会写入闪存存储器中。2用途2作为运算工作区使用。根据电源中断时数据也不会被删除的数据或接通电源时通常从高位计算机写入的最新数据中最新的数据进行控制。电源中断时数据也不会被删除的数据3用途3保存设备的记录信息用。使用专用命令将记录信息保存在闪存存储器中。保存到一定量时通过高位计算机等读出记录信息。8118
8635FR寄存器地址一览表用户标记地址字符单位ExNo用户标记地址字符单位40FR10000041FR10800042FR11000043FR11800044FR12000045FR12800046FR13000047FR13800048FR14000049FR1480004AFR1500004BFR1580004CFR1600004DFR1680004EFR1700004FFR17800050FR18000051FR18800052FR19000053FR19800054FR1A000055FR1A800056FR1B000057FR1B800058FR1C000059FR1C80005AFR1D00005BFR1D80005CFR1E00005DFR1E80005EFR1F00005FFR1F8000FR000000FR008000FR010000FR018000FR020000FR028000FR030000FR038000FR040000FR048000FR050000FR058000FR060000FR068000FR070000FR078000FR080000FR088000FR090000FR098000FR0A0000FR0A8000FR0B0000FR0B8000FR0C0000FR0C8000FR0D0000FR0D8000FR0E0000FR0E8000FR0F0000FR0F8000FR007FFFFR00FFFFFR017FFFFR01FFFFFR027FFFFR02FFFFFR037FFFFR03FFFFFR047FFFFR04FFFFFR057FFFFR05FFFFFR067FFFFR06FFFFFR077FFFFR07FFFFFR087FFFFR08FFFFFR097FFFFR09FFFFFR0A7FFFFR0AFFFFFR0B7FFFFR0BFFFFFR0C7FFFFR0CFFFFFR0D7FFFFR0DFFFFFR0E7FFFFR0EFFFFFR0F7FFFFR0FFFFFExNoFR107FFF60FR10FFFF61FR117FFF62FR11FFFF63FR127FFF64FR12FFFF65FR137FFF66FR13FFFF67FR147FFF68FR14FFFF69FR157FFF6AFR15FFFF6BFR167FFF6CFR16FFFF6DFR177FFF6EFR17FFFF6FFR187FFF70FR18FFFF71FR197FFF72FR19FFFF73FR1A7FFF74FR1AFFFF75FR1B7FFF76FR1BFFFF77FR1C7FFF78FR1CFFFF79FR1D7FFF7AFR1DFFFF7BFR1E7FFF7CFR1EFFFF7DFR1F7FFF7EFR1FFFFF7FExNo闪存存储器上的删除单位上使用的No64Kbyte单位字节地址的高位2位8119
8636FR寄存器删除写入专用命令1闪存存储器删除FRCL初始块结束块指定删除的块No上表中的ExNo的初始和结束地址后删除。2闪存写入专用命令FRWR寄存器地址FR寄存器写入字数通过与字型块传送WBMOV相同的格式进行指定。同时有两个命令时由于闪存存储器的删除写入是启动命令。因此必须要等到删除写入结束后才能执行下一命令。可通过特殊继电器V100判别是否结束实际的闪存寄存器的删除写入通过系统侧自动进行。特殊继电器EV100可写入闪存存储器标记EV101写入闪存存储器失败标记EV100删除结束写入结束FRWR执行FRCL执行也可通过以太网指令向闪存存储器写入。详细内容参见9891以太网指令。FRWRI8120
参考回路不断向FR寄存器中存入设备记录信息。保存记录用FR00000FR0FFFFF的1Mbyte一次的记录信息64字节将准备在D0000D001F中的记录信息写入FR寄存器中。回路用于变址寄存器。参见83变址寄存器。清除FR寄存器写入记录确认起动写入记录起动写入记录起动写入记录起动写入记录确认起动写入记录起动清除FR寄存器清除FR寄存器1M404F确认FR寄存器起动初始FR寄存器地址退避FR寄存器地址起动写入记录设置记录数据写入FR寄存器地址写入记录确认起动写入记录更新FR寄存器地址退避FR寄存器地址确认FR寄存器起动起动清除FR寄存器起动清除FR寄存器FR寄存器可WR确认FR寄存器起动起动写入记录FR寄存器可WR8121
87RUN中写入由于在写入过程中会暂时停止执行程序因此请勿在设备工作或对象机械工作过程中进行RUN中的写入。请在设备机械处于循环停止状态下进行RUN中的写入。由于电路的更改设备有时会发生无法预测的动作应充分注意安全。注意PC侧的CPU工作模式与PCwin2侧的CPU工作模式不同时无法进行RUN中的写入。步骤1点击CPU菜单WriteontoCPU写入到CPU中的Program程序13。显示信息后点击Yes是。2显示下一画面。8122
1为了防止发生危险严禁在PC运行过程中进行写入。不得不进行RUN中的写入时应再次阅读警告内容后再进行作业。密码请使用如下所示的2个半角文字。密码W2写入后重新启动PC时复选WriteprogramandresetstartPC写入后重新启动点击Continue继续。未重新启动时继续点击Continue继续。3写入结束后显示结束信息。点击OK确定。8123
88程序库功能ToyopucNano内置程序库功能。功能的详细内容参见程序库功能的使用说明书。89SFC功能的详细内容参见PCwin2的使用说明书ta65。利用SFC编程时SFC的执行控制占用下述数据存储器区域。因此应该注意不能作为用户存储器使用。另外应该注意有时因工作模式不同不能利用SFC编程。SFC的执行控制也会占用特殊继电器的V58V5DEV800EVBFF因此不对该区域进行访问。工作模式程序步数过渡数动作数动作标辅助处理数步识数SFC数100016100025610011000161000256100100016100025610050010001610002561005001000161000256100500100016100025610010001000161000256100数据存储器占用区域NoPC10P1P1R580R7FFP2R580R7FFP3R580R7FFP1R580R7FFP2R580R7FFP3R580R7FFP1R580R7FFP3R580R7FFP1R580R7FFP2R580R7FFET000ET5FF2ET000ET1FFET200ET3FFET400ET5FFET000ET3FFET400ET5FFET000ET1FFET200ET5FFH000H5FF2H000H1FFH200H3FFH400H5FFH000H3FFH400H5FFH000H1FFH200H5FFEN000EN5FF2EN000EN1FFEN200EN3FFEN400EN5FFEN000EN3FFEN400EN5FFEN000EN1FFEN200EN5FF模式P2P3P1分离1P2P3P1分离2P2P3P1分离3P2P3P1分离4P2P3P1分离5P2P3P1单一1P25001000500100010001000161000256100161000256100161000256100P1单一3P2P3P1单一4P2P3P1单一5P2P3P1单一6P2P3PC2兼容P1可使用编号500100016100025612表示PC3JG分割模式的各程序No可使用级数的限制。5001000165001000161000256100P1R580R7FFET000ET1FFH000H1FFEN000EN1FF1000256100P2R580R7FFET200ET3FFH200H3FFEN200EN3FF5001000161000256100P1R580R7FFP3R580R7FFR580R7FFR580R7FFR580R7FFET000ET1FFH000H1FFET400ET5FFH400H5FFET000ET1FFH000H1FF不可不可ET000ET3FFH000H3FF不可ET000ET1FFH000H1FF不可EN000EN1FFEN400EN5FFEN000EN1FFEN000EN3FFEN000EN1FF50050010001000161610002561000256100100不可P3不可P110001000161000256单一2P2P3不可1001001000100016500100016500100016不可1000256100R580R7FFET000ET3FFH000H3FFEN000EN3FF1000256100R580R7FFET000ET1FFH000H1FFEN000EN1FF1000256100R580R7FFET000ET1FFH000H1FFEN000EN1FF不可不可0000000099999255不可0000000099999999P1P2P31500P1P21000P2P31000例P1P2P3700300500说明P1中使用700级时P2可使用3001000700级P3可使用500级。P1中使用400级时P2可使用6001000400级P3可使P3500根据程序123使用的级数确定ETHEN的各地址的使用区域。400600400用4001000600级。8124
1在PC2兼容模式PC2PC1系列MX中不能使用。2在单一模式中只有程序1可以使用。3程序容量为16KW时级数最大限制在500。4用于SFC控制时占用用户数据存储器的识别符号R链路寄存器区域和扩充定时器区域。5扩充标识EL占用SFC。注SFC占用的扩充定时器计数器及扩充标识不能使用。8125
9链路功能TOYOPUCNano在标准情况下内置有2端口的PCCMPMODBUSSIO2端口的ET1端口的SNIF。91设定链路参数使用链路模块时应按各程序设定参数。不使用内置链路时不必进行本项设定。链路链路号码支架号时隙号模块名称ETL1侧任意内置L1以太网ETL2侧任意内置L2以太网PCCMPMODBUSSIOSNIFL31任意内置L3PC链接MODBUS计算机链接SIOPCCMPMODBUSSIOL4任意内置L4PC链接MODBUS计算机链接SIO1如果L3侧不进行链路参数设定则会成为SNIF。作为SNIF使用时请将开关置于L3TON侧。不作为SNIF使用时应将其置于TOFF位置。开关设定的详细内容请确认2232SNIF的布线919
92内置计算机链路功能通过串行通信进行PC与高位计算机计算机操作盘等的数据交换。通信方式为以高位计算机为主局以PC为子局的多站通信网络方式1N可进行最多32局的TOYOPUCNano与高位计算机之间的数据交换。规格计算机链路规格9211项目规格接口标准EIARS422标准通信方式起止同步式半双工2线式传输线路带屏蔽的双绞线传输速度0306122448961923845761152kbps取决于设定1传输距离最远1公里总长2传输形态1N局数最大32局局号0037用8进制数设定数据形式起始位1位数据长度7或8位取决于设定奇偶性1位偶数奇偶性停止位1或2位取决于设定使用字符ASCII代码错误检出奇偶校验和数校验注在存储器容量的设定为PC2模式内置标准的链路参数未设定时作为中设定的计算机链路工作。1根据链接参数进行设定。2相对于传输速度时以最大传输距离的图表为参考表示如下。在1152kbps的传输速度下使用时请充分注意噪音等。RS422RS485的传输速度与传输距离传输速度bps92传送距离m
2通信格式指令以及响应的通信格式如下。指令和数校验的范围ADHADLRI指令内容SCHSCLCRPRGADHADLRI响应内容SCHSCLCRPRG响应正常时响应异常时ADHLRI在指令方面表示应该接受指令的机号在响应方面表示发送了该响应的机号。用ASCII代码表示2位8进制数0037。指定自接收指令以后到发送出响应为止的时间。用ASCII代码30H39H41H46H表示1位16进制数0F。RI的数值与响应时间之间的关系见下表。ADHADLRIECHECLSCHSCLCRPRGRI响应时间msRI响应时间ms00880110990220A100330B200440C300550D400660E500770F600PRGSCHLECHLCR表示指令处理的对象。用ASCII代码表示03。根据指令PRG有必须可省略不要三种情况。省略时用参数设定的程序No成为指令处理对象。对于不存在的程序不发出指令。表示和数校验数据。用ASCII代码表示2位16进制数00FF。表示异常时的内容。用ASCII代码表示2位16进制数001F。是表示指令响应开始的代码ASCII3AH。是表示指令的代码ASCII3FH。是表示正常响应的代码ASCII23H。是表示异常响应的代码ASCII25H。是表示指令响应结束的代码ASCII0DH。PRG程序PRG程序0整个系统2程序21程序13程序393
补充和数校验本模块为了提高传送数据的可靠性除了奇偶校验以外还通过和数校验进行错误检测。本模块的和数校验方法按如下所述。1直接用ASCII代码增加由ADH至指令内容或响应内容最后为止的数据。2把和数校验项的2位16位进制数转换为8位数据后加到1的和里如果结果为0就视为正常信息。因此和数校验代码应按照以下顺序编制。1直接用ASCII代码增加由ADH至指令内容或响应内容最后为止的数据。2取在1编制的和的低位1字节的2的补码注1。3把在2编制的1字节的数据划分为高位4位和低位4位分别转换成ASCII代码。注12的补码是倒置使用2进制表示数据的所有位0110后加1的値。注2指令中的和数校验项SCHL的2字符为ASCII40H时本模块不进行和数校验。因此要把不需要和数校验的部分设定为。但是由于此时传送错误的检测率下降所以要尽量放入和数校验数据。3通信指令No功能1读取1点IO2读取IO寄存器字节3写入1点IO4写入IO寄存器字节5读取顺序程序6写入顺序程序7读取IO寄存器字8写入IO寄存器字9停止扫描10解除停止扫描11重新开始扫描12读取CPU的状态13载入IO寄存器14设定写入模式15读取写入模式16复位17停止模拟扫描18解除停止模拟扫描19读取CPU的ID20读取定时器计数器设定值现在值21写入定时器计数器设定值现在值22写入定时器计数器设定值23写入定时器计数器现在值24读取参数25写入参数26执行权限定设定27读取执行权限28读取时钟时刻29设定时钟时刻30载入顺序程序PRG指令MRLMRBSRRSRBRPMPRG123WPMPRG123RDR16点单位WDR16点单位HLTPRG023RUNPRG023STAPRG023备注8点单位8点单位MPCFDREWRSWERST16点单位仅限PC2兼容模式仅限PC2兼容模式IDRPSCPRCTCRTCWSPWPPWPRRPRWELSELRWTRWTCFILPRG123扩充定时器计数器除外扩充定时器计数器除外扩充定时器计数器除外扩充定时器计数器除外94
No功能PRG指令备注31读取IO寄存器多点字地址登录RDA32读取IO寄存器多点字RDM33读取IO寄存器扩充多点REMPC3J34读取IO寄存器扩充多点地址登录REAPC3J35写入IO寄存器扩充多点WEMPC3J36读取设置信息字节IBRPC3J37写入设备信息字节IBWPC3J38开始写入程序参数RWSPC3J39结束写入程序参数保持状态ERCPC3J40结束写入程序参数复位保持状态ERSPC3J41开始写入设备信息IWSPC3J42结束写入设备信息IWEPC3J43读取CPU状态扩充MPEPC3J44写入IO寄存器扩充多点地址登录WEAPC3JPRG程序No必须可省略是在省略时设定了链路参数的程序No但是关于HLTRUNSTA指令可作为PRG0使用。PC3JPC3J系列CPU用扩充指令只能在PC2兼容模式省略95
9221设定链路参数支架No时隙No链路模块名的设定在TOYOPUCNano的计算机链路中将支架No设定为Builtin内装时隙No设定为Standard标准链路模块名设定为Computerlink计算机链路。链路参数的详细设定设定参数使其与连接设备的参数相符。步骤1设定局号。2设定数据长度。3设定停止位长度。4设定通信速度。点击通信速度从一览中选择。5设定2线式。6设定结束点击OK确定。注在PC2兼容模式下使用内装计算机链路时不必设定链路参数。如果与上述设定不符则会导致通信异常。296
93内置PC链路功能在子局中指定的TOYOPUCNano与子局中指定的最多15台PC之间可进行最大512点的IO信息交换。931规格1PC链路规格项目规格IO点数最大512点1端口每1机的发送点数选择192kbps576kbps时最大384点选择NC3倍速时最大512点局数最大16局主局1局子局15局1线IO的分配最小设定单位8点传输距离最远1公里总长信号电平EIARS422标准通信速度192kbps576kbpsNC3倍速率1取决于设定同步方式起止同步模式传输方式半双工方式2线式位结构JIS7单位系10位校验模式垂直奇偶性水平奇偶性偶数电缆带屏蔽的双绞线CPU停止时的发送数据OFF数据停止前数据取决于设定通信异常时的CPU动作停止RUN继续取决于设定连接顺序程序时的通信异常异常反复取决于设定1在与对应于MNET3倍速的NC机种通信时设定。97
2链路No和链路区域链路参数可以对程序13的链路18进行任意设定。在链路区域设定了内部继电器M或链路继电器L时设定了链路参数的程序继电器区域为链路区域。输入输出XY区域和扩充区域EXEYEMEL为各程序共享区域。链路参数可以对程序13的链路18进行任意设定。输入输出XY区域在各程序中共通链路区域设定了内部继电器M或链路继电器L时设定了链路参数的程序继电器区域为链路区域。扩充区域为各程序的共享区域。链路1118程序1PRG1链路参数PRG1内部继电器M链接2128PRG1链路继电器L链接3138程序2PRG2链路参数输入输出XYPRG2内部继电器M程序3PRG3链路参数PRG3内部继电器MPRG2链路继电器LPRG3链路继电器L扩充输入输出EXEY扩充内部继电器EM扩展链接继电器EL98
3使用输入输出继电器XY时的注意事项在通信区域使用了IO继电器XY的情况下请注意CPU连接的IO模块IO地址不要重复。CPU中发生错误86通信异常。XY000XY000XY000XY7FFXY7FFXY7FF良好XY000XY7FF实际IO与通信区域重复XY000XY7FF实际在IO之间设立了通信区域时XY000XY7FF通信区域后面实际有IO时不可CPU连接的IO模块输入输出输入输出PC链路通信区域应用命令的输入输出更新RIOFUNNo280输入更新RIFUNNo281输出更新ROFUNNo282不能在通信区域使用。99
932PC链路的动作概要PC链路的通信有连接顺序和普通顺序在电源接通时用连接顺序进行连接状況以及设定确认后再用普通顺序进行IO的ONOFF信息交换。主局连接顺序子局等待主局的连接顺序Y连接顺序连接顺序OKYY解除异常连接顺序YN异常警报NNNY常顺序通常顺序OKN异常警报连接顺序OKYN通常顺序OKY复位SWON通信复位NYN复位SWONYY等待主局的连接顺序通信复位NN910
1数据传送概念图IO地址L000M000子局1子局2主局子局1子局2子局nL000L000L000输出1输入输入2输出输出输入3输入4max连续512点输出输出输入子局nL7FFM7FF2N12N输入输出L7FFL7FFL7FF通信顺序12342N2N112N115可以作为内部继电器使用。表示各局用于通信的区域起始地址。起始地址可以由各局自由设定。不需要符合主局地址。但是可以用于通信的仅限于链路继电器L内部继电器M输入输出继电器XY链路继电器扩充区域EL内部继电器扩充区域EM输入输出继电器扩充区域EXEY区域。911
2连接顺序主局针对子局从子局1开始到子局15为止依次检查有无连接及与输入输出点数设定中的子局是否一致。如设定那样子局有针对主局应答的回复时连接顺序将变为OK并转到通常顺序。在子局方面电源接通后要等待主局发出的连接顺序。在连接顺序方面检查主局的输入输出点数与各局输入输出点数的一致性。连接顺序为OK时可以对来自主局的普通顺序进行应答。3普通顺序主局按顺序将普通顺序进行从子局1开始到设定的最后子局为止。在通常顺序中主局对子局N发送设定点数分的IO的ONOFF数据以由子局N按照接收选定点数部分IO的ONOFF数据的形式进行数据通信。通过重复这种工作在主和子局之間进行数据交換。4CPU停止时的通信数据PC链路与CPU的RUN停止无关系地进行的通信。但是不在CPU的停止状态进行通信区域之间的数据交换。此时发送数据全部成为OFF数据。通过CPU复位SW进行停止通过外围装置进行停止发送OFF数据RUN因CPU的错误停止读接收数据912
933PC运算之间的定时PC的运算与PC链路的通信异步进行。但是输入输出数据的交换在各扫描结束时进行。1PC1扫描通信1扫描PC1扫描通信1扫描2PC1扫描通信1扫描PC1扫描通信1扫描PC链路的数据送至内部虚拟程序数据发送至PC链路把接收数据发送到PC交换发送数据通信1扫描从子局1到设定的最后子局的通信所需时间取决于进行通信的子局数及通信点数。通信速率192kbps时通信1扫描ms12X95N通信速率576kbps时通信1扫描ms10X81N通信速率3倍速率时X输入输出总字节数N子局数通信1扫描ms05X73N例通信速率192kbps子局数7输入输出总字节数32字节256点1扫描12329571049ms913
934分离功能如果PC链路在子局发生了通信异常子局就对全部子局停止通信进行异常报警。分离功能系指将特定主局从通信线中脱离开来或重置。这一功能可以使一个有异常发生的子局从通信网络中断开并保持其他正常子局的通信。此外还可将发生异常的子局复原。指定子局的分离指定子局的分离的执行是通过对子局PC的分离寄存器S31CS33CS35CS3FC设定数据进行。1用于各子局的位位1分离指定位0无指定分离寄存器1字D15DAD9D8D7D2D1D0无关子局1分离指定子局2分离指定子局7分离指定子局8分离指定子局9分离指定子局10分离指定子局15分离指定链路1S31C链路2S31C链路3S31C链路4S31C链路5S39C链路6S39C链路7S39C链路8S39C2注1不使用分离功能时请使用一个顺序程序来清除分离寄存器。由于即便断开电源分离寄存器也保持数据因此有时会在未通知的情况下进行分离。此时虽然通信处于正常状态但数据全部变为OFF数据。注2分离寄存器不是0000时关闭所有站点的通信。分离子局的通信1分离子局正常时主站向指定脱离的子站发送IO的OFF数据。来自该子站的接收数据将被丢弃并作为已接收IO的OFF数据来运行。可与其他未指定脱离的子局像通常那样进行IO的ONOFF数据的通信。在分离指定的状态主局直接接通电源或者在通信复位时与其他子局一样从连接顺序开始按普通顺序进行OFF的数据交换。2分离子局为通信异常时主局要把连接顺序发送到子局解除异常为止。如果异常被解除对于连接顺序有了正常的响应就重新开始与上述1相同的普通顺序。该期间对其他子局继续执行普通顺序程序。3分离指定被解除时1时交换普通ONOFF的IO数据。2时作为通信异常进行异常报警停止有关全部子局的通信。4其它主局在未进行分离指定的子局成为异常通信时进行异常报警停止有关全部子局的通信。914
9351PC链路通信复位可以在通信异常时进行通信复位。方法通过使通信复位用虚拟程序的OFFON进行通信复位。复位只是在OFFON上升时有效。复位的定时PC地址内容地址内容V80通信复位1V84通信复位5V81通信复位2V85通信复位6V82通信复位3V86通信复位7V83通信复位4V87通信复位82通信重置PC链路1扫描通信异常起始设定复位END处理PC链路和数据交换连接顺序常顺序读链路参数PC链路通过通信复位开始与电源接通时相同的动作。连接顺序执行后按照普通顺序开始IO数据交换。注1即便是CPU的复位起动SW也要进行通信复位。注2通信复位在通信异常时有效。在链路参数异常时无效要在写入参数后重新接通电源或者进行复位起动SW的操作。915
3通信异常的解除如果在主局重新接通电源或进行复位起动SW的操作或者进行通信复位通信异常就被解除重新开始通信。不需要进行子局的通信复位。子局在通信异常时也要对来自主局的连接顺序进行响应通过连接顺序OK可以解除通信异常进行普通顺序的响应。但是在进行了链路参数变更的情况下即便是子局也要进行电源的重新接通或者CPU的复位起动SW的操作。主局主局异常警报子局子局异常警报通信复位通信异常连接顺序常顺序主局解除异常子局异常警报主局子局解除异常4通信复位电路例1采用了通信复位时由于即便有电源接通时的误差也不作为通信异常。所以在电源接通后需要进行2秒时间复位。第1扫描V06VA2T000T000TIMK00020V80Y000SET20秒通信复位通信异常分离寄存器清零分离寄存器通信异常特殊继电器通信复位按钮信号VA2V06T000FUNNo1WMOVP0000S31C注1上述是链路No1时的电路例。通信异常特殊继电器通信复位按钮信号分离寄存器根据链路No而不同。注2不使用分离寄存器时请务必清零。916
2使用分离寄存器时如果使用1使用通信复位时的电路子局电源的启动会出现延迟并在错误信息输出用寄存器种保存LINKERROR错误代码86。下面的电路在主局电源接通后2秒钟不显示LINKERROR。此外还是错误代码未存储在错误信息输出用寄存器内的电路例。第1扫描V06V06T00分离寄存器FUNNo101WMOVT000TMRP00FUNNo101WMOVFFFFhS31C分离寄存器设定K000200000hS31CSET20秒分离寄存器清零分离寄存器电源接通后分离所有局在电源接通后2秒钟所有错误不报警。2秒钟之后解除分离进行正常的通信。注1上述电路例中的链路No1。注意分离寄存器因链路No而异。注2以内置PC链接为主局与FS终端V100连接时请将使用上述2分离寄存器时的回路加入到顺序中。没有该分离电路时有时会导致异常通信无法进行通信。链路号码分离寄存器链路号码分离寄存器1S31C5S39C2S33C6S3BC3S35C7S3DC4S37C8S3FC917
936PC链路状态PC链路可以通报CPU的特殊寄存器状态信息子局通信状态子局连接状态以及异常信息。还可以通过在分离寄存器种设定数据进行子局分离。MSBLSB地址FEDCBA9876543210用途S301514131211109876543210子局通信状态S31S32S33S34S35S36S37S38S39S3AS3BS3C1514131211109876543210子局连接状态S3DS3ES3FS3x0S3x1S3x2S3x3S3x4S3x5S3x6S3x7S3x8S3x9S3xAS3xBS3xC1514131211109876543210子局分离S3xDS3xES3xFx的代码链路No1234567802468ACEx13579BDF注数据单一方式时地址如下。程序1程序2程序3处代入上述x的号码。S30ES00ES10918子局No异常信息错误代码异常信息错误详情1异常信息错误详情2异常信息错误详情3异常信息错误详情4异常信息错误代码存储1异常信息错误代码存储2异常信息错误代码存储3异常信息错误代码存储4异常信息错误代码存储5异常信息错误代码存储6异常信息错误代码存储7
通信状态报警功能PPC链接将向CPU的特殊寄存器通告状态信息子局通信状态子局连接状态。1子局通信状态通知特殊寄存器S30子局的通信状态。MSBLSB地址S30F15E14D13C12B11A1099887766554433221100用途子局通信状态的代码子局No通信状态有发生max数百ms时间延迟的可能性。链路No1234567802468ACE在主局的场合与正常进行通信的子局对应的位为1。如果在分离状态也进行通信就为1。1正常进行通信的子局0还没有进行通信的子局通信异常发生時与检测出异常的子局对应的位为0其他的子局保持发生通信异常前的通信状态内容。通信异常发生時实际上是不能进行通信的在发生异常前与进行正常通信子局对应的位仍然为1。通过链路参数设定只是与设定为连接的子局的位为1。还有在通信异常時全部为0。2子局连接状态对特殊寄存器S3C报知子局的连接状态。MSBLSB地址FEDCBA9876543210用途S3C1514131211109876543210子局连接状态通过链路参数设定对应于设定为连接的子局的位为1。通过链路参数设定对应于设定为连接的本局的位为1。在子局的场合在主局的场合在子局的场合919
3通信异常子局诊断方法根据分离功能和子局的通信状态实施。诊断例工程盘的PCLINK主机分配给链路No1的场合备份布线工程盘子局2PB2子局1PB2断线子局4PB2子局3PB2通信线路PB2光分支开关LSB不能与子局24通信。由链路系統图断定在子局3和子局4之间断线PB21把连接局全部设定为分离状态。2进行通信复位。3监控子局连接状态子局通信状态。S300S30CMSB000000000000101000000000000111104连接备用配线。5监控子局连接状态子局通信状态。MSB确认无通信异常子局6解除分离重新开始运行。LSBS300S30C00000000000111100000000000011110920
937设定链路参数1支架No时隙No链路模块名的设定PC链接在Builtin内装中设定机架No在Standard标准中设定插槽No在PClinkmasterorPClinkslavePC链接主局or子局中设定链接模块名称。2链路参数的详细设定PC链路主局的设定进行PC链路主局的设定。设定PC链接时需在Builtin内装中设定机架No在Standard标准中设定插槽No并设定SoftSW软件SW。步骤1设定链路区域起始地址。可输入的范围链路继电器内部继电器输入输出链路继电器扩充区域内部继电器扩充区域输入输出扩充区域L00LL7FHM00LM7FHXY00LXY7FHEL000LEL1FFHEM000LEM1FFHEXY000LEXY7FH2设定连接子局。校验连接子局。3设定传送字节数。传送数的合计为64字节。4点击SoftSW软件SW设定软件开关。921
5设定结束点击OK确定。备忘录进行如下4项设定内容的异常校验。1链路区域起始地址是否正确2传送字节数是否正确3传送字节数的合计是否在64字节之内4链路区域起始地址传送字节数的合计是否超出区域范围软件开关的设定主局使用PC链接时需设定以下的动作参数。设定内容详细内容可点击各项目。步骤1设定CPU停止时的发送数据。CPU停止时的发送数据OFF数据CPU停止时发送OFF数据。停止前数据CPU停止时发送停止前的数据。2设定通信异常时的CPU动作。通信异常时的CPU动作停止通信异常时CPU停止。RUN继续即使通信异常CPU也不停止。通信异常用特殊继电器置于ON。3设定连接顺序时的通信异常。连接顺序程序时的通信异常异常在连接顺序中如果通信异常则将其作为通信异常停止于所有子局的通信。请按子局主局的顺序接通电源。如果按主局子局的顺序接通则会出现通信异常并停止通信。反复即使在连接顺序中有通信异常所有子局也要在连接顺序结束后反复连接顺序。因此无论按主局子局还是子局主局的顺序接通电源均不会出现通信异常。但在接通电源时即使通信线断线也不会报警应予以注意。922
4设定通信速度。通信速度设定通信速度。57600bps19200bps对应NC的3倍速率5设定2线式4线式。6设定结束点击确定。PC链路子局的设定进行PC链路子局的设定。设定PC链接时需在Builtin内装中设定机架No在Standard标准中设定插槽No并设定SoftSW软件SW。步骤1设定链路区域起始地址。可输入的范围链路继电器内部继电器输入输出链路继电器扩充区域内部继电器扩充区域输入输出扩充区域L00LL7FHM00LM7FHXY00LXY7FHEL000LEL1FFHEM000LEM1FFHEXY00LEXY7FH2设定连接子局。校验连接子局。3设定传送字节数。传送数的合计为64字节。4点击SoftSW软件SW设定软件开关。5设定结束点击OK确定。备忘录进行如下4项设定内容的异常校验。1链路区域起始地址是否正确2传送字节数是否正确3传送字节数的合计是否在64字节之内4链路区域起始地址传送字节数的合计是否超出区域范围923
软件开关的设定子局使用内置型PC链路时需要设定下列工作参数。设定内容详细内容可点击各项目。步骤12345设定CPU停止时的发送数据。CPU停止时的发送数据OFF数据CPU停止时发送OFF数据。停止前数据CPU停止时发送停止前的数据。设定通信异常时的CPU动作。通信异常时的CPU动作停止通信异常时CPU停止。RUN继续即使通信异常CPU也不停止。通信异常用特殊继电器置于ON。设定通信速度。通信速度设定通信速度。57600bps19200bps对应NC的3倍速率注意与对应MNET3倍速率的NC机通信时如果通信速度设定为57600bps则无法进行通信异常校验。设定2线式4线式。设定结束点击OK确定。924
94941内置FLnet功能本章就FLnet的功能进行说明。FLnet规格No项目规格1物理层10BASET100BASETX2传输速度10Mbps100Mbps3最大电缆长度1Max100m节点节点间1对1连接时节点HUB间HUBHUB间总延长距离Max2100mHUBMax20台4最大节点数249254局25通信功能数据链路功能讯息服务器功能消息客户端功能6继电器链路容量512字7寄存器链路容量8192字通过链路参数进行切换8讯息数据容量1024字节9421指定的HUB为自动协议。连接了自动协议之间时为100Mbps。2是包含保养用节点在内的节点数。数据链路规格No项目规格继电器链路寄存器链接1链路区域1L000L7FFL1000L2FFF2M000M7FFM1000M17FF2XY000XY7FFEL000EL1FFFEM000EM1FFFEXEY000EXEY7FFGXGY0000GXGYFFFFGM0000GMFFFF使用XY区域时参见974项。R000R7FFD0000D2FFFU0000U1FFFFEB00000EB3FFFF2链路容量512字2048字6144字8192字通过触电开关进行切换3每1台的发送容量4通信方式NN方式及1N方式NN方式及1N方式1工作模式及存储器容量的设定中可使用的区域有限制。925
943数据链接方式数据连接方式支持NN方式N对N方式和1N方式1对N方式。NN方式就是如下图所示的某节点局的发送区域为其他节点的接收区域各节点之间共有数据的方式。节点1节点2节点3节点4在1N方式中进行设定在1N主局中的节点和设定在1N子局中的节点之间的通信。在1N子局之间不进行数据链接。发送区域接收区域接收区域接收区域接收区域发送区域接收区域接收区域接收区域接收区域发送区域接收区域接收区域接收区域接收区域发送区域1N主站1N子站1N子站节点1节点2节点3NN方式的节点和1N方式可以在一个网络中同时存在。1N子站节点41N子局发送区域接收区域接收区域接收区域接收区域发送区域接收区域发送区域接收区域发送区域NN或1N主局NN或1N主局1N子局接收区域发送区域接收区域接收区域发送区域接收区域接收区域接收区域接收区域发送区域接收区域发送区域926
944在通信区域中使用输入输出XY时的注意事项1注意不要使连接CPU的IO模块和IO地址出现重复。重复设定时CPU中发生错误86通信异常。XY000XY000XY000XY7FFXY7FFXY7FF良好XY000XY7FFXY000XY7FF在输入输出之间加入通信区域时XY000XY7FF在通信区域之后有输入输出时输入输出与通信区域重复不可PC的IO区域PC的IO区域和FLnet的通信区域重复的区域FLnet的通信区域2应用命令的IO更新RIOFUNNo280输入更新RIFUNNo281输出更新ROFUNNo282不能在通信区域使用。927
945信息服务器功能针对从其它节点发送来的指令信息进行响应的方式。指令处理以及响应发送处理均由FLnet和CPU自动进行不需要为该功能进行参数设定和顺序程序处理。详细内容请参照TOYOPUCNano2ET的使用说明书。指令响应946信息终端功能947向其它节点发送指令信息接收响应的方式。指令数据的生成及FLnet的发送指示向响应数据的FLnet寄存器读出均由顺序程序进行。详细内容请参照TOYOPUCNano2ET的使用说明书。指令响应其他节点状态读出功能通过顺序程序处理可在寄存器上读出参与FLnet通信的其它节点的状态。详细内容请参照TOYOPUCNano2ET的使用说明书。928
948监控功能可通过特殊寄存器S30S3F监控参加FLnet通信的节点局号1254。下图表示局号参数的节点将10进制表记改为16进制表记和位数地址的对应表。MSBLSBFEDCBA9876543210S300F0E0D0C0B0A090807060504030201S31S32S33S34S35S36S37S38S39S3AS3BS3CS3DS3ES3FS3xF1F1E1D1C1B1A191817161514131211102F2E2D2C2B2A292827262524232221203F3E3D3C3B3A393837363534333231304F4E4D4C4B4A494847464544434241405F5E5D5C5B5A595857565554535251506F6E6D6C6B6A696867666564636261607F7E7D7C7B7A797877767574737271708F8E8D8C8B8A898887868584838281809F9E9D9C9B9A99989796959493929190AFAEADACABAAA9A8A7A6A5A4A3A2A1A0BFBEBDBCBBBAB9B8B7B6B5B4B3B2B1B0CFCECDCCCBCAC9C8C7C6C5C4C3C2C1C0DFDEDDDCDBDAD9D8D7D6D5D4D3D2D1D0EFEEEDECEBEAE9E8E7E6E5E4E3E2E1E0FEFDFCFBFAF9F8F7F6F5F4F3F2F1F0自身节点地址16进制各位1通信中各位0不参加通信特殊寄存器的x部分取决于链路No。链路No1234567802468ACEx13579BDF例如FLnet的链接No用5来监视节点编号8555h的局的参加状态时从上述局号与位数地址的对应表中可知其与S35的第5位相对应因此只要查看S385链接No5时8的第5位即可。进行复位启动及切断电源再次接通时上述区域会被清零。另外通过复位FLnet将从通信线路上脱离并重新开始通信加入处理。929
949FLnet通信响应时间1刷新周期时间FLnet通信采用无标准权标方式。有的节点将从该节点地址获得权标发送权开始到下一次该节点地址获得权标的时间权标的1周期时间称为刷新周期时间。刷新周期时间平均TP137500275P0004NmsP节点数N各节点的发送字数的所有节点合计发送字数继电器链路发送字数寄存器链路发送字数2响应时间在TOYOPUCPC10GCPU同类产品之间进行通信时为从发送测PLC输入启动开始的时间到接收侧PLC输出开始的时间。组成发送侧PLC接收侧PLC响应时间平均R25T16P10K10024n1Tsc12Tsc22TIDTODmsT刷新周期时间P节点数n1发送侧节点的发送字数K包数n1512小数点进位TSC1发送侧PLC的扫描时间TSC2接收侧PLC的扫描时间TID输入模块延迟时间TOD输出模块延迟时间CPU输入CPU输出930
9410FLnet的起始设定94101初始设定步骤系统启动时的设定步骤请在FLnet的参数设定中使用PCwin2。1链路模块名的设定请参照1开关的设定请参照2链路模块名的设定请参照3链路参数详细设定请参照4网络参数的设定通常使用缺省值不必进行变更开始开关的设定链路模块名的设定链接参数详细设定网络参数的设定电源通断或重置启动通过PCwin2的Parameter参数LinkParameter链路参数设定选择分配给FLnet的链路No设定支架No时隙No和链路模块名。如果开关设定与IO模块识别代码及链路模块名的容量8KB16KB32KB不同则会导致链路参数异常。设定示例931
2链路参数详细设定设定链路模块名后继续进行详细设定。此处进行以下项目的设定。1节点号码2节点名称3RUN停止时的输出状态4其他节点脱离时的输入状态5通信方式6数据链路的设定7网络的设定这些设定值通常由终端用户的网络管理者指定。21节点编号设定FLnet局号。设定值为1159168249不得与其它节点FLnet通信局重复。节点号码重复时即将随后参加网络的节点不能参加通信模块前面得点矩阵显示器显示错误代码E7节点号码重复。22节点名称用半角英文字符设定FLnet得节点名称名称在10个字以内。也可省略设定。设定的节点名称作为对来自主计算机等的网络参数读出要求指令的响应被读出。23RUN停止时的输出状态关于继电器链路和寄存器链路设定CPU模块RUN停止时的输出状态。设定为Clear清除时如果RUN停止则数据连接的自节点发送数据全部为0。设定为Hold保持时即便RUN停止继续发送RUN停止前的数据。932
24其他节点脱离时的输入状态其他节点脱离网络时关于继电器链路和寄存器链路设定如何处理其节点接收区域的数据。设定Clear清除时从已脱离节点接收了信息的区域的数据全部为0。设定Hold保持时从已脱离节点接收了信息的区域的数据保持脱离前的状态。注意其他节点未参加通信时其节点信息发送区域的数据变为00零。其他节点在参加一次通信后再脱离随后在自节点参加了通信时已脱离的其他节点的发送息区域的数据也变为00零。此外自节点与其他节点同时参加通信后其他节点已经脱离时的数据按照Stateofinputinothernodeseparation其他节点脱离时的输入状态设定。25通信方式的设定从NN或者1N主局1N子局不进行数据链接中选择一种数据链接方法。1NN或1N主站所谓NN方式是指有的节点得发送区区域会成为其它接点的接收区域各节点间的数据是共享的方式。1以N方式通信时的主局也设定在该模式。下一章将详细说明。节点1节点2节点3节点421N子站只进行与1个特定局的数据链接的方式。下图以将节点1设定成NN或1N主局节点24设定成1N子局为例。下一章将详细说明。在节省子局内存的同时还具有能够共享顺序程序的优点。发送区域接收区域接收区域接收区域接收区域发送区域接收区域接收区域接收区域接收区域发送区域接收区域接收区域接收区域接收区域发送区域NN或1N主局1N子局节点1节点23不进行数据链接只有信息通信不进行数据链接的模式。参加FLnet的通信只进行信息通信。1N子局节点31N子局节点4发送区域接收区域接收区域接收区域接收区域发送区域接收区域发送区域接收区域发送区域933
26数据链接的设定选择了NN或者1N主局或者1N子局时单击DataLink数据链路按钮设定详细的通信参数。关于可以进行数据链接的区域请参照972数据链路规格。1NN或1N主站通过FLnet网络里参加通信的各节点共有数据的虚拟内存空间共用内存发送接收信息。如果某个节点向共用内存上发送数据则此数据被其他节点接收各节点上共有相同数据。共用内存的信息发送地址和大小以字符16位为单位设定每个节点。节点号码的大小与信息发送地址的顺序无关。例公用存储器地址0000节点1发送区域节点10发送区域节点3发送区域分配时发送共用内存上数据的区域不的重复。如果重复则后参加通信的节点会出现E8继电器链路区域重复或E9寄存器链路区域重复错误从而导致通信异常。例节点2发送区域节点1发送区域节点10发送区域节点3发送区域节点2的发送区域的一部分与节点3的发送区域重复所以节点2出现通信异常。934
在NN或1N主局模式下用以下4个参数设定CPU模块的寄存器的哪一地址对应从共用内存的起始地址开始多大范围内的数据以及自节点发送区域的地址和长度。共用内存的地址0000对应链路区域的起始地址。链路区域的起始地址1用文字单位来设定链接区域起始地址此处设定的地址对应共用内存的地址0000链路区域字数2以文字单位来设定刷新数据的整个区域容量发送区域的起始地址3以文字单位来设定自站所发送区域的起始地址。发送区域字数4按字符单位设定本局发送区域的大小PC内部寄存器公用存储器1地址0000接收区域234发送区域接收区域注意节点号码和共用内存的发送地址及数据大小通常由终端用户的网络管理者指定。935
设定示例113继电器链接如上设定时寄存器数据与共用内存的对应如下。地址PC内部寄存器L000L100L1FFL3FF共用内存的地址按字16点单位表示。例如L01W表示L010L01F的16点。寄存器链接如上设定时寄存器数据与共用内存的对应如下。24公用存储器地址00000010001F003F24公用存储器地址0000030004FF05FF接收区域发送区域接收区域16文字64文字注意131536字地址R000R300R4FFR5FFPC内部寄存器接收区域发送区域接收区域512字936
设定示例2节点No1节点No22个节点分别进行上述设定时如下图所示节点1发送的L100L1FF数据通过共用内存进入节点2的同一地址。节点2发送的L280L47F数据虽然反映在共用内存上但是节点1的连接区域的范围是L000L3FF超过此范围L400L47F的数据不能读到节点1节点1的相同地址只接收节点2的L280L3FF的数据。地址L000L100L1FFL280L3FF节点1数据共用内存节点2数据地址L000L100L280L47FL5FF节点1数据接收区域发送区域发送区域节点2数据接收区域接收区域937
各节点的连接区域起始地址不必相同。如下图设定节点2时节点1和节点2之间的数据交换如下。地址L000L100L1FFL280L3FF节点1数据共用内存节点2数据地址M100M200M380M57FM6FF节点1数据接收区域发送区域发送区域节点2数据接收区域接收区域938
设定示例3节点No10节点No128节点No249如上设定时进行以下数据链接。939
继电器链接节点10数据节点128数据节点249数据X400X600X700X7FFR000R400R500R6FFL000L200L2FFM000M200M300M3FF发送区域节点10接收区域节点128接收区域发送区域节点254接收区域节点128接收区域节点10接收区域发送区域注意寄存器链接节点10数据节点128数据节点249数据继电器链接的地址以16位的文字单位进行设定。所谓X40W表示X400X40F。D100D500D600D6FFD000D400D500D6FFD7FF节点128接收区域节点10接收区域发送区域节点128接收区域节点254接收区域发送区域节点10接收区域发送区域注意链接区域与发送区域的关系以Transareatopaddr发送区域起始地址和Transareawords发送区域字符数指定的发送区域必须完全进入Linkareatopaddr链路区域起始地址和Linkareawords链路区域字符数指定的链路区域内。例如下图所示的设定由于发送区域L300L47F超出了链接区域L000L3FF所以无法设定。试图设定时会显示错误信息940
21N子站在1N子局模式下只进行以链路参数指定的一个局的数据链路。在此模式下按以下参数设定从哪个局号的节点接收多少字符数据保存到哪个寄存器并且设定将本站的多少字符数据从哪个地址发送到哪部分的共用内存1。主站节点编号1在1249的范围内指定进行通信的其他站的节点编号。如果在此范围内则无论什么站号都可以设定不必区分与子站节点编号的大小。接收区域起始地址2按字符单位指定保存从主局收到的数据的寄存器的起始地址。接收文字数量3指定接收主局数据的字数。发送区域字数4指定本局发送的数据字数。自站发送数据的起始地址接在接收区域最终地址之后公用存储器1发送区域起始地址5在本局发送数据的共用内存1上指定地址。1共用内存就是参加通信的各节点共有数据的虚拟内存空间FLnet的数据连接通过此共用内存来进行。PC内部寄存器2整个网络如下图进行数据链接。NN或1N主局1N子局节点1节点2公用存储器接收区域34地址00005发送区域1N子局节点31N子局节点4发送区域接收区域接收区域接收区域接收区域发送区域接收区域发送区域接收区域发送区域注意节点号码共用内存的信息发送地址及数据大小通常由终端用户的网络管理者来指定。941
设定示例1如按上图进行了设定时将进行如下图的数据链接。PC内部寄存器公用存储器地址0000用局号指定主局的发送区域32字0100地址L000L20032字20字接收区域发送区域注无论主局向共用内存的哪个地址上发送数据都将从该地址接收数据所以无需设定主站的发送区域起始地址。地址L000L200按Recvwords接收字数设定的字数实际的主局发送字数时超出主局发送数据的部分下图示例的后8个字不被接收。PC内部寄存器公用存储器地址0000用节点号码指定的主局发送区域40字0100接收区域32字20字发送区域无法接收的区域942
按接收字数设定的字数实际的主局发送字数时主局发送数据的接收字数不足的区域下图示例中的后半段的16个字里加入0零PC内部寄存器公用存储器地址0000用局号指定的主局发送区域16字0100地址L000L20032字加入零数据的区域20字接收区域发送区域注意共用内存的发送区域即使出现上下关系变化PC内部寄存器的接收区域发送区域的并存不出现变化。PC内部寄存器公用存储器接收区域发送区域943用局号指定主局的发送区域32字
节点No100节点No64节点No150944
X400X5FFX700X7FFD000D3FFD500D6FFD780D87FL000L1FFL200L2FFM000M1FFM200M2FF继电器链接节点100数据主局节点64数据子局节点150数据子局发送区域节点64接收区域节点150接收区域节点100接收区域发送区域节点100接收区域发送区域X600注意寄存器链路继电器链接的地址以16位的文字单位进行设定。所谓X40W表示X400X40F。节点100数据节点64数据主局子局节点150数据子局D100D4FFD580D67FD000D1FFD200D3FF发送区域节点150接收区域节点64接收区域节点10接收区域发送区域节点10接收区域发送区域945
27网络的设定网络设定通常不需要进行变更。没有网络管理人员的指示请勿进行变更。改变网络的设定时请单击Network网络按钮。网络地址的设定FLnet虽然使用UDPIP协议进行通信但却将该协议中使用的IP地址的上位3位作为网络地址来设定。IP地址的第4位为节点编号。例如网络地址为192168250则节点号码为100的节点的IP地址为192168250100。从PC等发送PING以及本模块进行响应时使用该IP地址。FLnet虽然进行UDPIP的广播传输但此时的目标IP地址仅用FFh来发送IP地址的第4位。例如IP地址为192168250100的节点发送数据时的目标IP地址为192168250255。网络地址必须与1个FLnet网络的所有节点相同。如果网络地址不同则该节点无法接收其它节点的数据并且其它节点也无法接收该节点发送的数据。以太网测定器会监控所有数据应予以注意。在FLnet规格中192168250为缺省网络地址。946
权标监控超时时间的设定在FLnet的通信中各节点按节点编号的升序使标记发送权循环。收到标记的节点将数据链接发送区域内的数据和消息数据如有分配到1024字节以下容量的一帧中进行发送并在最后的一帧中添加发往下一节点的标记。所谓权标监控超时时间是指发送权标的时间超过了从前一节点发送权标开始到下一节点地址发送权标的时间的最大值导致下一节点自动再次发送权标。如果连续发生3次此类情况则该节点会脱离通信链路被排除在权标循环之外。设定为自动时将自动根据发送区域的数据容量来计算设定标记监视超时时间。此时的计算公式如下所示。权标监控超时时间15TBN1115ms帧间各最大值数据发送时间最大值呼叫1ms权标5ms信息帧循环数据总块数帧间隔最大值2数据发送数据最大值11ms5ms前节点的时间1ms权标1使用10Mbps的通信线传送1024字节的数据所需时间。2最小容许帧间隔最大值。详细内容参见下章想要手动设定标记监视超时时间时请取消Auto自动复选框中的勾选自行设定时间。可以设定的值的范围为10255。在设定权标监控超时时间内无法发送权标时发生EA错误出现通信异常。此时应再次设定权标监控超时时间使时间更长一些。947
最小允许帧间隔的设定帧间隔就是在数据帧和数据帧之间电路上不流通数据状态的时间。数据帧数据帧帧间隔时间在FLnet通信中设定有各节点的最小容许帧间隔始终发送该设定值。各节点时常监视其他节点的最小允许帧间隔且所有节点的最大值均为有效。最小允许帧间隔可在05ms的范围内设定但是最小允许帧间隔设定为1ms3ms5ms的3种节点混合在一起时则5ms为有效线路上传输的所有数据帧的间隔将变为5ms。此参数能够调整单位时间内电路上流经的数据使处理速度慢的节点也能参加通信。在PC10GCPU中最小容许帧间隔的缺省设定为1ms。948
95951内置以太网功能对以太网功能进行说明。以太网规格No项目规格1物理层10BASET100BASETX2传输速度10Mbps100Mbps3最大电缆长度1Max100m节点节点间1对1连接时节点HUB间HUBHUB间4通信功能计算机链接功能仅TCP2文件存储器功能仅TCP25可开放的端口数量计算机链路时最多32端口文件存储器时最多8个端口6计算机链路数据容量最大1K字节7文件内存容量发送2K字节接收2K字节9529539541指定的HUB为自动协议。连接了自动协议之间时为100Mbps。2未对应UDP。通过计算机链路方式通信根据其它节点发送的指令进行CPU内的数据读写。由于是通过以太网进行指令分析以及与CPU之间进行数据交换。因此不需要数据交换所需的顺序程序。其它节点的链接对象为电脑等的主机所以不能在TOYOPUC之间发送接收信息。详细内容请参照PC3J2JFLETTV2H模块或2PORTEFR的使用说明书。通过文件存储器方式通信通过顺序程序的应用命令SPRSPR2文件存储器读出SPWSPW2文件存储器写入进行以太网内的文件读写进行发送和接收。其他节点不仅与个人电脑等主机也可与其他PC10G的以太网或PC3J2J的FLETTV2FLETTV2H2PORTEFR模块之间进行通信。不能与其它制造商生产的以太网模块进行通信。详细内容请参照PC3J2JFLETTV2H或2PORTEFR模块的使用说明书。PING测试功能PING测试就是确认与通信对象的通信电路是否连接通信是否正常的测试。PING测试没有通过时可能因为以下的原因。没有连接电缆或者接触不良。对方节点之间的通信设备HUB等发生故障。对象节点没有启动。自节点或者对象节点的IP地址重复。自节点和对象节点的IP地址的网络ID不同。详细内容请参照PC3J2JFLETTV2H或2PORTEFR模块的使用说明书。949
955进行PING测试的方法进行PING测试时TOYOPUCNano的以太网在根据分配的链路No确定的以下地址中通过外设等以16进制数设定对象节点的IP地址。链路No对象节点IP地址写入目标地址1S31CS31D2S33CS33D3S35CS35D4S37CS37D5S39CS39D6S3BCS3BD7S3DCS3DD8S3FCS3FD例如以太网的链路No1对象节点的IP地址为1721693133时5D85设定在S31C中AC10设定在S31D中。PING测试结束后请将这些值恢复为0000。每二秒钟反复进行依次PING测试结果设定在文件存储器地址106的第3位和第4位上。如果第3位处于ON状态则PING测试OK。如果第4位处于ON状态则PING测试NG。PING测试的结果可通过监控状态监控区域进行确认。为了从文件存储器中读出数据需要安装使用SPR指令的顺序程序。详细内容请参照PC3J2JFLETTV2H或2PORTEFR模块的使用说明书。950
956状态监控功能通过监控CPU模块的特殊寄存器S300号台可以监控模块的状态。可以通过特殊寄存器进行监视的连接为18。对于932使用SPR2命令监视状态。应该监控的地址由连接器No决定如下所示。链路No对象节点IP地址写入目标地址1S300S30F2S320S32F3S340S34F4S360S36F5S380S38F6S3A0S3AF7S3C0S3CF8S3E0S3EF通过相关装置监控此区域可以看到如下图所示的文件存储器的控制标记状态链路异常代码等。MSBLSBFEDCBA9876543210S30S31S32S33S34S35S36S37S38S39S3AS3BS3CS3DS3ES3FCN8主动打开要求CN100000001CN8文件存储器接收请求CN1CN8文件存储器发送要求CN10000000000000032CN8开放正常CN100000054CN8文件存储器发送完成CN1CN8连接异常CN100009876CN8文件存储器接收完成CN1自以太网地址第4位10自以太网地址第5位10自以太网地址第6位1000000000连接器1连接器异常代码连接器2连接器异常代码连接器3连接器异常代码连接器4连接器异常代码连接器5连接器异常代码连接器6连接器异常代码连接器7连接器异常代码连接器8连接器异常代码1初始化要求2错误记录发送确认3ICMP记录发送确认4初始化正常5初始化异常6错误记录接收7ICMP记录发送8PING正常9PING异常10以太网地址的前三位为006053固定值。951
957以太网通信处理时间以计算机链路方式和文件存储器方式通信时传送延迟时间通过以下算式计算。但根据网络负载和系统组成传送延迟时间有时会延长。通过下列算式求出的值是目标传送延迟时间的最小值。线路拥挤无法发送数据以及线路中的数据发生冲突时内置以太网会等待由通信参数Resendtimer再次传送定时器指定的时间后再次试着进行传送。计算机链路方式从主计算机向线路发出指令到内置以太网向线路发送响应的时间。主计算机TOYOPUCNano1协议为TCPIP时链路参数设定为Ethernet以太网时传送延迟时间610001指令字节数0002响应字节数使用连接器数顺序扫描时间1ms链路参数设定为Ethernet32ports以太网32端口时传送延迟时间6150002指令字节数0002响应字节数使用连接器数顺序扫描时间1ms协议为UDPIP时链路参数设定为Ethernet以太网时传送延迟时间6050002指令字节数20002响应字节数2使用连接器数顺序扫描时间1ms链路参数设定为Ethernet32ports以太网32端口时传送延迟时间610003指令字节数20003响应字节数2使用连接器数顺序扫描时间1ms1顺序扫描时间超过25ms时按25ms计算。2指令字节数响应字节数为计算机链路方式的TOYOPUC数据部分的字节数。952
2文件存储器方式在TOYOPUCTOYOPUCNano的内置以太网同类产品之间通信时为从发送侧发送标记处于ON状态开始到接收侧寄存器读出接收的数据接收确认标记处于ON状态向发送侧返送响应发送侧发送完成标记处于ON状态为止的时间。TOYOPUCNanoTOYOPUCNano文件寄存器发送响应发送协议为TCPIP时链路参数设定为Ethernet以太网时传送延迟时间910005发送数据字节数1使用连接器数发送侧顺序扫描时间3接收侧顺序扫描时间6ms链路参数设定为Ethernet32ports以太网32端口时传送延迟时间11150005发送数据字节数1使用连接器数发送侧顺序扫描时间3接收侧顺序扫描时间6ms协议为UDPIP时链路参数设定为Ethernet以太网时传送延迟时间710005发送数据字节数1使用连接器数发送侧顺序扫描时间3接收侧顺序扫描时间6ms链路参数设定为Ethernet32ports以太网32端口时传送延迟时间8150005发送数据字节数1使用连接器数发送侧顺序扫描时间3接收侧顺序扫描时间6ms1发送数据字节数为发送文件存储器数据的字节数LLLH的值。953
958以太网的初始设定9581初始设定步骤开始设定IO模块链路模块名的设定链路参数的详细设定或取决于顺序程序的通讯参数设定1链接模块名称的设定打开或关闭电源或者复位启动通过外设的Parameter参数LinkParameter链路参数的链路设定选择分配支架No时隙No并将链路模块名设定为Ethernet32ports以太网32端口进行以太网设定。使用程序分割模式时还要正确选择程序号码。954
2通信参数的设定21通信参数的种类通信参数有以下几种。1自身节点IP地址用0255中的4个数字设定以太网中分配的IP地址。但不得使用0000和255255255255。另外网络上如果存在设定了相同IP地址的节点则通信将不能正常进行。IP地址分为网络ID和主机ID通信对象的IP地址必须与网络ID相同。详细内容请参照TOYOPUCNano2ET的使用说明书。2链接132使用在以太网中设置了132的32个连接器其中每个连接器都将设定使用哪个连接器。设定为使用的连接器如果没有正确设定协议开放方式和端口No则无法正确设定其它节点表No从而发生错误。3协议开放方式设定使用TCPIP还是UDPIP协议进行通信另外选择TCPIP时还设定连接器的打开关闭。TCPIP在开始通信前打开线路的连接并在通信结束时进行连接的关闭或复位处理。UDPIP不用执行该手续即可开始结束通信。另外TCPIP可通过ACK应答响应来确认通信数据有无送达对方未能确认时要进行数据的重发。UDPIP中不进行这种传输确认因此发送的数据有时会由于线路上的数据冲突等而消失并未送达对方。iTCP主动通过TCPIP协议从以太网打开对象节点的线路的模式。iiTCP对方特定被动通过TCPIP协议从其它节点标指定的对象节点打开线路的模式。与IP地址或端口No指定的不同的对象即使发出线路开放要求线路也不会打开。iiiTCP对方不特定被动为TCPIP协议是从对方节点打开线路的模式。对方节点的IP地址及端口No不特定。是通常与计算机进行通信时使用的模式。ivUDPUDP未对应。请设定TCP主动或TCP被动。4自身节点端口No设定各连接器端口No。端口No必须设定在10256553416进制数0401FFFE范围内。设定时请不要使自节点端口No与其他连接器的自节点端口No重复。5其他节点表No选择TCPActiveTCP主动模式或者TCPDestinationSpecifiedPassiveTCP对象特定被动模式或者UDP时必须指定对象节点的IP地址和端口No对象节点的IP地址和端口No设定在132其它节点表中通过其它节点表No来指定使用其中哪个其它节点表。6使用其他节点表132最为通信对象的其它节点的IP地址和端口No最大可设定至32个节点。设定其它节点IP地址和其它节点端口No的其它节点表请设定为Used使用。7其他节点IP地址1是其它节点的IP地址。设定4个0255范围内的数字。只有在设定为Used使用的其它节点表中才需要设定。955
8其它节点端口No指定其它节点的端口No。端口No必须设定在10256553416进制数0401hFFFEh范围内。只有在设定为Used使用的其它节点表中才需要设定。9子网掩码网关IP地址自节点IP地址与通信对象的IP地址的网络ID不同时必须设定子网掩码网关IP地址。详细内容请参照PC3J2JFLETTV2H或2PORTEFR模块的使用说明书。10等待重置重传次数在TCP连接器中相对于发送的数据如果对象没有返回ACK接收确认信号时则按照此处设定的次数重发数据重发后依然不能接收到ACK时则通过以太网重新启动连接器。此时会发生连接器错误代码为4013得连接器异常。该连接器错误代码会在再次打开连接器时被清除。设定为Disable未设定时会无限量反复发送而不进行连接器的重新启动。在通信中对方电源中断而以太网侧的连接器仍处于打开状态时解释对方要再次打开连接器连接器也不会正常打开。为了避免出现上述问题建议设定等待重新启动的重发次数。可设定范围310次缺省10次参考在1台设备的节点个人电脑及PC模块等具备以太网通信功能的装置中设置固有的IP地址。如果在多个节点上设定相同的IP地址则无法进行正常通信。可在各节点上设定多个端口No每个节点内的端口No不得重复。各端口可进行单独通信。使用TCP协议时要确定由哪一方打开连接器此时应将打开方指定为主动被打开方指定为被动进行通信得端口之间其端口No不必相同。设定示例打开侧被打开侧IPaddress19216811PortNo6000PortNo6001PortNo6002IPaddress19216810PortNo2001PortNo1025PortNo1020IPaddress19216812PortNo2000PortNo3000PortNo4000PortNo4500下面设定通信所用定时器。通常不必进行本项设定或进行变更。956
11无接收计时器在TCP中设定的连接器内在以NonReceptionTimer无接收定时器设定的秒数或者分钟数的时间内如果没有接收到来自对象节点发送数据时则通过以太网重新启动连接器。设定为Disable未设定时不能通过以太网重新启动连接器会无限期地等待来自对象节点的数据。可设定范围1秒255分钟缺省无限期等待12响应计时器集中设定以下的计时器。等待主动打开指令响应的定时器分割接收数据时的后续数据接收定时器TCPUDP对于文件存储传输的响应监视计时器可设定范围1255秒缺省6秒下述重发计时器关闭计时器数据包生存时间IP组装计时器在NanoCPU内置以太网中不使用。13重发定时器数据是在发送数据之后等待来自对方节点的ACK接收确认信号的计时器。超过该设定时间仍未收到ACK时重发数据。可设定范围200ms60秒缺省500ms14重发定时器SYNFIN与SYN打开对象节点的连接器或者FIN关闭对象节点的连接器对应的响应等待定时器。超过该设定时间仍未收到ACK时重发数据。可设定范围200ms60秒缺省500ms15关闭计时器从自节点关闭连接器时从自节点发送FIN如果收到来自对象节点的FIN接收则关闭。从自节点发送FIN后超过该设定时间后对象节点认为收到FIN时重新启动连接器。可设定范围260秒缺省10秒16数据包生存时间TTLtimetolive设定值每次通过IP路由器时一个一个减少的值。可设定范围1255次缺省10次17IP组合计时器分割的包的组合待机时间可设定范围1255秒缺省10秒957
22通信参数的设定方法参数的设定用PCwin2进行。在链接参数设定画面中选择initializedbasedonInitialSequenceProgram根据初始化顺控程序进行初始化时不会动作。1通过链接参数进行设定的方法在Linkparametersetup链路参数的设定画面中选择Ethernet以太网单击DetailD详细设定按钮显示通信参数设定画面。在该画面上设定自节点IP地址使用连接器132协议打开方式自节点端口No其它节点表No然后根据需要通过左下角的按钮设定其他节点表各种计时器子网掩码网关IP地址。958
单击OtherNodeTable各种定时器的设定按钮则显示各种定时器的设定画面单击Timers各种定时器的设定按钮则显示各种定时器的设定画面。在该画面上设定使用表132其它节点IP地址其他节点端口No959
点击SubnetMaskandGatewayIPAddress子网掩码网关IP地址按钮后就会显示子网掩码及网关IP地址的设定画面。初始值全部为0。变更时请单击Change变更按钮。单击Default初始值则返回初始状态。注意在外设上读出用顺序程序进行以太网初始化的CPU模块参数通过以太网的链路参数详细设定设定通信参数时通常输入缺省值的项目全部为零。此时请暂时先返回链路设定按Clear清除OK后再次设定以太网。2通过顺序程序进行设定的方法基于顺控程序进行的设定为未对应。960
通信参数寄存器数据的设置将数据设定在寄存器中之后通过SPW指令向以太网中写入通信参数。以下列举通信参数以及将其写入文件存储器的顺序程序例示。通信参数例自节点IP地址19216812C0A80102h使用连接器No123和其它节点表No12连接器1TCP主动端口No60001770h其它节点表No1连接器2TCP对象特定被动端口No60011771h其它节点表No2连接器3TCP对象不特定被动端口No60021772h其它节点表1IP地址19216811C0A80101h端口No80001F40h其它节点表2IP地址19216813C0A80103h端口No80011F41h通过R0104设定初始化参数时寄存器数据设定数据数据内容R01040102自节点IP地址低位R0105C0A8自节点IP地址高位R01060307使用表12使用连接器123R01070000使用连接器916R01080000连接器1TCP主动R01091770连接器1端口NoR010A0001连接器1其它节点表NoR010B00000000固定R010C0100连接器2TCP对象特定被动R010D1771连接器2端口NoR010E0002连接器2其它节点表NoR010F00000000固定R01100200连接器3TCP对象不特定被动R01111772连接器3端口NoR01120000连接器3其它节点表NoR011300000000固定R0114R01270000由于不使用连接器48因此不必设定。R01280101其它节点表1其它节点IP地址低位R0129C0A8其它节点表1其它节点IP地址高位R012A1F40其它节点表1其它节点端口NoR012B00000000固定R012C0103其它节点表2其它节点IP地址低位R012DC0A8其它节点表2其它节点IP地址高位R012E1F41其它节点表2其它节点端口NoR012F00000000固定注CPU模块的寄存器数据为16bit字数据因此将文件存储器中的2个字节用一个寄存器数据表示。961
向以太网模块传送通信参数初始化要求打开顺序程序例使用功能命令中的SPW将设定在寄存器中的通信参数传送给以太网模块。关于SPW命令请参照TOYOPUCNANO2ET的使用说明书。下面列举将前页的通信参数写入以太网的文件存储器中并将初始化请求标志为ON时的示例。V006仅限第1扫描ON时的特殊继电器V090P001链接1可使用标记V006V006V090P002WMOV5058R010链路5传送58h字节WMOV1208R0111208hR104的间接地址1000h104h2从以太网模块在本例中为链路No5的文件存储器地址WMOV0008R0120008写入从R00040008h文件存储器写入起始地址SPWR010R011R012向文件存储器写入込WMOV0001R100使初始化要求标记ON的数据WMOV5001R013链路5传送1字节WMOV1200R0141200hR100的间接地址1000h100H2WMOV0000R0150000h文件存储器写入起始地址SPWR013R014R015向文件存储器写入込到R012F的数据。向文件寄存器地址0000中写入为了打开设定在R0001中的初始化要求而写入的数据如果通信参数异常CPU模块会出现通信异常E6。请参考554通信异常重新设定通信参数。962
0000000100020003000400050006000700080009000A000B000C000D000E000F0010001100120013001400150016001700180019001A001B001C001D001E001F0020002100220023002400250026002700固定1初始化要求118连接器18118连接器18118连接器18主动打开要求1要求发送要求1要求接收确认1确认文件存储器通信参数设定地址bit7bit0887654327654328100固定100固定1错误记录接收确认2ICMP记录接收确认765432200固定00固定自节点IP地址00000001FFFFFFE低位高位765432765432151413121110818118使用连接器1使用16900固定连接器打开方式自身节点端口No低位连接0401hFFFEh高位116使用表1使用TCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001h器No1其它节点表No低位0001h0010h高位00固定连接器打开方式自身节点端口No低位连接0401hFFFEh高位器No2其它节点表No低位0001h0010h高位00固定连接器打开方式自身节点端口No低位连接0401hFFFEh高位器No3其它节点表No低位0001h0010h高位00固定963
00280029002A002B002C002D002E002F0030003100320033003400350036003700380039003A003B003C003D003E003F0040004100420043004400450046004700480049004A004B004C004D004E004F00500051005200530054005500560057连接器No4连接器No5连接器No6连接器No7连接器No8表No1连接器打开方式自身节点端口No0401hFFFEh其它节点表No0001h0010h00固定连接器打开方式自身节点端口No0401hFFFEh其它节点表No0001h0010h00固定连接器打开方式自身节点端口No0401hFFFEh其它节点表No0001h0010h00固定连接器打开方式自身节点端口No0401hFFFEh其它节点表No0001h0010h00固定连接器打开方式自身节点端口No0401hFFFEh其它节点表No0001h0010h00固定其它节点IP地址00000001FFFFFFE其它节点端口No0401hFFFEh00固定低位高位低位高位低位高位低位高位低位高位低位高位低位高位低位高位低位高位低位高位低位高位低位高位TCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对相不特定被动打开0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001hTCP主动打开0000hTCP对象特定被动打开0100hTCP对方不特定被动开放0200hUDP0001h964
00580059005A005B005C005D005E005F0060006100620063006400650066006700680069006A006B006C006D006E006F0070007100720073007400750076007700780079007A007B007C007D007E007F00800081008200830084008500860087低位表No2表No3表No4表No5表No6表No7高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定其它节点IP地址00000001FFFFFFE965
00880089008A008B008C008D008E008F0090009100920093009400950096009700980099009A009B009C009D009E009F00A000A100A200A300A400A500A600A700A800A900AA00AB00AC00AD00AE00AF00B000B100B200B300B400B500B600B7低位表No8表No9表No10表No11表No12表No13高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定低位其它节点IP地址00000001FFFFFFE高位其它节点端口No低位0401hFFFEh高位00固定其它节点IP地址00000001FFFFFFE966
00B800B900BA00BB00BC00BD00BE00BF00C000C100C200C300C400C500C600C700C800C900CA00CB00CC00CD00CE00CF00D000D100D200D300D400D500D600D700D800D900DA00DB00DC00DD00DE00DF低位其它节点IP地址00000001FFFFFFE表高位No14其它节点端口No低位0401hFFFEh高位00固定其它节点IP地址00000001FFFFFFE低位表高位No15其它节点端口No低位0401hFFFEh高位00固定其它节点IP地址00000001FFFFFFE低位表高位No16其它节点端口No低位0401hFFFEh高位00固定子网掩码网关IP地址00000001FFFFFFE00固定低位高位低位高位967
响应计时器低位高位无接收定时器低位高位重发定时器数据低位高位重发定时器SYNFIN低位高位关闭定时器低位高位数据包生存时间低位高位IP组合计时器低位高位重置等待重发次数低位高位00固定00E000E100E200E300E400E500E600E700E800E900EA00EB00EE00EF00F000F100F200F300F400F500F600F700F800F900FA00FB00FC00FD00FE00FF响应计时器以秒为单位设定。6秒时0006h无接收计时器以秒为单位或以分钟为单位设定。以秒为单位时用16进制数表示的最高位上的位为1。不设定时为0。30秒101Eh2分钟0002h无限等待0000h重发定时器数据重发定时器SYNFIN以1秒或100ms为单位设定。以100ms为单位时用16进制数表示的最高位上的位为1。500ms1005h2秒0002h关闭计时器以秒为单位设定。5秒0005h数据包生存时间00ED以一次为单位设定。10次000AhIP组合定时器以一次为单位设定。10次000Ah等待重置重传次数以一次为单位设定。10次000Ah00EC968
96SNIF功能在链路参数中未将支架号设定为内置插槽号设定为选件时SNIF自动被选择为链路目的地与TOYOPUSPCS连接。数据链路区域也自动设定为固定值所以不能变更。连接TOYOPUCPCS时应置于L3422ONL3LTON位置。未连接TOYOPUCPCS时应置于L3LTOFF位置。1链路规格项目规格数据链路功能IO32字节寄存器32字节传输距离最远3m只限于局内通信数据形式奇偶性1位偶数数据长度8位结束位1位同步方式起止同步模式传输方式半双工方式2线式通信速度288kbps电缆带屏蔽的双绞线2数据链路区域不与TOYOPUCPCS通信S130的bit0为OFF时输入数据设定在OFF数据。3特殊寄存器通过S130通信状态信息可确认与TOYOPUCPCS间的通信状态或TOYOPUCPCS的工作状态。即使在TOYOPUCPCS间的通信停止的状态下也不进行异常报警。可通过S130的bit0的通信中标记确认。项目链路区域备注IO输入EVE00EVEFF32字节256点输出EVF00EVFFF32字节256点寄存器输入S140S14F32字节输出S150S15F32字节寄存器内容S130通信状态信息bit0正在通信ON与TOYOPUCPCS正在通信bit1RUN信号ONTOYOPUCPCS处于RUN状态bit2ERR0信号ON在TOYOPUCPCS发生ERR0bit3ERR1信号ON在TOYOPUCPCS发生ERR1bit4ALM信号ON在TOYOPUCPCS发生ALMbit8链路命令可使用标记ON可以对TOYOPUCPCS发出链路命令bit9链路命令异常ON发出的链路命令发生异常S131成帧异常次数S132奇偶异常次数S133溢出异常次数969
97内置FL远程M功能1FL远程规格项目规格传输速度10Mbps100Mbps最大电缆长度1Max100m主机HUB间主机子机间1对1连接时子机HUB间HUBHUB间总延长距离Max2100mHUBMax20台最大连接节点数64台其中主机1台子机63台节点地址子机0163IO点数输入最大2048位输出最大2048位1个子机的IO点数输入最大64位输出最大64位IO的分配最小8点单位链路区域XYMLEXEYEMELGXGYGM通信功能IO通信1指定的HUB和FRMT为自动协议。自动协商模式之间相互连接时将达到100Mbps。开关式HUBMax20台24VDCMax100m主机子机01子机02Max100mMax100m子机63子机Max63台970
2链路No和链路区域链路参数可以对程序13的链路18进行任意设定。在链接区域设定内部继电器M或链接继电器L时已设定链接参数的程序的继电器区域将成为链接区域。输入输出XY区域和扩充区域EXEYEMELGXGYGM为各程序共享区域。链路参数可以对程序13的链路18进行任意设定。输入输出XY区域在各程序中共通链路区域设定了内部继电器M或链路继电器L时设定了链路参数的程序继电器区域为链路区域。扩充区域为各程序的共享区域。链路1118链接2128程序1PRG1链接参数程序2PRG2链接参数PRG1内部继电器MPRG2内部继电器MPRG1链路继电器LPRG2链路继电器L链接3138程序3PRG3链接参数输入输出XYPRG3内部继电器MPRG3链路继电器L扩充输入输出EXEYGXGY扩充内部继电器EMGM扩展链接继电器EL971
3通信区域中使用输入输出XY时的注意事项1注意不要使安装CPU的IO模块的IP地址与通信区域重复。XY000XY000XY000XY7FFXY7FFXY7FF良好XY000XY7FFXY000XY7FF在输入输出之间加入通信区域时XY000XY7FF输入输出与通信区域重复在通信区域之后有输入输出时不可CPU的IO区域FL远程的通信区域CPU的IO区域与FL远程的通信区域重复的区域2应用命令的IO更新RIOFUNNo280输入更新RIFUNNo281输出更新ROFUNNo282不能在通信区域使用。3通信区域的地址使用了Y时CPU内部的地址标记全部成为X。因此用IO监视器监视通信区域时将显示为X。972
971接通电源的顺序投入电源时请按照子站主站的顺序或同时投入。按照主站子站的顺序投入电源时有时会引起通信异常。另外通信开始后一旦切断子站的电源就会引起通信异常。4显示FL远程的状态显示指示灯中有硬件状态通信状态等两种。硬件状态通信状态的各指示灯中分别有绿色和红色的指示灯通过亮灯闪烁熄灯来表示以下的状态。指示灯名称颜色状态状态定义内容硬件状态绿正常状态模块正常状态未设定状态正在初始化红致命故障硬件异常轻微故障链接参数异常没有供给电源没有向主机模块供给电源正在复位初期处理开始等待通信状态绿正常状态网络正常状态未连接状态网络正常但未确立通信状态红致命通信异常网络上检测出不能通信的异常节点地址重复通信异常部分子局通信异常网络电源异常未连接电缆灯亮闪亮灯灭接通电源的顺序结果主局子局子局主局同时主站对于投入电源时应答较慢的子站最大在18秒钟内不会发生异常。在此期间主站将实施通信恢复操作。仍不能恢复通信时将作为通信异常通告给CPU。注1通信异常的解除请重置CPU启动或使通信重置特殊继电器为ON。详细内容参见9103通信复位。注2主站将在所有子站全部通信正常后继续通信。即使缺少1个站也会作为通信异常而停止通信。如果使用脱离功能则可以继续进行通信。详细内容请参照9104脱离功能。在FL远程中可通过链接参数的设定来选择通信异常时的通信停止进行不进行。973
972通信复位通信重置是因通信异常而停止通信时使通信恢复的功能。可通过使通信重置用特殊继电器由OFFON的方法对通信进行重置。各链路No的通信复位用特殊继电器的IO地址见下表。链路号码IO地址1V802V813V824V835V846V857V868V87注1通信复位功能仅在特殊继电器启动时有效。注2通信重置仅在通信异常时有效。通信正常时无效。通过重新启动CPU进行通信复位可通过CPU的重置开关来进行通信的重置。通信复位电路例在接通电源后18秒之内有通信回复动作则不需要复位电路。下图为回复通信异常时的通信所需电路例。通信复位按钮信号通信异常特殊继电器VAAV82通信复位通信异常注1上图为链路No3时的电路例。通信异常特殊继电器通信复位根据链路No而不同。注2通信异常时如果是CPURUNStopCPU的RUN停止的设定则上述回路不会变为有效。974
973分离功能主机在某个子站中发生通信异常时会针对所有子站停止通信并向CPU通告异常。所谓脱离功能是指使特定的子站从通信网络上脱离或重置的功能。可通过此功能使异常状态的子站从通信网络上脱离开来并对其他正常的子站继续进行通信。脱离状态下的通信1分离子机正常时主站向指定脱离的子站发送IO的OFF数据。来自该子站的接收数据将被丢弃并作为已接收IO的OFF数据来运行。即使针对脱离子站的输出为ON通信上还是可以进行OFF数据的通信。可与其他未指定脱离的子站像通常那样进行IO数据的通信。在指定脱离的状态下主站投入电源或进行通信重置时也会进行OFF数据的交换。2分离子机为通信异常时主站在该子站的异常解除之前继续进行通信恢复操作。在异常解除并有正常应答后开始进行OFF数据的交换。期间可对其他子站像通常那样进行IO数据的通信。为了通报指定分离的子局出现了通信异常主局会在7段显示器上显示错误代码D9传送异常和异常子局编号。3分离指定被解除时子局为正常时进行通常ONOFF的IO数据交换。子局为异常时为一般异常进行异常通告并停止对所有子局的通信。4其它主站在未指定脱离的子站发生通信异常时要进行异常通告并停止针对所有子站的通信。脱离子站的指定通过在特殊寄存器S3C3F上设定数据进行各子局分离状态的设定。各比特No表示节点地址局号。MSBS3CS3DS3ES3F各位1指定分离各位0未指定分离特殊寄存器的部分取决于链路No。LSB151413121110987654321313029282726252423222120191817164746454443424140393837363534333263626160595857565554535251504948链路No1234567813579BDF975
974通信数据响应时间1组成子机全部为FRMTTCU6405TCU6406TCU6407。刷新处理通信处理2程序X120Y100将从子局的输入开始到子局输出为止的时间作为通信数据的响应时间。3算式响应时间平均值2017子机数IO响应时间扫描时间2ms子局输入X120输出Y100CPU内置FL遥控主机主局FRMTFRMTFRMT参考FRMT输入输出响应时间规格OFFON15ms以下ONOFF15ms以下976100Mbps时
975参数的设定在程序中设定IOModuleIO模块和LinkParameter链路参数。下面以PCwin为例说明参数的设定方法。注意1参数的变更追加请务必从CPU中读出Allprogramsparameter所有程序参数后进行。下面对如下所示组成结构的参数设定方法进行说明。将LS连接在i4上子局设定链路参数在参数菜单中选择LinkParameter链路参数显示如下画面。1于O2处连接97512977
链路模块名的设定步骤1选择程序No和链路No。2点击Linksetup链路设定显示如下画面。3563设定安装模块的链路No。点击链路No栏中的选择链路No0E。4设定安装模块的插槽No。点击插槽No栏中的选择插槽No07。5输入链路模块名点击链路模块名栏中的选择链路模块。6点击OK确定显示如下画面链路模块名设定完成。477点击Detail详细设定显示如下画面。978
详细设定的设定步骤FL远程M的详细设定237451986101Linkarea链路区域设定通信区域的起始地址。最终地址将根据子站的传输字节数量的合计自动进行设定。可使用的IO地址如下所示。链路继电器内部继电器输入输出L00LL7FHL1000LL2FFFHEL000LEL1FFHM00LM7FHM1000LM17FFHEM000LEM1FFHGM000LGMFFFHXY00LXY7FHEXY000LEXY7FHGXY000LGXYFFFH注使用XY区域时设定不得与CPU中使用的IO重复。2Nodename节点名称输入FL远程M的名称。3Slavesetup子站设定列表从子站设定列表中点击想要设定的子站No并点击Slavesetup子站设定进行子站的详细设定。详细内容请参照下页的子站设定。979
4StateofoutputinhaltRUN停止时的输出状态设定CPU模块的RUN停止时的输出状态。设定在Clear清除上时RUN停止后数据链接的自身节点发送数据将全部变为0。设定为Hold保持时即便RUN停止继续发送RUN停止前的数据。5Communicationstopincommunicationerror通信异常时的通信停止设定在通信异常时stop停止或notstop不停止通信。设定为notstop不停止时则在通信异常时主机会向CPU发出异常警报并继续与正常的子局进行通信等到异常的子局恢复正常后自动再次开始与该子局进行通信。6CPUoperationincommunicationerror通信异常时的CPU动作设定模块发生异常时CPU的动作。设定为RUNcontinuedRUN继续时则在通信异常时也不停止运行。设定在stop停止上时发生通信异常时RUN就会停止。7UnconnecteddetectingeffectiveIOaddresslist未连接检测有效IO地址列表显示点击的子局设定一览表中的子局的未连接检测设定为Enable有效的IO地址。8DiagnosicDetailsetup诊断详细设定设定在该子局为FRMT系列时将诊断信息通用状态断路状态未连接状态保存在CPU的哪一个区域。诊断信息的详细内容参见9106诊断信息的收集。9Network网络不必进行与本项相关的设定。10设定结束后点击画面右上方的OK确定。980
子局设定的设定步骤FRMT子站设定画面1234ab1Slaveconnectionsetup子站连接的设定选择该子局是否连接通信线路。2Transferredbytessetup转送比特数的设定MMasterSSlave传送方向用10进制来设定相关子站的输入输出字节数量。在MS传输数量中设定输入字节数量在SM传输数量中设定输出字节数量。IO地址的顺序按照传输数量设定栏的上段为前下段为后的顺序进行分配。上述设定例中的IO地址的顺序虽然是输入为前输出为后但点击TransmissionDirection传输方向后传输方向将切换为输出为前输入为后。各子局的传送字节数的设定范围为输入0128输出0128。传输字节数量的合计为256字节以内。3Extendedsetting扩展设定相关子站为FRMT系列时设定如下。aDiagnosisfunction诊断功能将FRMT系列的诊断功能设定为Enable有效或Disable无效。诊断信息的详细内容参见9108诊断信息的收集。bUnconnecteddetectingEnableDisable未连接检测有效无效在各个接点上设定未连接检测功能的有效或无效。有勾选的为有效无勾选的为无效。003F表示IO地址。注即使将诊断功能设定为无效FRMT侧在诊断功能有效时设定的UnconnecteddetectingEnableDisable未连接检测有效无效数据的值仍将保留下来。要将诊断功能设定为无效时请在诊断功能有效下全部置于无勾选的然后将电源由OFFON使诊断功能变为无效。4设定结束后请点击画面右上的OK。981
976诊断信息的收集FL远程除了IO数据以外还拥有generalpurposestatus通用状态shortcircuitdata短路信息disconnectiondata未连接信息validityinvalidityofthedisconnectiondetectingfunction未连接检测功能的有效无效信息等诊断信息。IO数据与诊断信息的流程CPU经常进行IO刷新IO通信从机FRMT系列主机FL远程MIO分配12345IO数据IO数据通用状态异常履历重置任意读出开关通用状态链接参数IO数据通用状态异常履历重置任意读出开关未连接检测功能有效无效信息设定值未连接检测功能有效无效信息未连接检测功能有效无效信息短路信息短路信息短路信息未连接信息未连接信息未连接信息发生短路未连接时进行IO刷新发出指令响应数据通过FL远程的链接参数进行的IO分配详细内容请参照9107通过链接参数进行的诊断信息的收集1IO数据在linkarea链接顶部设定起始地址。2通用状态和异常履历复位任意读出开关在扩充设定的Generalpurposestatusarea通用状态区域设定起始地址。3未连接检测功能有效无效信息在每个子站的IO地址上设定validityinvalidityofthedisconnectiondetectingfunction未连接检测有效无效。该数据在重新投入从机的电源后也仍然会保留。4短路信息在扩展设定的Shortcircuitstatearea短路状态区域中设定起始地址。5未连接信息在扩展设定的Unconnectedstatearea未连接状态区域中设定起始地址。注1通用状态异常履历重置任意读出开关未连接检测功能有效无效信息短路信息未连接信息对象从机是FRMT系列且用链接参数设定为诊断功能Enable有效时为有效。注2将全部子站设定为诊断功能Disable无效时节点0163的通用状态及异常履历重置任意读出开关的数据因为经常进行IO刷新所以请在未使用区域进行设定。注3将diagnosisfunction诊断功能由Enable有效变更为Disable无效时1在diagnosisfunction诊断功能为Enable有效的状态下将所有IO地址的nocontactdetection未连接检测设定为Disable无效。2写入参数后重新接入电源确认通信确立的情况。3将diagnosisfunction诊断功能设定为Disable无效。4写入参数后重新接入电源确认通信确立的情况。982
9761根据链路参数收集诊断信息generalpurposestatus通用状态shortcircuitdata短路信息disconnectiondata未连接信息在CPU上的IO分配以及validityinvalidityofthedisconnectiondetectingfunction未连接检测功能的有效无效设定用PCwin2设定在FL远程的链接参数中。链路参数的设定方法参见977参数的设定。初始设定为generalpurposestatusarea通用状态区域D000LD003FHshortcircuitinformationarea短路信息区域D0040LD007FHUnconnectinformationarea未连接信息区域D0080LD00BFH。通过PCwin进行FL远程链路参数设定的画面子局的详细设定画面Diagnosisfunction诊断功能有效无效有效在接入电源时发送各子局IO地址的UnconnecteddetectionEnableDisable未连接检测有效无效设定信息。无效不发送UnconnecteddetectionEnabledisable未连接检测有效无效设定信息。各子局IO地址将保留diagnosisfunctionenable诊断功能有效时所设定的信息。validityinvalidityofthedisconnectiondetectingfunction未连接检测功能有效无效在IO地址上打勾进行设定。有勾选有效无勾选无效将Diagnosisfunction诊断功能从Valid有效设置为Invalid无效时1在Diagnosisfunction诊断功能为Valid有效的状态下将所有IO地址的Unconnecteddetection未连接检测设定为Invalid无效。2写入参数后重新接入电源确认通信确立的情况。3将Diagnosisfunction诊断功能设定为Invalid无效。4写入参数后重新接入电源确认通信确立的情况。983
9762通用状态用链接参数进行通用状态的IO分配后可从所设定的起始地址00L将通用状态区域分配在1FH上从20L将异常履历重置任意读出开关区域详细内容请参照91063异常履历重置任意读出开关分配在CPU上。通用状态和异常履历复位任意读出开关数据以每个节点1个字节为单位进行分配。注意用FRMT链路参数将所有子局的诊断功能均设定为Disable无效时也会进行节点0163的通用状态和异常履历复位任意读出开关数据的分配。通用状态和异常履历复位任意读出开关区域的分配相对字节地址数据00L00H节点01通用状态1FL节点62通用状态1FH节点63通用状态20L20H节点01异常复位任意读出开关3FL节点62异常复位任意读出开关3FH节点63异常复位任意读出开关通用状态区域异常履历重置任意读出开关区域通用状态的格式如下所示。通用状态的格式位内容0IO端子台1IO地址0F用的端子台电源电压状态标志0IO电源ON1IO电源OFF1IO端子台2IO地址101F用端子台电源电压状态标记0IO电源ON1IO电源OFF2未使用不定3未使用不定4输入部分未连接检测标记0正常全点连接1未连接发生中即使检测出有1点未连接时输出部分未连接检测标记0正常全点连接1未连接发生中即使检测出有1点未连接时标记状态参见FRMT系列使用说明书252断线检测定时。5输入部短路检测标志0正常全点正常1有短路之处即使只有1点短路输出部分未连接检测标记0正常全点连接1有短路之处即使只有1点短路发生异常时为1最少保持1s时间异常解除后返回0。6未使用不定7未使用不定984
9763异常履历复位任意读出开关虽然FRMT系列的子机在检测出短路和未连接之后在排除其原因后会自动恢复IO控制但短路信息和未连接信息以及IOLED显示仍会保持红灯闪烁状态。可通过将异常履历重置开关的各种位数设置为ON来对这些保留的数据进行重置。通过将任意读出开关的各位置于ON位置可读出各种异常履历信息及当前信息的诊断信息图详细内容参见91074诊断信息图。异常履历复位任意读出开关的格式位内容0输入短路异常履历复位1复位异常履历复位开关为ON时的启动仅仅有效1次。1输入未连接异常履历复位1复位2输出短路异常履历复位1复位3输出未连接异常履历复位1复位4输入短路的履历和当前的读出1读出5输入未连接的履历和当前的读出1读出任意读出开关为ON时的启动仅仅有效1次。6输出短路的履历和当前的读出1读出7输出未连接的履历和当前的读出1读出9764诊断信息图检测出FRMT系列的从机有短路及未连接时主机将自动将诊断信息保存在短路状态区域及未连接状态区域中。用链接参数设定的短路状态区域起始地址00L至3FH的数据格式请参照1短路状态区域的格式。用链接参数设定的未连接状态区域起始地址00L至3FH的数据格式请参照2未连接状态区域的格式。短路状态区域和未连接状态区域的通用说明1同时保存履历信息和当前信息。2该区域为4段位移结构信息0为最新数据数据按信息1信息2信息3的顺序依次移位从信息3开始数据消失。3GetSet标记仅限信息0有效设定了履历信息和当前信息时主机FL远程会将GetSet标记的位0设定为1。用顺序程序将GetSet标记的位0变为1时读取履历信息或当前信息后GetSet标记的位0返回0初始化时也要将其设定为0。。985
1短路状态区域的格式履历相对地址内容数据格式短路履历信息0最新数据00LGetSet标志Bit00GetBit01SetBit170固定00H未使用00h固定01L节点地址Hex01h3Fh16301H未使用00h固定02L响应代码Lo正常时69h异常时94h02H响应代码Hi00h固定03L错误代码Lo消息响应的错误代码Lo正常时00h异常时10h03H错误代码Hi消息响应的错误代码H正常时00h异常时00h04L04H05L05H短路履历信息06LIO06306H07L07HMSBLSB数值表示IO地址0正常1短路07060504030201000F0E0D0C0B0A09083F3E3D3C3B3A3938短路当前信息0最新数据08LGetSet标志Bit00GetBit01SetBit170固定08H未使用00h固定09L节点地址Hex01h3Fh16309H未使用00h固定0AL响应代码Lo正常时67h异常时94h0AH响应代码Hi00h固定0BL错误代码Lo消息响应的错误代码Lo正常时00h异常时10h0BH错误代码Hi消息响应的错误代码H正常时00h异常时00h0CL0CH0DL0DH短路当前信息0ELIO0630EH0FL0FHMSBLSB数值表示IO地址0正常1短路状态07060504030201000F0E0D0C0B0A09083F3E3D3C3B3A3938短路履历信息110L与短路履历信息0相同17H与短路履历信息0相同短路当前信息118L与短路当前信息0相同1FH与短路当前信息0相同短路履历信息220L与短路履历信息0相同27H与短路履历信息0相同短路当前信息228L与短路当前信息0相同2FH与短路当前信息0相同986
履历相对地址内容数据格式短路履历信息330L37H与短路履历信息0相同与短路履历信息0相同短路当前信息338L3FH与短路当前信息0相同与短路当前信息0相同2未连接状态区域的格式履历相对地址内容数据格式未连接履历信息0最新数据00LGetSet标志Bit00GetBit01SetBit170固定00H未使用00h固定01L节点地址Hex01h3Fh16301H未使用00h固定02L响应代码Lo正常时6Ah异常时94h02H响应代码Hi00h固定03L错误代码Lo消息响应的错误代码Lo正常时00h异常时10h03H错误代码Hi消息响应的错误代码H正常时00h异常时00h04L04H05L05H未连接履历信息06LIO06306H07L07HMSBLSB数值表示IO地址0正常1未连接07060504030201000F0E0D0C0B0A09083F3E3D3C3B3A3938未连接当前信息0最新数据08LGetSet标志Bit00GetBit01SetBit170固定08H未使用00h固定09L节点地址Hex01h3Fh16309H未使用00h固定0AL响应代码Lo正常时68h异常时94h0AH响应代码Hi00h固定0BL错误代码Lo消息响应的错误代码Lo正常时00h异常时10h0BH错误代码Hi消息响应的错误代码H正常时00h异常时00h0CL0CH0DL0DH未连接当前信息0ELIO0630EH0FL0FHMSBLSB数值表示IO地址0正常1未连接状态07060504030201000F0E0D0C0B0A09083F3E3D3C3B3A3938未连接履历信息110L与未连接履历信息0相同17H与未连接履历信息0相同未连接当前信息118L与未连接当前信息0相同1FH与未连接当前信息0相同987
履历相对地址内容数据格式未连接履历信息220L27H与未连接履历信息0相同与未连接履历信息0相同未连接当前信息228L2FH与未连接当前信息0相同与未连接当前信息0相同未连接履历信息330L37H与未连接履历信息0相同与未连接履历信息0相同未连接当前信息338L3FH与未连接当前信息0相同与未连接当前信息0相同988
98内置标准MODBUSRTU从机功能通过MODBUSRTU通信进行与MODBUSRTU主机的数据交换。981MODBUSRTU规格1MODBUSRTU规格项目规格接口标准EIARS485兼容2线式通信方式异步式传输线路带屏蔽的双绞线通信速度0306122448961923845761152kbps根据设定传输距离最远1公里总长传输形态1N11局数最大255局数据形式起始位1位数据长度8位奇偶有无奇数偶数根据设定停止位1或2位取决于设定错误检出奇偶校验CRC校验2所支持的MODBUS功能代码内10进制MODBUS通信协议等详细内容请参照web上公开的规格书等。功能代码功能0102位数数据的读出0304文字数据的读出051位数数据的写入061文字数据的写入0F15位数数据的程序段写入1016文字数据的程序段写入989
3MODBUS对应地址映射表功能代码0102050F用位数地址MOWordaddoressDBUSaddMOoressDBUS地位数地址址Nopoints点数位数wordTOYOPUC位数地址TOYOPUCWordaddoress0000EP0FFF4096EP000FFFEK10001FFF4096EK000FFFEV20002FFF4096EV000FFFETEC300037FF2048ETEC0007FFEL380057FF8192EL0001FFFEXEY58005FFF2048EXEY0007FFEM60007FFF8192EM0001FFF8000P1P800081FF512P0001FFK820084FF768K0002FFV850085FF256V000FFTC860087FF512TC0001FFL88008FFF2048L0007FFXY900097FF2048XY0007FFM98009FFF2048M0007FFA000P2PA000A1FF512P0001FFKA200A4FF768K0002FFVA500A5FF256V000FFTCA600A7FF512TC0001FFLA800AFFF2048L0007FFXYB000B7FF2048XY0007FFMB800BFFF2048M0007FFC000P3PC000C1FF512P0001FFKC200C4FF768K0002FFVC500C5FF256V000FFTCC600C7FF512TC0001FFLC800CFFF2048L0007FFXYD000D7FF2048XY0007FFMD800DFFF2048M0007FFE000GXGYE000FFFF8192GXGY0001FFF990
功能代码03040610用文字地址00002000P1MODWordaddoressressPBUEPEKELEXEYESHKVSaDBUS地址dd10058018002000205001FF57F5FFFFF1FFF204F205FNo点po数intsMOo字地址文字word2048TOYOPUC文字地址TOYOPUCWordaddoressFF256EPEKELEXEYESENPKV000000000000FFW256FFWEVETEC2002FF37F256EVETEC000FFW3001280007FW3805120001FFW1287FWEM8006007FF512EM0001FFW20480007FFEN100017FF20480007FFH0007FF201F320001FW2020480002FW16FWTCLXY208021002060207F20FF217F32128TCLXY0000001FW1280007FW7FWMSN2180260021FF25FF1024MS0001287FW22000003FF27FF512N0001FFD30002FFF3FFF4096RD000R280020480007FFFFF4000P2P4000401F32P0001FWKTCMSN42004600404F407F41FF45FF47FFKTCMSN0000004020480002FWV4050405F16V000FW4060320001FWL408040FF128L0007FWXY4100417F128XY0007FW41801287FW10243FF5120001FFRD480050004FFF5FFF20484096R0007FFD000FFF6000P3P6000P601F320001FWKVMSRD602062007000604F605F65FF6FFF7FFF484096KVMSRD0002FW605016000FWTC6060607F32TC0001FWL608060FF128L0007FWXY6100617F128XY0007FW618061FF0001287FW10240003FFN660067FF512N0001FF680020480007FF000FFF8000U8000FFFF32768U0007FFF991
9821设定链路参数支架No时隙No链路模块名的设定在MODBUS中设定时要在Builtin内装中设定机架No在Standard标准中设定插槽No在MODBUS中设定链接模块名称。链路参数的详细设定设定参数使其与连接设备的参数相符。步骤1设定局号。2设定停止位数长度。3设定奇偶。4设定通信速度。点击通信速度从一览中选择。5设定结束点击OK确定。2992
99EtherCAT功能规格及参数设定使用方法等详细内容请参照TOYOPUCEtherCAT使用说明书T326N。TOYOPUCNanoL1EtherCAT主机993EtherCAT主机仅L1可使用选择
910EtherNetIP功能注意TOYOPUCNanoCPU内置端口中的EtherNetIP功能的使用未对应。9101概要所谓EtherNetIP是指以广泛使用的以太网技术为基础的产业用网络。本标准通过ODVAOpenDeviceNetVendorAssociation来管理并在全球众多的设备中采用。通过使用EtherNetIP控制器之间的网络自不必说还可构建起控制器与设备之间的现场网络。系统概要EtherNetIP是一个多供应商的网络。因此加入TOYOPUCNano之间的数据链接中后TOYOPUCNano还可以同其他公司生产的EtherNetIP对应控制器及远程IO设备等进行连接。交换式集线器TOYOPUCNano扫描仪TOYOPUCNano扫描仪其他公司制控制器其他公司制远程IO扫描仪适配器TOYOPUCNano是与EtherNetIP的扫描仪对应的设备。既可以在PCwin2上进行发端连接和目标连接两个扫描列表的设定还可以与安装了CIP的Transportclass1的其他公司EtherNetIP控制器IO设备连接与Transportclass3不对应。所谓扫描仪是指可在扫描仪扫描仪之间或扫描仪适配器之间构筑起连接的设备。扫描仪具有打开其他设备连接的发端功能。所谓适配器是指自身不具有打开连接功能的设备。要想进行EtherNetIP通信就必须打开来自扫描仪的通信。远程IO设备等中较多的类型。所谓连接是指用EtherNetIP进行数据通信所需的通信线路。注意1不可在适配器之间进行数据链接。注意2与其他公司制设备的连接有一定限制。详细内容请参照下页的注意事项。994
910291031EtherNetIP规格IO通信功能连接想要进行数据的收发就必须打开与对方设备的连接。打开连接的一侧称为发端侧被打开的一侧称为目标侧从发端侧向目标侧请求开放连接。开放成功后即可进行数据通信。TOYPUCNano的EtherNetIP可使用发端和目标双方的功能。连接的建立有以下几种方法。ExclusiveOwner是一个连接中可从发端向目标和从目标向发端进行双向数据通信的功能。可在连接点设定为实例ID时使用。为标签时不能使用。关于连接点请参照下页的2数据的分配。TOYOPUCNanoInputOnlyTOYOPUCNano或其他公司EtherNetIP模块目标建立连接发端输入IO数据输出IO数据输出建立连接输入是在一个连接中可从目标侧向发端侧进行数据通信的设定。连接点为标签指定时如下所示可通过设置2个连接进行双向的通信。TOYOPUCNanoTOYOPUCNano或其他公司EtherNetIP模块目标发端发端输入输出IO数据建立连接目标IO数据输出输入995
2数据的分配建立连接时在目标侧上设置的连接点将从发端侧进行指定。连接点的指定方法有实例ID和标签2种方式。a实例ID是用实例ID065535的编号来指定对方设备连接位置的通信方法。在发端侧指定作为对象的目标侧连接的ID。在连接的详细设定中设定输入输出区域的地址。PLCA连接点发端目标ID101目标发端100PLCBCPU用户存储器EtherNetIP通信功能部分EtherNetIP通信功能部分CPU用户存储器实例ID实例ID输入区域输入区域输出区域输出区域100输出区域输入区域输出区域进行上述指定后请求开放IO刷新数据IO刷新输出区域输出区域连接点数据101目标输入区域IO刷新IO刷新输入区域输入区域发端996
b标签是用标签变量名称来指定对方设备连接位置的通信方法。PLCAPLCBCPU用户存储器EtherNetIP通信功能部分连接点EtherNetIP通信功能部分指定标签名称tag123后请求开放CPU用户存储器输入区域tag123IO刷新IO刷新输入区域输出区域输出区域标签名称输出区域输入区域数据tag456后请求开放输出区域发端输出区域标签名称tag456目标指定标签名称目标输出区域输入区域IO刷新数据IO刷新连接点输入区域输入区域发端3连接的建立发端侧在电源接通且可开始通信的状态下向连接位置上设定的目标连接请求建立连接。目标侧为可应答状态并针对来自发端侧的连接请求判断可以连接时即可建立连接。在目标侧将用发端侧的连接请求来确认ID或标签信息数据容量等。发端侧和目标侧中参数信息不一致时将无法建立连接。发端侧与目标设备不能建立连接时将成为连接异常并更新各状态信息。关于状态请参照9155章。发生连接异常时发端将进行重新连接。对方设备及网络设备没有问题时虽然会再次建立连接但由于网络构成及连接设定状况的不同重新连接有时会需要1分钟左右的时间。4数据包间隔RPI建立连接后发端侧和目标侧两方面将以一定间隔来发送数据。这个间隔就叫做数据包间隔。可设定范围为0510000ms。数据包间隔可分别设定为发端目标OT方向目标发端TO方向。连接点中使用了标签时仅设定TO侧数据表间隔的值。OT侧的数据表间隔可使用TO侧的设定值。但是TO侧的设定值小于250ms时将以250ms的间隔进行发送。997
5通信超时在连接建立后数据通信可实施的状态下接收数据中断一定时间时将成为连接异常数据通信将停止。接收数据的监视时间用数据包间隔的设定值和通信超时乘数来确定。通信参数乘数可从RPIx4RPIx8RPIx16RPIx32RPIx64RPIx128RPIx256RPIx512中选择。例如数据包间隔为50ms超时为RPI8时如果在400ms的时间内未能接收数据就会成为连接异常。成为连接异常时将停止该连接的发送动作并更新各状态信息。关于状态请参照9155章。RPI为10ms以下时超时请设定在RPIx8以上。6通信负载EtherNetIP可通过数据包间隔来确定所发送的数据量。数据包间隔如果是较大的值则通信负载变小数据包间隔较小时通信负载将变大。设定多个连接并以较小的数据包间隔运行时模块将承受较大的负载。可收发数据包的量有一定限度超出这个限度时就无法正常运行。因此在构建系统时需进行连接数量与数据包间隔的设定避免超出模块的能力。可进行通信的数据量大致可使用单元允许带宽用以下的计算公式计算得出。计算结果用负载率来表示负载率超过100时请复核RPI的值等将通信负载设定为合适的值。另外在同一线路上有EtherNetIP通信以外的其他设备等混用时请以具有更大余量的负载设定进行使用。负载率各连接的负载率合计各连接的负载率1000TO侧RPI1000OT侧RPI3000pps100单位允许带宽注连接点中使用标签时的OT侧的RPI如下所示。TO侧RPI为250ms以下时OT侧RPI250ms。TO侧RPI大于250ms时OT侧RPITO侧RPI。998
负载率计算例在这里考虑设3台TOYOPUCNano。左起分别称为ABC。在A和B之间设定了实例ID通信。在A和C之间设定了标签通信。ABC各自的发端目标和RPI的设定值如下图所示。TOYOPUCNanoATOYOPUCNanoBCRPI20msRPI20msRPI50msRPI250ms就各TOYOPUCNanoABC计算负载率确认有无超出100。TOYOPUCNanoATOYOPUCNanoA由于使用了2个连接因此要就各连接计算负载率最后合计求出A的负载率。实例ID通信的负载率负载率1000201000201000pps10010标签通信的负载率负载率10005010002501000pps10024合计负载率1024124TOYOPUCNanoB求出TOYOPUCNanoB的负载率。负载率1000201000201000pps10010TOYOPUCNanoC求出TOYOPUCNanoC的负载率。负载率10005010002501000pps10024由于所有的TOYOPUCNano的负载率都在100以内所以以该设定可以毫无问题地使用。注意RPI的值设定过小时负载率将变高。在不需进行高速通信的地方RPI请尽可能设定较大的值以避免抬高负载率。TOYOPUCNano实例ID通信标签通信发端目标发端目标999
9104EtherNetIP的设定方法91041设定链路参数链接模块的分配在NanoCPU中进行通信相关的模块设定。1从项目中双击参数的链接参数。2选择设定EtherNetIP的程序No及链接No。3点击链接设定按钮。确定设定EtherNetIP的链接No。任意在这里作为例子选择了链接No1。4在机架No插槽No中选择机架0插槽2或插槽3。5从链接模块名称中选择EtherNetIP。6点击OK按钮。5打开标签选择EtherNetIP。9100
7确认EtherNetIP是否为选择状态并点击Detail详细设定按钮。7在EtherNetIP已被选择的状态下点击详细设定。链接参数详细设定1自身节点IP地址显示进行设定后的结果。6目标设定保存2个别设定3列表设定4选项5网络详细设定1自身节点IP地址设定自身节点地址。IP地址请从以下列表中进行设定。1280002232552552559101
2个别设定在所选择的连接No中进行设定。1选择Do进行连接设定。2功能从Target目标Originator发端中选择。3按下设定按钮就功能进行设定。从Target目标Originator发端进行选择。21目标的设定进行目标的设定。abcda通信方式从InstanceID实例IDTag标签中选择通信方式。b目标发端信息设定目标发端信息。b1连接点设定连接点。通信方式ID可设定的值实例ID以数值进行设定。1001997681279标签以标签名称字符串进行设定。字母有大写小写区别数字符号有部分符号不可使用9102
b2输出设定输出区域可设定8个区域。注意可使用的区域数量为输入区域输出区域合计1000区域为止。b3地址地址可设定以下的区域。可设定区域继电器链路寄存器链接M00L7FHL00L7FHXY00L7FHEM00L1FFHEL00L1FFHEXEY00L7FHGM000LFFFH1GXGY000LFFFH1R000007FFD0000FFFU00007FFF1D000L及R100H等根据所设定的实时格式能够设定的合计字节数量上限会有所不同。8个区域的字节数量合计请务必设定在以下范围内。b5异常时的状态异常时的状态可从OFF默认保留中选择。关于设定为OFF或保留时的动作请参照9108异常时输入输出的设定。注意地址中请务必设定LLow或HHigh。例b4字节数就8个区域分别设定输出区域的字节数量。实时格式可设定的字节数量范围ModelessHeartbeat01448字节32birHeader01444字节9103
c发端目标信息设定发端目标信息。c1连接点设定连接点。c2输入设定输出区域可设定8个区域。注意可使用的区域数量为输入区域输出区域合计1000区域为止。c3地址地址可设定以下的区域。可设定区域通信方式连接点可设定的值实例ID以数值进行设定。1001997681279标签不可设定不可设定继电器链路寄存器链接M00L7FHL00L7FHXY00L7FHEM00L1FFHEL00L1FFHEXEY00L7FHGM000LFFFH1GXGY000LFFFH1R000007FFD0000FFFU00007FFF1D000L及R100H等根据所设定的实时格式能够设定的合计字节数量上限会有所不同。8个区域的字节数量合计请务必设定在以下范围内。c5异常时的状态异常时的状态可从OFF默认保留中选择。关于设定为OFF或保留时的动作请参照9108异常时输入输出的设定。注意地址中请务必设定LLow或HHigh。例c4字节数就8个区域分别设定输入区域的字节数量。实时格式可设定的字节数量范围ModelessHeartbeat01448字节32birHeader01444字节9104
d详细设定d1实时格式用EtherNetIP将TOYOPUCNano相互连接时请选择自动。默认为自动。自动上有勾选自动上无勾选去除自动上的勾选时将变为手动设定。从以下列表中选择实时格式。通信方式通信方向所选择的实时格式实例ID目标发端Modeless发端目标32bitHeader标签目标发端Modeless发端目标HeartBeat通信方向可选择的实时格式目标发端ModelessHeartBeat32bitHeader发端目标ModelessHeartBeat32bitHeader9105
22发端abcdefc通信超时用RPI的乘数进行设定。从X4至X512中选择。ga目标节点IP地址设定目标节点的IP地址。b通信方式选择InstanceID实例ID方式或Tag标签方式中的其中一个。例如RPI50ms超时为RPIX4时如果在50msX4200ms以内无法接收数据就会成为连接异常。d目标发端信息d1数据包间隔RPI设定从发端向目标发送的数据包的发送间隔。210000ms2ms单位d2连接类型从PointtoPoint或Multicast中选择连接类型。PointtoPoint是将发端与目标按11建立起来的连接。发端目标9106
Multicast可用多个发端同一模块的除外来接收来自1个目标的发送数据。使用多点传送时请将同一目标中连接的各发端TO侧数据包间隔RPI的设定值设定为相同的值。注意不可从一台TOYOPUCNano的多个发端连接中对同一目标使用多点传送。下面的例子中就是以多点传送来使用左侧的TOYOPUCNano所拥有的多个发端并试图连接到右侧TOYOPUCNano的目标上。这种情况下左侧的TOYOPUCNano发端连接将反复连接断开不会正常运行。另外将分别向TOYOPUCNano通告错误代码86链接通信异常向S30通告错误代码5A。发端TOYOPUCNanoTOYOPUCNano目标发端发端发端注意作为目标侧来使用多点传送时需要有与所连接的发端数量相对应的连接数量。9107目标发端
例在下图中针对1个进行多点传送的目标连接了3个发端。虽然目标的多点传送连接设定是一个但实际上连接了3个所以这种情况下的多点传送连接为3个连接。发端发端发端d3连接点设定连接点。可设定的值从以下范围中选择。d4输入设定9108目标消费3个连接通信方式连接点可设定的值实例ID以数值进行设定。065535标签以标签名称字符串进行设定。字母有大写小写区别数字符号有部分符号不可使用输出区域可设定8个区域。注意可使用的区域数量为输入区域输出区域合计1000区域为止。
d5地址地址可设定以下的区域。可设定区域继电器链路寄存器链接M00L7FHL00L7FHXY00L7FHEM00L1FFHEL00L1FFHEXEY00L7FHGM000LFFFH1GXGY000LFFFH1R000007FFD0000FFFU00007FFF1D000L及R100H等根据所设定的实时格式能够设定的合计字节数量上限会有所不同。8个区域的字节数量合计请务必设定在以下范围内。异常时的状态异常时的状态可从OFF默认保留中选择。关于设定为OFF或保留时的动作请参照9108异常时输入输出的设定。e发端目标信息e1数据包间隔RPI设定从发端向目标发送的数据包的发送间隔。210000ms2ms单位e2连接类型连接类型为PointtoPoint固定。e3连接点设定连接点。注意地址中请务必设定LLow或HHigh。例d6字节数就8个区域分别设定输入区域的字节数量。实时格式可设定的字节数量范围ModelessHeartbeat01448字节32birHeader01444字节通信方式连接点可设定的值实例ID以数值进行设定。065535标签不可设定不可设定9109
e4输出设定输出区域可设定8个区域。注意可使用的区域数量为输入区域输出区域合计1000区域为止。e5地址在地址中从以下的寄存器区域开始设定。可设定区域继电器链路寄存器链接M00L7FHL00L7FHXY00L7FHEM00L1FFHEL00L1FFHEXEY00L7FHGM000LFFFH1GXGY000LFFFH1R000007FFD0000FFFU00007FFF1D000L及R100H等根据所设定的实时格式能够设定的合计字节数量上限会有所不同。8个区域的字节数量合计请务必设定在以下范围内。e7异常时的状态异常时的状态可从OFF默认保留中选择。关于设定为OFF或保留时的动作请参照9108异常时输入输出的设定。注意地址中请务必设定LLow或HHigh。例e6字节数就8个区域分别设定输出区域的字节数量。实时格式可设定的字节数量范围ModelessHeartbeat01448字节32birHeader01444字节9110
f详细设定f1f2f3f4f5f1触发器设定发送数据的发送时间。触发器从Cyclic或COS中选择。f2最小发送间隔设定把触发器设定在COS时的最小发送间隔。自动时为RPI4的值。注意最小发送间隔的最小值为6ms。因此使用自动时请将OT方向和TO方向的RPI设定值设定在24ms以上。设定在23ms以下时将无法正常发挥作用。f3配置实例是配置连接实例。默认为1。通常请保持1的状态。设定范围为065535。默认1用EtherNetIP将TOYOPUCNano相互连接时请设定为1。该参数在连接对方设备所拥有的配置实例的值为1以外的值时将进行变更。其他公司制的设备有时会有配置实例的设定值为1以外的值的情况。请以其他公司制的设备使用说明书或EDS文件为参考设定为与其他公司制设备所拥有的配置实例相同的值。注意配置实例不一致时通信将无法进行。f4端口编号链接地址结合所连接的设备设定端口编号与链接地址。默认为端口编号0链接地址0。用EtherNetIP将TOYOPUCNano相互连接时请设定为默认的端口编号0链接地址0。其他公司制的设备中有些会带有端口编号及链接地址。请以其他公司制的设备使用说明书或EDS文件为参考结合对方设备来设定端口编号及链接地址。注意带有端口编号及链接地址的设备进行连接时如果端口编号及链接地址未能正确设定Cyclic按RPI的设定间隔来进行数据的发送。COSChangeofState数据没有变化时按RPI的设定间隔发送数据。数据有变化时从发生变化时开始在最小发送间隔的设定时间内发送数据。则无法进行通信。9111
f5实时格式实时格式请根据连接对象设备进行设定。用EtherNetIP将TOYOPUCNano相互连接时请选择自动。默认为自动。注意选择自动时可选择下表WithcheckmarkatAuto自动上有勾选中的实时格式。并非自动进行与对方设备相匹配的设定的功能。自动上有勾选自动上无勾选去除自动上的勾选时将变为手动设定。从以下列表中选择实时格式。注意进行与其他公司制的设备的连接时请根据其他公司制的设备中设定的实时格式进行设定。实时格式在各连接设备之间有差异时有时会无法进行通信。通信方式通信方向所选择的实时格式实例ID目标发端Modeless发端目标32bitHeader标签目标发端Modeless发端目标HeartBeat通信方向可选择的实时格式目标发端ModelessHeartBeat32bitHeader发端目标ModelessHeartBeat32bitHeader9112
g目标设定打开目标设定打开按钮可在使用发端的标签通信时应用。通过读入事先保存的目标的标签名称即可选择可使用的目标的标签名称。选择可从发端的连接点设定栏对话框中进行。要使用该功能必须事先使用目标设定保存功能来保存目标的标签名称信息。详细内容请参照6目标设定保存。读入标签名称的设定已保存下来的文本文件。3列表设定参数设定信息可用表格形式进行显示编辑。可进行EXCEL等数据的复制粘贴。即可从列表中选择标签名称。9113
4选项41连接目的地IP地址输出信息地址输出各连接的连接目的地IP地址最下位位数的1字节。连接设定为发端时可保存用参数设定的目标IP地址。为目标设定时可在连接建立后保存对方发端的IP地址。初始值为00。保存格式如下所示。占用64字的寄存器。多点传送时仅保存与所连接的对方1台设备相对应的IP地址。偏移0126263例将19216801的连接0的对方IP地址为19216808时连接3的对方IP地址为192168012时的状态输出到D0C00中上位下位CN1CN0CN3CN2CN5CN4CN125CN124CN127CN1261921680119216808192168012CN0CN3上位下位00080C000000地址D0C00D0C01D0C029114
42数据包丢失次数12345异常678910异常输出连接的接收数据包丢失次数。计数值为接收侧监视数据包的连号并累计其编号在顺序号中丢失的数量。该值定期进行更新时至对方设备为止的线路就有可能出现问题。注意数据包丢失次数由于对顺序号丢失次数进行监视所以在拔下LAN电缆的状态下将无法进行次数的更新。计数数量00000101010101010404重新建立连接111213异常141516171819异常连接异常计数数量040404050505数据包丢失次数可用065535的字数据来输出。计数计至65535时计数值将返回0。数据包丢失次数的保存格式如下所示。占用128字的寄存器。发端侧时05050405目标侧时00000001发生连接超时时将保留该计数值。之后重新建立连接时发端连接中值会被保留但目标连接中计数值则会被初始化0000。内容CN0数据包丢失次数CN1数据包丢失次数CN2数据包丢失次数CN126数据包丢失次数CN127数据包丢失次数参数的设定地址偏移0121261279115
43脱离寄存器区域地址设定脱离指定用寄存器区域。设定区域的格式如下所示。占用8字的寄存器。注意所谓脱离功能是指确认指定脱离的连接出现通信异常的状况并对其他正常的连接继续进行通信的功能。详细内容请参照9107脱离功能。偏移1500151413121110987654321031302928272625242322212019181716474645444342414039383736353433326362616059585756555453525150494879787776757473727170696867666564959493929190898887868584838281801111101091081071061051041031021011009998979612712612512412312212112011911811711611511411311211脱离指定20脱离解除3456744异常时的CPU通告设定在发端连接中发生连接超时错误代码0050时是否向CPU模块进行通告异常状况。初始值为Donot不进行。5网络详细设定51子网掩码网关IP地址自节点IP地址与通信对象的IP地址的网络ID不同时必须设定子网掩码网关IP地址。详细内容请参照FLETTV2H使用说明书t754中的资料5。52命令通信用UDP端口No是在分层通信中使用的端口No。通常情况下请勿变更本设定。6目标设定保存将目标侧的标签名称信息作为文本数据保存。保存后的数据可在设定对方TOYOPUCNano的发端侧标签通信的标签名称时使用。详细内容请参照22发端的g打开目标设定。不向CPU进行通告。默认值即使检出连接异常也不向CPU进行通告。向CPU进行通告。选项检出连接异常时将通告异常情况并在CPU中显示通信异常错误代码86。通信异常VA2将变为ON。发生连接异常后将以10秒间隔进行连接重建。但是即使可以建立连接CPU中的异常状态在通信重置V80链接1时实施之前也将被保留。9116
9105状态91051链接用特殊寄存器在EtherNetIP中特殊寄存器里配备有以下的状态信息。150S30S31S32S33S34S35S36S37S38S39S3AS3BS3CS3DS3ES3FS30S31S32S33S34S35S36S37S38S39S3AS3BS3CS3DS3ES3F自身以太网地址的第13位为006053。特殊寄存器的部分取决于链路No。连接建立状态区域连接异常状态区域150错误代码详细1详细2详细3系统版本错误代码履历连接异常状态区域自身的以太网地址第4位自身的以太网地址第5位自身的以太网地址第6位系统预约自身的IP地址第1位自身的IP地址第2位自身的IP地址第3位自身的IP地址第4位链路No1234567802468ACE13579BDF9117
1连接建立状态区域输出连接的建立状态。连接已确立时相关连接编号的位数位置将变为1。150S301514131211109876543210连接异常发生中S313130292827262524232221S324746454443424140393837S336362616059585756555453S347978777675747372717069S359594939291908988878685S3611111010910810710610510410310210110099989796S371271261251241231221211201191181171161151141131122连接异常状态区域输出连接异常发生状态。发生异常的相关连接编号的位数位置将变为1。本区域为履历信息即使连接异常恢复之后也将保留1的状态。通信重置V80链接No1时ON之后将变为0。150S381514131211109876543210S39313029282726252423222120191817161有连接异常S3A474645444342414039383736353433320无分配或正常S3B63626160595857565554535251504948S3C79787776757473727170696867666564S3D95949392919089888786858483828180S3E11111010910810710610510410310210110099989796S3F127126125124123122121120119118117116115114113112注意1对方正在接入电源或启动花费时间时在连接建立前有时会发生连接异常。在这种情况下连接建立后请实施通信重置V80链接No1时解除异常。注意2发端侧在电源接入时或CPU重置时即使相关连接上没有连接对象约40秒钟时间连接异常状态区域的相关位数都不会为ON。另外设定在NotificationoffaulttoCPUDo异常时的CPU通告进行时也同样有约40秒钟时间不会通告通信异常。注意3目标侧在电源接入时或CPU重置时如果相关连接上没有连接对象则连接异常区域的相关位数不会为ON。目标侧使连接异常区域的相关位数为ON的情况仅在业已正常建立的连接出现异常时会发生。特殊寄存器的部根据链接No来确定。链路No1234567802468ACE911820191817161正常36353433320无分配或525150494868676665648483828180
表示电源接入时LAN电缆未连接时的发端侧目标侧各自的连接异常区域相关位数的ONOFF状态。而且在本例中将2台TOYOPUCNano中的左边1台称为A右边1台称为B并将A作为发端侧将B作为目标侧使用。另外假设双方都使用了连接编号0。根据连接编号表示连接异常区域相关连接的特殊寄存器的位数位置以下用S380表示将会发生变化。构成例ATOYOPUCNanoIP地址19216811发端A的发端连接的连接异常区域的状态因配线未连接等而没有连接对象连接未连接约40秒S380ONOFF电源ONB的目标连接的连接异常区域的状态交换式集线器B配线未连接TOYOPUCNanoIP地址19216812目标连接因配线未连接等而没有连接对象连接未连接S380ONOFF电源ON连接9119
91052特殊继电器表示通信状态的特殊继电器有以下几种。地址内容VA0VA4VA8VACVB0VB4VB8VBC链接No1链接No2链接No3链接No4链接No5链接No6链接No7链接No8OFF一个连接也没有建立时。ON所设定的连接中已建立一个以上的连接时。VA1VA5VA9VADVB1VB5VB9VBD链接No1链接No2链接No3链接No4链接No5链接No6链接No7链接No8链接参数异常OFF链接参数异常未发生时。ON链接参数异常正在发生时。VA2VA6VAAVAEVB2VB6VBAVBE链接No1链接No2链接No3链接No4链接No5链接No6链接No7链接No8通信异常OFF连接异常未发生时。在选项设定中当NotificationoffaulttoCPUDonot异常时的CPU通告不进行时始终为OFFON在选项设定中设定在NotificationoffaulttoCPUDo异常时的CPU通告进行上的情况下有一个以上的连接异常发生时VC4特殊模块异常通信模块故障VF2特殊模块的分配异常链接参数的机架No插槽No链接模块名称与安装状态不同。9120
9106通信重置EtherNetIP中的通信重置为通信异常履历的重置。通过进行通信重置特殊寄存器S38S3F的信息将被清除。符号将根据链接No而变化。详细内容请参照91551链接用特殊寄存器。可通过使通信重置用特殊继电器由OFFON的方法对通信进行重置。各链接No的通信重置用特殊继电器的IO地址如下表所示。链路NoIO地址1V802V813V824V835V846V857V868V87注意1通信复位功能仅在特殊继电器启动时有效。注意2Errorcode0051DuplicateIPaddress错误代码0051IP地址重复异常Errorcode0052Limitofprocessingperformance错误代码0052处理能力限度异常Errorcode0053Receptionofframefromownnode错误代码0053自身节点帧接收异常的状态下的通信重置将无效。注意3TOYOPUCNano为发端的设定时在没有连接对象的状态下进行通信重置后通信重置后约40秒钟不会向连接异常区域通告异常。因配线未连接等而没有连接对象V8ONOFF约40秒S380ONOFF电源ON连接连接未连接约40秒9121
注意4目标侧仅在正常状态的连接出现异常时连接异常区域的位数将会为ON。因此如下所示目标侧的连接从正常状态因断线等变为异常并在其状态下进行通信重置时连接异常区域的位数将保持OFF不变。发生断线等特殊寄存器的部根据链接No来确定。因断线等持续保持未连接状态连接未连接V8ONOFFS380ONOFF电源ON特殊继电器的部根据链接No来确定。连接从正常变成了异常所以为ON通信重置后连接由正常变为异常为止为OFF。链路No1234567801234567链路No1234567802468ACE9122
9107脱离功能某个发端或目标从通信网络上脱离时连接异常状态区域的相关连接位数将变为ON且链接参数中设定在notificationofacommunicationerror通告通信异常上时会向CPU通告通信异常。所谓脱离功能是指确认指定脱离的连接出现通信异常的状况并对其他正常的连接继续进行通信的功能。另外链接参数中设定在notificationofacommunicationerror通告通信异常上时脱离时将向CPU通告异常。根据该功能可并未发生连接异常的情况下使特定的发端或目标从通信网络上脱离。分离状态下的通信特殊寄存器的部根据链接No来确定。脱离对象的指定仅在链接参数中设定了脱离寄存器区域地址时可在所设定的寄存器中设定各发端或目标的脱离状态。脱离IO的状态OFF保持通信正常通信异常正常状态S30S37IO数据的状态异常履历状态S38S3FIO数据的状态0OFF1通信的IO数据交换1OFF数据保持1通信的IO数据交换1异常发生前的数据1OFF1OFF数据交换0OFF数据保持1通常的IO数据交换0异常发生前的数据链路No1234567802468ACE各位数No表示连接编号。偏移MSBLSB151413121110987654321031302928272625242322212019181716474645444342414039383736353433326362616059585756555453525150494879787776757473727170696867666564959493929190898887868584838281801111101091081071061051041031021011009998979612712612512412312212112011911811711611511411311201234567各位1指定分离各位0未指定分离9123
9108异常时输入输出的设定可用链接参数来设定EtherNetIP的通信出现异常时的输入数据和RUN停止时的输出数据。输入设定是保留通信异常或脱离时输入区域中的数据还是使其为OFF。注意电源接入及CPU重置启动时模块的通信部分会被重置因此与保留OFF的设定无关输入区域将变为0。保留通信异常时将保留发生异常之前接收到的数据。对方设备输出数据1111h输入区域的数据1111h输入区域的数据2222h输入区域的数据3333h输入区域的数据3333h输出数据2222h保留数据TOYOPUCNano通信异常OFF发生通信异常时使输入区域的数据为0000h。输入区域的数据1111h输入区域的数据2222h输入区域的数据3333h输入区域的数据0000h使数据为OFFTOYOPUCNano通信异常9124输出数据3333h输出数据4444h对方设备输出数据1111h输出数据2222h输出数据3333h输出数据4444h
输出设定是保留RUN停止时输出区域中的数据还是使其为OFF。保留RUN停止时将输出区域中的数据输出。TOYOPUCNano对方设备输出区域的数据1111h输出区域的数据2222h输出区域的数据3333h发生RUN停止将输出区域中的数据输出输出区域的数据3333h输入数据1111h输入数据2222h输入数据3333h输入数据3333h对方设备输入数据1111h输入数据2222h输入数据3333h输入数据0000hOFFRUN停止时使输出数据为0000h。输出区域寄存器的值不会变化。输出区域的数据1111h输出区域的数据2222h输出区域的数据3333h发生RUN停止TOYOPUCNano输出区域的数据3333h输出数据0000h使输出数据为OFF9125
10显示器TOYOPUCNano的信息显示器中有STATUS显示器和USBOP显示器等两种。有CPU的运行状态监控错误代码监控链接通信状态监控等3种监控模式。USBOP显示器101STATUS显示器1011运行状态显示器运行状态监控画面RUN状态时左侧7SEG的8字点亮。STATUS显示器1012错误代码监控因发生错误导致停机时在7SEG上显示错误代码。有多个错误时循环显示错误代码。此外在CPU处于RUN状态时右侧的7SEG上1位1位显示错误代码。10110
1013链路通信状态监控通过按下RESETSTART开关即可轻易地进行锁定解除L1状态监控L2状态监控L3状态监控L4状态监控运行状态监控的切换。L4状态显示显示自节点号码显示打开的连接器显示主机节点号码L2的状态显示与L1的显示相同。L3的状态显示L3具有计算机链接PC链接SIOSNIFMODBUS等5种链接功能。选择CMP链路时选择PC链路时选择SIO时按下后解除锁定圆点点亮L1的显示方法与显示内容L1具有FLnet以太网FL远程以太网IP以太网Cat等5种链接功能。选择FLnet时再按一次L1点亮以太网选择以太网IP时以太网Cat选择FL远程时102CPU状态显示L1状态显示L2状态显示L3状态显示
选择SNIF时选择MODBUS时L4的状态显示L4有PC链路计算机链路SIO3种链路功能参照L3的状态显示103
11工具刀具拥有以下功能。IO操作面板IO检查输出用详细内容请参照Pcwin2的使用说明书。111IO操作面板本功能是可在未连接实际输入设备的状态下进行IO操作的调试支援功能。通过IO操作面板进行的输入可忽略顺控程序的输入强制性地对IO进行ONOFF。注意在IO操作面板的功能中不能进行针对输出的强制输出。关于与ForcedONOFFofIOIO的强制ONOFF的差异。IO的强制ONOFF虽然是对IO进行强制设定但之后将变为实际的输入状态。IO操作面板输入保持IO操作设定后仍然保持IO状态。设定种类输入保持保持来自IO操作面板的输入状态。可忽略实际的顺控程序的输入1注射进行仅限1次的强制设定。执行后实际的顺控程序的输入将变为有效。是与IOForcedONOFFIO强制ONOFF相同的功能IO按钮设定的type类型为输入保持且CPU为正常RUN状态时按下执行开始后右侧的7SEG下部将如图所示开始闪烁。闪烁1111211
112IO检查输出用本功能以设备启动时输出的配线检查为目的。通过IO检查功能进行的输出可忽略顺控程序的输出强制性地对IO进行ONOFF。请避免在正在运行的设备中使用。另外使用时请充分注意安全。注意在IO检查的功能中不能进行针对输入的强制输出。CPU为正常RUN状态时按下执行开始后右侧的7SEG上部将如图所示开始闪烁。闪烁112
12限制事项TOYOPUCNano的版本和功能的组合如下所示。模块端口功能单元对应功能详细规格对应VerTCPIP8端口对应100130130100130120120130120130计算机链路TCPIPUDP32端口对应TCPIP8端口对应Ethernet文件存储TCPIP32端口对应UDP通用命令TCPIP数据容量1024byte以下TCPIPUDP数据容量1024byte以下UDPFLnetIO通信120中继命令对应SPRSPW正在执行的中继命令中发生错误FL远程IO通信120信息功能命令通信对应特殊命令SPW对应IO通信120EtherCAT停止时处理通信异常时全局通信中的清除通信异常时RUN停止选择EthernetIPEthernetTCPIP计算机链路TCPIPUDPTCPIP文件存储TCPIPUDP8端口对应32端口对应8端口对应32端口对应数据容量1024byte以下100130100130120130通用命令TCPIPTCPIPUDP数据容量1024byte以下UDPFLnetIO通信120中继命令对应SPRSPW正在执行的中继命令中发生错误FL远程IO通信120信息功能命令通信对应特殊命令SPW对应EthernetIP内置串行端口计算机链路PC链路SNIFMODBUS100100100100计算机链路内置串行端口PC链路MODBUS100100100L1CPUL2L3L4121未对应
模块端口功能单元对应功能详细规格对应VerCPUUSB存储器读出写入IOBUS增设机架对应SL对应100BUSEXBUSEX对应基本功能1202PORTMNET对应130脉冲输出对应130DLINKMS2对应130EF10对应130内置L1L2同时使用130输出输入输出模块IO电源状态监视器功能对应130短路诊断功能对应130其他链接4个以上对应2ET最大7个100特殊模块对应100内置以外的SPRSPW对应未对应模块端口功能单元对应功能详细规格对应VerSL输出输入输出模块IO电源状态监视器功能对应110短路诊断功能对应110模块端口功能单元对应功能详细规格对应VerO28O29O12O18O19IO328IO329输出输入输出模块IO电源状态监视器功能对应140140B仅O29短路诊断功能对应140140B仅O29O29由于自Ver140B开始硬件发生了变更无法从低于Ver130的版本进行升级软件更新。122
13BUSEX功能131NanoCPUBUSEX功能可有效利用以往机型PC10系列Plus系列的各模块。可连接BUSEXPTCU6367或PlusBUSEXTCU6900。与NanoCPU连接时请使用下述以上的版本。软件注与NanoCPU的连接根据版本的不同有部分限制事项。详细内容请参照12限制事项。产品名称版本NanoCPU130BUSEXPTCU6367200PlusBUSEXTCU6900200产品名称版本PCwin212R04131
132与连接PC10P系列时的不同点连接NanoCPU和BUSEXP时与连接PC10P系列时相比有下述的不同点。1接通电源的顺序NanoCPU侧的电源和BUSEXP侧的电源接入顺序原则上为同时接通电源。2BUSEXP的机架No连接NanoCPU和BUSEXP时的BUSEXP实际机架No为机架0。PlusBUSEX为机架1。3BUSEXP机架上的IO地址NanoCPU中BUSEXP机架上的IO地址分配在GXGY000区域。XY区域分配给了Nano机架上的IO。PlusBUSEX也一样分配在GXGY000区域。4BUSEXP上的刷新数据数量NanoCPU中BUSEXP上的通信模块刷新字节数量合计中存在限制。与顺控程序的同步刷新DLNKM高速远程IO5连接PlusBUSEX时的PlusBUSEX状态通告连接PlusBUSEX时向特殊寄存器P1S026通告的状态信息在NanoCPU中变更分配到P2S026中。PC10P系列BUSEXPBUSEXP侧的电源ON最大允许延迟10秒NanoCPUBUSEXP同时电源ONPC10P系列BUSEXP机架No1机架No0用于PC10P的本体NanoCPUBUSEXP机架No0PC10P系列BUSEXPXY000NanoCPUBUSEXPGXGY000输入字节数量限制全部输入刷新合计64kbyte以下输出字节数量限制全部输出刷新合计64kbyte以下输入字节数量限制同步型全部输入刷新合计4kbyte32768点以下输出字节数量限制同步型全部输出刷新合计4kbyte32768点以下132
133BUSEX功能规格No项目规格1通信规格USB200480Mbps2Nano侧连接器USB类型miniB连接器3设置配置在同一盘内推荐电缆USB电缆形状生产厂家型号长度ELECOM株U2CM05BK05mA公miniB公型符合RoHS标准的产品U2CM10BK10mU2CM15BK15mU2CM20BK20mU2CM30BK30mU2CM50BK50m133
1341341与PlusBUSEX的连接使用PlusBUSEX时的IO模块分配列表使用PlusBUSEX时的IO模块分配如下表所示。请结合PlusBUSEX安装状态用PCwin2进行设定。支架号插槽No模块名称10PlusBUSEX1PlusDLNKMPlusCLNKM2PlusEFRPlusEFR2PlusEXPlusEX2PlusCLNKS3PlusEFRPlusEFR2PlusEXPlusEX2PlusCLNKS4PlusIO2416P5PlusIO2416P6PlusIO2416P7PlusIO2416P20PlusMCML12330PlusMCML123没有机架No0的设定。机架插槽的位置无设定机架1插槽2机架1插槽3机架1插槽1134
使用PlusIO2416P时的注意事项将PlusIO2416P安装在PlusBUSEX上使用时PlusIO2416P的开关设定和PCwin中的IO模块的设定如下表所示。与在PlusCPU上安装PlusIO2416P使用时有所不同请多加注意。PlusIO2416P开关的位置插槽No的设定安装后即无法变更因此请务必在安装前设定增设IOPlusIO2416P的插槽No。SW1时隙号43214OFFOFFOFFOFF5OFFOFFOFFON6OFFOFFONOFF7OFFOFFONOFF固定1ON1SW1的34为OFF固定。为ON时有时会无法正常动作。注意插槽No在设定时要避免重复。135出厂设定
1342链接参数设定列表链接参数的设定模块名称链路号码支架号时隙号周边装置上的链接参数设定PlusBUSEX任意10FLnet以太网FL远程M任意14PC链路计算机链路SIOMODBUS未设定未设定未设定SNIF扩展板PlusDLNKM任意11DLNKM2PlusCLNKM任意11CLNKM第1段PlusEX以太网端口任意12FLnet以太网FL远程M内置串行任意15PC链路计算机链路SIOMODBUSPlusEX2以太网端口任意12FLnet以太网FL远程MEtherNetIP内置串行任意15PC链路计算机链路SIOMODBUSPlusEFR任意12FLnet以太网FL远程MPlusEFR2任意12FLnet以太网FL远程MEtherNetIPPlusCLNKS任意12CLNKS136
模块名称链路号码支架号时隙号周边装置上的链接参数设定扩展板第2段PlusEX以太网端口任意13FLnet以太网FL远程M内置串行任意15PC链路计算机链路SIOMODBUSPlusEX2以太网端口任意13FLnet以太网FL远程MEtherNetIP内置串行任意15PC链路计算机链路SIOMODBUSPlusEFR任意13FLnet以太网FL远程MPlusEFR2任意13FLnet以太网FL远程MPlusCLNKS任意13CLNKS增设板PlusMCML任意20PlusMCML任意30PlusMCML137
135与BUSEXP的连接系统构成例CPU基板机架0IO电缆机架1增设基板机架2机架3安装BUSEXP的机架为机架0。最大可连接8个机架。IO模块分配在GXGY000区域。IO模块通信模块特殊模块或为空BUSEXPCPU基板8插槽选择器基板6插槽选择器基板4插槽选择器基板138CPUPOWER模块POWER模块POWER模块POWER模块
136PCwin2中的设定方法1361IO模块的设定方法在PCwin2中进行IO模块的设定。1双击PCwin2的Project项目Parameter参数IOModuleIO模块时显示IO模块设定画面。2结合所使用的增设总线在BUSEXPlusBUSEX的其中之一上加入勾选。3进行各个机架的各插槽中使用的模块的设定。安装BUSEXP的机架为机架0。另外最大可连接8个机架。使用PlusBUSEX时请参照1341使用PlusBUSEX时的IO模块分配列表。4所使用的所有模块的设定结束后按下OK退出设定。注NanoCPU中BUSEX上的IO地址分配在GXGY000区域。139
1362链接参数的设定在PCwin2中设定链接参数。1链路模块名的设定双击PCwin2中的Project项目Parameter参数LinkParameter链接参数打开链接参数的设定画面。接着点击Linksetup链接设定打开链接的设定画面。在BUSEX上加入勾选并结合所使用的链接设定机架No插槽No链接模块名称。链接模块名称的设定方法请参照下述使用说明书中各链接的章节。BUSEXPPC10系列使用说明书t335n中各链接的章节链接模块名称的设定PlusBUSEXPlus系列使用说明书t380n中各链接的章节链接模块名称的设定2链接参数详细设定链接参数的详细设定请参照下述使用说明书中各链接的章节。BUSEXPPC10系列使用说明书t335n中各链接的章节链接参数详细设定PlusBUSEXPlus系列使用说明书t380n中各链接的章节链接参数详细设定3所使用的所有链接参数的设定结束后按下OK退出设定。1310
137PlusBUSEX状态通告连接NanoCPU与PlusBUSEX时向特殊寄存器P2S026通告状态信息。1通信模块LED信息机架0信息向特殊寄存器通告各通信的LED状态。P2S026P2S027P2S028P2S029P2S02AP2S02BP2S02CP2S02DP2S02EP2S02F7段信息内置选配LED信息插槽0预备插槽0预备DeviceNet7段信息插槽1预备7段信息插槽2预备7段信息插槽3预备REDGR内置输入滤波器时间15ms1输入滤波器值PWRON时5msbitFbitEbitDbitCbitBbitAbit9bit8bit7bit6bit5bit4bit3bit2bit1bit0用途主机000NSGNSRMSGMSRDeviceNetLED信息内置标准LED信息插槽0模块代码插槽1模块代码插槽2模块代码插槽3模块代码REDGR2REDGR31内置以太网FLnetFL远程LED信息2机架0插槽2以太网FLnetFL远程EtherNetIPLED信息3机架0插槽3以太网FLnetFL远程EtherNetIPLED信息P2S029从P2S026通告PlusCPU内置功能的信息。1内置以太网FLnetFL远程LED信息P2S026bit0bit1表示以太网FLnetFL远程的通信状态。bit0GR绿色bit1RED红色这些bit表示通信状态。亮灯1灭灯0。使用以太网FLnetP2S026P2S027P2S028P2S0297段信息内置选配LED信息插槽0预备插槽0预备REDGR内置输入滤波器时间15ms1输入滤波器值PWRON时5msbitFbitEbitDbitCbitBbitAbit9bit8bit7bit6bit5bit4bit3bit2bit1bit0用途内置标准LED信息插槽0模块代码bit0GRbit1RED通信状态亮绿灯10正在确立100Mbps通信闪绿灯100正在进行100Mbps通信红绿同时亮灯11正在确立10Mbps通信红绿同时闪灯101101正在进行10Mbps通信亮红灯01链接参数异常红色闪烁010连接异常链路通信异常熄灯00未连接电缆注10为1和0交替显示。1闪橙灯为bit0GR与bit1RED在同一时间点上1和0交替显示。1311
FL远程时bit0GRbit1RED通信状态亮绿灯10远程操作中闪绿灯100FL参加中亮红灯01链接参数异常红色闪烁010通信异常闪红绿灯101011设定异常熄灯00未连接电缆注10为1和0交替显示。1闪红绿灯为bit01和bit10的组合与bit00和bit11的组合交替显示。P2S026bit8bitF保存着以往向7段显示器通告的信息。详细内容请参照12特殊寄存器中的7段信息的通告。P2S027bit0bit7P2S027bit8bitF通告下表所示模块的信息。信息通告寄存器种类链接No支架号插槽No模块名称基本模块P2S027bit0bit7CPU任意内置标准PC链路计算机链路SIOMODBUS扩展板P2S027bit8bitFEXorEX2内置串行任意内置可选PC链路计算机链路SIOMODBUS未设定未设定未设定SNIF各模块的信息内容如下所示。模块名称bit7bit6bit5bit4bit3bit2bit1bit0备注PCLINK000000010bit0通信中闪烁SIO0000001010bit01有接收数据bit11发送中SNIF000000010bit0通信中闪烁CMPLINK命令接收数量计数MODBUS00000000注闪烁或10的表记表示1和0交替显示。P2S028是内置数字输入滤波器的时间设定寄存器。详细内容请参照Plus系列使用说明书t380n10数字输入滤波器。1312
P2S02AP2S02B将通告设备网的信息。bitFbitEbitDbitCbitBbitAbit9bit8bit7bit6bit5bit4bit3bit2bit1bit0用途P2S02ADeviceNet7段信息主机000NSGNSRMSGMSRDeviceNetLED信息P2S02B插槽1预备插槽1模块代码P2S02Abit0bit3将显示以下的状态。指示灯名称颜色bit的状态状态定义内容MSG1正常状态模块正常状态10未设定状态开关设定读入中R1致命故障硬件异常10轻微故障开关设定错误等GR0没有供给电源未向DLNKM2供电正在复位初期处理开始等待NSG1正常状态网络正常状态10未连接状态网络正常但未确立通信状态R1致命的通信异常检测出无法在网络上进型通信的异常节点地址重复Busoff检测10通信异常部的子局通信异常GR0网络电源异常通信用电源未供电注10的表记表示1和0交替显示。P2S02Abit7主机在DeviceNet作为主局时为1作为子局时为0。P2S02Abit8bitF通告DeviceNet的7段信息。详细内容请参照12特殊寄存器中的7段信息的通告。1313
向P2S02CP1S02D通告分配到插槽2中的模块信息。向P2S02EP1S02F通告分配到插槽3中的模块信息。1机架0插槽2以太网FLnetFL远程EtherNetIPLED信息2机架0插槽3以太网FLnetFL远程EtherNetIPLED信息P2S02C和P2S02E的bit0bit1表示以太网FLnetFL远程EtherNetIP的通信状态。bit0GR绿色bit1RED红色这些bit表示通信状态。亮灯1灭灯0。使用以太网FLnetP2S02CP2S02DP2S02EP2S02F7段信息插槽2预备7段信息插槽3预备插槽2模块代码插槽3模块代码REDGRREDGR12bitFbitEbitDbitCbitBbitAbit9bit8bit7bit6bit5bit4bit3bit2bit1bit0用途bit0GRbit1RED通信状态亮绿灯10正在确立100Mbps通信闪绿灯100正在进行100Mbps通信红绿同时亮灯11正在确立10Mbps通信红绿同时闪灯101101正在进行10Mbps通信亮红灯01链接参数异常红色闪烁010连接异常链路通信异常熄灯00未连接电缆注10为1和0交替显示。1闪橙灯为bit0GR与bit1RED在同一时间点上1和0交替显示。FL远程时注10为1和0交替显示。1闪红绿灯为bit01和bit10的组合与bit00和bit11的组合交替显示。bit0GRbit1RED通信状态亮绿灯10远程操作中闪绿灯100FL参加中亮红灯01链接参数异常红色闪烁010通信异常闪红绿灯101011设定异常熄灯00未连接电缆1314
EtherNetIP时bit0GRbit1RED通信状态亮绿灯10确立最低1个以上的连接闪绿灯100IP地址已设定连接未确立亮红灯01IP地址重复红色闪烁010目标连接超时闪红绿灯101011电源接入时的测试熄灯00IP地址未设定注10为1和0交替显示。1闪红绿灯为bit01和bit10的组合与bit00和bit11的组合交替显示。P2S02C和P2S02E的bit8bitF分别表示7段的信息。详细内容请参照12特殊寄存器中的7段信息的通告。2向特殊寄存器通告7段信息PlusCPU将以往向信息显示器通告的信息作为7段信息通告给特殊寄存器。关于保存目的地的特殊寄存器请参照1通信模块LED信息机架0信息。正常通信时通告链接通信状态发生异常时通告错误代码。通告的内容根据所使用的功能如下表所示。正常通信时发生异常时FLnet用2位的16进制来显示节点编号局号。显示错误代码。另外FLnet网络中只有自局未进行通信时显示00。以太网显示正在开放的连接。参照下图1显示错误代码。FL远程用2位的16进制来显示主机的节点编号。显示错误代码。EtherNetIP00000000DeviceNet用10进制0063来显示主机模块的节点地址。通常显示00。交替显示错误代码16进制和发送异常节点地址10进制。发生多个异常时如下图2所示依次进行显示。注关于错误代码的内容请参照各功能的5异常通告相关章节。1以太网正常时的连接显示模块名称bitFbitEbitDbitCbitBbitAbit9bit8备注连接No87654321开放时各位数中输入12DeviceNet的错误代码显示顺序灭灯301秒1个异常灭灯303秒灭灯301秒1个异常错码1秒发生异常节点地址3灭灯00。1315错码1秒发生异常节点地址
3增设IO端口状态机架1信息bitFbitEbitDbitCbitBbitAbit9bit8bit7bit6bit5bit4bit3bit2bit1bit0P2S030P2S031P2S032rgenP2S033rgenP2S034P2S035P2S036P2S037P2S038P2S039P2S03AP2S03BP2S03CP2S03DP2S03EP2S03Ferrerriniokiniok插槽3插槽2插槽1插槽0未连接设定标志插槽3插槽2插槽1插槽0设定局无连接标志插槽1状态插槽3状态rgenrgen插槽3插槽2插槽1插槽0通信请求标志插槽3插槽2插槽1插槽0通信中标志erriniok插槽0状态erriniok插槽2状态增设IO设定信息机架息增设IO通信状态增设IO的状态异常信息增设IO当前值插槽1异常检出次数插槽3异常检出次数成帧异常检出次数断裂异常检出次数插槽0输入字节数插槽1输入字节数插槽2输入字节数插槽3输入字节数插槽0异常检出次数插槽2异常检出次数奇偶异常检出次数通信1扫描时间01ms单位插槽0安装模块代码插槽0输出字节数插槽1安装模块代码插槽1输出字节数插槽2安装模块代码插槽2输出字节数插槽3安装模块代码插槽3输出字节数通信请求标志未连接设定标志通信中标志设定局无连接iniokerrrgen插槽异常检出次数奇偶异常检出次数成帧异常检出次数通信1扫描时间01ms单位断裂异常检出次数初始化时所有插槽以ON开始。关闭参数设定中设定为未安装实际上没有应答的插槽。打开参数设定中设定为未安装的插槽。打开通信中的插槽。但是初始化时没有应答设定局无连接的标志为ON的插槽即使之后通信开始时在CPU复位之前也不会为ON。有参数的设定初始化时没有应答时为ON。初始化时有应答时输入1。没有应答时为0。用IO检测硬件异常时输入1。解除异常后为0。可访问数字滤波器时输入1。不可访问时为0。是检出插槽和CPU通信异常的次数。为03。用复位启动来进行复位。有IO参数的设定有安装时对通信异常的检出次数进行计数。没有IO参数的设定没有安装时为1。有IO参数的设定没有安装时通信异常的检出次数将继续增加。没有IO参数的设定有安装时对通信异常的检出次数进行计数。是在所有与IO的通信中检出的奇偶校验异常的总数。是在所有与IO的通信中检出的成帧异常的总数。输入所有与IO的通信全部进行一遍所需的时间。是在所有与IO的通信中检出的断裂异常的总数。1316
P2S040P2S041P2S042P2S043P2S044P2S045P2S046P2S047P2S048P2S049P2S04AP2S04BP2S04CP2S04DP2S04EP2S04F增设IO设定用增设IO板寄存器控制可设定确认增设IO板的输入滤波器时间。使用方法的详细内容请参照Plus系列使用说明书t380n101数字输入功能。插槽0设定寄存器1插槽0设定寄存器0WR插槽0设定寄存器2插槽1设定寄存器1插槽1设定寄存器0WR插槽1设定寄存器2插槽2设定寄存器1插槽2设定寄存器0WR插槽2设定寄存器2插槽3设定寄存器1插槽3设定寄存器0WR插槽3设定寄存器2插槽0设定寄存器1插槽0设定寄存器0RD软件版本1插槽0设定寄存器2插槽1设定寄存器1插槽1设定寄存器0RD软件版本1插槽1设定寄存器2插槽2设定寄存器1插槽2设定寄存器0RD软件版本1插槽2设定寄存器2插槽3设定寄存器1插槽3设定寄存器0RD软件版本1插槽3设定寄存器2增设IO模块寄存器0X000X007的滤波器时间寄存器1X008X00F的滤波器时间寄存器2X010X017的滤波器时间WR写入请求标志RD确认请求标志15ms电源接入时5ms15ms电源接入时5ms15ms电源接入时5ms1软件版本的读出对应PlusIO2416PVer110。PlusIO2416PVer110以下时在软件版本处输入0。PlusIO2416P的软件版本读出对应PlusCPUVer200。1317增设IO确认用
資料1外形尺寸图資料11CPU模块110資料12TOYOPUCNanoAAA1075110突起部100855TOYOPUCNano资11121突起部153mm121USBOPTUC6941USBOPPUSHMSL1NSMSL2NSIOBUSSTATUSBATTERYSTARTPUSHRESETPCwinBUSEXL3LLSGFGLLSGFGL455RUNEAWBUSEXmm
資料13电源模块输入输出模块特殊模块通信模块1个插槽尺寸的模块全部为共通尺寸仅端子台等的突起部有所不同。1PW2110110突起部1001227PW2PWRSTATUSTUV6942RUN1RUN224V0VNA2I22I12O29O28O19O18O12ADDACT2ML共通端子台的磁极数量虽然各模块会有所不同但外形尺寸为共通。100突起部812127资12121mmmm
32ETSWIO329IO328SL共通连接器开关类的布局虽然各模块会有所不同但外形尺寸为共通。10027110121mm4DL突起部100427121110mm资13
資料14主板14BS6BS8BS外形尺寸安装尺寸A安装间距mmB侧面宽度mm8BS8插槽基板293531156BS6插槽基板237525554BS4插槽基板1815199585861109517释放时mm28BS外观127838736567354R536BS外观127893873656735B侧面宽度3115A安装间距2935B侧面宽度2555A安装间距2375985861109517释放时mm94R54R34R3资149
1278387365673594R598544BS外观B侧面宽度1995A安装间距18155将模块组装到基板上时的纵深不含DIN轨道的高度TOYOPUCNanoAAA以外时112不含端子台突起部121TOYOPUCNanoAAA时4R3861109517释放时mmmmmm资15
本书的内容可能会由于产品改良而进行更改恕不另行通知。本书内容方面我们一直希望能做到万无一失但是万一您发现有可疑之处错误之处以及遗漏之处请与我们联系。本书的内容之一部分或全部不得转载。初版2015年9月8版2017年3月
我们可以随时满足您的维护请求。请联系刈谷工厂呼叫中心TEL8156621862181566258291FAX81566255469设备工具和机电一体化部门刈谷工厂4488652爱知县刈谷市朝日町11株式会社太格特2捷格对可0152017使用说明书编号T10008Ch产品规外汇及出口许可能会由外贸易管。于改良而进行更改恕不另行通知。理法规定相当于战略物资等或作用的产品出口至日本之外时需要日本政府的
