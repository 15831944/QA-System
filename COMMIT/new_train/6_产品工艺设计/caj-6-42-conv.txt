中图分类号
TP391
论文编号
102870516S120
学科分类号
080202
硕士学位论文
基于
MBD
的三维工艺设计技术研究
研究生姓名崔祥友
学科专业机械电子工程
研究方向计算机集成制造
指导教师唐敦兵教授
朱海华讲师
南京航空航天大学
研究生院机电学院
二

一五年十二月NanjingUniversityofAeronauticsandAstronautics
TheGraduateSchool
CollegeofMechanicalandElectricalEngineering
ResearchonMBDBased3DProcessPlanning
Technology
AThesisin
MechanicalandElectricalEngineering
by
CuiXiangyou
Advisedby
ProfTangDunbing
LecturerZhuHaihua
SubmittedinPartialFulfillment
oftheRequirements
fortheDegreeof
MasterofEngineering
December2015承诺书
本人声
明

所结交的硕

上
学化论文

是本人化导师指导下

巧立进
行研
工作所取得
的成果
。
尽巧所知

除文
中己经注
明
引
用的
内
容外

本学位论
文的研巧成
巧不包含任
何他人享
巧若作权的
内
容
。
对木论
文所
涉及
的研
究工

作做
出
巧献
的共他个
人巧巧体

均
己
巧文
中明确方式标
明

本人巧权巧京化帘化天大学可扣权保
巧送交论
文的避印件

允许
论文巧
赛的和借
阅

可

将学位论文的
余部或部分

内
容巧入有关巧巧库
进行检索

可采
用影
印

缩印或其他
巧剌手段保存论文
。

保密
的学位论文化解密
巧适
用木承巧书

作者签
名

祕
挺
日
期


南京航空航天大学硕士学位论文
I
摘要
基于模型的定义
ModelBasedDefinitionMBD
技术是将各种定义信息集成在三维实体模
型中来完整表达产品信息的一种数字化技术该技术为数字化无纸化制造提供了可能。本文将
MBD
技术与三维工艺设计结合对基于
MBD
的三维工艺设计技术展开研究。主要研究内容如
下
首先提出了三维工艺信息分类方法和显示结构对工艺信息进行了整合提出了工艺
MBD
信息管理体系并以此为依据提出了基于
MBD
的三维工艺设计总体方案及其设计流程。
其次研究了基于
MBD
的加工特征信息管理技术。对常见加工特征进行了分类并研究
了基于属性邻接图的特征识别技术运用
CATIA
二次开发技术对属性邻接图法进行了拓展总
结了提取加工特征信息的
MBD
规范并采用
XML
文件对工艺
MBD
模型的基本信息进行了有
效管理。
再次在研究工艺信息管理技术的基础上对工艺知识表示与语义推理方法进行了研究。
引入了本体的概念建立基于本体的工艺知识库结合
SWRL
语言对工艺规则库进行了构建
结合
Jess
推理引擎和包含工艺
MBD
模型基本信息的
XML
文件进行了工艺知识推理得到了
与加工特征对应的基本工艺信息。
然后对推理得到的工艺信息做出调整和修改后研究了基于
MBD
的三维工艺信息表达
技术。介绍了
CATIA
环境内工艺
MBD
信息编辑界面及其功能提出了以几何图形集表达工艺
信息的方法介绍了轻量化模型以及工序模型的概念和创建方法在非
CATIA
环境下即加工
制造现场提出了一套基于
MBD
的三维工艺制造现场查询及显示系统介绍了系统界面功
能并研究了以树结构的形式显示工艺
MBD
信息以轻量化模型表达工序模型的方法。
最后在上述原理和流程的基础上结合一套实际产品零件对本文提出的基于
MBD
的
三维工艺设计整体流程和方法进行说明验证了该流程和方法的有效性和可行性。
关键词基于模型的定义三维工艺信息管理工艺推理工艺信息表达基于
MBD
的三维工艺设计技术研究
II
Abstract
MBDModelbaseddefinitionisakindofdigitizationtechnologywhichintegratesalotof
definitioninformationintothe3Dmodelstoexpresstheproductsdatamakingthepaperless
manufacturingpossibleInthispaperTheMBDbased3Dprocessdesignisstudiedthroughthe
combinationofMBDtechnologyandthe3DprocessplanThestructureofthispaperisasfollows
Firstlytheclassificationmethodandstructureof3Dprocessinformationarepresentedbasedon
theprocessMBDinformationmanagementsystemtointegratetheprocessinformationTheoverall
planandtheprocedureofthe3DprocessdesignbasedonMBDisproposed
SecondlytheprocessingfeatureinformationmanagementtechnologybasedonMBDis
researchedonthebasisoftheoverallplanThecommonprocessingfeaturesareclassifiedandthe
AAGAttributeAdjacencyGraphmethodisstudiedThetraditionalAAGmethodisexpandedusing
thetechnologyofCATIAssecondarydevelopmentTheMBDspecificationforextractingthe
processingfeatureinformationissummarizedTheXMLfilesareusedtomanagethebasic
informationoftheprocessMBDmodel
Thirdlythemethodofprocessknowledgeandthesemanticinferencearestudiedbasedonthe
processinformationmanagementTheprocessknowledgebaseisestablishedbasedonontologyThe
processrulebaseisestablishedbasedontheSWRLlanguageTheprocessknowledgeinferenceis
donewiththehelpofJessinferenceenginetoobtainthepreliminaryprocessinformationrelatedwith
processfeatures
Thenafteradjustingandmodifyingtheinferentialpreliminaryprocessplaninformationthe
displaytechniqueofthe3DprocessplaninformationbasedonMBDisstudiedIntheCATIA
environmenttheinterfaceanditsfunctionsofeditingtheprocessMBDinformationisintroduced
Theconceptsandtheestablishingmethodsofestablishinglightweightmodelandoperationmodelare
introducedInthenonCATIAenvironmentasystemwhichcanacquireanddisplaythe3Dprocess
informationandoperationmodelsareproposedTheformoflightweightmodeltodisplaythe
operationmodelsandtheformofstructuretreetodisplayMBDprocessinformationarepresented
Finallybasedontheaboveprinciplesandprocessesaconcreteproductpartisusedtoelaborate
theoverallplanvalidatingitseffectivenessandfeasibility
KeywordsModelBasedDefinition3Dprocessplaninformationmanagementprocessplan
inferenceexpressionof3Dprocessplaninformation南京航空航天大学硕士学位论文
III
目录
第一章绪论
1
11
课题研究背景
1
12
国内外研究现状
2
121MBD
技术研究现状
2
122
国内外工艺辅助系统研究现状
3
123
工艺知识管理技术研究现状
5
124
基于
MBD
技术的工艺设计研究现状
6
13
研究目的和意义
7
14
课题研究内容
7
141
研究内容
7
142
论文结构
8
15
本章小结
9
第二章基于
MBD
的三维工艺设计总体方案
10
21
机械加工工艺规程设计概述
10
211
机械加工工艺规程的定义
10
212
机械加工工艺规程的作用
10
213
机械加工工艺规程的格式
10
214
机械加工工艺规程的步骤和内容
11
22MBD
技术概述
11
23
基于
MBD
的三维工艺设计总体方案
12
231
工艺信息分类方案
12
232
基于
MBD
的工艺信息表达方式
13
233
基于
MBD
的三维工艺信息管理体系
15
234
基于
MBD
的三维工艺设计总体方案
16
24
本章小结
18
第三章基于
MBD
的加工特征信息管理技术研究
19
31
加工特征及其分类
19
32
加工特征提取方法概述
19
33
基于属性邻接图的特征识别方法
21基于
MBD
的三维工艺设计技术研究
IV
34
拓展属性邻接图特征识别方法
23
341CATIA
二次开发技术
23
342
基于
MBD
定义的拓展属性邻接图特征识别规则
25
35
型面粗糙度的提取规则
28
36
基于
MBD
定义的特征尺寸提取规则
32
37
基于
MBD
的热处理信息定义规则
33
38
基于
MBD
的加工特征信息管理技术
35
381
基于
MBD
的加工特征信息表达形式
35
382
基于
MBD
的加工特征信息传递方法
36
39
本章小结
37
第四章工艺知识表示与语义推理技术研究
38
41
基于本体的工艺知识库构建
38
411
工艺本体构建流程
38
412
构建工艺本体知识库
40
413
工艺本体知识库详细描述
42
42
基于
SWRL
的工艺规则库构建
45
421SWRL
规则简介
45
422SWRL
规则详细建立过程
46
43
基于本体与
SWRL
工艺规则的推理实现
47
44
本章小结
49
第五章基于
MBD
的三维工艺信息表达技术研究
50
51
基于
MBD
的三维工艺信息表达流程
50
52CATIA
环境下基于
MBD
的三维工艺信息表达技术
51
521
排布工序
52
522
信息的修改与添加
53
523
基于
MBD
的工艺信息显示
55
524
轻量化工序模型生成
56
525
工艺信息导出至加工现场
61
53
制造现场的工艺信息表达技术
61
531
登录界面
61
532
历史加工信息
61
533
三维工艺信息显示
62南京航空航天大学硕士学位论文
V
54
本章小结
63
第六章基于
MBD
的三维工艺设计技术实现
65
61
技术方案运行环境和开发环境
65
62
主要流程及功能介绍
66
621
加工特征识别与特征信息提取
67
622
定义毛坯尺寸
68
623
特征信息显示与导出
68
624
工艺推理
70
625CATIA
内导入推理所得工艺信息
71
626
排布工序
73
627
工步信息调整
73
628CATIA
内工艺信息表达
74
629
生成中间工序模型
76
6210
非
CATIA
环境下工艺信息表达
76
63
本章小结
78
第七章总结与展望
79
71
全文总结
79
72
展望
79
参考文献
81
致谢
85
在学期间的研究成果
86基于
MBD
的三维工艺设计技术研究
VI
图清单
图
11
论文结构及各章关系
9
图
21MBD
数据集
12
图
22
基于
MBD
的三维工艺信息分类方案
13
图
23
基于
MBD
的工艺信息表达结构
14
图
24
基于
MBD
的三维工艺信息管理体系
16
图
25
基于
MBD
的三维工艺设计总体方案
17
图
31
凸关系与凹关系
21
图
32
凸台特征及其凸点
22
图
33
几种加工特征的属性邻接图
22
图
34CAA
开发平台
24
图
35CAA
组织框架及帮助文档
24
图
36
属性邻接图与拓展属性邻接矩阵
25
图
37CATIA
二次开发环境下凹凸关系的定义
26
图
38
圆弧边的凹凸性判断
27
图
39
柱面的内外表面及其凹凸关系
28
图
310
代码接口转换流程及代码接口与
CATIA
三维模型的对应关系
31
图
311
加工特征粗糙度提取
32
图
312
特征尺寸分类
32
图
313
特征信息识别与特征尺寸提取
33
图
314
基于
XML
文件的热处理信息管理操作流程
34
图
315
热处理信息的
XML
表达规范
34
图
316
热处理信息管理操作效果图
35
图
317
基于
MBD
的加工特征信息几何图形集表达形式
35
图
318
加工特征信息的
XML
存储形式
36
图
41
本体构建流程
39
图
42
知识术语关系图
42
图
43
类的层级关系
43
图
44
实例的构建
44
图
45
类与实例的包含关系
44南京航空航天大学硕士学位论文
VII
图
46
工艺本体构建部分示例
45
图
47SWRL
格式的规则
347
图
48
基于本体的工艺信息推理流程
48
图
49
工艺规则推理结果
49
图
51
基于
MBD
的三维工艺信息表达流程
50
图
52CATIA
中所开发的工艺
MBD
信息编辑界面
51
图
53
排布工序的另外两种原则
53
图
54
信息修改过程
54
图
55
计算基本加工时间举例
55
图
56CATIA
环境下基于
MBD
的工艺信息
56
图
57
零件成品模型到毛坯件的中间工序模型演变关系
57
图
58
拉伸操作补形的几种加工特征类型
58
图
59
逆向生成工序模型流程
59
图
510
系统登录界面
61
图
511
历史加工信息及当前加工信息显示
62
图
512
三维工艺信息显示
63
图
61
基于
MBD
的三维工艺设计技术具体实现流程
66
图
62
型号为
SPMJ1501
的模具零件
67
图
63
加工特征识别与特征信息提取
67
图
64
定义毛坯尺寸
68
图
65
特征信息显示与导出
69
图
66
工艺本体知识库
70
图
67
工艺本体类结构及类中所含实例
70
图
68
运用
SWRL
语言构建的工艺规则库
71
图
69
运用
Jess
引擎进行工艺推理
71
图
610
推理工艺文件导入
72
图
611
排布工序
73
图
612
工步信息的添加与删除
74
图
613CATIA
内工艺信息表达
75
图
614
轻量化中间工序模型与工艺信息对应关系
76
图
615
非
CATIA
环境下电子工艺卡片
77
图
616
非
CATIA
环境下三维工艺信息表达
78基于
MBD
的三维工艺设计技术研究
VIII
表清单
表
31
几种常见的加工特征
20
表
61
运行环境
65
表
62
开发环境
65南京航空航天大学硕士学位论文
IX
注释表
MBDModelBasedDefinition
基于模型的定义
CAPPComputerAidedProcessPlanning
计算机辅助工艺规划
CADComputerAidedDesign
计算机辅助设计
ASMEAmericanSocietyofMechanicalEngineers
美国机械工程师协会
DELMIADigitalEnterpriseLeanManufacturingInteractive
Application
数字企业精益制造交互系统
PDMProductDataManagement
产品数据管理
SOAServiceOrientedArchitecture
面向服务的体系结构
SWRLSemanticWebRuleLanguage
语义网规则语言
JESSJavaExpertSystemShellJava
平台规则引擎
AAGAttributeAdjacentGraph
属性邻接图
XMLExtensibleMarkupLanguage
可扩展标记语言
CAAComponentApplicationArchitecture
组件应用架构
RADERapidApplicationDevelopmentEnvironment
快速应用开发环境
COMComponentObjectModel
组件对象模型
APIApplicationProgrammingInterface
应用程序接口
RDFResourceDescriptionFramework
资源描述框架
OWLWebOntologyLanguage
网络本体语言
VRMLVirtualRealityModelingLanguage
虚拟现实建模语言
IGESInitialGraphicsExchangeSpecification
初始化图形交换规范南京航空航天大学硕士学位论文
1
第一章绪论
11
课题研究背景
制造业是一个国家的兴国之器立国之本。自新中国成立以来我国制造业持续不断地快
速发展建成了独立完整门类齐全的产业体系。然而与世界先进制造水平相比我国制造
业依旧大而不强并且产业结构水平不合理资源利用效率低信息化程度整体落后
1
。当前
新一轮的科技革命携卷着互联网和信息化的浪潮与我国的产业变革形成了历史性的交汇。作为
国家和民族强盛的风向标制造业必须要抓住这一重大的历史机遇实现信息化和现代化的全
面转型升级。
2015
年
5
月
8
日国务院公布了中国制造
2025
战略规划其中提出了中国制
造三个十年的三步走战略
2
。信息化制造必将成为我国制造业发展的主要方向。
在信息化制造技术不断发展的今天数字化技术已经成为当前现代化设计制造技术的基础。
基于模型的定义
ModelBasedDefinitionMBD
是将各种定义信息集成在三维实体模型中来完
整表达产品的一种数字化技术它不仅规定了三维实体模型中的产品尺寸以及公差标注等信息
的表达方法还包含了工艺信息的表达方式
3
。基于
MBD
的零件模型以及以该三维实体模型为
辅的设计制造方法可以降低生产成本缩短产品的全生命周期。同时作为生产制造活动过程
中的唯一数据源基于
MBD
的三维模型也能减少返工率提高产品质量
4
。
传统的工艺编制不仅需要消耗大量的人力而且要借助工艺编制人员长期的经验并且不
同的工艺编制人员针对同一个产品所编制的工艺也不尽相同。而一些重复且基本的工艺信息完
全可以通过数据库的搭建以及信息的匹配来自动生成
5
。计算机辅助工艺规划
ComputerAided
ProcessPlanningCAPP
是指利用计算机的平台支持环境及其相关技术借助计算机来制定零件
机械加工工艺过程也是利用计算机技术辅助工艺人员完成零件从毛胚到成品的设计和制造过
程。这其中包含了机械加工工艺过程中的数值计算和逻辑判断以及相关的推理
6
。
CAPP
系统可
以解决传统手工工艺编制中效率低不易达到优化易出错不稳定等问题。随着三维模型广
泛应用于产品的设计制造环节中传统的二维辅助工艺规划技术已逐渐脱离了现代工艺设计与
信息管理的需要基于三维模型的工艺设计可视化装配以及优化仿真等已经成为数字化设计
与制造技术的研究重点。并且研究一种三维辅助工艺设计技术对提高企业效率并节省成本也是
十分必要的
7
。
虽然目前为止三维辅助工艺设计技术得到了一定发展但是其对工艺的规划流程与信息
数据上游的产品数字化定义难以适应工艺规划过程中并未很好地和
MBD
三维模型中所定义
的信息相结合。同时在工艺执行过程中由于加工环境以及技术因素的限制许多加工现场
缺乏对三维数字化工艺的支持导致工艺的执行仍然是将
3D
模型转换至
2D
图纸。当工艺更改基于
MBD
的三维工艺设计技术研究
2
频繁时便会导致修改工作的效率低下
8
。
考虑到
MBD
技术可将原有的工艺设计的环节扩展为产品设计与工艺规划及设计过程的管
理平台这样便使得设计工艺等参与产品研制的各环节能够在三维可视化环境下并行工作。
基于
MBD
的工艺设计制造集成就是指在工艺的设计以及发布到加工现场的整个流程中采用
MBD
的方法摒弃传统的二维工艺卡片采用全三维的方法使产品设计工艺设计以及工件
制造一体化彻底改变传统产品设计工艺设计以及零件加工的

信息孤岛

的局面。从而大幅
度提高工装设计制造的效率降低返修率
9
。
要在工艺设计的环节中运用
MBD
技术就要首先提取零件产品的特征信息同时还要提取
特征的尺寸大小公差等并依据产品特征的设计信息来进行初步的推理。由此可见规范设
计工艺制造的标准对于实现全三维环境下的信息化集成制造是非常重要的。
12
国内外研究现状
121MBD
技术研究现状
从手绘二维图到计算机辅助制图
ComputerAidedDesignCAD
再到现在的基于模型的
定义方法
ModelBasedDefinitionMBD
产品设计的工程语言经历了三个阶段
10
。其中手绘
二维图中强调画法几何原理并结合产品的三视图以及剖视图等来联合定义产品的设计制造信
息。传统的手绘二维图表达方法需要通过专业的训练才能掌握所以这种产品信息的表达方法
对制图员的专业素养要求较高产品信息定义的准确度和可读性直接依赖于制图员的经验和能
力。第二代工程设计表达方式为计算机辅助制图这里面包含了二维工程图和三维模型。这种
表达方式下的二维工程图也是结合产品的三视图等来表达产品信息的但是与第一阶段的手绘
二维图不同的是该表达方式下的二维工程图是由三维模型导入到
CAD
软件后生成的数字化
二维图。该方式下三维模型的建立不仅更加直观同时也提高了手绘图纸的出图效率但仍
未解决数据定义不标准数据源不单一等问题。产品定义的质量依然高度依赖工程人员的经验
和能力。第三代工程设计的表达方式为基于
MBD
的定义这种方式以集成了产品开发过程中
所有信息的三维模型来定义产品该方法具有直观易读包容性强的特点工程人员无须经过
长期的培训即可理解定义的内容
11
。同时该方法的数据源单一也避免了工程信息的混乱
12
。
作为第三代工程语言
MBD
具有独特的优越性
1997
年美国机械工程学会开始对
MBD
的标准进行研究并于
2003
年发布了
ASMEY14412003
国家标准
13
。
在研制波音
787
飞机的过程中波音公司率先使用了
MBD
技术并在供应商中推广。波
音公司通过
MBD
技术彻底改变了飞机设计制造的传统模式从设计到制造实现了真正意义上
的全三维数字化无图纸技术极大地提高了飞机产品的生产效率和管理效率充分体现了数
字化技术的优越性
14
。南京航空航天大学硕士学位论文
3
为了迎接国际航空市场激烈的竞争和挑战赶超国外航空企业数字化产品研制水平提高
企业并行协同研制的能力国内对
MBD
技术也展开深入研究。我国于
2009
年制定了
GBT24734
国家标准。
卢鹄韩爽等结合我国航空企业对波音
787
的转包生产分析了
MBD
技术的应用情况
15
。
梁艳冯国成等基于所总结的
MBD
技术数据信息的组织及其管理方法开发了一套工程注释
信息的管理系统
16
。他们同时还探讨了在数字化环境下运用注释信息管理系统对装配件实行数
字管理
17
。郭具涛梅中义等通过所构建的多层次装配工艺流程借助
DELMIA
平台进行工艺
仿真为现场工程人员的装配提供了可视化依据
18
。周秋忠樊庆春等研究了产品协同的工作
要素提出了基于
MBD
模型的工艺设计流程规范了产品协同信息及其表达
19
。此外上海
飞机制造有限公司的李汝鹏等人对大型客机基于
MBD
定义的紧固件辅助工艺方法设计进行了
相关研究
20
。
Dassualt
公司的罗炜等人基于
MBD
技术开发出了基于几何和特征的工艺规划方
法以及自动编程工具并进行了工艺验证提高了数字化信息制造环境下工艺编制的质量和效
率
21
。
通过以上文献的分析可以得出结论
MBD
应用的方式各不相同但是最终目的都是为了
实现三维模型中的信息管理。
122
国内外工艺辅助系统研究现状
如何合理地将工艺信息集成在三维模型中是信息化制造必然绕不开的话题。传统的计算
机辅助工艺设计
CAPP
运用计算机技术使工艺人员从繁琐重复的工作中解脱出来快速编写
出细致的工艺文件提高制造的质量减少生产准备周期进而缩短整个产品周期。从发展的
角度看
CAPP
可逐步全部或部分实现工艺设计的自动化及工艺制定过程的流程化规则化与
优化可以从根本上改变工艺设计过分依赖个人经验的状况提高工艺设计效率同时也可以
为改善企业管理提供科学依据与标准
22
。
传统的
CAPP
系统通常包括
3
个基本组成部分产品设计信息输入工艺决策产品工艺
信息输出。产品设计信息即是工艺设计过程所需的原始信息这里的原始信息能完整表达产品
的结构形状以及加工要求比如产品的尺寸公差粗糙度等信息。工艺人员在编制工艺时
首先通过读取工程图纸获取工艺相关的信息。
CAPP
系统必须将这些与工艺相关的产品设计信
息转换成计算机语言。目前
CAPP
系统的信息输入方法主要有两种一种是直接从
CAD
系统
读取工艺信息另一种是通过人机交互得到所需的相关产品信息
23
。
20
世纪
80
年代至
90
年代初期
CAPP
的研究与开发主要集中在人工智能
AIArtificial
Intelligence
技术与专家系统
ESExpertSystem
上。在
CAPP
中所运用的
AI
技术基本都是用来
解决工艺决策的问题专家系统被用作基本的系统结构所以这些系统常被称作
CAPP
专家
系统或工艺决策专家系统
24
。在国内外开发的各种工艺辅助专家系统中工艺决策的方法大多基于
MBD
的三维工艺设计技术研究
4
是生成式的修订式运用较少但因其修改便捷的优点也逐渐被越来越多的人所采用。
无论是修订式工艺辅助设计专家系统还是生成式工艺辅助设计专家系统传统的计算机
工艺辅助设计系统都具有以下两大特点
片面追求工艺决策的自动化忽视系统的应用特别是
20
世界
80
年代中后期大都认为
生成式
CAPP
系统是
CAPP
的主要发展方向。一方面生成式
CAPP
系统的信息决策自动化程
度越高系统所输入的信息就要尽量详细。而受
CADCAM
技术发展的限制
CAPP
系统中工
艺自动决策所需的零件信息是无法自动获取的而且从技术发展方面来看在相当长时间内
这也是难以完全解决的问题。因此对于传统的
CAPP
系统信息输入问题成为系统难以应用
的主要原因。另一方面涉及到工艺决策的问题都是复杂性极高的规划问题不仅对信息量要
求极大而且在不同加工环境下所作出的工艺决策往往也会不同。因此传统的
CAPP
系统
适应性差难以满足应用环境变化带来的不同需求。而且传统的
CAPP
基本采用将二维纸质工
艺卡片数字化的方式并不能满足当前对全三维化模型设计制造一体化的需求
25
。
目前国外已经投入使用的大型辅助决策系统
26
包括美国
KENNAMETAL
公司的
GAMA
系统新加坡的
EMDB
推荐系统德国的
INFOS
车削数据库软件以及英国
DUNDEE
大学开发
的智能刀具选择系统
rrS
。
CEBouffiou
和
WJHlavacek
等人基于三维模型中产品与工艺过程
的关系提出了一套三维工艺规划的方法
27
。
VMPedagopu
和
MKumar
在
CATIA
环境下针
对基于特征的建模以及综合化模型提出了一种工艺规划的方法
28
。但是该方法暂时只适用于铣
削所针对的加工特征并且相关算法有待完善。同时此种方法利用
CATIA
内的
VB
生成的
ActiveX
界面部分技术还是只适用于二维模块并非全三维环境下的工艺规划。
目前国内的三维辅助工艺设计的研究基本都是基于三维模型实现工艺信息的集成如贾晓
亮等针对航空复杂产品所设计的集成化
CAPP
系统并建立了基于三维模型的辅助工艺设计技
术体系
29
吴江研究了基于特征识别的产品设计制造集成技术设计了基于特征库的集成化计
算机辅助工艺设计方法
30
赵震等分析了过程特征制造资源以及加工信息之间的关系对过
程特征中所包含的信息进行了定义并提出了基于三维模型过程特征的工艺辅助设计结构
31
。
他们所提出的基于三维模型的
CAPP
系统以及工艺设计方法只是将传统二维
CAPP
与三维模型
结合起来并未有效结合
MBD
技术。
综上所述计算机辅助工艺设计方法自诞生以来一直是制造业信息化的重要技术之一
三维辅助工艺设计必将取代二维辅助工艺设计成为工艺人员进行工艺设计的首选方法。本文
拟结合生成式
CAPP
系统中工艺决策自动生成的特点以及修订式
CAPP
系统中信息修改方便的
特点即在进行简单工艺决策后再对相关信息进行修订的方法对三维环境下辅助工艺设
计技术展开研究。南京航空航天大学硕士学位论文
5
123
工艺知识管理技术研究现状
工艺辅助系统中很重要的一个环节就是工艺决策而工艺决策需要大量的工艺知识作为判
断基准。如何建立合理有序的工艺知识库并进行管理是实现信息化制造所必须要考虑的问题。
以下是当前国内外对工艺知识库的构建以及管理的研究现状。
姚文林指出工艺数据可分为两大类静态数据和动态数据。其中静态数据指的是工艺
设计手册中可查阅的规范化数据及相关标准而动态数据是指在进行工艺设计过程中所产生的
不可查阅的信息多数时候由工艺设计人员根据自身经验以及实际加工情况进行制定。他同时
也指出工艺知识规则分为选择性规则和决策性规则两大类并提出了用
ER
模型来描述概念
的方法
32
。
宋丹丹和孙朝阳等人分别对基于
PDM
的工艺知识库管理方法做出了研究。孙朝阳将工艺
知识分为三类并根据分类构建了基于
PDM
的工艺知识库管理系统体系结构提出了基于物
料清单的检索方法和表示方法基于工艺三视图模型的工艺决策知识库的维护策略。宋丹丹则
将
PDM
与
CAPP
集成强调了工艺知识库中的知识创建以及结构模型
33
。
高晓梅提出了一种基于二维工艺卡片的工艺集成系统完成了装配订单加工订单以及机
加工的数字一体化工作。以数据库的方式建立工艺知识库使得工艺查询变得方便
34
。
马宏福则在分析了现有的本体理论和建模方法后运用本体描述语言结合软件工程内容
提出了创建一个开放性的机械加工工艺领域本体的方法
35
。
安峰构建了基于本体的高速切削加工规则库同时设计了基于本体的高速切削加工专家系
统推理算法为解决切削加工工艺知识管理及参数推荐中存在的问题提供了有效解决方法
36
。
郭春芬针对工艺知识多样性复杂性的特点提出了一种基于本体的工艺知识管理系统框
架并给出了以工艺知识检索维护和用户管理为主要功能的系统模型
37
。
LSolano
等人引入本体的概念提出了协同环境下产品开发的工艺规划过程
38
。
综上所述工艺知识库的构建与管理主要分为三种一种是基于数据库的构建管理方式
一种是基于产品数据管理平台的集成构建模式另一种是基于本体对工艺知识库进行构建和管
理。其中以综合数据库为媒介所建立的工艺知识库或规则库中工艺规则之间所包含的关系
并不明显这就造成了工艺知识整体上比较散乱推理灵活性差处理效率低下
39
。本体技术
和语义推理技术的相关研究为解决专家系统在知识的获取检索以及智能化推理方面的不足提
供了有效的解决方案
40
。它们不仅提供了完整的知识定义方法和逻辑层级构建方法同时也实
现了基于语义的智能化推理加强了系统求解问题的能力满足了用户对于提高专家系统运行
效率拓宽专家系统应用领域的需求。因此本文拟采用本体技术构建工艺知识体系。基于
MBD
的三维工艺设计技术研究
6
124
基于
MBD
技术的工艺设计研究现状
运用
MBD
技术可将产品设计制造环节中的工艺设计与产品设计以及仿真验证等结合起来
使得参与产品研制的各环节能够在直观且包含信息丰富的三维环境下并行工作进而提高产品
研制效率节省研发成本。
程少杰在飞机结构件加工特征识别技术研究与实现中提到了将计算机辅助工艺设计和
CAD
以及
CAM
结合起来的目的
1
实现产品定义信息的数据交换
2
生成标准化的数据结构
并通过接口进行数据转换
3
通过读取
CAD
建模的相关信息有助于工艺设计环节合理规划
工艺
4
将生成的工艺数据导入到
CAM
系统中与相关的加工信息相对应
41
。
基于
MBD
的三维
CAPP
研究尚且很少张祥祥等对
ProE
进行了二次开发并通过产品
数据管理
PDM
系统
Windchill
进行集成将工艺设计信息直接保存到
PDM
系统中进行管理
42
。
但是该方法中加工工序信息是通过模型的属性进行保存的并不直观。属性是指表达产品定
义或产品模型特征所需要的不可见信息
窦光继等对
UG
进行二次开发并以工艺结构树为表达形式在三维环境下对工艺信息进
行表述并将工艺信息与产品的三维模型进行了表达上的集成
43
。
孙家坤等首先分析了
MBD
环境下三维设计与制造集成的具体需求然后运用
SOA
作为系
统构架并分析了系统各层次的作用对包括三维标注以及模型管理技术在内的系统关键技术
进行了初步介绍提出了先调研需求再攻关技术然后集中研发并最终验证的技术路线
44
。
三维工艺
CAPP
的推动除了要将二维工艺卡片上的文字信息全部包含还要包含每一步
的工序的加工示意图即一步工序对应一个三维模型这样的模型称之为工序模型。
田富君等将工序模型的概念引入了三维工艺设计过程中并提出了基于工序模型设计工艺
的方法。该方法结合零件成品模型和毛坯模型对零件加工工序进行逆向生成并且每一道工
序都对应生成一个工序模型。本道工序模型生成完成后在已经生成的工序模型的基础上对下
一道工序进行规划。田富君等人提出在基于工序模型设计工艺的过程中加工特征识别加
工元生成以及加工元聚类是影响工艺自动关键为此对基于工序模型的混合加工特征识别
基于知识的加工元生成以及基于模糊
C
均值的加工元聚类进行了深入的研究
45
。此种方法虽然
将三维工艺设计过程进行了细分但是所生成工序模型的准确性将直接影响整个工艺设计的正
确性同时此种方法的工序规划速度较慢。
田富君等还采用多视图方法将三维标注信息按照专业类型和工艺规划过程分别进行划分
和管理并将工序模型所含有的信息进一步划分为了三层实体层扩展层和应用层。工序模
型再次被作为载体并依此建立了基于
MBD
的零件工艺信息模型
46
。
田富君等也提出了基于模型的工艺的概念并以工序模型为基本单位通过加工特征对工
序模型信息进行组织建立了基于模型的零件工艺管理体系。以工序模型为载体建立了基于南京航空航天大学硕士学位论文
7
模型定义的零件工艺信息模型。提出了一种三维加工方法标注符号并对三维加工方法标注符
号的组成进行了分析
47
。但是该方法弱化了工序的概念而过分强调了特征的以及加工方法之
间的联系对工艺链的生成并无明显促进作用。同时一旦产品加工特征过多标注信息将会
彼此干扰对标注信息的读取将会产生影响。
综上所述国内外的专家学者在制造业开展了基于
MBD
技术的设计制造与信息集成以及
产品数据管理等方面的研究并取得了一定的成果本文将结合前人的研究以及三维环境的特点
归纳工艺设计过程所涉及到的工艺信息并对其进行重新分类对三维环境下工艺信息的表达方
式进行基于
MBD
规范的定义结合本体技术构建工艺知识库同时提出一种更为简便的基于
轻量化模型的三维工序模型表达方法。
13
研究目的和意义
机械设计制造过程中工艺设计是贯穿产品设计到现场制造的重要环节。本课题旨在为三
维环境下的工艺编制以及工艺信息合理显示提供一种新的思路以节省机械设计制造的时间成
本提高效率同时满足信息化制造对工艺设计环节提出的新要求。本文对基于
MBD
的三维
工艺设计研究具有以下意义

1
以
MBD
技术对工艺信息进行三维数字化定义使零件
MBD
模型集成了工艺信息
使三维模型成为了唯一数据源避免了从产品设计到工艺设计过程中数据源不单一的问题提
高了工艺设计人员的工作效率。

2
为了使三维环境下工艺信息能够正确表达需要合理构建工艺知识库本文以本体技
术构建工艺知识库相比于传统的基于数据库构建的工艺知识库逻辑性更强准确率更高
查询更全面。

3
相比于传统的工艺辅助设计本文基于本体知识库和规则库的工艺推理方法更简洁
且本体结构与
XML
格式的文件结合更紧密便于信息的传递与读取。

4
以三维工艺
MBD
模型取代传统的二维工艺卡片能够更直观地表达工艺设计人员的
设计意图特别是能够准确地表达所需加工的特征便于加工人员的理解。

5
与所需加工的特征相对应的三维工序模型以及与之相关联的工艺信息取代传统的二维
工序图并被被发布到加工现场可以减少加工人员理解图纸的时间便于加工。
14
课题研究内容
141
研究内容
本课题通过对传统工艺设计流程以及工艺卡片内容的研究结合当前信息化制造的整体趋
势提出了基于
MBD
的三维工艺设计整体方案。在三维环境下对产品模型中的加工特征进基于
MBD
的三维工艺设计技术研究
8
行信息提取并进行工艺推理得到相应的工艺参数并采用基于模型的定义方式对产品模型加
工方式和工艺参数进行定义使工艺设计过程中的基本信息都集成到三维模型上来利用本体
技术
SWRL
语言规范以及
Jess
引擎对工艺知识库和工艺规则库进行构建并结合所识别的
特征信息进行工艺推理辅助工艺设计人员得到其所需要的工艺参数利用轻量化模型的概念
和技术将集成有工艺信息的三维模型发布到加工现场便于制造人员进行现场加工。本文研
究的主要内容归纳如下

1
利用
MBD
的思想研究三维环境下产品工艺设计流程。

2
在三维环境下研究产品加工特征信息的提取方法如何识别产品加工特征以及如何
将特征信息合理整合方便工艺推理。

3
研究如何运用本体技术合理构建逻辑结构明显的工艺知识库研究如何根据已经构
建的工艺知识库构建工艺规则库并进行推理。

4
利用
MBD
的思想研究三维环境下工艺信息的合理表达方式。

5
将含有工艺信息的三维模型以轻量化模型的形式发布到加工现场。
142
论文结构
本文根据研究的内容将文章分为七章各章节内容如下
第一章绪论介绍课题研究背景分析了
MBD
技术工艺辅助系统工艺知识管理以及
基于
MBD
的工艺设计方法当前国内外研究现状和发展趋势描述了本课题的研究目的和意义
并介绍了本文的研究内容和章节安排。
第二章基于
MBD
的三维工艺设计总体方案分析传统工艺设计流程介绍
MBD
的概念
以及数据组成结构提出基于
MBD
的三维工艺设计体系。构建基于
MBD
的三维工艺设计总
体框架。
第三章基于
MBD
的加工特征信息管理技术研究研究
MBD
环境下如何提取产品三维模
型中的制造特征以及相关信息的方法研究如何有效传递制造特征信息的方法。
第四章工艺知识表示与语义推理技术研究提出了基于本体技术的工艺知识库构建方法
提出了基于
SWRL
的工艺规则库构建方法结合所传递的制造特征信息与所构建的知识库和规
则库进行工艺推理。
第五章基于
MBD
的三维工艺信息表达技术研究研究
MBD
环境下如何合理表达所推荐
的加工参数研究以轻量化模型为载体传递加工制造信息的方法提出了基于
MBD
的三维工
艺信息表达流程。
第六章基于
MBD
的三维工艺设计技术实现介绍系统开发和运行环境对操作流程进行
详细说明并对该方法的主要功能进行展示。
第七章总结与展望总结全文的研究成果并对接下来的工作以及有待深入研究的内容提南京航空航天大学硕士学位论文
9
出展望。
各章节关系如图
11
所示
图
11
论文结构及各章关系
15
本章小结
本章首先介绍了信息化制造的课题背景然后对
MBD
技术工艺辅助系统工艺知识管
理以及基于
MBD
的工艺设计方法当前国内外的研究现状进行了分析并阐述了该课题的研究
目的和意义最后介绍了本文的研究内容和结构规划。基于
MBD
的三维工艺设计技术研究
10
第二章基于
MBD
的三维工艺设计总体方案
上一章对
MBD
技术工艺辅助系统以及三维工艺设计的国内外研究现状进行了简单介绍
并说明了基于
MBD
的三维工艺设计技术的研究意义。本章将主要研究基于
MBD
的三维工艺
设计技术首先需要熟悉传统机械加工工艺规程其次结合工艺设计的实际情况对工艺设
计过程中所涉及的相关工艺信息进行归纳与总结然后结合
MBD
的技术特点对所归纳的
工艺信息进行分类和重组接着基于重组后的工艺信息提出适用于本文的基于
MBD
的工
艺信息管理体系最后基于所归纳的工艺信息以及工艺信息管理体系得到基于
MBD
的三维
工艺设计流程及总体方案。
21
机械加工工艺规程设计概述
211
机械加工工艺规程的定义
机械加工工艺规程是一种工艺文件它指导着产品的加工过程及方法同时它也是一种
纪律性文件对整个设计制造过程中所涉及的相关人员提出了一定的要求。产品质量的好坏
以及如何解决生产加工过程中出现的各种问题都取决于机械加工工艺规程。因此设计机械
加工工艺规程必须严谨。它不仅要求设计者生产实践经验丰富同时还要求设计者具备扎实的
机械加工工艺方面的基础知识。一旦通过审批机械加工工艺规程不得随意进行变更。
212
机械加工工艺规程的作用
在产品或零部件投入生产之前大量的准备工作包括生产准备和技术准备需要做例
如分析与研究关键技术设计夹具采购或准备刀具和量具以及机床的准备等。这些准备工
作必须依据机械加工工艺规程来进行。
同时机械加工工艺规程也是生产计划和调度以及工人操作和质量检查的依据。
当修建新的车间或对原有厂房进行扩建时也要依据机械加工工艺规程。它不仅可以确定
各类加工设备的具体数量还能依据原始加工数据确定所需工人的数量。
213
机械加工工艺规程的格式
一般来说机械加工工艺规程都被写成卡片或表格的形式其详细程度与零件的设计精度
生产类型和自动化程度有关。通常而言单间小批量生产的零部件或产品只需填写工艺过程
卡片而对于大批大量生产类型的零部件或产品需要有严密而细致的组织工作各工序都需
要填写加工工序卡片。南京航空航天大学硕士学位论文
11
214
机械加工工艺规程的步骤和内容
机械加工工艺规程应包含以下几个步骤
Step1
阅读零件图和装配图。目的是为了了解产品的性能和用途以及熟悉零件在产品
中的作用。
Step2
工艺性审查。审查图样上的尺寸设计是否方便制造而又有较低的制造成本即
是否具备加工制造的合理性和经济性。
Step3
熟悉或确定毛坯。确定毛坯主要依据零件本身的结构尺寸及大小以及零件的
作用材料及其性质。
Step4
拟定机械加工工艺路线。包括确定加工方法安排加工顺序热处理方式以及其
他工序等。加工工艺路线的确定通常要符合制造厂内的条件根据实际情况进行制定。
Step5
确定工艺装备包括机床刀具等。根据加工方法加工顺序热处理方式以及
材料性能确定所需要的机床和适宜的刀具。
Step6
确定各工序的检验方法以及技术要求。
Step7
确定各主要工序的工序尺寸加工余量以及公差。
Step8
确定切削用量和时间定额。
Step9
填写工艺文件。
从机械加工工艺规程步骤中可以看出工艺规程是基于二维零件图和装配图的相比于三
维模型二维图纸的识图的过程相对较慢且识图人员需具备专业的工程图基础。填写工艺文
件也是基于二维工艺卡片这就造成了产品设计人员和工艺设计人员数据源的不统一设计与
制造的协同程度很低并且在将三维产品模型转化为二维工艺卡片的过程中容易出错。
22MBD
技术概述
随着我国制造业的快速发展信息化技术也得到了迅速发展。信息化技术的出现不仅改变
了传统制造业的生产模式还提高了生产效率缩短了产品研制周期。但是在我国现行的机
械加工过程中信息化技术的应用主要集中在产品设计和制造阶段比如
CAD
和
CAM
但是
在工艺设计阶段并没有太多应用。目前二维工艺卡片依然是制造人员的主要依据一般都是
产品设计部门进行三维产品设计然后将三维模型投射成二维工程图传给工艺部门进行工艺设
计。随着中国制造
2025
的提出依据三维综合化模型进行工艺设计和注释将成为信息化
制造的一个主要研究方向。而
MBD
的特性恰好能够实现三维模型的信息集成和有效管理。
MBD

ModelBasedDefinition
基于模型的定义是一种用集成的三维实体模型来完整表
达分散在二维工程图和三维模型中所有的设计制造信息的方法它改变了

三维设计模型

二维
工程图纸

的设计制造模式将二维模型中进行公差尺寸工艺描述的部分全部放在三维模型基于
MBD
的三维工艺设计技术研究
12
中最终实现设计制造检验过程中所有的数据都在
MBD
模型上集成。
MBD
模型由数据集组成如图
21
所示
MBD
数据集包括实体几何模型标注信息以及
属性。其中实体模型还包括了模型几何信息和辅助几何信息。标注信息表示无需外部处理或手
动操作即可见的注释尺寸公差等信息。而属性则表达了可见的产品定义信息或模型特征所
不可见的注释尺寸公差等信息但是这些信息都可以被查询到。
图
21MBD
数据集
23
基于
MBD
的三维工艺设计总体方案
将
MBD
技术和工艺设计相结合形成基于
MBD
的三维工艺设计技术需要首先对工艺
信息进行分类然后对如何在
MBD
数据集中合理表达工艺信息进行规划针对所需表达的工
艺信息本节将提出基于
MBD
的三维工艺信息管理体系强调信息间的层次以及彼此的递进
关系最后结合所归纳的工艺信息以及管理体系提出基于
MBD
的三维工艺设计总体方案。
231
工艺信息分类方案
工艺信息是零件或产品信息的重要组成部分。作为连接产品设计加工制造以及信息管理
等系统的纽带工艺信息直接决定了产品的最终质量。结合实际生产中二维工艺卡片上的基本
信息以及三维模型的特点本文将工艺信息
ProcessInformation
分为基本属性
Basic
Attributes
标注信息
MarkInformation
加工特征信息
MachiningFeatureInformation
加
工制造信息
ManufacturingInformation
四类如图
22
所示。
其中基本属性包括材料注释和热处理注释它们描述了材料的基本信息毛坯尺寸热
处理方式和材料硬度这些信息对工艺设计人员选择机床型号以及选择刀具具有参考作用。标
注信息则包含了技术要求尺寸公差以及未注粗糙度技术要求写明了零部件的制造依据和设
计依据对工艺设计人员以及加工制造人员具有指导作用。加工特征信息则包含了特征类型
特征型面粗糙度以及特征尺寸特征类型直接关系到加工方法和机床的选择特征型面粗糙度
则对加工精度和走刀数的选择有指导作用特征尺寸表明了加工特征的大小它影响了工艺参南京航空航天大学硕士学位论文
13
数中进给量的选择。加工制造信息包含了加工方法设备信息工装信息流程信息和工艺参
数是工艺设计中需要最终得到的重要信息也是指导加工制造人员进行现场加工的金科玉律。
其中加工方法含有车削铣削磨削等常用加工方式并且不同的加工方式与不同的加工设
备所对应工装信息由工装设计人员提供工艺参数包含走刀数进给量切削速度等关键加
工信息。
图
22
基于
MBD
的三维工艺信息分类方案
232
基于
MBD
的工艺信息表达方式
工艺信息归纳完成后需要对
MBD
环境下工艺信息的合理表达进行规划。图
21
描述了
MBD
数据集的基本结构。一个
MBD
模型包含标注设计模型以及属性这三类信息。如果将工
艺信息以引出线的形式直接在三维模型上标注出来会使工艺信息与其余标注信息注释尺
寸公差等杂糅在一起导致工艺设计完成后加工制造人员对工艺信息读取的不便也会因基于
MBD
的三维工艺设计技术研究
14
零件复杂而导致工艺信息

淹没

在标注信息内不够直观。因此工艺信息应当独立表达。但
在基于
MBD
的三维工艺设计环境下工艺信息又不能脱离三维环境所以考虑将工艺信息
以属性的形式和其他可见的产品定义信息放在一起便于工艺设计完成后加工制造人员查阅。
集成的工艺信息只有按照一定的结构层次进行组织才便于表达与管理便于加工制造人员
的读取和理解。依据传统的工艺规程设计方法一套工艺中包含多个工序每一个工序对应一
个加工方法和待加工特征类型而工序中包含有具体的工艺信息比如加工条件工序说明和
工步信息。因此依据零部件加工制造过程中所涉及工艺信息间的先后顺序以及从属关系将
加工制造信息加工特征信息等工艺信息串联成具有一定层次的关系模型如图
23
所示。
图
23
基于
MBD
的工艺信息表达结构
在该层次模型中由于考虑到在工艺设计过程中基本属性包括材料属性和热处理信息
以及标注信息是工艺人员首先需要参考的所以将基本属性标注信息还有加工信息放在第一南京航空航天大学硕士学位论文
15
层。而将工序号加工方法和待加工特征类型放在一起作为第二层是因为本文提出的基于
MBD
的三维工艺设计方法是依据所识别的零件加工特征来进行加工设备以及工艺参数的选择
所以识别到的加工特征和工序号与加工方法并列。这样可以让工艺设计人员直观地了解本道工
序所对应的加工特征。
第三层概括了一道工序下包含的基本加工信息包含了加工条件工序说明以及工步信息。
第四层是第三层的具体描述比如加工条件里面包含机床夹具切削液以及本道工序的
工时工步信息则包含了工步号。
第五层是工步所包含的内容包括工步说明加工参数以及加工条件。
第六层是对第五层的详细说明比如加工参数里面包含主轴转速切削速度进给量切
削深度以及进给次数加工条件里面也包含了刀具工步的工艺设备工位夹具及工步工时。
该管理方案具备以下优点

1
依据工艺设计人员的设计思路对二维工艺卡片中的信息进行了重构使得信息传递
更为有效工艺信息的表达更为清晰直观。

2
三维工艺信息以此种树状结构进行排列便于转换成同样具有树状结构的
XML
文件
有助于实现
CAD
建模软件与其他软件之间的信息交换和协同制造。

3
此种工艺信息管理方法不仅有利于工艺设计人员进行快速工艺设计同时还能提高加
工制造人员的信息获取速度使得整个机械加工设计制造过程更有效率。
233
基于
MBD
的三维工艺信息管理体系
工艺信息的归纳以及表达结构确定后需要进一步考虑这些信息之间的关系。
对于工艺设计人员而言三维工艺设计不同于传统二维工艺设计三维模型取代了二维图
纸。因此三维模型是工艺设计人员首先得到的直观信息。因此如图
24
所示本文提出的
基于
MBD
的三维工艺信息管理体系中将几何层放在了第一层也就是最内层。几何层包含
了模型几何和辅助几何。模型几何即设计的实体模型它包含了组成模型所必须的几何特征及
型面比如柱面和平面可形成圆柱特征垂直的平面相交可以组成槽特征而这些几何特征又
是构成加工特征的重要依据所以对特征进行准确识别是建立基于
MBD
的三维工艺设计的
重要前提。辅助几何指的是建模过程中所使用的一些辅助信息比如建模时所建立的辅助线或
辅助面。
在接受了几何信息后工艺设计人员需对模型中所包含的加工特征进行识别以确定工序。
因此将加工特征层作为该体系的第二层。加工特征所需包含的工艺信息有材料特征精度
特征形状特性和注释信息。材料特征即指该零件所进行的热处理方式材料硬度等信息这
些特性直接影响到刀具的选择精度特征指型面粗糙度这决定了工艺路线以及加工方法的选
择形状特性即加工特征类型以及加工特征尺寸这影响了加工方法的选择和设备的选择比基于
MBD
的三维工艺设计技术研究
16
如特征形状为圆孔那么加工方法就是钻铰或镗对应的加工设备就是立式加工中心或者钻
床而注释信息包括特征的名称。
最外层即是工艺信息层这一层信息描述了和工序模型加工特征所对应的工艺信息包括
设备信息以及相关加工参数等这里的设备信息包含了机床信息和刀具信息。如前文所说这
一层的许多信息都与第二层的信息一一对应或具有一定的逻辑联系并且这一层的信息也
是工艺设计人员最后所需要确定的信息。
图
24
基于
MBD
的三维工艺信息管理体系
基于
MBD
的三维工艺信息管理体系具有以下优势

1
在基于
MBD
的三维工艺信息管理体系中所有的工程信息都是通过三维模型进行集
成的后续工作人员无需对较为抽象的二维工艺卡片以及二维工序图进行理解能够更直观地
从三维综合化模型中获取信息。

2
在零部件设计制造的过程中采用三维工艺信息管理体系后所有的工程数据都将来自
于三维综合化模型这使得产品数据源单一避免了因为传统的

三维设计模型

二维工艺卡片

造成的数据混乱。

3
要实现三维工艺信息管理体系必须高度依赖计算机应用系统这使得零部件的并行
协同设计制造更加容易实施。
234
基于
MBD
的三维工艺设计总体方案
根据前文所提到的工艺信息分类方法工艺信息表达方式以及工艺信息管理体系本文提南京航空航天大学硕士学位论文
17
出了基于
MBD
的三维工艺设计总体方案从整体上研究机械加工工艺设计的定义规范数据
集成数据传递方式工艺设计与产品设计和制造的融合。总体方案支持以
MBD
规范定义的
三维综合化模型支持各计算机应用系统之间的数据交换支持基于轻量化模型的工艺信息的
表达。除此之外该方案还具备工艺知识的管理工艺信息的输入输出管理等功能。基于
MBD
的三维工艺设计总体方案如图
25
所示。
图
25
基于
MBD
的三维工艺设计总体方案
首先对零部件产品的设计模型进行特征识别并提取相关的基本信息包括材料属性热
处理注释尺寸及公差。运用
CATIA
二次开发技术将以上信息保存在具有显著层次结构的
XML
文件中并导出。
其次将包含有特征信息的
XML
文件导入到
Protg
软件中并和已经构建好的工艺知识基于
MBD
的三维工艺设计技术研究
18
库进行匹配以及工艺推理。
Protg
是构建本体
Ontology
的软件能识别
XML
文件并读取其中
的关键信息。至于如何构建工艺本体知识库以及如何在
Protg
环境下进行工艺推理将会在后
文中详细描述。将推理得到的设备信息以及推荐的工艺参数保存成
XML
文件并导出。
然后返回
CATIA
环境中将包含推荐工艺参数以及设备信息的
XML
文件导入提取相关信息
并显示在
CATIA
二次开发的界面中以便工艺设计人员进行调整与修改。得到完整的工艺信息
后将这些信息以前文提到的工艺信息表达方式进行重构并集成到产品设计模型中最终形成
三维综合化工艺模型。
利用
CATIA
二次开发技术将重构后的工艺信息保存成
XML
文件并将三维综合化工艺
模型保存成可显示三维标注的
wrl
格式的轻量化模型。同时导出
XML
文件以及
wrl
格式的轻量
化模型并发布到加工现场。
最后在不具备
CATIA
的环境下加工制造现场显示含有工艺信息的三维综合化模型。
该设计方案有以下几点优势

1

XML
文件作为通用的信息传递媒介不仅轻便而且可以被不同的应用程序所识别。
将产品的基本信息注释信息以及特征信息都保存在
XML
文件中进行数据的传递不仅可以
提高数据传输的效率还可以打通不同程序间的接口便于数据的准确传达。

2
以本体技术构建工艺知识库规则库解决了传统数据库中信息储存冗余且信息间
逻辑关系不明确的问题。而且以本体技术构建的工艺知识库和规则库容量较小修改起来十
分方便。

3
运用
CATIA
二次开发技术可以依据工艺设计人员的习惯对
CATIA
环境下的工艺设
计界面进行个性化定制让软件适应人的操作流程而不是人去适应软件的操作流程这样可
以提高工作效率并且使习惯了填写二维工艺卡片的工艺设计人员更容易接受和适应本方案。

4
将含有工艺信息的三维综合化模型以轻量化模型的方式导出并发布到加工现场这
样的方式能提高企业加工效率。一般来说一台电脑若要打开一个三维模型必须安装相关的
三维建模软件这些软件动辄售价几百万且安装文件过大不便于安装。如果能以轻量化的
形式导出到加工现场则可以在不安装三维建模软件的条件下直接打开三维模型并能阅读到
相应的加工制造信息为企业节省大量的成本。
24
本章小结
本章首先介绍了传统的机械加工工艺规程设计流程然后介绍了
MBD
的概念以及
MBD
的数据集成方式提出了基于
MBD
的三维工艺信息分类方法和表达方式并分析了基于
MBD
的三维工艺信息管理体系最后结合以上几点构建了基于
MBD
的三维工艺设计总体方案
阐述了该设计方案的整体内容分析了流程以及数据传递的方式。后面的章节将会对本章所提
出总体方案的各部分内容依据流程依次进行详细介绍。南京航空航天大学硕士学位论文
19
第三章基于
MBD
的加工特征信息管理技术研究
构建基于
MBD
的三维工艺设计方法首先需要提取三维建模环境下零部件产品的加工特
征信息及其基本属性信息为工艺推理提供数据依据。本章主要研究了三维环境下如何提取产
品加工特征信息如何识别产品加工特征以及如何将特征信息合理整合以方便工艺推理的问题
并对如何定义提取并导出这些信息做详细的描述。
31
加工特征及其分类
加工特征不同于零件几何特征零件几何特征由几何拓扑元素组成包含最基本的点线
面。可以用一个三元组来表示零件的几何特征
GeometricalFeatures
。

FEVGF


31

其中
V
代表点集
SetofVertices

E
代表边线集
SetofEdges

F
代表面集
Setof
Faces
。
加工特征更像是点线面的有机组合。对加工特征比较准确的概括是在加工过程中具有一
定制造意义的零件的区域。并不是所有的零件几何特征都是加工特征但是所有的加工特征都
含有零件的几何特征。如果用
MF

MachiningFeatures
来代表加工特征则
MFGF


32

本文针对机械设计制造过程中的工艺设计部分进行三维化拓展旨在解决大部分零部件设
计制造过程中数据源不单一的问题所以运用特征识别技术所识别的特征应具有普适性即常
见简单特征。自由曲面等复杂特征暂不做讨论。如表
31
所示是几种常见的加工特征。
32
加工特征提取方法概述
提取加工特征信息的关键是特征识别。特征识别是从零部件的三维实体模型中提取具有一
定工程意义的几何信息。
20
世纪
70
年代英国剑桥大学首先对特征识别做出了研究其
CAD
中心于
1975
年第一次从零部件的三维实体模型中提取出了用于计算刀具轨迹的几何形状
48
。
英国剑桥大学
CAD
中心的另一名研究员
Kyprianou
于
1980
年首次提出了特征识别的概念奠
定了基于边界匹配特征识别方法的基础
49
。
作为
CAD
系统和其他
CAx
系统的智能接口特征识别技术经过三十多年的发展已经逐
渐成熟并且越来越多新的特征识别技术也不断涌现
5053
。总体而言特征识别的方法可以分
为两类基于体分解的方法和基于图匹配的方法。
其中相较于基于边界匹配的特征识别方法基于体分解的特征识别方法更适应于曲面尤基于
MBD
的三维工艺设计技术研究
20
其是自由曲面特征的识别但是该方法总体上效率较低所以运用并不广泛。
表
31
几种常见的加工特征
加工特征名称加工特征图样加工特称名称加工特征图样
Step
阶梯槽
Blind
Step
盲阶槽
Through
Slot
通槽
Blind
Slot
盲槽
Through
Pocket
通孔

方
Blind
Pocket
盲孔

方
Through
Hole
通孔

圆
Blind
Hole
盲孔

圆
Protrusion
凸台
Cylinder
柱体
目前基于图匹配的特征识别方法是国内外研究较多的一种方法。而其中属性邻接图
AttributedAdjacencyGraph
法更为常见。但是该方法只能识别槽方孔等由平面组成的且不包
含凸节点的加工特征并不能识别凸台圆孔以及圆柱特征所以不少学者结合其他的算法
对属性邻接图法进行了拓展
5456
。
由于本文所讨论的重点是不包含自由曲面的常见加工特征为了克服属性邻接图方法本身南京航空航天大学硕士学位论文
21
的局限性笔者在
CATIA
二次开发技术的基础上提出了一种拓展属性邻接图的特征识别方法
以期能够更全面准确地识别常见加工特征为接下来的工艺设计奠定基础。
33
基于属性邻接图的特征识别方法
属性邻接图
AttributedAdjacencyGraph

AAG
的概念最早由
Joshi
和
Chang
提出
57
。
AAG
可被定义为一个三元组
G

Graph


TANG


33

其中
N
为节点集
SetofNodes

A
为弧线集
SetofArcs

T
为弧线集中的弧线所拥
有属性的集合
SetofattributestoarcsinA
。属性邻接图法将零件加工特征和零件几何特征很
好地联系在了一起是因为

1

F
面集中的每一个几何组成面
i
f
都对应
N
节点集中的一个元素
i
n
。

2

E
边线集中的每一条边
i
e
都能在
A
弧线集中找到对应的元素
i
a
并且任意一个弧
线
i
a
都连接两个不同的节点
j
n
和
k
n
这代表两个面
1
f
和
2
f
相交并且
i
a
代表交线
i
e
。

3
每一个
A
弧线集中的元素
i
a
都含有自己的属性
i
t
。当

0
i
t
则表示组成这条边现
在由弧线
i
a
表示的两个面为凹关系当

1
i
t
则表示组成这条边的两个面为凸关系。
其中凹关系与凸关系的详细解释如图
31
。当两个面夹角在
0
到
180
度之间则这两个面
组成凹关系两个面之间的夹角为凹角当两个面夹角在
180
度到
360
度之间则两个面组成
凸关系两个面之间的夹角为凸角。
图
31
凸关系与凹关系
对于任意一个几何体与所有相邻几何型面均为凸关系的面通常不是加工面通孔和圆
角除外彼此均形成凸关系的三个面交于一点称为凸点。属性邻接图在进行特征识别之前基于
MBD
的三维工艺设计技术研究
22
会首先将三维模型中的凸点识别出来并删除凸点以及与凸点连接的模型边线以提高特征识别
的效率。但是这样就造成了凸台特征无法被识别如图
32
所示。
图
32
凸台特征及其凸点
所以根据属性邻接图的特性如图
33
所示只有阶梯槽盲阶槽通槽盲槽盲孔

方通孔

方以等不含凸点且以平面组成特征型面的加工特征才能被识别且表示方法唯一。
图
33
几种加工特征的属性邻接图
由于属性邻接图的局限性所以无法直接将属性邻接图法运用于本文所提出的基于
MBD
的三维工艺设计方案中。而基于
MBD
的定义规范结合
CATIA
二次开发技术对属性邻接图法
进行相应的拓展则可以在原有的基础上识别出包括凸台圆柱以及圆孔的特征。南京航空航天大学硕士学位论文
23
34
拓展属性邻接图特征识别方法
341CATIA
二次开发技术
CATIA
是
Dassault
公司开发的一款
CADCAECAM
一体化软件被广泛应用于航空航
天汽车船舶等行业。与
ProE

UG
等软件相比
CATIA
更加精确安全可靠性更高。
随着
CATIA
软件的普及和应用的深入
Dassault
公司所提供的基本模块已经不再能满足一
些用户的需求。一些企业由于实际情况对个性化定制的功能模块需求愈发强烈。因此
CATIA
对不同模块以及组件进行了开放式的构建
58
。虽然这种构建方式导致了整个体系结构十分庞
大但此种体系结构的整体逻辑清晰合理并且大部分接口都是开放的。这就使得用户可以根
据不同的需求对
CATIA
进行二次开发。
CATIA
二次开发接口采用了进程内应用程序
InProcessApplication
和进程外应用程序

OutProcessApplication
两种方式与外部进行通信以下两种开发方式较为常用
59


1

CAAC
或
CAAJAVA
技术
CAA

ComponentApplicationArchitecture
是
CATIA
的一套
C
或
JAVA
函数库开发人员可以通过
RADE

RapidApplicationDevelopment
Environment
模块中
C
或
JAVA
环境进行二次开发工作以满足不同用户的个性化定制的需
求。运用该技术所开发的模块与
Dassualt
公司提供的基本模块结合得十分紧密很难将用户个
性化定制的功能和原系统所具有的功能区分出来便于用户的使用以及系统的集成应用。这种
开发方法虽然入门较难且国内与之相关的教程和资料也很少但由于其稳定性好功能强大
且效率高应用较为普遍。

2

Automation
技术这种方法建立在
COM

ComponentObjectModel
的基础上。基于
COM
技术可以通过一种应用程序对其他应用程序进行操作。简而言之这种方法不直接对数
据进行处理而是通过对属性和对象的识别以间接处理数据。通常而言
CATIA
可以通过宏录
制生成
VB
代码通过阅读和理解找到相应的对象和属性的变量名然后在
VisualStudio
的
VB
环境下对生成的代码稍作修改即可实现所需的功能。这种方法入门容易但稳定性差且功
能限制较大并不能胜任较为复杂的开发任务。
本文所采用的属性邻接图特征识别方法要求识别准确且特征的识别涉及到几何模型的拓
扑关系较为复杂并且特征信息以及基本属性信息的提取都是基于
CATIA
二次开发技术因
此需要一种功能强大且集成性高的
CATIA
二次开发方法因此本文采用
CAAC
技术在
Visual
Studio2005
平台上对
CATIAV5R18
进行相应的二次开发。
开发界面如图
34
所示
CAA
产品的组织框架如图
35

a
所示。它全面展现了
Dassault
几大产品之间的关系以及
CATIA
间不同模块的关系。基于
MBD
的三维工艺设计技术研究
24
图
34CAA
开发平台
用户可以根据
CAA
的构架开发功能强大的交互命令并设计符合用户操作习惯的定制化面
板且能无障碍集成到
CATIA
任务栏中生成与其他模块具有相同风格的模块这使得
Dassault
系统可以像搭积木一样不断发展与壮大
60
。
RADE
模块嵌入
VisualStudio
中如图
35

b
所
示通过查询
RADE
模块
Help
功能可以查询
CATIA
自身
CAA
函数以及
API
接口。

a

CAA
组织框架
b
帮助文档
图
35CAA
组织框架及帮助文档南京航空航天大学硕士学位论文
25
342
基于
MBD
定义的拓展属性邻接图特征识别规则
传统属性邻接图方法对特征的描述简便直观且以邻接矩阵和邻接表的方式存储在计算机
中若只用一位数字
0
或
1
表达面与面之间的凹凸关系则在矩阵中不相邻面之间的关系难
以表达由此会造成传统邻接矩阵表达的不准确性
61
。为解决该问题使用经过拓展的二维矩
阵来存储属性邻接图在
VisualStudio
的
CAAC
环境中以数组来表达其中

1

n
表示构成特征的面的数量整数
0
表示两个面不相交或者凹关系
1
表示两个面的
凸关系。

2
对于数组元素如果则表示
i
面与
j
面之间的关系如果相交则
为凹关系或者凸关系如果不相交则没有关系如果用一个二位数来拓展不同类型面之间的
凹凸关系那么可以在各位上用
0
和
1
来表示凹关系和凸关系在十位上以数字
123
分别表
示平面与平面相交平面与柱面相交柱面与柱面相交

例如可以以
11
来表示两个具有凸
关系的相交平面
10
则表示两个具有凹关系的相交平面
21
则表示具有凸关系的相交柱面和平
面孔以此类推。如果则数组元素表示面的类型则此时二位数中的个位数
即表示外表面和内表面对于平面而言不存在内外表面之分而对于柱面如果是外表面
那就是圆柱面如果是内表面那就是组成圆孔的面比如此时
21
即表示第
i
个面是柱面
20
则表示第
j
个面是组成圆孔的面。
使用该方法可以构建加工特征唯一的属性邻接图矩阵。如图
36
所示左边几何模型显示
的是一个通孔

方中间的图由四个节点连接而成是传统的属性邻接图表示方法右边的矩阵
则是拓展属性邻接图矩阵。
图
36
属性邻接图与拓展属性邻接矩阵
运用
CATIA
二次开发技术对零件模型进行特征识别首先需要解决的问题是如何识别模型
的几何平面。只有准确识别模型的几何平面才能进一步判断平面之间的凹凸关系并以矩阵
的形式存储加工特征最终达到特征识别的目的。
在
CATIA
二次开发环境下模型的几何特征点线面都属于模型的基本元素在点
选模型几何平面时平面以
CATPathElementAgent
代理初始化代码如下
pSelectionPlane1newCATPathElementAgent

SelectionPlane1CATPlane
CATDlgEngWithPrevaluationCATDlgEngWithPSOHSOCATDlgEngRepeat

jiA

ji

ji


jiA















1110010
1011100
0101110
1001011
jiA基于
MBD
的三维工艺设计技术研究
26
其中
pSelectionPlane1
是自定义的代理名称
SelectionPlane1
是自定义的元素名称
CATPlane
是元素类别。
在选择平面的时候先将
pSelectionPlane1
所代表的平面即当前所选平面存储到
CATPathElement
类型的变量中然后再用
CATPathElement
类型变量的
FindElement
方法得到当
前所选平面并最终储存到
CATPlane
中以便进行平面凹凸关系的识别代码如下
CATPathElementpPathSelectedpSelectionPlane1GetValue
CATPlanevarAssPlanepPathSelectedFindElementIIDCATPlane
现在已经得到了点选平面接下来进行平面之间的凹凸关系识别。虽然图
31
直观地描述
了平面间的凹凸关系但在实际开发环境中无法直接得到两个平面间的夹角所以需要对凹
凸关系重新定义使其在三维环境中被准确表示
图
37CATIA
二次开发环境下凹凸关系的定义
如图
37
所示可以通过
CATPlane
类型变量的
GetNormal
方法得到
B
平面的法矢以及法矢
与平面的交点
D

x1y1z1
任意同时任意定义
A
平面上一点
C

x0y0z0
由
C
点以
及
D
点的坐标可以得到
A
面指向
B
面的任意向量并保存在
CATMathVector
类型的变量中
最后通过
CATAngle
类型变量的
GetAngleTo
方法得到两向量之间的夹角并以此判断凹凸关
系代码如下
CATMathPointioOrigin1
CATMathVectorioNormal1
AssPlaneGetNormalioOrigin1ioNormal1
doublexx1x0
doubleyy1y0
doublezz1z0南京航空航天大学硕士学位论文
27
CATMathVectorioNormal2xyz
CATAnglejiajiaoioNormal2GetAngleToioNormal1
得到平面与平面之间的凹凸关系后即可得到加工特征的属性邻接矩阵经过对比得到识
别的加工特征。
运用
CATIA
二次开发技术还可以对柱面组成的特征圆柱和孔进行特征识别。
圆柱和孔特征都由圆柱面和平面组成区分这两个特征的关键是圆柱面与平面的凹凸关系。
图
38
表述了如何判断圆弧边的凹凸性
62
。
图
38
圆弧边的凹凸性判断
在图
38
中面
F
1
和面
F
2
相交于圆弧
e
其圆心为
P
0

P为e
上任意一点由
P
和
P
0
确
定矢量

为面
F
1
的法矢。由和确定圆弧
e
的方向矢量。取的
反向向量分别由和确定过点
P
的切向量如果柱面是外表
面则取如果柱面为内表面则取。为了判断凹凸性需
计算方向矢量如果与反向则圆弧
e
为凸边否则为凹边。
而对于圆柱特征和盲孔特征其特征组成面之间的凹凸关系是相同的所以这两个特征的
属性邻接矩阵也完全一样因此传统的凹凸关系判断和属性邻接图不能很好地在
CATIA
二次开
发环境中区分圆柱特征和盲孔特征。但是如果引入特征终止面和特征专属面的概念
则可以在人为定义特征终止面的基础上结合属性邻接矩阵在
CATIA
二次开发环境中对圆柱
特征和盲孔特征进行准确识别。
特征终止面可以理解为加工该特征时最后加工到的平面。
特征专属面可以理解为加工特征中只与组成特征的型面相交而不与工件几何模型的
其他型面相交的平面。
如图
39
所示圆柱特征外表面的特征终止面与特征专属面不是同一个平面而盲孔
特征内表面的特征终止面与特征专属面重合
1
eNvecPN


vcRecVecPev


NvecVecR


2
NevecRcV


2
2
N

NeN

vecP

1
N

vecP

1
N

1
N

ecV

vecP

ecV

N

1
N

F
1
e
F
2
N

vecR

ecV

1
N

vecP

eN

2
N

P
P
0基于
MBD
的三维工艺设计技术研究
28

a
柱面外表面及其凹凸关系
b
柱面内表面及其凹凸关系
图
39
柱面的内外表面及其凹凸关系
这里仅仅讨论盲孔和凸台至于通孔由于其两边的平面都与特征内表面都具有凸关系
分辨较为容易所以不做赘述。
在
CATIA
二次开发环境中与选择平面的方法类似点选柱面时也需要一个代理

只不
过自定义元素名称和元素类别需要修改元素类别由
CATPlane
变为
CATCylinder
代码如下
pSelectionPlane1newCATPathElementAgent

SelectionAgent1CATCylinder
CATDlgEngWithPrevaluationCATDlgEngWithPSOHSOCATDlgEngRepeat
将柱面元素储存到变量中的方法也与平面的类似代码如下
CATPathElementpPathSelectedpSelectionAgent1GetValue
CATCylindervarsurpPathSelectedFindElementIIDCATCylinder
CATIA
二次开发技术将
CATIA
三维模型中的几何型面和
CAAC
中的代码紧密结合使
得几何拓扑理论的实现成为了可能也方便用户自定义功能。基于
MBD
定义概念结合
CATIA
二次开发技术本文对原有的属性邻接图方法进行了拓展对各类基本加工特征的识别方法进
行了规范和统一也成功将柱体特征和盲孔特征识别并区分开来。
CATIA
二次开发技术给
MBD
的研究提供了不少便利它不仅能够提取几何模型中的加工
特征也能提取这些加工特征的相关信息。
35
型面粗糙度的提取规则
如前文所言
CAA
包含了不同的模块在
CATIA
环境下标注粗糙度尺寸公差等
包含在
MechanicalDesign
模块下的
FunctionalTolerancingAnnotation
子模块中。要对型面粗糙
度进行提取需要在
CATIA
二次开发环境中找到
FunctionalTolerancingAnnotation
模块下的
相应函数和指令并通过
CAAC
程序将三维模型中的标注信息和指令代码结合起来。
因为标注信息依附于三维零件模型所以在提取标注信息之前首先需要将三维零件模型
与代码建立对应关系代码如下南京航空航天大学硕士学位论文
29
CATPrtContainervarspPartContainerNULLvar
CATPrtContainer
变量存放当前零件
Part
CATFrmEditorpEditorCATFrmEditorGetCurrentEditor
GetCurrentEditor
方法是进入当前编辑界面
ifpEditorNULL
CATPathElementspPathpEditorGetUIActiveObject
GetUIActiveObject
方法是为了得到当前编辑界面中激活的对象这里是零件基本集
CATBaseUnknownspRefspPathCurrentElement
CurrentElement
方法即是零件基本集中的当前元素这里指零件模型本身但
CATBaseUnknown
类型变量并不能直接对零件模型进行处理需要转换成可处理的
CATPrtContainner
类型接下来的程序实际上就是一个不断转换接口的过程

IfspRef
判断当前编辑界面下是否存在零件
CATLinkableObjectpiLinkableObjectNULL
HRESULTrcspRefQueryInterfaceIIDCATLinkableObjectvoid
piLinkableObject
QueryInterface
是强制访问使
CATBaseUnknown
和
CATLinkableObject
类型的
变量建立联系
rc
是判断语句

ifSUCCEEDEDrc
pDocumentpiLinkableObjectGetDocument

如果强制访问成功则使用
CATLinableObject
类型变量下的
GetDocument
方法得到当前文档并存储在
CATDocument
类型变量下

piLinkableObjectRelease
piLinkableObjectNULL
ifNULLpDocument

CATInitvarspInitpDocument
spPartContainerCATIPrtContainerspInit
GetRootContainerCATIPrtContainer

最终将当前编辑界面激活的零件存储到
CATIPrtContainer
类型的变量下


基于
MBD
的三维工艺设计技术研究
30

至此
CATPrtContainer
类型变量存储着当前编辑界面的三维零件实体模型。对于实体模
型中的标注信息可以通过
CATVisPropertiesValues
类型的变量得到代码如下
CATIDocRootspiDocRootsOnDocNULL
pDocumetQueryInterfaceIIDCCATIDocRootsvoidpiDocRootsOnDoc
CATListValCATBaseUnknownvarpRootPartspiDocRootsOnDocGiveDocRoots
CATISpecObjectptpssetNULL
CATITPSServicesContainerspiTPSServicesContainersNULL
CATTPSInstantiateComponentDfTPSItfTPSServicesContainervoid
piTPSServicesContainers
CATITPSSETpiTPSSetNULL
CATTPSSetObtentionModemodeNoCreation
CATBoolenresultFALSE
piTPSServicesContainersRetrieveOrCreateCurrentTPssetspPartContainermodepiTPSSet
result

查找当前零件中的标注信息若存在则进入条件判断
ifpiTPSSet
CATVisPropertiesValuesprop

定义
CATVisPropertiesValues
变量粗糙度等信息储存在此
PropSetShowAttrCATShowAttr
CATIModelEventspMENULL
piTPSSetQueryInterfaceIIDCATISpecObjectvoidptpsset
ptpssetQueryInterfaceIIDCATIModelEventsvoidpME
CATModifyVisPropertiesnotifptpssetNULLCATVPGlobalTypeCATVPShow
prop
定义
CATModifyVisProperties
变量使得粗糙度等标注信息可读取或可修改
pMEDispatchnotif
CATIDescendantspdes1NULL
piTPSSetQueryInterfaceIIDCATIDescendantsvoidpdes1
CATListValCATISpecObjectvarsetlist1
intiListsetList1Size
ifiList0
南京航空航天大学硕士学位论文
31
forintk1kiListk

CATIAliasvarspAliassetList1k
CATUnicodeStringsspAliasGetAlias

在标注集中找到粗糙度粗糙度信息存放在此
ifsSearchSubString
粗糙度
1

CATICkeParmvarpameter1spAlias
CATUnicodeStringoEntryNULL
oEntrypameter1ValueAsString
dlgCombo089SetFieldoEntry
dlg
代表当前二次开发交互界面
Combo089
即是显示粗糙度信息的
容器这里已经将粗糙度信息存放在
CATUnicodeString
变量中了





至此粗糙度信息被成功提取代码中接口转换流程如图
310
所示。
图
310
代码接口转换流程及代码接口与
CATIA
三维模型的对应关系
最终提取结果如图
311
所示。基于
MBD
的三维工艺设计方案需要对特征信息进行提取基于
MBD
的三维工艺设计技术研究
32
结合
CATIA
二次开发技术找到对应的接口可以方便实现特征信息的提取。
图
311
加工特征粗糙度提取
36
基于
MBD
定义的特征尺寸提取规则
由于本文仅讨论简单特征所以特征尺寸分类较为直观如图
312
所示共分为两类
图
312
特征尺寸分类
这两类分别是面与面之间的距离其中包含了边长轴长以及孔深这三种距离都可以
通过计算两平行平面间距离得到另一种是柱面直径包含了轴径和孔径这两种尺寸都可以
通过提取柱面直径得到。
特征尺寸
柱面直径
面与面之间的距离南京航空航天大学硕士学位论文
33
在
CATIA
二次开发环境中两平行平面间的距离可以通过
CATMathPlane
类型变量的
DistanceTo
方法得到轴长和孔深可以通过
CATCylinder
类型变量的
GetEndlength
方法和
GetStartLength
方法得到柱面的起始和终止长度并对两个长度做减法取绝对值即可得到柱面
长度即这里的轴长或孔深柱面直径可以通过
CATCylinder
类型变量的
GetRadius
方法得到
结果如图
313
所示。
图
313
特征信息识别与特征尺寸提取
37
基于
MBD
的热处理信息定义规则
热处理信息通常由工艺人员制定。作为常用信息热处理信息应该被定义为可以快速读取
和生成的。本文基于
XML
文件对热处理信息提出了一种新的管理模式即面对需要做相同
热处理的不同工件工艺人员无需对热处理方式进行重复填写只需选择自定义界面中相关下
拉菜单的选项即可。同时根据个人习惯可以通过



按钮对热处理信息进行添加或
删除充分体现了功能定制的个性化。
用固定路径的
XML
文件存储这些常用热处理信息可以使信息管理更合理。启动自定义
界面时加载储存信息的
XML
文件并在界面关闭后对
XML
文件进行更新。具体操作流程如
图
314
所示热处理信息的
XML
表达规范如图
315
所示。基于
MBD
的三维工艺设计技术研究
34
图
314
基于
XML
文件的热处理信息管理操作流程
图
315
热处理信息的
XML
表达规范
下面以热处理方式也就是这里的
HeatTreatmentMethod
为例对



按钮的功能
进行详细描述。热处理方式下拉菜单中的常用方法包含了四把火淬火正火退火和回火
如图
316
所示

1


新增内容添加渗碳淬火为常用方法。当下拉菜单中不存在渗碳淬火时点击


会将渗碳淬火添加进来。

2


内容置顶选择正火然后点击

则正火置顶。

3


删除内容选择淬火点击

则淬火已不在下拉菜单中。南京航空航天大学硕士学位论文
35
图
316
热处理信息管理操作效果图
38
基于
MBD
的加工特征信息管理技术
381
基于
MBD
的加工特征信息表达形式
提取零件加工特征信息后需要对其进行整合以形成具有层次感的信息组合便于进行下
一步的工艺推理。由
MBD
定义规范本文将加工特征信息以几何图形集的形式悬挂在
CATIA
三维模型设计树下其内存储了工艺推理所必须用到的加工特征类型加工型面粗糙度加工
特征关键尺寸以及材料基本热处理信息便于刀具选择整体结构以及各部分详细定义内容如
图
317
所示。其中加工特征类型单独成为一类这样便于工艺推理中机床刀具以及工艺参
数的推荐。而且在传统二维工艺卡片中一个工序即对应一个加工特征所以以加工特征类
型区分加工特征信息符合传统工艺编制思路工艺人员在从二维工艺编制到三维工艺编制的转
换过程中更容易适应。
图
317
基于
MBD
的加工特征信息几何图形集表达形式
增加内容

删除内容
内容置顶

基于
MBD
的三维工艺设计技术研究
36
382
基于
MBD
的加工特征信息传递方法
在基于
MBD
的三维工艺设计方案中所提取到的加工特征信息除了要合理表示外还要
合理传递。前文提到了以
XML
文件储存热处理信息的方式这里也将沿用。
XML
全名
ExtensibleMarkupLanguage
可扩展标记语言是一种用于标记电子文件并使其
具有一定层次结构的标记语言它同时也是一种以文本格式存储数据的方式这就意味着它能
被任何计算机读取。因此
XML
文件在信息传递上具有天然的优势。
基于
MBD
的加工特征信息以几何图形集的形式表达后还需要以
XML
文件的形式存储
其中特征类型
Feature
作为父节点包含各自的特征尺寸这里以
xyz
表示便于后面
计算特征体积以及特征型面粗糙度
Roughness
而材料信息
Material
零件基本信息

BasicInfo
以及毛坯尺寸
WorkBlankSize
与特征类型在同一级它们都隶属于加工特征信
息
ProcessInfo
这一父节点如图
318
所示。
图
318
加工特征信息的
XML
存储形式南京航空航天大学硕士学位论文
37
39
本章小结
本章首先对常见加工特征进行了定义与分类并分析了传统特征识别方法的不足然后基
于
MBD
技术特点结合
CATIA
二次开发技术对传统属性邻接图特征识别方法进行了拓展
实现了常见加工特征类型的识别本章还定义了基于
MBD
的加工特征信息提取规范列出了
加工特征型面粗糙度的提取流程并给出了关键代码同时本章也提出了基于
MBD
的加工特
征关键尺寸识别方法以及基于
MBD
的热处理信息定义规范最后详细讨论了基于
MBD
的
加工特征信息管理技术给出了以几何图形集为表达形式的管理方法提出了以
XML
文件为
媒介的信息传递方案。
基于
MBD
定义的加工特征信息管理方法在本章已经基本介绍完毕。加工特征信息的提取
是基于
MBD
的三维工艺设计总体方案中的第一个步骤同时也是极为关键的一步。加工特征
信息提取的准确性存储的合理性是否具有清晰的结构以及传递的效率将会直接影响到后
续的工艺推理。基于
MBD
的三维工艺设计技术研究
38
第四章工艺知识表示与语义推理技术研究
上一章详细讨论了基于
MBD
的加工特征信息管理技术提出了以
XML
文件为媒介的信息
传递方案。在获取三维模型的加工特征信息后需要针对特征信息进行工艺推理以得到更多
的加工信息。考虑到工艺知识的多样性本章引入本体技术研究如何运用本体技术合理构建
逻辑结构明显的工艺知识库如何根据已经构建的工艺知识库构建规则库并进行推理的问题。
41
基于本体的工艺知识库构建
本体
Ontology
最早源自于哲学的概念哲学中本体研究事物的本质及本源
63
。由于本体采
用精确的形式语言句法以及确定的语义使得所需要描述的领域中概念之间的关系更加精确
很大程度上减少了概念之间的误解
64
。本体不仅能够支持工艺知识的表示处理以及语义表达
同时运用本体对工艺知识进行处理也可以从不同的概念层次上构建与工艺知识相关的统一
的术语以及这些术语之间的关联关系。考虑到本体技术可复用等特性多被应用于并行化产品
设计
65
以及工艺信息检索
66
为信息检索和设计重用带来了不少便利。
本体语言有
XML

RDF
和
OWL
。其中
XML
和
OWL
可以相互转换
67
而
OWL
通过对
概念属性的关系描述构成了概念间复杂的关系网。本体构建的重点是研究如何根据不同概
念间的关系进行拓展与推理几种常见的概念关系有
1

kindof
或
isSubclassOf
表示概念间
的包含关系如特征类型属于加工特征信息
2

instanceof
表示类与实例的包含关系
如机床中含有车床
3

attributeof
表示概念与属性的从属关系如零件含有材
料性质的属性。
工艺本体知识库的构建过程比较复杂工艺本体知识库构建的合理性将对推理效率和结果
精度产生很大影响。本节主要对工艺领域本体的构建展开研究。
411
工艺本体构建流程
构建本体库是运用本体技术进行语义推理的前提国内外专家学者构建本体进行了大量研
究但目前尚未形成统一的构建规范。几种具有借鉴意义的构建本体的方法有骨架法
Sensus
法等。
骨架法由
MikeUscholde
等人在企业本体基础上提出是企业中常用术语和定义的集合。
运用骨架法的关键是要对本体所涉及的术语和定义进行准确提炼并对这些术语和定义的关系
进行分析接着选择适合的模型来表达本体知识。
本文将参照骨架法来构建工艺知识本体库图
41
显示了构建本体的流程。南京航空航天大学硕士学位论文
39
图
41
本体构建流程
构建流程如下

1
确定本体的范围和领域。这是构建本体所需明确的最基本问题即本体适用于何种
范围本体描述了哪些信息种类本体构建的目的和意义以及使用本体的对象是谁。

2
考虑重用现存工艺本体。通过对已存在的相关本体进行精炼扩充和修改可以避免一
些重复性的本体构建工作。即使已存在的本体无法完全满足需求开发人员通常也会从中得到
有益的启发。

3
提炼与工艺知识相关的重要术语。对加工过程中所涉及的工艺知识进行全面归纳是非
常重要的这些工艺术语能够大致表示工艺本体建模过程所涉及的概念属性以及它们之间的
关系等并且这些术语能保证最终构建的工艺本体不会偏离应用范围和领域。

4
定义类与类之间的层次关系。类之间层次的定义可以采用自上向下的方法或自下向上
的方法。从类的定义开始抽取已提炼对象中具有代表性的术语并以这些术语作为本体中的
类然后根据彼此的关系组成分类体系。这一步应确保分类层次的合理性。同时类层次中的
继承父子兄弟关系需要分析清楚而不相关特性也要区别出来。

5
定义类的属性仅有类以及类之间的层次关系并不能解决很多问题一旦定义了类及
其层次还需要对类自身的属性以及属性之间的关系进行定义。

6
定义属性。对类的属性进一步定义即限制属性的定义域和值域并对类的属性赋值。

7
添加实例。确定与类最接近的个体并添加到该类中作为该类的实例。同时实例也具
有属性对实例的属性进行赋值。基于
MBD
的三维工艺设计技术研究
40
总而言之本体的构建是对术语不断提炼并分类然后对类填充实例和属性并赋值的过程。
相比于传统的数据库构建本体库构建的过程中更强调知识之间的逻辑性以及定义的准确性。
412
构建工艺本体知识库
本体构建中的重点就是如何通过定义类属性以及实例来准确描述概念以及术语间的关系。
为了构建本体知识库首先需要对工艺相关的知识以及概念进行抽取。通过对工艺手册的查阅
加工现场的经验积累以及对工艺卡片中信息的提炼可以概括出与工艺本体有重要关系的知识
和概念。
根据以上流程为了构建基于本体的工艺知识库首先需要对工艺设计中所涉及的知识以
及术语进行获取。通过对机械加工工艺手册工艺卡片等相关资料的分析可以抽取出与工艺
有重要关系的术语。这些术语在本体中可能是类可能是属性也可能是实例并且它们可能
彼此重叠和交叉。
抽取的相关术语如下限于篇幅这里只介绍部分术语

1
有关工艺实体的术语
零件是机械中不可拆分的单个制件也是机械制造过程中的基本单元被加工对象。
机床是加工制造各种零件的机器。
刀具是机械制造中用于切削加工的工具安装在机床上用于加工零件。
加工参数是完成某一个某一个加工步骤所需要确定的数据。

2
有关零件特征的术语
孔实体中的内圆面所组成的特征分为盲孔通孔等。
柱体外圆面所组成的特征特征描述为外圆直径和长度。
槽两端高起中间凹下的特征凹下的部分叫槽。

3
有关加工参数的术语
切削速度在主运动方向上刀具切削刃上一点相对于工件待加工表面的位移
进给量是指刀具在进给运动方向上相对工件的位移量。
切削深度刀具上的基准点沿着刀具轨迹相对于工件移动时的速度。
主轴转速机床主轴的转动速度机床主轴指的是机床上带动工件或刀具旋转的轴。

4
有关加工方法的术语
车削主要用于加工回转表面常用车床。
铣削主要用于加工平面或凹槽常用铣床。
钻削是孔加工的一种基本方法。
磨削主要用于加工表面以获得较高精度。

5
有关属性术语南京航空航天大学硕士学位论文
41
对象材料包括工件材料和刀具材料是描述工件或者刀具的重要信息。
几何参数包括机床的规格以及刀具加工工件时所采用的参数指标比如刃倾角等。

6
有关性能的术语
硬度包括工件的硬度和刀具的硬度直接影响到刀具的选择。
加工硬化金属材料的性质塑性变形情况下体现又称为冷作硬化这里的冷是指
低于再结晶温度硬化指的是金属材料的强度和硬度提升而同时金属材料的韧性和塑性
下降。
延展性分为延性和展性均为物理性质主要指物体在外力作用下碾成薄片或拉伸成细
丝而不破裂或断裂的性质。
导热性物质传到热量的性能成为导热性。
图
42
比较完整地表示了提炼的各种知识术语在工艺本体中的逻辑关系。
其中工件材料有加工硬化等材料属性刀具的选择主要取决于这些属性设计完成的零
件所包含的特征类型以及特征信息中的表面粗糙度共同决定了加工方法和机床种类零件特征
所包含的特征信息和选定的刀具机床等共同影响加工参数的选择。工件材料特征刀
具机床以及工艺参数都有各自的知识库。
其中切削速度受到很多因素影响概括起来有以下几点

1
刀具材料最高切削速度受刀具材料的影响其中碳化物刀具耐高温切削速度可
以达到
100mmin
以上高速钢刀具耐高温切削速度小于
50mmin
陶瓷刀具的耐高温切削速
度可以达到
1000mmin
。

2
工件材料刀具切削速度也受工件材料硬度的影响。材料硬度与切削速度呈负相关
的关系即材料硬度较高时应选择较低的切削速度进行加工材料硬度较低应选择较高的
切削速度进行加工。

3
刀具寿命切削速度越高刀具寿命越短反之刀具寿命越长。如果对刀具寿命
有所要求应对切削速度做出适当调整。

4
切削深度与进刀量进刀量与切削深度越大则切削抗力也会变大切削热增加
此时应适当降低切削速度反之可适当提高切削速度。

5
刀具形状切削速度的选择往往受到刀具形状等因素的影响。
切削深度收到机床刚度的影响。通常而言为了减少走刀数切削深度应尽可能大。
机床允许的切削速度和所选刀具是确定主轴转速的主要考虑因素。如果根据公式计算得到
的机床主轴转速不是标准主轴转速则选用靠近计算值的机床允许主轴转速。并对切削速度做
出修改。而进给量则要根据零件表面粗糙度加工精度以及工件和刀具的材料来选择。基于
MBD
的三维工艺设计技术研究
42
图
42
知识术语关系图
413
工艺本体知识库详细描述
根据上述关系以及所提炼的知识术语通过
Protg
构建工艺领域本体。
Protg
既可以对
本体进行开发也能对本体中涉及的相关知识进行编辑。它是本体概念中的类关系属性以南京航空航天大学硕士学位论文
43
及实例的构建的平台。上文描述的各种知识术语中有的是本体中的类有的是实例有的是
属性。
其中类
Class
代表了一个领域中最基本的概念包含子类
SubClass
类和子类之间
有着严格的层级关系如图
43
所示又可以将呈树状层次结构的类表示为三层顶层
Top
Level
中间层
MiddleLevel
和底层
BottomLevel
。顶层的类之间一般具有明确的差异
性比如这里的
Tool
和
WorkpieceMaterial
就分属不同的两类而中间层通常是顶层的详细分
类比如
Tool
这里是刀具又分为
ToolMaterial
和
GeometricalParameters
底层通常是具
体到可用实例枚举出来的类比如这里的
CBN
以及
UsedforAlloy
即用于切削合金的硬质
合金刀具。
图
43
类的层级关系
实例
Instance
作为类的个体表明这个类中包含的个体。图
44
中类名后面的括号中
的数字即是这个类中实例的具体数量右边即是所列举的实例。图
45
比较直观地表达了这种
包含关系。
而属性
Property
又分为对象属性
OP

ObjectProperty
和数据属性
DP

Data
Property
对象属性描述了类与类类与个体以及个体与个体之间的关系数据属性将类中的
个体和数据值联系起来。
TopLevel
Middle
Level
BottomLevel基于
MBD
的三维工艺设计技术研究
44
图
44
实例的构建
图
45
类与实例的包含关系
图
46
为部分工艺领域本体大致结构与图
42
所对应。该图清晰地表达了工艺领域中类
与类的关系比如
PartFeatures
这个类表示的是零件特征它含有
FeatureType
和
FeatureInformation
这两个子类分别代表特征类型和特征信息其中
FeatureInformation
特
征信息又包含了
Roughness
粗糙度和
GeometricTolerance
几何公差等关键信息。南京航空航天大学硕士学位论文
45
图
46
工艺本体构建部分示例
42
基于
SWRL
的工艺规则库构建
本体构建完成后需要根据已经构建的本体知识库建立规则库。
SWRL

SemanticWeb
RuleLanguage
作为一种采用语义方式进行规则描述的语言可以结合
OWL
本体所描述的
概念弥补了
OWL
在规则描述以及推理方面的不足。通过调用已经建立好的本体和自定义的
SWRL
规则
SWRL
可以实现对本体进行进一步的完善进而定义本体术语之间的逻辑关系
直至形成可推理的规则基础
68
。
421SWRL
规则简介
SWRL
所编写的规则由两部分构成一个是规则的前提
antecedent
另一个是规则的结论
consequent
前提与结论之间用箭头连接标明如果满足前提那么结论也满足
69
。例如关
系
Uncle
可以用一阶逻辑来定义
hasParentxyhasBrotheryzhasUnclexz
这里
ParentxyBrotheryz
即是这条规则的前提这里的
x

y

z
都是变量
OWL
实例或者是数据值。这条规则的前提表明
y
是
x
的
parent
同时
y
是
z
的
brother
。
Unclexz
则是这条规则的结论表示
z
是
x
的
uncle
。在这条规则中
Parent
和
Uncle
的
关系在
OWL
本体中已经存在
SWRL
可以通过本体中已经定义的概念和概念之间的关系得到
结果。
一般来说规则中的基本术语可以由
Pxy

Cx
以及
SameAsxy
和
Differentxy
等
组成。
C
可以是
OWL
中的类这里的
x
就是类中的实例
P
表示属性属性分为对象属性
Object
Property
和数据属性
DataProperty
如果是对象属性则
Pxy
表示变量
x
和
y
通过属性
P
发生联系如果是数据属性则
Pxy
表示将变量
x
所属类的个体和
y
所代表的数值联系起来基于
MBD
的三维工艺设计技术研究
46
如果
x
和
y
被描述为相同的对象则用
SameAsxy
表示反之则
Differentxy
成立。
422SWRL
规则详细建立过程
在已经建好的工艺知识本体的基础上通过对本体概念的提取确定出工艺推理所涉及的具
体推理元素并根据实际加工经验以及制定工艺的基本原则建立推理规则。工艺推理规则的推
理结果将实现工件特征实例加工路线以及加工参数实例的联系。举例说明
规则
1
工件材料的硬度和延展性越大所需刀具的硬度和强度越高。
规则
2
所识别的零件特征类型为凸台
Protrusion
选用加工方法为铣削对应工步依
次为装夹粗铣半精铣精铣选用机床为铣床。
规则
3
所识别的零件特征为柱体
Cylinder
零件材料为
45
钢则选用加工方法为车
削机床选用车床如果无特殊要求则车床的型号大致根据所加工零件的尺寸来确定即能
满足零件特征的加工需求即可。推荐切削深度小于
1mm
进给量可选为
01mm015mmr

切削速度可定为
80m100mmin
主轴转速可以用公式
n1000Vcd
来确定并结合机床主
轴转速表取近似值这里的
n
即是主轴转速
Vc
为切削速度单位为
mmin

d
为工件直径
这里为所识别的特征外圆的直径。

以规则
3
为例如前文所说一条
SWRL
规则应该包含一个前提
antecedent
和一个结论
consequent
这条规则中的前提包含了零件的特征类型特征几何尺寸以及零件材料所得到
的结论包含了加工方法机床类型切削深度等工艺参数。那么规则
3
应以如下方式合理表示
45
钢

外圆

直径
50mm
表面粗糙度
Ra63

车削

切削深度
1mm
进给量
001mm
切削速度
80mmin
在
SWRL
中表示上述规则为
CarbonSteelSteel45FeatureType
柱体
DiameterExcirclex20
Roughnessy63ChooseProcessModezaCuttingDepthbc
FeedperRevolutionmmdeCuttingSpeedmperminfg

ChooseProcessModez
车削
CuttingDepthb1FeedperRevolutionmmd1
CuttingSpeedmperminf80
在
SWRL
规则中结论中所出现的变量在前提中也必须出现否则会报错。比如这里结论
中所出现的
ChooseProcessModez
车削

在前提中也必须出现而在前提中变量
a
即
是需要推理的未知量这里给出的结果是车削即车削替代了变量
a
。
由于工步信息过多所以规则
3
所提到的加工参数并非精确值而是一个大概的范围。
在
Protg
中初步建立的工艺推理规则如图
47
所示。南京航空航天大学硕士学位论文
47
图
47SWRL
格式的规则
3
43
基于本体与
SWRL
工艺规则的推理实现
本文采用了本体技术和
SWRL
规则语言分别进行了工艺知识库和规则库构建然后运用
Jess
推理引擎进行工艺知识的推理具体流程如图
48
所示首先采用
CATIA
二次开发技术
实现三维零件模型特征信息的提取如前文所言所提取的特征信息包含了加工特征类型特
征的关键尺寸加工特征型面的表面粗糙度以及零件材料的热处理材料信息等并将所提
取的特征信息保存为
XML
格式文件然后对
XML
文件进行信息预处理以便和已构建好的工艺
本体库进行匹配如果匹配成功则特征信息所涉及到的
OWL
数据和与之相关联的
SWRL
规
则将会被提取然后被转换成
Jess
推理引擎所能识别的内容并进行推理最终得到推理结果
若匹配失败则需要根据新的特征信息对已构建的本体库和规则库进行添加和修改并重新进
行匹配。
Jess
全名为
JavaExpertSystemShell
是
20
世纪
90
年代由
Sandia
美国国家实验室的
ErnestFridmanHill
设计的一个规则引擎它能够提供适合自动化专家系统的逻辑编程。
Jess
的优势在于它小巧轻便处理迅速而且是已知推理引擎中速度最快的同时它也能和所有的
JAVAAPI
兼容针对第三章中所提及的
CATIA
二次开发技术
Jess
引擎也能与
CAAJava
平
台进行很好的融合。本文基于已建立好的本体知识库和
SWRL
规则库运用
Jess
推理引擎进
行工艺参数的相关推理。
将
SWRL
规则与
OWL
本体库的实例通过
SwrlJessTab
转化为
Jess
能识别的术语之后
运用
Jess
推理机对所建立的工艺规则进行推理
70
。而本体的构建
SWRL
规则的编写以及
Jess
推理机的运行都可以在
Protg
中进行。上文提到的本体知识库以及
SWRL
规则库的构建以
及根据所建立的规则进行
Jess
推理都可以在
Protg
的
OWLPlugin
中运行。基于
MBD
的三维工艺设计技术研究
48
图
48
基于本体的工艺信息推理流程
推理结果如图
49
所示。所加载的规则是规则
3

OWL
和
SWRL
转化成
Jess
所能识别的
格式
OWLSWRLJess
用时
226
毫秒执行推理引擎后
RunJess
成功将推理的结
果转换成了可解析的
OWL
格式文件
JessOWL
。
OWL
文件中的类属性和实例均可被
解析并最终形成
XML
文件。南京航空航天大学硕士学位论文
49
图
49
工艺规则推理结果
44
本章小结
加工参数的判断乃至于刀具的选择等工艺知识的推理都是一个非常复杂的过程常常需要
考虑很多因素同时工艺人员也需要具备大量的实际操作经验。如果要比较准确地实现工艺知
识的推理则必然需要加入许多判断条件。本章将本体技术引入到工艺推理中将
SWRL
规则用
作工艺推理规则并结合
Jess
推理引擎提出了一种基于本体的工艺知识表示和语义推理方法
为基于
MBD
的三维工艺设计方案中建立智能化工艺知识库和工艺推理知识再利用提供了参考。
同时推理所得的基本工艺信息将会反馈给工艺设计人员以供修改和完善。
成功执行规则引擎
成功将推理结果转换成
OWL
格式
文件

可转换成
XML
格式文件

选择所加载的规则
转换
格式
用时
226
毫秒基于
MBD
的三维工艺设计技术研究
50
第五章基于
MBD
的三维工艺信息表达技术研究
在三维工艺设计过程中经过工艺推理得到的工艺参数与机床刀具等零件加工的重要信
息需要经过修改并完善后与三维零件模型存放在一起并且以一种合理直观的方式呈现出
来。本章将提出基于
MBD
的三维工艺信息表达流程并研究如何合理表达完整的基于
MBD
的三维工艺信息以及如何将工序模型以轻量化模型的形式发布到加工现场。
51
基于
MBD
的三维工艺信息表达流程
基于
MBD
的三维工艺表达首先需要导入推理后得到的
XML
文件操作流程如图
51
。
图
51
基于
MBD
的三维工艺信息表达流程南京航空航天大学硕士学位论文
51
图中工艺信息表达流程分为两个部分。第一部分在
CATIA
环境下首先需要将推理得到
的结果以
XML
形式的文件导入到
CATIA
建模环境下并在开发的界面中显示所读取的
XML
文件中的相关信息然后由工艺设计人员首先对工序信息的合理性进行判断如果合理则继
续审查每道工序的工步信息如果工序信息不合理则做出相应的修改和微调接下来判断工
步信息流程与审查工序信息相同工序与工步信息审查并修改完毕后将包含零件基本信息
在内的所有工艺信息以呈树状结构的几何图形集显示在
CATIA
结构树下随后工艺设计人员
根据已经排布的工序逆向生成零件工序模型并保存成轻量化模型的形式最后将轻量化的
工序模型和工艺信息
XML
格式统一导出到加工现场并在无
CATIA
环境下显示。
52CATIA
环境下基于
MBD
的三维工艺信息表达技术
如图
52
所示是
CATIA
中所开发的工艺
MBD
信息编辑界面。
图
52CATIA
中所开发的工艺
MBD
信息编辑界面
其中零件基本信息材料注释热处理注释技术要求注释可以直接读取而工序信息
则按照所识别的特征顺序默认排序并且显示了初步推理得到的特征体积加工方法选用机
床设备以及该工序所需要的工时信息。工步信息只显示所选工序对应的工步并且工步中
操作流程
工序基本
信息和工
序内容
工步微调
工步信息列表
工步基本
信息和加
工参数
零件基本
信息
工序信息列表
工序微调基于
MBD
的三维工艺设计技术研究
52
的第一个工步内容都默认为装夹。
一道工序对应一个夹具和切削液同时在传统的二维工序卡片里每道工序也对应一定
的工时而这些信息需要工艺设计人员按实际情况填写所以在工序信息列表上的工序条
件内这些信息都可以填写并添加到工序信息列表内。
在工序信息列表的旁边本文设计了工序微调这是考虑到推理得到的工序不一定
准确工艺人员可以根据自己的长期经验或者实际加工现场情况进行微调已得到最满意的工
序排列。
最下方的工步信息列表中包含了工步所属工序工步内容工位器具所选刀具工
艺设备工步工时以及加工参数包含主轴转速切削速度进给量切削深度和进给次数。
由于工步内容只是根据每道工序对应加工特征的常用加工路线所简单推理得到并不一定能满
足所有加工情况所以工艺设计人员可以根据实际需要对工步信息进行工步微调。工步
微调包含了添加工步删除工步上移工步和下移工步四个功能
可以基本满足工艺设计人员的工步调整要求。
同时工步信息中的工时以及加工参数可以通过界面上方的加工参数和工步信息
模块修改。在工序信息列表上方还有一行操作流程这里面分别包含了导入工艺文
件排布工序确认修改工序信息显示保存工序模型导出完整工艺信息至加
工现场这几个按钮分别对应图
51
中的相关流程。下面针对其中的一些流程做详细说明。
521
排布工序
工序的合理排布对零件质量以及生产效率都至关重要。
通常而言工艺顺序的安排具有以下几点原则

1
先面后孔一般情况下当零件上有较大平面可用作定位基准时应先加工平面作
为定位面然后加工孔。此种排序可以保重定位准确稳定同时也方便装夹。

2
先主后次先加工主要平面后加工次要平面。这里的主要表面是指主要工作面以
及设计基准面次要表面是指键槽等其他表面。因为次要表面相对于主要表面会有位置要求
因此要等到主要表面达到一定要求后再加工次要表面。

3
先粗后精先考虑粗加工后考虑精加工。
而热处理工序则又分为两种一种是为了改善切削性能的热处理工序还有一种是为了消
除内应力的热处理工序。前者通常安排在切削加工之前后者通常安排在粗加工之后。
而工序的具体排布还要依据工艺设计人员长期积累的经验以及加工现场的实际情况因此
工序的微调不可避免。
但是除了以上几点基本原则本文还考虑到了以下两种情况并将之编入了排布工序南京航空航天大学硕士学位论文
53
功能键中。
如图
53
所示在
53a
中通槽内有三个通孔可以先钻孔再铣槽也可以先铣槽再钻
孔如果槽特征的体积大于孔特征的体积那么应当先铣槽。先加工大体积的特征可以保证快
速的走刀提高效率。
53

b
中有两个槽需要加工可以先铣顶部的槽再铣底部的槽也可以先铣中间的槽
至底部再铣剩下的部分。而如果选择后者则第二次加工的时候刀具有一部分空行程所
以应当选择第一种加工方法即首先加工顶部特征。

a
先去除大体积特征
b
先去除顶部特征
图
53
排布工序的另外两种原则
根据以上情况本文的排布工序针对特征体积进行了逆序排序然后工艺人员再根据
实际情况对工序排序进行微调。
522
信息的修改与添加
点击工序信息列表中的不同工序内容经过推理得到的加工方法以及选用机床会显示在工
序条件框内以便修改。同时如图
54
所示在工序条件工序说明以及切削液
框内分别对选用夹具工序说明内容和选用切削液进行编辑点击确认修改后这些内容会
添加到工序信息列表中选择工序所在行的对应位置。基于
MBD
的三维工艺设计技术研究
54
图
54
信息修改过程
同理点选工步信息列表中的工步相关信息会显示在上方的编辑框内以供修改。经过修
改的加工参数得到确认后工步工时可以通过以下公式确定并最终显示在工步信息列表内。
基布置辅休

ttttT

51

即工步工时由基本加工时间辅助加工时间布置工作场地时间以及工人休息时间组成。
以图
55
为例基本加工时间近似由以下公式确定
i
fn
l
t

基

52

获取工序信息列表中信息
修改添加信息
更新工序信息列表中信息南京航空航天大学硕士学位论文
55
p
a
Z
i

D
v
n

1000

其中
l
表示加工长度这里为加工特征的特征尺寸单位为
mm

i
表示进给次数为
进给量单位为
mmr

n
为机床主轴转速单位为
rmin

Z
表示加工余量单位为
mm
表
示背吃刀量单位为
mm
表示切削速度单位为
mmin

D
表示加工直径。其中加工余
量以工厂生产实践实验所积累的经验为基础并结合实际加工情况加以修正。
图
55
计算基本加工时间举例
辅助加工时间是辅助基本加工操作所耗费的时间。通常指安装卸载工件启动和停止
机床测量工件尺寸等。在大批量生产中可将各辅助动作分解然后经过查表得到各部分动
作的耗时最后累加在中小批量生产中可将辅助加工时间设定为合理的基本加工时间的百
分比进行估算。这里设定为基本加工时间的
10
。
布置工作场地时间是指工人更换刀具清理切屑整理工具等所消耗的时间。通常该时间
按基本时间的
27
计算。
工人休息时间为工人进行自身调节以达到最佳工作状态的时间一般按基本时间的
2
来
计算。工步工时确定后工序工时为工步工时的累加。
523
基于
MBD
的工艺信息显示
由图
22
的
MBD
工艺信息管理体系可以得知工艺设计进行到了这一步许多信息都已
经可以获取
MBD
信息也已经由简单的仅包含特征信息和零件基本信息的幼体成长为了包
含工序加工方法设备工步工时和具体加工参数等信息的
MBD
成熟体。
实际上零件从设计到生产加工的过程也是该零件信息不断成熟完善的过程因此
此时的
MBD
信息显示已经由图
318
中简单的信息树成长为如图
56
所示的内容丰富的复
杂的信息树。并且该
MBD
工艺信息结构是依照图
23
中所描述的基于
MBD
的三维工艺信息结
构所呈现的符合
MBD
定义思想并且逻辑结构清晰内容丰富。
p
a
v
f基于
MBD
的三维工艺设计技术研究
56
图
56CATIA
环境下基于
MBD
的工艺信息
524
轻量化工序模型生成
轻量化工序模型包含两个概念轻量化模型和中间工序模型。
首先介绍中间工序模型。中间工序模型指的是从毛坯件加工到零件成品过程中反映中间
加工过程的模型状态。如何以三维工序模型替代二维工序卡片中的工序图一直是三维工艺设
计中的重要研究内容。从工艺设计过程的角度出发三维工序模型的生成方式可分为两种正
向和逆向。

1
正向生成工序模型是指在零件模型已经设计好的情况下根据毛坯尺寸和每道工
序的加工要求由工艺设计人员按照工序的顺序对毛坯进行重复建模而得到这种方法虽然过
零
件
基
本
信
息
加
工
信
息
详
细
工
序
信
息
详
细
工
步
信
息南京航空航天大学硕士学位论文
57
程清晰但是工作量大而且重复建模的过程也增加了工艺设计人员的工作量效率低下。

2
逆向生成工序模型是指从零件最终的设计模型出发逆着工序的顺序不断对零
件模型进行补形直至得到毛坯的过程。此种方法更易理解且效率高但实现起来较为困
难。
虽然正向生成工序模型的方式更容易实现但重复建模使得整个工艺设计过程效率低下
因此本文打算采用逆向生成工序模型的方式。
在零件工序模型的逆向创建过程中本道工序所对应的工序模型是由下一道工序所对应的
工序模型经过补形得到的因此相邻工序模型之间存在着关联关系且不同工序模型有
前后顺序。本文以如下关系式定义工序模型集


11
PMPMPMPMPM
knn


53

其中
PM
代表
ProcessModel
即工序模型的意思而表示毛坯模型表示零
件成品模型则表示第
k
道工序的工序模型。
由以上定义可知如果某零件的加工过程包含
n
道工序则会形成
n
个工序模型而最后
一个工序模型即为零件的成品模型第一个工序模型即为零件毛坯经过第一道工序加工后的模
型且各工序模型之间有着继承关系。则各工序模型之间关系图如
57
所示
图
57
零件成品模型到毛坯件的中间工序模型演变关系
零件模型设计过程可以看做不断去除毛坯件材料的过程如果表示第
k
道工序去除的
材料则零件成品模型可以表示为



n
k
kn
MPMPM
1
1

54

其中
n
为零件总工序由工序模型集的定义可知第
k
道工序的工序模型表达式为



n
ki
ink
MPMPM
1

55

上式即为逆向生成某一道中间工序模型的数学表达式即第
k
道工序所对应的工序模型
1
PM
n
PM
k
PM
k
M基于
MBD
的三维工艺设计技术研究
58
等价于零件成品模型逆向添加工序去除的材料一直到
k1
道工序所去除的材料为止。
如图
54
所示基于
MBD
的三维工艺信息结构已经将工序号加工方法和待加工特征类
型联系在了一起并且前文已经识别出了加工特征。现在只需定义每种加工特征所对应的补
形方式即可。
由于加工特征是由不同机床经过不同加工方法加工得到所以要定义加工特征所对应的补
形方式还需要建立加工特征补形方式加工方法三者之间的映射关系。
加工特征分类如表
31
所示所对应的加工方法已经通过初步工艺推理以及图
52
所示界
面中的相关功能修改得到现在对补形方式进行分类并将其与加工特征类型建立映射关
系。本文将补形方式分为两类一种是拉伸操作具体对应的特征类型如图
58
所示
图
58
拉伸操作补形的几种加工特征类型
其中特征终止面的概念在第三章中区分柱体和盲孔特征的时候已经定义。在这里只用
识别出特征终止面并运用
CATIA
自带的拉伸功能成形到下一表面即可。
补形方式的另一类是删除

抑制操作这种方式适合于通孔包括通孔

方和通孔

圆
的加工特征类型。
至此加工特征类型加工方法以及补形方式的一一映射关系已经建立。下面是逆向
生成工序模型的流程图南京航空航天大学硕士学位论文
59
图
59
逆向生成工序模型流程
至此已经生成了每道工序所对应的工序模型接下来要将工序模型保存成轻量化模型的
形式。
轻量化模型即为减轻了部分信息且文件大小经过压缩的三维模型文件。
通常而言一个普通的
CAD
软件所保存的三维零件模型文件大小约为几兆字节一个产
品往往包含几十甚至上百个零件如果要传输这些文件则需要耗费大量的时间并且占用不
小的存储空间不利于远距离传输更不利于产品全生命周期的管理因此如何减小三维模
型文件的大小尤为重要同时在不同公司彼此合作频繁的今天产品信息的交互更为普遍
但在许多情况下产品信息里面包含了需要保护的知识产权如果直接传输原始文件无疑会
将这些需要保密的信息暴露给对方损害公司的利益因此如何隐藏关键信息只显示必要
信息也显得十分关键再者市面上流行的三维
CAD
建模软件种类繁多常见的有
CATIA

UG

CreoProE
新版本


Solidworks
等这些软件有各自保存文件的格式如何针对不同软
件的用户传递相同文件的信息也十分棘手。基于
MBD
的三维工艺设计技术研究
60
面对保密性文件大小通用性的问题轻量化模型应运而生。
常见的轻量化模型有以下几种类型

1

U3D

U3D
全称
Universal3D
这种格式是由
Intel
和
3DIndustryForum
公司联合
开发的旨在建立全球化三维模型文件传输标准。保存为此种格式文件的三维模型其大
部分工程数据都会被删除只保留模型的几何信息。该文件可被
Ecma
软件解析。软件地址
为
httpssourceforgenetprojectshowfilesphpgroupid133107
。

2

X3D

X3D
是由
Web3DConsortium
公司在
VRMLVirtualRealityModelling
Language
的格式上发展而来的。该格式的文件运用了两种压缩算法使得文件十分小巧。其
相关工具和应用可以在以下网站中下载
httpwwwweb3dorg
。

3

3DXML

3DXML
是一种基于标准
XML
语言的文件格式它将模型的几何信息
产品结构保存成
XML
的形式便于产品信息的阅读。
3DXML
只能运用于
Dassault
的建
模产品且交互性不高。

4

JT
格式
JT
格式是
UG
建模软件专用的轻量化模型格式保存为此种格式的文件信
息能在多种操作系统下被读取。
本文的三维工艺设计过程是在
CATIA
内进行的因此保存的轻量化模型格式应依据
CATIA
自身能保存的文件格式。
CATIA
能保存的轻量化模型格式分别有
stl

igs

stp

3dxml

cgr
和
wrl
。其中
stl
用
三角网格表示零件几何信息且多用于快速原型系统不利于其他信息的交互
igs
即初始图像
交换规范
IGES
的
2D3D
矢量图文件只包含线框以及图形表面信息不适合包含标注信
息的模型交互
stp
多用于和
ProE
产品间的数据交换
3dxml
可被
3DXMLPlayer
解析但
是操作流程较多解析过程较复杂而且标注信息无法直接显示并不直观
cgr
文件只保存
外形信息不包含任何参数化数据所以不适合工艺信息的传递。
wrl
是
VRML
格式的文件属于
X3D
文件类型。
wrl
不仅包含零件几何信息还包含标注
信息。
VRML
文件可以被
BSContactVRMLX3D
和
Cortona3DViewer
插件解析但前者解析
后的零件只能显示几何信息并不能直接显示标注信息只有用
Cortona3DViewer
插件解析
后的零件才能既显示几何信息又显示标注信息适合三维工艺信息的传递与显示。并且用
Cortona3DViewer
插件解析后的
wrl
文件可以在
Web
浏览器下直接打开简单快捷不占
用太多内存。
因此本文将生成后的工序模型保存成
wrl
格式的轻量化模型形式与零件成品模型存储
在相同目录下便于信息的管理。南京航空航天大学硕士学位论文
61
525
工艺信息导出至加工现场
工艺信息以
XML
文件的形式同样保存在零件成品模型所在目录下与工序模型一同传递
到加工制造现场。工艺信息文件内包含了图
54
中的所有内容并且工序信息与轻量化工序模
型一一对应。
CATIA
开放了与
XML
文件交互的接口在
CATIA
二次开发环境下需要加入
msxmlh
头
文件以及
msxmldll
头文件。
MSXMLIXMLDOMDocumentPtr
类型变量定义
XML
文件
MSXMLIXMLDOMElementPtr
类型变量定义
XML
文件中的元素用元素的
appendChild
方
法定义元素间的父子关系用
Puttext
方法定义元素所包含的数据内容。
53
制造现场的工艺信息表达技术
将含有轻量化工序模型和工艺信息
XML
文件的文件夹传输至加工现场通过本文所开发
的基于
MBD
定义的三维工艺制造现场查询及显示系统导入加工任务审核通过后显示
三维工艺信息包含三维工序模型。
工人在加工现场无需对三维模型进行额外操作基本脱离了
CATIA
环境因此本文所开
发的制造现场查询及显示系统在一般
Windows
系统上都可以正常运行。其开发语言为
CWinform
开发平台是
VisualStudio2005
。
CWinform
在制作界面方面简便快捷具有独
特的优势。该系统可实现包括界面登录历史加工信息的显示与修改当前加工信息工序内
容显示审核基于
MBD
的三维工艺信息显示三维工序模型显示等功能。
531
登录界面
系统登陆界面如图
510
所示。加工人员在取得授权后通过账号和密码登入。
图
510
系统登录界面
532
历史加工信息
然后系统弹出第一个界面如图
511
所示显示历史加工信息。在历史加工信息右边有
可执行的操作。共包含三个功能添加新信息删除旧信息和查看工序信息。基于
MBD
的三维工艺设计技术研究
62
在历史加工信息列表的下方是电子版机械加工工艺工程卡片这里只显示工序信息和零
件基本信息。界面最下方有返回修改审核通过和三维工艺信息查看三个按钮。
添加新的加工信息后点选加工信息所在的行并查看工序信息则零件基本信息和工序
信息就会显示在工序卡片内。这里运用二维工序卡是为了让加工制造人员从二维环境转到三维
环境有个平缓的过渡以免信息形式的突然转换造成不适应但最终的工艺信息显示则运用了
三维工序模型和
MBD
定义。
图
511
历史加工信息及当前加工信息显示
533
三维工艺信息显示
审核完成后点选三维工艺信息查看。显示如图
512
界面。该界面共有四个部分左南京航空航天大学硕士学位论文
63
上角为工艺设计树显示内容包括零件基本信息材料信息热处理信息技术要求和加工信
息。其中加工信息又含有各工序内容加工方法和加工特征类型每一道工序内包含工序说
明加工条件以及工步信息工步信息内又包含详细工步内容。实际上工艺设计树将传统的
二维工序卡和工步卡融合在了一起将所有工艺信息包含在内并以树结构的形式显示出来。
左下角部分显示的是工序信息包含了工序号每一步工序的名称以及工序说明。右上角
部分显示选中工序对应的工序模型同时当前工序模型又与左上角部分的工艺设计树互相配
合显示工序模型的同时加工制造人员可以查看当前工序所包含的其他详细加工信息右下
角是零件成品模型即是最后加工所得到的零件成品。
图
512
三维工艺信息显示
54
本章小结
本章首先介绍了基于
MBD
的三维工艺信息表达流程然后按照流程分别介绍了有
CATIA基于
MBD
的三维工艺设计技术研究
64
和无
CATIA
即加工现场两种环境下三维工艺信息的表达方式。其中在
CATIA
环境下先
介绍了
CATIA
内工艺
MBD
界面的功能然后详细阐述了如何构建第二章中提到的三维工艺信
息表达结构图
23
并介绍了三维工序信息生成流程和轻量化模型的概念。在无
CATIA
环境
下本章首先介绍了基于
MBD
定义的三维工艺制造现场查询及显示系统的界面流程然
后给出工艺信息最终显示结果并以树结构的方式显示基于
MBD
的三维工艺信息以轻量化
模型的方式显示了零件成品模型和工序模型。南京航空航天大学硕士学位论文
65
第六章基于
MBD
的三维工艺设计技术实现
前文已经对
MBD
环境下三维工艺设计技术做了具体研究主要针对特征信息管理工艺
知识推理三维工艺信息表达做了具体探讨本章将以一个具体的零件为例对三维工艺设计
整体流程进行说明和展示。
61
技术方案运行环境和开发环境
实现基于
MBD
的三维工艺设计技术的运行环境如表
61
所示
表
61
运行环境
序号软件作用
运
行
环
境
1WindowsXPSP3
操作系统
2CATIAV5R18
零件三维建模平台
3Cortona3DViewer
查看工序模型轻量化模型
4MSACCESS2007
数据存储
实现基于
MBD
的三维工艺设计技术的开发环境如表
62
所示
表
62
开发环境
序号编程语言实现功能
1CCAA
特征信息识别功能
查看工艺
XML
文件功能
导出工艺
XML
文件功能
三维工艺信息显示功能
2CWinform
登陆功能
历史加工信息显示功能
工艺设计树生成功能
工序模型显示功能
数据库管理功能
3SWRL
创建工艺推理规则功能
辅助工艺知识推理功能
CCAA
在第三章介绍特征信息管理时有过介绍用来对
CATIA
进行二次开发并产生能
够无缝嵌入
CATIA
系统内的新功能
SWRL
在第四章介绍工艺知识推理时提到用来创建工艺
推理规则并辅助
Jess
推理引擎进行工艺知识推理
CWinform
在第五章介绍非
CATIA
环境下
显示三维工艺信息时做过介绍它在界面设计以及数据管理方面具有优势。基于
MBD
的三维工艺设计技术研究
66
62
主要流程及功能介绍
下面将以某型模具零件为例对本文基于
MBD
的三维工艺设计技术做出具体说明以及功
能演示。如图
61
所示是本文设计的整体流程其中特征信息推理所得工艺信息以及最
终工艺信息分别对应一个储存这些信息的
XML
文件。且从
XML
文件大小可以看出随着流程
的推进工艺信息也逐渐丰富。
图
61
基于
MBD
的三维工艺设计技术具体实现流程
下面将结合如图
62
所示的某型模具零件针对具体实现流程对各部分进行详细功能
演示与说明。南京航空航天大学硕士学位论文
67
图
62
型号为
SPMJ1501
的模具零件
621
加工特征识别与特征信息提取
如图
63
所示对某型模具零件的三维设计模型进行加工特征识别与特征信息的提取。在
CATIA
内开发了内嵌工具条以及特征信息管理界面通过点选特征组成面以及特征终止面识
别出特征类型组成特征尺寸以及型面粗糙度。
图
63
加工特征识别与特征信息提取
特征识别与
特征信息提取
CATIA
二次开发内嵌工具条
选取特征
组成面
识别型面
粗糙度基于
MBD
的三维工艺设计技术研究
68
622
定义毛坯尺寸
如图
64
所示提取特征完成后对毛坯尺寸进行定义首先点击定义包络体然后出
现包络体定义窗口通过调整
xyz
三个方向的长度可以得到包络零件实体的六面体的尺寸
然后反馈给毛坯尺寸对话框。
图
64
定义毛坯尺寸
623
特征信息显示与导出
如图
65
所示识别完加工特征并对毛坯尺寸进行定义后要对零件基本信息以及热处理
材料信息进行定义。完成定义后点击特征信息显示便会在零件目录树的几何图形集下显
示特征信息和零件基本信息。完成这些信息定义后点击特征信息导出便会将零件基本信
息和特征信息以
XML
文件的形式导出。这里的
XML
对应图
61
中的
BasicFeatureInfoxml
文件。
确定毛坯尺寸
定义包络体南京航空航天大学硕士学位论文
69
图
65
特征信息显示与导出
特
征
信
息
显
示基于
MBD
的三维工艺设计技术研究
70
624
工艺推理
导入包含零件基本信息和特征信息的
XML
文件后便开始进行工艺推理。
工艺推理是基于所构建的工艺知识库和规则库的这里首先对本文所构建的知识库和规则
库进行介绍。如图
66
所示即是所构建的工艺本体知识库其中每一个圆点所代表的是本
体中的类
Class
四边形所代表的是本体中的实例
Individual
。
图
66
工艺本体知识库
图
67
为呈树状结构的工艺本体类
Classes
以及类之间的逻辑关系同时界面右边显示了
类中所包含的实例从这里可以看出它的形式与
XML
文件的形式类似都是树状结构。因
此基于
Ontology
所构建的工艺本体知识库对导入的
XML
文件中所包含的特征信息进行工艺
推理具备得天独厚的优势。图
68
为构建的工艺规则库。
图
67
工艺本体类结构及类中所含实例南京航空航天大学硕士学位论文
71
图
68
运用
SWRL
语言构建的工艺规则库
如图
69
所示工艺推理时首先加载工艺规则然后进行格式转换转换成推理引擎能
识别的格式。推理完成后得到
OWL
文件并另存为
XML
文件。这里的
XML
文件对应图
61
中的
InferenceProcessxml
。
图
69
运用
Jess
引擎进行工艺推理
625CATIA
内导入推理所得工艺信息
初步推理所得工艺文件导入后相关信息显示在工艺
MBD
对话框中。如图
610
所示其
成功将推理得到的信息转换成
OWL
格式
另存为
XML
格式文件
成功执行规则引擎
转换用时
207
毫秒基于
MBD
的三维工艺设计技术研究
72
中工步信息列表只显示当前所选工序所对应的工步信息。
图
610
推理工艺文件导入
导
入
后
推理所得加工方法和选
用机床可修改
显示并修改当前所选工步信息
显示并修改当前所选工序信息
零件基本信息显示
推理所得每一工步所用刀具以及加
工参数可修改南京航空航天大学硕士学位论文
73
626
排布工序
导入推理所得工艺信息后需对很多信息进行完善和修改首先排布工序。工步排布需要
遵循几点原则比如先面后孔工序集中等。除此之外本文还提出了先加工体积较大的特征
的原则。因此综合以上几点原则结合特征类型以及特征体积对所识别的某型模具加工特
征做出如图
611
所示排列顺序。
图
611
排布工序
627
工步信息调整
工序排列完成后需对详细工序信息以及工步信息进行修改。工序信息的修改可以参考图
54
工步内容的修改过程与工序内容修改过程相同即点击所需修改的工步整行然后
在所需修改的相应对话框内对内容进行修改最后点击

工步修改

即可。
这里主要介绍添加工步与删除工步。如图
612
所示选择工步
3
当点击

添加工步

时
会在当前所选工步前插入一个空白的工步工步号随之改变但工步所属工序不变新添加工
步的工步内容加工参数等均为空白工艺人员可根据实际加工需要进行参数设定。
当点击

删除工步

时会删除当前所选工步同时当前所选工步后的工步上移工步总
数减一。
根据规则排布工序
排布工序后工步所属工序号也随之改变基于
MBD
的三维工艺设计技术研究
74
图
612
工步信息的添加与删除
628CATIA
内工艺信息表达
工序信息及工步信息完善后将其在
CATIA
内以几何图形集的形式表达出来使得工序及
其所对应的加工特征一目了然工艺设计人员可以根据这些信息快速地生成中间工序模型。如
图
613
所示是
CATIA
内工艺信息的表达方式。
在工序信息工步信息以及零件基本信息修改添加完成后点选

工序信息显示

按钮
则工艺
MBD
对话框内所有信息都以图
24
的
MBD
工艺信息结构有序组合在一起悬挂在零件
目录树的结合图形集下。
添加工步
删除工步
工步信息调整南京航空航天大学硕士学位论文
75
图
613CATIA
内工艺信息表达
工艺信息表达基于
MBD
的三维工艺设计技术研究
76
629
生成中间工序模型
工艺设计人员根据
CATIA
内表达的工艺信息包含工序顺序逆向生成轻量化中间工序
模型并保存成
wrl
格式。轻量化模型与工艺信息对应关系如图
614
所示
图
614
轻量化中间工序模型与工艺信息对应关系
6210
非
CATIA
环境下工艺信息表达
轻量化中间工序模型生成后将完整工艺信息以
XML
文件的格式导出此处的
XML
文件
对应图
61
中的
FinalProcessxml
。将包含完整工艺信息的
XML
文件以及轻量化中间工序模型
放在一个文件夹内发布到加工现场即非
CATIA
环境下。
如图
615
所示加工现场添加新信息后在历史加工信息栏点击新添加的加工信
息然后点击查看工序信息在界面下方显示该模具所编制的工艺信息。这里采用电子工艺
卡片的形式显示工序信息主要是为了方便工艺编制的审核也为了让加工制造人员对二维工
艺卡片到三维工艺信息的过渡有所适应。南京航空航天大学硕士学位论文
77
图
615
非
CATIA
环境下电子工艺卡片
图
616
则显示了在最终的加工制造现场即脱离
CATIA
的环境以三维工序模型表达工
序图以工艺设计树表达该零件加工信息的方式。界面左下方是工序过程浏览点选所需查看
的工序然后点击显示工序模型按钮则右上角显示点选工序所对应的轻量化工序模型
工
艺
信
息
导
入
添
加
新
信
息
选取当前工艺信息并查看
查看工序信息
查看三维工艺信息基于
MBD
的三维工艺设计技术研究
78
同时左边的工艺设计树展开显示该工序对应的加工信息。
图
616
非
CATIA
环境下三维工艺信息表达
63
本章小结
针对前文提出的相关理论和技术本章结合一个具体的实例对基于
MBD
的三维工艺设
计流程进行了详细说明并对本文基于
MBD
的三维工艺设计技术中各项理论的实现方法和相
关技术做出了验证其中包括特征识别技术与特征信息管理技术工艺知识库构建技术三维
工艺表达方式等关键技术。南京航空航天大学硕士学位论文
79
第七章总结与展望
71
全文总结
当前数字化设计与信息化制造技术迅速发展三维工艺设计当前信息化制造的重要发展方
向研究
MBD
环境下三维工艺设计技术具有重要意义有助于提高工艺设计效率缩短研制
周期便于设计制造一体化。本文在基于
MBD
的三维工艺设计技术方面做出了以下研究成果

1
分析了
MBD
技术和三维工艺设计研究现状总结了
MBD
的技术特点阐述了基于
MBD
的三维工艺信息管理体系提出了以
MBD
数据为媒介的三维工艺设计模式并且给出了
设计框架分析了各流程间需要传递的数据形式。

2
利用
MBD
的思想分析了工艺设计过程中所涉及的信息并且给出了各类信息分类的方
案。给出了基于
CATIA
二次开发的加工特征识别方法和特征信息提取技术结合
XML
文件
提出了基于工艺
XML
文件的工零件基本信息管理方法。

3
分析了工艺知识间的逻辑关系结合本体的知识建立了工艺本体知识库借助
SWRL
语言构建了工艺推理的规则库结合已经构建的工艺本体知识库和工艺推理规则库以及
JESS
推理引擎做出了对应加工特征的加工方法工序信息以及工步信息的初步推理。

4
分析了工序模型的生成方法对轻量化模型进行了分类并选择了适合本文三维工艺
设计方法的轻量化模型类型。

5
分析了
CATIA
环境内工艺
MBD
信息显示方法根据工艺设计人员的设计习惯开
发了
CATIA
内工艺
MBD
交互界面方便推理得到的工艺信息的导入与修改。

6
分析了工序模型以及工艺信息导入加工现场后的显示方法开发了基于
MBD
的三维
工艺制造现场查询与显示系统阐述了系统的开发环境以及运行环境介绍了系统界面流程。
72
展望
基于
MBD
的三维工艺设计技术需要对多个技术领域进行深入的研究。本文主要研究了
MBD
环境下工艺设计流程。但是由于作者所学有限知之甚少论文中还有许多有待完善的地
方后续工作将从以下几个方面展开

1
进一步研究基于
CAITA
二次开发的特征识别技术尝试识别更多复杂特征。

2
进一步丰富工艺知识库的内容深入加工制造现场同工艺员和一线生产人员多交流
将工艺人员长期积累的更多经验转换成工艺知识和工艺规则。

3
进一步研究轻量化模型显示技术尝试对轻量化模型中显示的标注信息进行分类管
理。基于
MBD
的三维工艺设计技术研究
80

4
丰富工序模型尝试在工序模型的基础上生成工步模型。

5
尝试将所有流程集中到一个平台中并与
PDM
进行连接方便数据的上传和下载。南京航空航天大学硕士学位论文
81
参考文献
1
李时椿

从制造业大国走向制造业强国
J
经济与管理研究
200672530
2
陈渊源

吴勇毅

中国制造
2025
对垒德国工业
40J
进出口经理人
201503
3
周秋忠

范玉青
MBD
技术在飞机制造中的应用
J
航空维修与工程
200935557
4
范平

范玉青

突破技术趋同

波音再现竞争优势

对大型飞机研制技术的战略性分析
J
航空学报
20082903707715
5
何忠蛟

计算机辅助工艺管理
J
煤矿机械
20156109110
6
胡建德

欧长劲

计算机辅助工艺过程编制及实验方法
J
实验室研究与探索

199625962
7
吕俊林

江平宇

智能三维
CAPP
的发展方向及核心技术
JCadcam
与制造业信息化

2009119395
8
邓云初

蒋辉

范玉青

工艺信息管理系统中工艺更改的实现
J
航空制造技术

2002076668
9
刘华昌

基于
MBD
的集成式
CAPP
技术研究与系统开发
D
江苏科技大学
2014
10SelvarajPRadhakrishnanPAdithanMAnintegratedapproachtodesignformanufacturing
andassemblybasedonreductionofproductdevelopmenttimeandcostJInternational
JournalofAdvancedManufacturingTechnology200942121329
11AlemanniMDestefanisFVezzettiEModelbaseddefinitiondesignintheproductlifecycle
managementscenarioJInternationalJournalofAdvancedManufacturingTechnology2011
5214114
12WANGYongpoDENGJiatiDynamicallianceproductdataintegrationframeworkJ
ComputerIntegratedManufacturingSystems2007135905910
13Y14412003DigitalproductdefinitiondatapracticesSNewYorkASME2003
14
范玉清梅中义陶剑

大型飞机数字化制造工程
M
北京北京航空工业出版
2011386387
15
卢鹄

韩爽

范玉青

基于模型的数字化定义技术
J
航空制造技术
200803
7881

16
冯国成

梁艳

于勇

等

基于模型定义的数据组织与系统实现
J
航空制造技术

201109
6272

17
梁艳

冯国成

于勇

等

基于模型定义的装配件数据组织及其实现
J
航空维修与工程

201065659基于
MBD
的三维工艺设计技术研究
82
18
郭具涛

梅中义

基于
MBD
的飞机数字化装配工艺设计及应用
J
航空制造技
术
201122
7477

19
周秋忠

樊庆春
MBD
支持的产品协同设计及协同信息表达
J
制造业自动化
2011
33015559
20
李汝鹏

卢鹄

梅繁

大型客机基于模型定义的紧固件辅助工艺设计研究与实现
J
航空
制造技术
2012Z1
9295

21
罗炜

童秉枢

基于模型定义的飞机数字化工艺规划验证及执行技术
J
航空制造技术

2010187276
22
张振明

现代
CAPP
的应用与发展趋势
JCadcam
与制造业信息化
200413031
23
刘楠嶓

张琳娜

牛红宾

等
CAPP
系统中零件信息的描述与输入方法研究
J
现代制造工
程
200537274
24
李益南
CAPP
专家系统研究及开发
D
湖南大学
2003
25
朱建霞
CAPP
技术特征及发展动态
J
武汉理工大学学报信息与管理工程版

2004233108111
26
蓝渊

数控铣削加工切削参数优选专家系统的研究
D
西安西北工业大学
2007
27BouffiouCEHlavacekWJFranzenSEetalThreedimensionalprocessplanningUS
EP2019371P2009
28PedagopuVMKumarMAnIntegratedGeometricModelingMethodologyfor25D
CylindricalPrismaticPartforComputerAidedProcessPlanningJIntelligentControl
Automation201454183189
29
贾晓亮

田锡天

耿俊浩

等

航空复杂产品基于三维产品模型的集成化
CAPP
系统研究
J
制造业自动化
200931028285
30
吴江

基于特征识别的
CADCAPP
集成技术研究
D
南京航空航天大学
2005
31
赵震

夏芳臣

涂海宁

等

基于三维
CAD
过程特征的
CAPP
系统研究
J
装备制造技术

2010058081
32
姚文琳

李华

孔庆馥
CAPP
系统中的工艺数据库与知识库
J
齐鲁工业大学学报自然
科学版
20051522226
33
宋丹丹

刘宗虎

基于
PDM
的
CAPP
系统中工艺知识库的构建及应用
J
机械

201209
3337

34
高晓梅

张永红

基于知识库的
CAPP
系统应用
J
陕西理工学院学报自然科学版
2009
2535864
35
马宏福

机械加工工艺知识本体及检索方法研究
D
大连交通大学
2006南京航空航天大学硕士学位论文
83
36
安峰

基于本体的高速切削加工工艺专家系统
D
南京航空航天大学
2010
37
郭春芬

基于本体的工艺知识管理关键技术研究
D
山东科技大学
2011
38SolanoLRosadoPRomeroFKnowledgerepresentationforproductandprocesses
developmentplanningincollaborativeenvironmentsJInternationalJournalofComputer
IntegratedManufacturing2014278787801
39
李涛

推荐系统中若干关键问题研究
D
南京南京航空航天大学
2008
40
韦慧

葛世伦

基于
OWL
的制造工艺知识本体模型
J
江苏科技大学学报自然科学版

20072128589
41
程少杰

飞机结构件加工特征识别技术研究与实现
D
南京航空航天大学
2008
42
张祥祥

陈兴玉

张红旗

等

基于
ProE
的三维机加工工艺设计方法研究
J
机械与电子

20140237
43
窦光继

莫蓉

万能

三维
CAPP
工艺信息表达与集成技术研究
J
航空制造技术

201207
92

95

44
孙家坤

杨超英

邱慧慧

等

基于
MBD
的三维
CAPP
系统分析与实施
J
山东建筑大学学
报
20132804363366
45
田富君

田锡天

耿俊浩

等

工序模型驱动的工艺设计方法
J
计算机集成制造系统
2011
17611281134
46
田富君

田锡天

耿俊浩

等

基于模型定义的工艺信息建模及应用
J
计算机集成制造系
统
2012185913919
47
田富君

张红旗

陈兴玉

等

基于模型的工艺及其在零件加工工艺设计中的应用
J
计算
机集成制造系统
201420613301334
48GrayerARAComputerLinkBetweenDesignandManufactureDUniversityof
Cambridge1976
49KyprianouLKShapeclassificationincomputeraideddesignDUniversityof
Cambridge1980
50
袁修华

基于
STEP
标准的三维实体制造特征识别技术研究
D
吉林大学
2008
51
陶建华

杨晓琴

刘晓初

等

基于工艺特征识别技术的数控自动编程方法研究
J
计算机
工程与设计
2011321035483552
52
陈正鸣

唐敏霞

曲面特征技术研究的现状及展望
J
河海大学常州分校学报
2004
1811015
53SubrahmanyamSWoznyMAnoverviewofautomaticfeaturerecognitiontechniquesfor
computeraidedprocessplanningJComputersinIndustry19952695121基于
MBD
的三维工艺设计技术研究
84
54FerreiraJCEHindujaSConvexhullbasedfeaturerecognitionmethodfor25D
componentsJComputerAidedDesign199022904149
55GaoSShahJJAutomaticrecognitionofinteractingmachiningfeaturesbasedonminimal
conditionsubgraphJComputerAidedDesign1998309727739
56RahmaniKArezooBAhybridhintbasedandgraphbasedframeworkforrecognitionof
interactingmillingfeaturesJComputersinIndustry2007584304312
57JoshiSChangTCGraphbasedheuristicsforrecognitionofmachinedfeaturesfroma3D
solidmodelJComputerAidedDesign19882025866
58
曹岩
CATIAV5
工程应用教程
M
西安

西北工业大学出版社
2010110
59
刘晓波

基于
MBD
的飞机装配工艺辅助系统研究
D
沈阳航空航天大学
2013
60
祁海群基于MBD的飞机工装数字化定义与协同技术研究
D
南京航空航天大学
2014
61
戴百生

基于
STEP
的制造特征识别与三维重建技术研究
D
东北农业大学
2010
62
吴晓东

韩祖行

基于属性邻接图的
STEPNC
制造特征识别实现
J
机械设计与制造工程

20134271316
63ZHAOJianxunZHANGZhenmingTIANXitianetalOntologyitsapplicationsin
mechanicalengineeringJComputerIntegratedManufacturingSystems2007134727737
64HeQLingTWAnontologybasedapproachtotheintegrationofentityrelationship
schemasJDataKnowledgeEngineering2006583299326
65ChenYJKnowledgeintegrationandsharingforcollaborativemoldingproductdesignand
processdevelopmentJComputersinIndustry2010617659675
66
马宏福

机械加工工艺知识本体及检索方法研究
D
大连交通大学
2006
67
肖成龙

面向企业互操作性的
XML
和
OWL
之间的转换
D
哈尔滨工业大学
2009
68
宗南苏

郑业鲁

基于本体与
SWRL
的鳜鱼疾病诊断知识表示与语义推理
J
农业图书情
报学刊
20092161014
69
郭文英

基于
SWRL
推理的语义关联发现及其在本体映射与集成中的应用
D
浙江大学

2006
70
纪兆辉

李存华

基于
SWRL
和
Jess
构造语义
Web
规则及其对策分析
J
淮海工学院学报
自然科学版
20091842629南京航空航天大学硕士学位论文
85
致谢
研究生两年半的时间过得很快转眼就要毕业了。在南航已经度过了六个半年头大一进
校的时候仿佛还在昨天。六年多的时间呼啸而过这是我人生中最宝贵的六年。本科阶段的无
知与任性让自己白白错失了许多机会所以研究生入学的时候我就告诉自己这两年半的时间
不能荒废。研究生期间经历了很多事情也学到了很多莽撞的少年也懂得了内敛。在此论文
撰写即将完成之际我要感谢在这两年多的时间中帮助过我的老师同学亲人和朋友。
首先我要感谢我的导师唐敦兵教授。唐老师学识渊博在科研上态度严谨而在平日的生
活中他平易近人宽容大度。他不仅给予学生充分的自由以探索自己的兴趣与爱好也会在
我需要帮助的时候给我指明前方的道路。在课题的选择和论文的写作指导方面唐老师也花费
了大量的心血。衷心感谢唐老师对于我的指点和帮助以及谆谆的教诲。
我要感谢我的父母你们含辛茹苦将我抚养成人尽自己的所能供我读书求学。谢谢你
们对于我的包容包容我的坏脾气与不成熟。谢谢你们无私的奉献和爱
感谢殷磊磊师兄朱海华老师和周燕飞老师在我许多次低落的时候给予我鼓励和陪伴
在我遇到困惑时给我答疑解难也感谢师兄和朱老师对我论文的指导。感谢教研室的同门师兄
师弟能与你们同在唐老师门下学习是我的荣幸。
感谢昂导和成导你们用实际行动鼓励我在各方面都给予了我许多的帮助和照顾
感谢包包大人和大华还有老孔感谢你们在生活中对我的包容与帮助
感谢那些我爱的人是你们教会了我成长感谢那些爱我的人是你们教会了我爱
感谢研究生阶段自己的坚持与努力虽然中途有想过放弃但是好歹坚持了下来
感谢各位专家在百忙之中对本文进行评审并提出宝贵意见与建议基于
MBD
的三维工艺设计技术研究
86
在学期间的研究成果
论文发表情况
1
崔祥友

唐敦兵

朱海华

等

基于
MBD
模型的飞机工装设计制造集成技术研究

第
3
届飞
机数字化制造技术学术会议论文集西安
2014
2
崔祥友

唐敦兵

朱海华

等

基于本体与
SWRL
的工艺知识表示与语义推理
J
机械制造
与自动化已录用

项目参与情况
1
校企合作项目
C0520110049


基于三维综合化模型的工艺装备数字化并行设计制造集成
系统

