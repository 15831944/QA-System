数控技术培训系列教程世纪星车床数控系统HNC2122T编程说明书华中科技大学国家数控系统工程技术研究中心武汉华中数控股份有限公司2001年11月
前言非常感谢您选用了本公司生产的HNC2122世纪星系列数控系统。本说明书详细介绍了数控编程基本知识指令体系各指令功能的特点注意事项和宏指令编程方法并配以大量典型编程实例和图例加以说明。既可作为世纪星车床数控系统产品说明书也可作为数控编程的培训教材。在使用本产品前请先仔细阅读本说明书以达到最佳使用效果。请妥善保存说明书并交最终使用者认真阅读。本说明书版权为武汉华中数控股份有限公司所有。华中科技大学国家数控系统工程技术研究中心武汉华中数控股份有限公司2002年11月
世纪星车床数控系统HNC2122T编程说明书目录第一章概述111数控编程概述112数控编程基本知识1121机床坐标轴1122机床坐标系机床零点和机床参考点3123工件坐标系程序原点和对刀点4第二章零件程序的结构521指令字的格式522程序段的格式623程序的一般结构724程序的文件名7第三章HNC21T的编程指令体系831辅助功能M代码8311CNC内定的辅助功能91程序暂停M0092程序结束M0293程序结束并返回到零件程序头M3094子程序调用M98及从子程序返回M999312PLC设定的辅助功能111主轴控制指令M03M04M05112冷却液打开停止指令M07M091132主轴功能S进给功能F和刀具功能T11321主轴功能S11322进给速度F12323刀具功能T机能1233准备功能G代码13331有关单位的设定141尺寸单位选择G20G21142进给速度单位的设定G94G9515332有关坐标系和坐标的指令151绝对编程G90与增量编程G91指令15I
世纪星车床数控系统HNC2122T编程说明书2工件坐标系设定G92153零点偏置G54G59184直径方式和半径方式编程20333进给控制指令211快速定位G00212线性进给及倒角G01223圆弧进给G02G03254螺纹切削G3227334回参考点控制指令301自动返回参考点G28302自动从参考点返回G2931335暂停指令G0432336恒线速度功能G96G9732337简单循环341内外径切削循环G8034圆柱面内外径切削循环34园锥面内外径切削循环352端面切削循环G8137端平面切削循环37园锥端面切削循环383螺纹切削循环G8240直螺纹切削循环40锥螺纹切削循环41338复合循环431内外径粗车复合循环G71432端面粗车复合循环G72503闭环车削复合循环G73544螺纹切削复合循环G76575复合循环指令注意事项60339刀具补偿功能指令60刀具偏置补偿和刀具磨损补偿603刀尖半径补偿G40G41G4263II
世纪星车床数控系统HNC2122T编程说明书339综合编程实例64第一章概述111数控编程概述112数控编程基本知识1121机床坐标轴1122机床坐标系机床零点和机床参考点3123工件坐标系程序原点和对刀点4第二章零件程序的结构521指令字的格式522程序段的格式623程序的一般结构724程序的文件名7第三章HNC2122T数控系统的编程指令体系831辅助功能M代码8311CNC内定的辅助功能91程序暂停M0092程序结束M0293程序结束并返回到零件程序头M3094子程序调用M98及从子程序返回M999312PLC设定的辅助功能111主轴控制指令M03M04M05112冷却液打开停止指令M07M091132主轴功能S进给功能F和刀具功能T11321主轴功能S11322进给速度F12323刀具功能T机能1233准备功能G代码13331有关单位设定的G功能141尺寸单位选择G20G21142进给速度单位的设定G94G9515332有关坐标系和坐标的G功能151绝对值编程G90与相对值编程G9115III
世纪星车床数控系统HNC2122T编程说明书2坐标系设定G92163坐标系选择G54G59184直接机床坐标系编程G53195直径方式和半径方式编程20333进给控制指令211快速定位G00212线性进给及倒角G01223圆弧进给G02G03254螺纹切削G3227334回参考点控制指令301自动返回参考点G28302自动从参考点返回G2931335暂停指令G0432336恒线速度指令G96G9732337简单循环341内外径切削循环G8034圆柱面内外径切削循环34园锥面内外径切削循环352端面切削循环G8137端平面切削循环37园锥端面切削循环383螺纹切削循环G8240直螺纹切削循环40锥螺纹切削循环41337复合循环431内外径粗车复合循环G71432端面粗车复合循环G72503闭环车削复合循环G73544螺纹切削复合循环G76575复合循环指令注意事项60338刀具补偿功能指令60刀具偏置补偿和刀具磨损补偿60IV
世纪星车床数控系统HNC2122T编程说明书刀尖圆弧半径补偿G40G41G4263编程步骤67综合编程实例6834宏指令编程70341宏变量及常量701宏变量702常量73342运算符与表达式731算术运算符732条件运算符733逻辑运算符744函数745表达式74343赋值语句74344条件判别语句IFELSEENDIF74345循环语句WHILEENDW74附表1准备功能一览表76附表2直径编程注意条件78附录1HNC21T车削循环宏程序781车削循环指令的实现及子程序调用的参数传递782车削循环指令的宏程序实现83V
世纪星车床数控系统HNC2122T编程说明书第一章概述本书针对HNC2122T世纪星数控车床系统进行编程说明其编程语言为广泛使用的ISO码。本章旨在对本说明书中提到的一些基本概念进行解释。11数控编程概述零件程序是由数控装置专用编程语言书写的一系列指令组成的应用得最广泛的是ISO码国际标准化组织规定的代码。数控装置将零件程序转化为对机床的控制动作。最常使用的程序存储介质是磁盘和网络。12数控编程基本知识121机床坐标轴为简化编程和保证程序的通用性对数控机床的坐标轴和方向命名制订了统一的标准规定直线进给坐标轴用XYZ表示常称基本坐标轴。XYZ坐标轴的相互关系用右手定则决定如图121所示图中大姆指的指向为X轴的正方向食指指向为Y轴的正方向中指指向为Z轴的正方向。YXCAZX图121BXYZXYZY机床坐标轴ABCZ围绕XYZ轴旋转的圆周进给坐标轴分别用ABC表示根据右手螺旋定则如图所示以大姆指指向XYZ方向则食指中指等的指向是圆周进给运动的ABC方向。1
世纪星车床数控系统HNC2122T编程说明书数控机床的进给运动有的由主轴带动刀具运动来实现有的由工作台带着工件运动来实现。上述坐标轴正方向是假定工件不动刀具相对于工件做进给运动的方向。如果是工件移动则用加的字母表示按相对运动的关系工件运动的正方向恰好与刀具运动的正方向相反即有XXYYZZAABBCC同样两者运动的负方向也彼此相反。机床坐标轴的方向取决于机床的类型和各组成部分的布局对车床而言Z轴与主轴轴线重合沿着Z轴正方向移动将增大零件和刀具间的距离X轴垂直于Z轴对应于转塔刀架的径向移动沿着X轴正方向移动将增大零件和刀具间的距离Y轴通常是虚设的与X轴和Z轴一起构成遵循右手定则的坐标系统。图122车床坐标轴及其方向2
世纪星车床数控系统HNC2122T编程说明书注1本说明书针对数控车床进行说明其为XZ两轴联动2其中实例图形中坐标系情况如下实线刀具代表上位刀架机床其坐标系为X轴向上为正Z轴向右为正虚线刀具代表下位刀架机床其坐标系为X轴向下为正Z轴向右为正。两种刀架方向的机床其程序及相应设置相同。122机床坐标系机床零点和机床参考点机床坐标系是机床固有的坐标系机床坐标系的原点称为机床原点或机床零点。在机床经过设计制造和调整后这个原点便被确定下来它是固定的点。数控装置上电时并不知道机床零点为了正确地在机床工作时建立机床坐标系通常在每个坐标轴的移动范围内设置一个机床参考点测量起点机床起动时通常要进行机动或手动回参考点以建立机床坐标系。机床参考点可以与机床零点重合也可以不重合通过参数指定机床参考点到机床零点的距离。机床回到了参考点位置也就知道了该坐标轴的零点位置找到所有坐标轴的参考点CNC就建立起了机床坐标系。机床坐标轴的机械行程是由最大和最小限位开关来限定的。机床坐标轴的有效行程范围是由软件限位来界定的其值由制造商定义。机床零点OM机床参考点Om机床坐标轴的机械行程及有效行程的关系如图123所示。3
世纪星车床数控系统HNC2122T编程说明书图123机床零点OM和机床参考点Om123工件坐标系程序原点和对刀点工件坐标系是编程人员在编程时使用的编程人员选择工件上的某一已知点为原点也称程序原点建立一个新的坐标系称为工件坐标系。工件坐标系一旦建立便一直有效直到被新的工件坐标系所取代。工件坐标系的原点选择要尽量满足编程简单尺寸换算少引起的加工误差小等条件。一般情况下程序原点应选在尺寸标注的基准或定位基准上。对车床编程而言工件坐标系原点一般选在工件轴线与工件的前端面后端面卡爪前端面的交点上。对刀点是零件程序加工的起始点对刀的目的是确定程序原点在机床坐标系中的位置对刀点可与程序原点重合也可在任何便于对刀之处但该点与程序原点之间必须有确定的坐标联系。可以通过CNC将相对于程序原点的任意点的坐标转换为相对于机床零点的坐标。加工开始时要设置工件坐标系用G92指令可建立工件坐标系用G54G59及刀具指令可选择工件坐标系。4
世纪星车床数控系统HNC2122T编程说明书第二章零件程序的结构一个零件程序是一组被传送到数控装置中去的指令和数据。一个零件程序是由遵循一定结构句法和格式规则的若干个程序段组成的而每个程序段是由若干个指令字组成的。如图21所示。1000N01G00U50W60N10G01U100W500F150S300M03NN200M30图21程序的结构程序程序段指令字21指令字的格式一个指令字是由地址符指令字符和带符号如定义尺寸的字或不带符号如准备功能字G代码的数字数据组成的。程序段中不同的指令字符及其后续数值确定了每个指令字的含义。在数控程序段中包含的主要指令字符如表21所示。5
世纪星车床数控系统HNC2122T编程说明书表21指令字符一览表机能地址意义零件程序号程序编号14294967295程序段号N程序段编号N04294967295准备机能G指令动作方式直线圆弧等G0099尺寸字XYZABCUVW坐标轴的移动命令99999999R圆弧的半径固定循环的参数IJK圆心相对于起点的坐标固定循环的参数进给速度F进给速度的指定F024000主轴机能S主轴旋转速度的指定S09999刀具机能T刀具编号的指定T099辅助机能M机床侧开关控制的指定M099补偿号D刀具半径补偿号的指定0099暂停PX暂停时间的指定秒程序号的指定P子程序号的指定P14294967295重复次数L子程序的重复次数固定循环的重复次数参数PQRUWIKCA车削复合循环参数倒角控制CR22程序段的格式一个程序段定义一个将由数控装置执行的指令行。程序段的格式定义了每个程序段中功能字的句法如图221所示。6
世纪星车床数控系统HNC2122T编程说明书程序段NGXFMS准备功能程序段号主轴功能字辅助功能字工艺功能字尺寸字图221程序段格式23程序的一般结构一个零件程序必须包括起始符和结束符。一个零件程序是按程序段的输入顺序执行的而不是按程序段号的顺序执行的但书写程序时建议按升序书写程序段号。华中世纪星数控装置HNC21T的程序结构程序起始符或O符或O后跟程序号程序结束M02或M30注释符括号内或分号后的内容为注释文字24程序的文件名CNC装置可以装入许多程序文件以磁盘文件的方式读写。文件名格式为有别于DOS的其他文件名O地址O后面必须有四位数字或字母本系统通过调用文件名来调用程序进行加工或编辑。7
世纪星车床数控系统HNC2122T编程说明书第三章HNC2122T数控系统的编程指令体系31辅助功能M代码辅助功能由地址字M和其后的一或两位数字组成主要用于控制零件程序的走向以及机床各种辅助功能的开关动作。M功能有非模态M功能和模态M功能二种形式。非模态M功能当段有效代码只在书写了该代码的程序段中有效模态M功能续效代码一组可相互注销的M功能这些功能在被同一组的另一个功能注销前一直有效。模态M功能组中包含一个缺省功能见表31系统上电时将被初始化为该功能。另外M功能还可分为前作用M功能和后作用M功能二类。前作用M功能在程序段编制的轴运动之前执行后作用M功能在程序段编制的轴运动之后执行。华中世纪星HNC21T数控装置M指令功能如表31所示标记者为缺省值表31M代码及功能代码模态功能说明代码模态功能说明M00非模态程序停止M03模态主轴正转起动M02非模态程序结束M04模态主轴反转起动M30非模态程序结束并返回程序起点M05模态主轴停止转动M06非模态换刀M98非模态调用子程序M07模态切削液打开M99非模态子程序结束M09模态切削液停止其中M00M02M30M98M99用于控制零件程序的走向是CNC内定的辅助功能不由机床制造商设计决定也就是说与PLC程序无关其余M代码用于机床各种辅助功能的开关动作其功能不由CNC内定而是由PLC程序指定所以有可能因机8
世纪星车床数控系统HNC2122T编程说明书床制造厂不同而有差异表内为标准PLC指定的功能请使用者参考机床说明书。311CNC内定的辅助功能1程序暂停M00当CNC执行到M00指令时将暂停执行当前程序以方便操作者进行刀具和工件的尺寸测量工件调头手动变速等操作。暂停时机床的进给停止而全部现存的模态信息保持不变欲继续执行后续程序重按操作面板上的循环启动键。M00为非模态后作用M功能。2程序结束M02M02一般放在主程序的最后一个程序段中。当CNC执行到M02指令时机床的主轴进给冷却液全部停止加工结束。使用M02的程序结束后若要重新执行该程序就得重新调用该程序或在自动加工子菜单下按子菜单F4键请参考HNC21T操作说明书然后再按操作面板上的循环启动键。M02为非模态后作用M功能。3程序结束并返回到零件程序头M30M30和M02功能基本相同只是M30指令还兼有控制返回到零件程序头的作用。使用M30的程序结束后若要重新执行该程序只需再次按操作面板上的循环启动键。4子程序调用M98及从子程序返回M99M98用来调用子程序。M99表示子程序结束执行M99使控制返回到主程序。i子程序的格式M99在子程序开头必须规定子程序号以作为调用入口地址。在子程序的结尾用M99以控制执行完该子程序后返回主程序。9
世纪星车床数控系统HNC2122T编程说明书ii调用子程序的格式M98PLP被调用的子程序号L重复调用次数注可以带参数调用子程序请参考附录1。G65指令的功能和参数与M98相同。例1如图311该例为半径编程R60R4073436R849234483110N1G92N2G37N3M98N4G00N5G36N6M05N7M300003N1G01N2G03N3U3215W39877R60加工R60园弧段P0003L6X16Z1调用子程序并循环6次返回对刀点U12F100图311主程序程序名X16Z1设立坐标系定义对刀点的位置G00Z0M03移到子程序起点处主轴正转取消半径编程主轴停主程序结束并复位子程序名进刀到切削起点处注意留下后面切削的余量U7385W4923R8加工R8园弧段10242121477
世纪星车床数控系统HNC2122T编程说明书N4G02U14W28636R40加工切R40园弧段N5G00U4N6W73436N7G01U48F100N8M99离开已加工表面回到循环起点Z轴处调整每次循环的切削量子程序结束并回到主程序312PLC设定的辅助功能1主轴控制指令M03M04M05M03启动主轴以程序中编制的主轴速度顺时针方向从Z轴正向朝Z轴负向看旋转。M04启动主轴以程序中编制的主轴速度逆时针方向旋转。M05使主轴停止旋转。M03M04为模态前作用M功能M05为模态后作用M功能M05为缺省功能。M03M04M05可相互注销。2冷却液打开停止指令M07M09M07指令将打开冷却液管道。M09指令将关闭冷却液管道。M07为模态前作用M功能M09为模态后作用M功能M09为缺省功能。32主轴功能S进给功能F和刀具功能T321主轴功能S主轴功能S控制主轴转速其后的数值表示主轴速度单位为转每分钟rmin。恒线速度功能时S指定切削线速度其后的数值单位为米每分钟mmin。G96恒线速度有效G97取消恒线速度S是模态指令S功能只有在主轴速度可调节时有效。S所编程的主轴转速可以借助机床控制面板上的主轴倍率开关进行修调。11
世纪星车床数控系统HNC2122T编程说明书322进给速度FF指令表示工件被加工时刀具相对于工件的合成进给速度F的单位取决于G94每分钟进给量mmmin或G95主轴每转一转刀具的进给量mmr。使用下式可以实现每转进给量与每分钟进给量的转化。fmfrSfm每分钟的进给量mmminfr每转进给量mmrS主轴转数rmin当工作在G01G02或G03方式下编程的F一直有效直到被新的F值所取代而工作在G00方式下快速定位的速度是各轴的最高速度与所编F无关。借助机床控制面板上的倍率按键F可在一定范围内进行倍率修调。当执行攻丝循环G76G82螺纹切削G32时倍率开关失效进给倍率固定在100。注1当使用每转进给量方式时必须在主轴上安装一个位置编码器。2直径编程时X轴方向的进给速度为半径的变化量分半径的变化量转323刀具功能T机能T代码用于选刀其后的4位数字分别表示选择的刀具号和刀具补偿号。T代码与刀具的关系是由机床制造厂规定的请参考机床厂家的说明书。执行T指令转动转塔刀架选用指定的刀具。当一个程序段同时包含T代码与刀具移动指令时先执行T代码指令而后执行刀具移动指令。T指令同时调入刀补寄存器中的补偿值。刀具补偿功能将在335节详述。12
世纪星车床数控系统HNC2122T编程说明书33准备功能G代码准备功能G指令由G后一或二位数值组成它用来规定刀具和工件的相对运动轨迹机床坐标系坐标平面刀具补偿坐标偏置等多种加工操作。G功能根据功能的不同分成若干组其中00组的G功能称非模态G功能其余组的称模态G功能。非模态G功能只在所规定的程序段中有效程序段结束时被注销模态G功能一组可相互注销的G功能这些功能一旦被执行则一直有效直到被同一组的G功能注销为止。模态G功能组中包含一个缺省G功能上电时将被初始化为该功能。没有共同地址符的不同组G代码可以放在同一程序段中而且与顺序无关。例如G90G17可与G01放在同一程序段。华中世纪星HNC21T数控装置G功能指令见表32。表32准备功能一览表G代码组功能参数后续地址字G00G01G02G0301快速定位直线插补顺圆插补逆圆插补XZ同上XZIKR同上G0400暂停PG20G2108英寸输入毫米输入G28G2900返回到参考点由参考点返回XZ同上G3201螺纹切削XZREPFG36G3716直径编程半径编程G40刀尖半径补偿取消G4109左刀补D13
世纪星车床数控系统HNC2122T编程说明书G42右刀补DG5300直接机床坐标系编程G54G55G56G57G58G5911坐标系选择坐标系选择坐标系选择坐标系选择坐标系选择坐标系选择G71G72G73G7606外径内径车削复合循环端面车削复合循环闭环车削复合循环螺纹切削复合循环XZUWCPQREG80G81G82G90G91G92011300内外径车削固定循环端面车削固定循环螺纹切削固定循环绝对值编程增量值编程工件坐标系设定XZIKCPREXZG94G9514每分钟进给每转进给G96G97恒线速度有效取消恒线速度S注意100组中的G代码是非模态的其他组的G代码是模态的2标记者为缺省值。331有关单位设定的G功能1尺寸单位选择G20G21格式G20G2114
世纪星车床数控系统HNC2122T编程说明书说明G20英制输入制式G21公制输入制式两种制式下线性轴旋转轴的尺寸单位如表33所示。表33尺寸输入制式及其单位G20G21为模态功能可相互注销G21为缺省值。2进给速度单位的设定G94G95格式G94FG95F说明G94每分钟进给G95每转进给。G94为每分钟进给。对于线性轴F的单位依G20G21的设定而为mmmin或inmin对于旋转轴F的单位为度min。G95为每转进给即主轴转一周时刀具的进给量。F的单位依G20G21的设定而为mmr或inr。这个功能只在主轴装有编码器时才能使用。G94G95为模态功能可相互注销G94为缺省值。332有关坐标系和坐标的G功能1绝对值编程G90与相对值编程G91格式G90G91说明G90绝对值编程每个编程坐标轴上的编程值是相对于程序原点的。G91相对值编程每个编程坐标轴上的编程值是相对于前一位置而言的该值等于沿轴移动的距离。线性轴旋转轴英制G20英寸度公制G21毫米度15
X452515G90编程G91编程混合编程世纪星车床数控系统HNC2122T编程说明书绝对编程时用G90指令后面的XZ表示X轴Z轴的坐标值增量编程时用UW或G91指令后面的XZ表示X轴Z轴的增量值其中表示增量的字符UW不能用于循环指令G80G81G82G71G72G73G76程序段中但可用于定义精加工轮廓的程序中G90G91为模态功能可相互注销G90为缺省值。例1如图331所示使用G90G91编程要求刀具由原点按顺序移动到123点然后回到原点。0001N1G92X0Z0N2G01X15Z20N3X45Z40N4X25Z60N5X15Z20N6M300001N1G91N2G01X15Z20N2X30Z20N3X20Z20N4X25Z60N5M300001N1G92X0Z0N2G01X15Z20N3U30Z40N4X25W20N5X15Z20N6M30231ZO204060图330G90G91编程选择合适的编程方式可使编程简化。当图纸尺寸由一个固定基准给定时采用绝对方式编程较为方便而当图纸尺寸是以轮廓顶点之间的间距给出时采用相对方式编程较为方便。G90G91可用于同一程序段中但要注意其顺序所造成的差异。2坐标系设定G92格式G92XZ说明XZ对刀点到工件坐标系原点的有向距离。当执行G92XZ指令后系统内部即对进行记忆并建立一个使刀具当前点坐标值为的坐标系系统控制刀具在此坐标系中按程序进行加工。执行该指令只建立一个坐标系刀具并不产生运动。G92指令为非模态指令16
世纪星车床数控系统HNC2122T编程说明书执行该指令时若刀具当前点恰好在工件坐标系的和坐标值上既刀具当前点在对刀点位置上此时建立的坐标系即为工件坐标系加工原点与程序原点重合。若刀具当前点不在工件坐标系的和坐标值上则加工原点与程序原点不一致加工出的产品就有误差或报废甚至出现危险。因此执行该指令时刀具当前点必须恰好在对刀点上即工件坐标系的和坐标值上由上可知要正确加工加工原点与程序原点必须一致故编程时加工原点与程序原点考虑为同一点。实际操作时怎样使两点一致由操作时对刀完成。Z左端面右端面原点原点图331G92设立坐标系例如图331所示坐标系的设定当以工件左端面为工件原点时应按下行建立工件坐标系。G92X180Z254当以工件右端面为工件原点时应按下行建立工件坐标系。G92X180Z44显然当不同或改变刀具位置时既刀具当前点不在对刀点位置上则加工原点与程序原点不一致。因此在执行程序段G92XZ前必须先对刀。17X25444180
世纪星车床数控系统HNC2122T编程说明书XZ值的确定即确定对刀点在工件坐标系下的坐标值。其选择的一般原则为1方便数学计算和简化编程2容易找正对刀3便于加工检查4引起的加工误差小5不要与机床工件发生碰撞6方便拆卸工件7空行程不要太长3坐标系选择G54G59G54G55格式G56G57G58G59说明G54G59是系统预定的6个坐标系如图332可根据需要任意选用。加工时其坐标系的原点必须设为工件坐标系的原点在机床坐标系中的坐标值否则加工出的产品就有误差或报废甚至出现危险。这6个预定工件坐标系的原点在机床坐标系中的值工件零点偏置值可用MDI方式输入系统自动记忆。工件坐标系一旦选定后续程序段中绝对值编程时的指令值均为相对此工件坐标系原点的值。G54G59为模态功能可相互注销G54为缺省值。18
XG54原点G59工件坐标系G59原点Y世纪星车床数控系统HNC2122T编程说明书ZG54工件坐标系Y机床原点工件零点偏置图332工件坐标系选择G54G59。。。Z例3如图333所示使用工件坐标系编程要求刀具从当前点移动到A点再从A点移动到B点。X40G54O30Z注意30AX当前点AB3303N01G54G00G90X40Z30N02G59N03G00X30Z30N04M301使用该组指令前先用MDI方式输入各坐标系的坐标原点在机床坐标系中的坐标值。2使用该组指令前必须先回参考点4直接机床坐标系编程G53G53是机床坐标系编程在含有G53的程序段中绝对值编程时的指令值是在机床坐标系中的坐标值。其为非模态指令。BG59O30Z机床原点图333使用工件坐标系编程19X
世纪星车床数控系统HNC2122T编程说明书5直径方式和半径方式编程格式G36G37说明G36直径编程G37半径编程数控车床的工件外形通常是旋转体其X轴尺寸可以用两种方式加以指定直径方式和半径方式。G36为缺省值机床出厂一般设为直径编程。本说明书例题未经说明均为直径编程。例4按同样的轨迹分别用直径半径编程加工图334工件X254160图334直径半径编程20445020180
世纪星车床数控系统HNC2122T编程说明书一直径编程3341N1G92X180Z254N2G36G01X20W44N3U30Z204N4G00X180Z254N5M30二半径编程3342N1G92X90Z254N2G37G01X10W44N3U15Z204N4G00X90Z254N5M30注意1在直径编程下应注意的条件请见本书后面的附表22使用直径半径编程时系统参数设置要求与之对应333进给控制指令1快速定位G00格式G00XUZW说明XZ为绝对编程时快速定位终点在工件坐标系中的坐标UW为增量编程时快速定位终点相对于起点的位移量G00指令刀具相对于工件以各轴预先设定的速度从当前位置快速移动到程序段指令的定位目标点。G00指令中的快移速度由机床参数快移进给速度对各轴分别设定不能用F规定。G00一般用于加工前快速定位或加工后快速退刀。快移速度可由面板上的快速修调按钮修正。G00为模态功能可由G01G02G03或G32功能注销。注意在执行G00指令时由于各轴以各自速度移动不能保证各轴同时到达终点因而联动直线轴的合成轨迹不一定是直线。操作者必须格外小心以免刀具与工件发生碰撞。常见的做法是将X轴移动到安全位置再放心地执行G00指令。21
世纪星车床数控系统HNC2122T编程说明书2线性进给及倒角G01线性进给格式G01XUZWF说明XZ为绝对编程时终点在工件坐标系中的坐标UW为增量编程时终点相对于起点的位移量F合成进给速度。G01指令刀具以联动的方式按F规定的合成进给速度从当前位置按线性路线联动直线轴的合成轨迹为直线移动到程序段指令的终点。G01是模态代码可由G00G02G03或G32功能注销。例5如图335所示用直线插补指令编程。3305N1G92X100Z10设立坐标系定义对刀点的位置N2G00X16Z2M03移到倒角延长线Z轴2mm处N3G01U10W5F300倒345角N4Z48N5U34W10N6U20Z73N7X90N8G00X100Z10N9M05N10M30加工26外圆切第一段锥切第二段锥退刀回对刀点主轴停主程序结束并复位73105848345图335G01编程实例22806026100
世纪星车床数控系统HNC2122T编程说明书倒直角格式G01XUZWC说明直线倒角G01指令刀具从A点到B点然后到C点见图336。XZ为绝对编程时未倒角前两相邻轨迹程序段的交点G的坐标值UW为增量编程时G点相对于起始直线轨迹的始点A点的移动距离。C是相邻两直线的交点G相对于倒角始点B的距离。XDwXwAARCu2BDCcGGBu2zx2zx2Z图336倒角参数说明Z倒圆角格式G01XUZWR说明直线倒角G01指令刀具从A点到B点然后到C点见图336。XZ为绝对编程时未倒角前两相邻轨迹程序段的交点G的坐标值UW为增量编程时G点相对于起始直线轨迹的始点A点的移动距离。R是倒角圆弧的半径值。23
世纪星车床数控系统HNC2122T编程说明书例6如图337所示用倒角指令编程。70103R33622图337倒角编程实例3307N1G00U70W10从编程规划起点移到工件前端面中心处N2G01U26C3F100倒345直角N3W22R3N4U39W14C3N5W34N6G00U5W80N7M30倒R3圆角倒边长为3等腰直角加工65外圆回到编程规划起点主轴停主程序结束并复位注意1在螺纹切削程序段中不得出现倒角控制指令2见图336XZ轴指定的移动量比指定的R或C小时系统将报警即GA长度必须大于GB长度。24652670
世纪星车床数控系统HNC2122T编程说明书3圆弧进给G02G03格式G02XUZWIKFG03R说明G02G03指令刀具按顺时针逆时针进行圆弧加工。圆弧插补G02G03的判断是在加工平面内根据其插补时的旋转方向为顺时针逆时针来区分的。加工平面为观察者迎着Y轴的指向所面对的平面。见图338XG02G03G03ZG02G03G02G02G02G03G03YZG02G03G02G03XYX图338G02G03插补方向wkzwkZzAAG03G02u2RBRBix2u2ix2圆心O圆心OZ图339G02G03参数说明X25
世纪星车床数控系统HNC2122T编程说明书G02顺时针圆弧插补如图338所示G03逆时针圆弧插补如图338所示XZ为绝对编程时圆弧终点在工件坐标系中的坐标UW为增量编程时圆弧终点相对于圆弧起点的位移量IK圆心相对于圆弧起点的增加量等于圆心的坐标减去圆弧起点的坐标如图339所示在绝对增量编程时都是以增量方式指定在直径半径编程时I都是半径值R圆弧半径F被编程的两个轴的合成进给速度注意1顺时针或逆时针是从垂直于圆弧所在平面的坐标轴的正方向看到的回转方向2同时编入R与IK时R有效。例7如图3310所示用圆弧插补指令编程。R5403127R15图3310G02G03编程实例262622
3310N1G92N2M03N3G00N4G01N5G03N6G02N7G01N8X40N9M30X40Z5S400设立坐标系定义对刀点的位置主轴以400rmin旋转到达工件中心世纪星车床数控系统HNC2122T编程说明书X0Z0F60U24W24R15加工R15圆弧段X26Z31R5Z40Z5加工R5圆弧段加工26外圆回对刀点主轴停主程序结束并复位工进接触工件毛坯4螺纹切削G32格式G32XUZWREPF说明XZ为绝对编程时有效螺纹终点在工件坐标系中的坐标UW为增量编程时有效螺纹终点相对于螺纹切削起点的位移量F螺纹导程即主轴每转一圈刀具相对于工件的进给值RE螺纹切削的退尾量R表示Z向退尾量E为X向退尾量RE在绝对或增量编程时都是以增量方式指定其为正表示沿ZX正向回退为负表示沿ZX负向回退。使用RE可免去退刀槽。RE可以省略表示不用回退功能根据螺纹标准R一般取075175倍的螺距E取螺纹的牙型高。P主轴基准脉冲处距离螺纹切削起始点的主轴转角。使用G32指令能加工圆柱螺纹锥螺纹和端面螺纹。图3312所示为锥螺纹切削时各参数的意义。27
Xx2zw世纪星车床数控系统HNC2122T编程说明书eBAZu2r图3311螺纹切削参数螺纹车削加工为成型车削且切削进给量较大刀具强度较差一般要求分数次进给加工。表331为常用螺纹切削的进给次数与吃刀量米制螺纹螺距10152253354牙深半径量06490974129916241949227325981次2次3次4次5次6次7次8次9次牙in牙深半径量06780904101611621355162620331次080808080910122次040606060607073次016030505060606070804060204016091006070606040401040151215150707080606060406060404040404040202040150302英制螺纹L2418161412108直径量直径切削次数及吃刀量量切削次28
世纪星车床数控系统HNC2122T编程说明书4次011014030404055次01302104056次016047次017注1从螺纹粗加工到精加工主轴的转速必须保持一常数2在没有停止主轴的情况下停止螺纹的切削将非常危险因此螺纹切削时进给保持功能无效如果按下进给保持按键刀具在加工完螺纹后停止运动3在螺纹加工中不使用恒定线速度控制功能4在螺纹加工轨迹中应设置足够的升速进刀段和降速退刀段以消除伺服滞后造成的螺距误差例8对图3312所示的圆柱螺纹编程。螺纹导程为15mm15mm1mm每次吃刀量直径值分别为08mm06mm04mm016mm10080图3312螺纹编程实例29M3015
世纪星车床数控系统HNC2122T编程说明书3312N1G92X50Z120设立坐标系定义对刀点的位置N2M03S300主轴以300rmin旋转N3G00X292Z1015到螺纹起点升速段15mm吃刀深08mmN4G32Z19F15切削螺纹到螺纹切削终点降速段1mmN5G00X40N6Z1015N7X286N8G32Z19F15N9G00X40N10Z1015N11X282N12G32Z19F15切削螺纹到螺纹切削终点N13G00X40N14Z1015N15U1196N16G32W825F15切削螺纹到螺纹切削终点N17G00X40N18X50Z120N19M05N20M30334回参考点控制指令1自动返回参考点G28格式G28XZ说明XZ绝对编程时为中间点在工件坐标系中的坐标UW增量编程时为中间点相对于起点的位移量。G28指令首先使所有的编程轴都快速定位到中间点然后再从中间点返回到参考点。一般G28指令用于刀具自动更换或者消除机械误差在执行该指令之前应取消刀尖半径补偿。X轴方向快退Z轴方向快退到螺纹起点处X轴方向快进到螺纹起点处吃刀深06mm切削螺纹到螺纹切削终点X轴方向快退Z轴方向快退到螺纹起点处X轴方向快进到螺纹起点处吃刀深04mmX轴方向快退Z轴方向快退到螺纹起点处X轴方向快进到螺纹起点处吃刀深016mmX轴方向快退回对刀点主轴停主程序结束并复位30
世纪星车床数控系统HNC2122T编程说明书在G28的程序段中不仅产生坐标轴移动指令而且记忆了中间点坐标值以供G29使用。电源接通后在没有手动返回参考点的状态下指定G28时从中间点自动返回参考点与手动返回参考点相同。这时从中间点到参考点的方向就是机床参数回参考点方向设定的方向。G28指令仅在其被规定的程序段中有效。2自动从参考点返回G29格式G29XZ说明XZ绝对编程时为定位终点在工件坐标系中的坐标UW增量编程时为定位终点相对于G28中间点的位移量。G29可使所有编程轴以快速进给经过由G28指令定义的中间点然后再到达指定点。通常该指令紧跟在G28指令之后。G29指令仅在其被规定的程序段中有效。例9用G28G29对图3313所示的路径编程要求由A经过中间点B并返回参考点然后从参考点经由中间点B返回到C。100当前点A250目标点C200中间点BXZ参考点R图3313G28G29编程实例31508040
世纪星车床数控系统HNC2122T编程说明书3313N1G92X50Z100N2G28X80Z200N3G29X40Z250N4G00X50Z100N5M30设立坐标系定义对刀点A的位置从A点到达B点再快速移动到参考点从参考点R经中间点B到达目标点C回对刀点主轴停主程序结束并复位本例表明编程员不必计算从中间点到参考点的实际距离。335暂停指令G04格式G04P说明P暂停时间单位为s。G04在前一程序段的进给速度降到零之后才开始暂停动作。在执行含G04指令的程序段时先执行暂停功能。G04为非模态指令仅在其被规定的程序段中有效。G04可使刀具作短暂停留以获得圆整而光滑的表面。该指令除用于切槽钻镗孔外还可用于拐角轨迹控制。336恒线速度指令G96G97格式G96SG97S说明G96恒线速度有效G97取消恒线速度功能SG96后面的S值为切削的恒定线速度单位为mminG97后面的S值为取消恒线速度后指定的主轴转速单位为rmin如缺省则为执行G96指令前的主轴转速度。注意使用恒线速度功能主轴必须能自动变速。如伺服主轴变频主轴在系统参数中设定主轴最高限速。32
世纪星车床数控系统HNC2122T编程说明书R5403127R15图3314恒线速度编程实例例10如图3314所示用恒线速度功能编程3314N1G92X40Z5设立坐标系定义对刀点的位置N2M03S400主轴以400rmin旋转N3G96S80恒线速度有效线速度为80mminN4G00X0刀到中心转速升高直到主轴到最大限速N5G01Z0F60工进接触工件N6G03U24W24R15N7G02X26Z31R5N8G01Z40N9X40Z5N10G97S300N11M30加工R15圆弧段加工R5圆弧段加工26外圆回对刀点取消恒线速度功能设定主轴按300rmin旋转主轴停主程序结束并复位332622
世纪星车床数控系统HNC2122T编程说明书337简单循环有三类简单循环分别是G80内外径切削循环G81端面切削循环G82螺纹切削循环。切削循环通常是用一个含G代码的程序段完成用多个程序段指令的加工操作使程序得以简化。声明下述图形中UW表示程序段中XZ字符的相对值XZ表示绝对坐标值R表示快速移动F表示以指定速度F移动。1内外径切削循环G80圆柱面内外径切削循环格式G80XZF说明XZ绝对值编程时为切削终点C在工件坐标系下的坐标增量值编程时为切削终点C相对于循环起点A的有向距离图形中用UW表示其符号由轨迹1和2的方向确定。该指令执行如图3315所示ABCDA的轨迹动作。34
XzwD退刀点循环起点4RAx2B切削起点Z世纪星车床数控系统HNC2122T编程说明书3RC切削终点1R2Fu2图3315圆柱面内外径切削循环园锥面内外径切削循环格式G80XZIF说明XZ绝对值编程时为切削终点C在工件坐标系下的坐标增量值编程时为切削终点C相对于循环起点A的有向距离图形中用UW表示。I为切削起点B与切削终点C的半径差。其符号为差的符号无论是绝对值编程还是增量值编程。该指令执行如图3316所示ABCDA的轨迹动作。35
XzD3RCw4Rx2B世纪星车床数控系统HNC2122T编程说明书Au2iZ图3316园锥面内外径切削循环3031R2F33241440图3317G80切削循环编程实例36
世纪星车床数控系统HNC2122T编程说明书例11如图3317所示用G80指令编程点画线代表毛坯。3317M03S400主轴以400rmin旋转G91G80X10Z33I55F100加工第一次循环吃刀深3mmX13Z33I55X16Z33I55M302端面切削循环G81端平面切削循环格式G81XZF加工第二次循环吃刀深3mm加工第三次循环吃刀深3mm主轴停主程序结束并复位XwB切削起点1RA循环起点切削终点zD退刀点x2Z2F4RC3Fu2图3318端平面切削循环37
世纪星车床数控系统HNC2122T编程说明书说明XZ绝对值编程时为切削终点C在工件坐标系下的坐标增量值编程时为切削终点C相对于循环起点A的有向距离图形中用UW表示其符号由轨迹1和2的方向确定。该指令执行如图3318所示ABCDA的轨迹动作。园锥端面切削循环格式G81XZKF说明XZ绝对值编程时为切削终点C在工件坐标系下的坐标增量值编程时为切削终点C相对于循环起点A的有向距离图形中用UW表示。K为切削起点B相对于切削终点C的Z向有向距离。该指令执行如图3319所示ABCDA的轨迹动作。XBw1RAkzu23FCDx2Z2F4R图3319园锥端面切削循环38
世纪星车床数控系统HNC2122T编程说明书例12如图3320所示用G81指令编程点画线代表毛坯。335383320N1G54N2G81N3X25N4X25N5X25N6M05N7M30图3320G81切削循环编程实例G90G00X60Z45M03选定坐标系主轴正转到循环起点X25Z315K35F100加工第一次循环吃刀深2mmZ295K35每次吃刀均为2mmZ275K35每次切削起点位距工件外圆面5mm故K值为35Z255K35加工第四次循环吃刀深2mm主轴停主程序结束并复位395525
x22FCB世纪星车床数控系统HNC2122T编程说明书3螺纹切削循环G82直螺纹切削循环格式G82XUZWRECPF说明XZ绝对值编程时为螺纹终点C在工件坐标系下的坐标增量值编程时为螺纹终点C相对于循环起点A的有向距离图形中用UW表示其符号由轨迹1和2的方向确定RE螺纹切削的退尾量RE均为向量R为Z向回退量E为X向回退量RE可以省略表示不用回退功能C螺纹头数为0或1时切削单头螺纹P单头螺纹切削时为主轴基准脉冲处距离切削起始点的主轴转角缺省值为0多头螺纹切削时为相邻螺纹头的切削起始点之间对应的主轴转角。F螺纹导程该指令执行图3321所示ABCDEA的轨迹动作。XzwDer4RA1Ru23R图3321直螺纹切削循环40LZ
世纪星车床数控系统HNC2122T编程说明书注意螺纹切削循环同G32螺纹切削一样在进给保持状态下该循环在完成全部动作之后才停止运动。锥螺纹切削循环格式G82XZIRECPF说明XZ绝对值编程时为螺纹终点C在工件坐标系下的坐标增量值编程时为螺纹终点C相对于循环起点A的有向距离图形中用UW表示。I为螺纹起点B与螺纹终点C的半径差。其符号为差的符号无论是绝对值编程还是增量值编程RE螺纹切削的退尾量RE均为向量R为Z向回退量E为X向回退量RE可以省略表示不用回退功能C螺纹头数为0或1时切削单头螺纹P单头螺纹切削时为主轴基准脉冲处距离切削起始点的主轴转角缺省值为0多头螺纹切削时为相邻螺纹头的切削起始点之间对应的主轴转角。F螺纹导程该指令执行图3322所示ABCDA的轨迹动作。41
Xex2zwD世纪星车床数控系统HNC2122T编程说明书4R3RAu21RC2FirB图3322锥螺纹切削循环例13如图3323所示用G82指令编程毛坯外形已加工完成。10080M3015双头G82切削循环编程实例3323N1G55G00X35Z104N2M03S300N3G82X292Z185C2P180F3第一次循环切螺纹切深08mmN4X286Z185C2P180F3第二次循环切螺纹切深04mmN5X282Z185C2P180F3第三次循环切螺纹切深04mmN6X2804Z185C2P180F3第四次循环切螺纹切深016mmN7M30主轴停主程序结束并复位图3323LZ选定坐标系G55到循环起点主轴以300rmin正转42
世纪星车床数控系统HNC2122T编程说明书337复合循环有四类复合循环分别是G71内外径粗车复合循环G72端面粗车复合循环G73封闭轮廓复合循环G76螺纹切削复合循环运用这组复合循环指令只需指定精加工路线和粗加工的吃刀量系统会自动计算粗加工路线和走刀次数。1内外径粗车复合循环G71无凹槽加工时格式G71UdRrPnsQnfXxZzFfSsTt说明该指令执行如图3324所示的粗加工和精加工其中精加工路径为AABB的轨迹。d切削深度每次切削量指定时不加符号方向由矢量AA决定r每次退刀量ns精加工路径第一程序段即图中的AA的顺序号nf精加工路径最后程序段即图中的BB的顺序号xX方向精加工余量zZ方向精加工余量fst粗加工时G71中编程的FST有效而精加工时处于ns到nf程序段之间的FST有效。G71切削循环下切削进给方向平行于Z轴XU和ZW的符号如图3325所示。其中表示沿轴正方向移动表示沿轴负方向移动。43
Xz3O世纪星车床数控系统HNC2122T编程说明书图3324内外径粗切复合循环ABBAXZXAAZAXZXZABBXZAABBAXZAAXZABXZZXXZAAA图3325G71复合循环下XU和ZW的符号44B48r2rA1d71115109126514A13dx2A
世纪星车床数控系统HNC2122T编程说明书有凹槽加工时格式G71UdRrPnsQnfEeFfSsTt说明该指令执行如图3326所示的粗加工和精加工其中精加工路径为AABB的轨迹。45A3712141061019B81426rB13u61066141010151414A6111e图3326内外径粗车复合循环G71d切削深度每次切削量指定时不加符号方向由矢量AA决定r每次退刀量ns精加工路径第一程序段即图中的AA的顺序号nf精加工路径最后程序段即图中的BB的顺序号e精加工余量其为X方向的等高距离外径切削时为正内径切削时为负fst粗加工时G71中编程的FST有效而精加工时处于ns到nf程序段之间的FST有效。注意1G71指令必须带有PQ地址nsnf且与精加工路径起止顺序号对应否则不能进行该循环加工。2ns的程序段必须为G00G01指令即从A到A的动作必须是直线或点定位运动。3在顺序号为ns到顺序号为nf的程序段中不应包含子程序。45
世纪星车床数控系统HNC2122T编程说明书例14用外径粗加工复合循环编制图3327所示零件的加工程序要求循环起始点在A463切削深度为15mm半径量。退刀量为1mmX方向精加工余量为04mmZ方向精加工余量为01mm其中点划线部分为工件毛坯。826252R735R525245图33273327见图3327N1G59G00X80Z80N2M03S400N3G01X46Z3F100N4G71U15R1P5Q13X04Z01粗切量15mm精切量X04mmZ01mmN5G00X0N6G01X10Z2N7Z20N8G02U10W5R5N9G01W10N10G03U14W7R7N11G01Z52N12U10W10精加工轮廓起始行到倒角延长线精加工245倒角精加工10外圆精加工R5圆弧精加工20外圆精加工R7圆弧精加工34外圆精加工外圆锥G71外径复合循环编程实例选定坐标系G55到程序起点位置主轴以400rmin正转刀具到循环起点位置4644342010
N13W20N14X50N15G00X80Z80N16M05N17M30精加工44外圆精加工轮廓结束行退出已加工面回对刀点主轴停主程序结束并复位世纪星车床数控系统HNC2122T编程说明书例15用内径粗加工复合循环编制图3328所示零件的加工程序要求循环起始点在A463切削深度为15mm半径量。退刀量为1mmX方向精加工余量为04mmZ方向精加工余量为01mm其中点划线部分为工件毛坯。826225R55235R7245图33283328见图3328N1T0101N2G00X80Z80N3M03S400N4X6Z5G71内径复合循环编程实例换一号刀确定其坐标系到程序起点或换刀点位置主轴以400rmin正转到循环起点位置47810203444
N8G00X44N9G01W20F80N10U10W10N11W10精加工轮廓开始到44外圆处精加工44外圆精加工外圆锥N12G03N13G01N14G02N15G01Z80N16U4W2N17G40N18G00N19X80N20M30X4Z80精加工10外圆精加工倒245角精加工轮廓结束退出已加工表面取消刀尖园弧半径补偿退出工件内孔回程序起点或换刀点位置主轴停主程序结束并复位世纪星车床数控系统HNC2122T编程说明书G71U1R1P8Q16X04Z01F100内径粗切循环加工N5G00X80Z80粗切后到换刀点位置N6T0202换二号刀确定其坐标系N7G00G42X6Z5二号刀加入刀尖园弧半径补偿精加工34外圆U14W7R7精加工R7圆弧W10精加工20外圆U10W5R5精加工R5圆弧例16用有凹槽的外径粗加工复合循环编制图3329所示零件的加工程序其中点划线部分为工件毛坯。105615325178R412R104524530图3329G71有凹槽复合循环编程实例4840306622662666182820
3329见图3329N5G00X80Z100N6T0202N7G00G42X42Z3N8G00X10N9G01X20Z2F80N10Z8N11G02X28Z12R4N12G01Z17N13U10W5N14W8N15U866W25N16Z375粗加工后到换刀点位置换二号刀确定其坐标系二号刀加入刀尖园弧半径补偿精加工轮廓开始到倒角延长线处精加工倒245角精加工20外圆精加工R4圆弧精加工28外圆精加工下切锥精加工18外圆槽精加工上切锥世纪星车床数控系统HNC2122T编程说明书N1T0101N2G00X80Z100M03S400N3G00X42Z3N4G71U1R1P8Q19E03F100有凹槽粗切循环加工换一号刀确定其坐标系到程序起点或换刀点位置主轴以400rmin正转到循环起点位置精加工2666外圆N17G02X3066W14R10精加工R10下切圆弧N18G01W10N19X40N20G00G40X80Z100N21M30精加工3066外圆退出已加工表面精加工轮廓结束取消半径补偿返回换刀点位置主轴停主程序结束并复位49
世纪星车床数控系统HNC2122T编程说明书2端面粗车复合循环G72格式G72WdRrPnsQnfXxZzFfSsTt说明该循环与G71的区别仅在于切削方向平行于X轴。该指令执行如图3330所示的粗加工和精加工其中精加工路径为AABB的轨迹。其中d切削深度每次切削量指定时不加符号方向由矢量AA决定r每次退刀量ns精加工路径第一程序段即图中的AA的顺序号nf精加工路径最后程序段即图中的BB的顺序号xX方向精加工余量zZ方向精加工余量fst粗加工时G71中编程的FST有效而精加工时处于ns到nf程序段之间的FST有效。zXdd175131219r4x221820r14231612819151062117350Z图3330端面粗车复合循环G72
AXZAAA世纪星车床数控系统HNC2122T编程说明书G72切削循环下切削进给方向平行于X轴XU和ZW的符号如图3331所示。其中表示沿轴的正方向移动表示沿轴负方向移动。ABXZXZAAAAXZAAAXZBXBXZBZBBXXZABAAA图3331G72复合循环下XU和ZW的符号51ZBXZ
世纪星车床数控系统HNC2122T编程说明书注意1G72指令必须带有PQ地址否则不能进行该循环加工。2在ns的程序段中应包含G00G01指令进行由A到A的动作且该程序段中不应编有X向移动指令。3在顺序号为ns到顺序号为nf的程序段中可以有G02G03指令但不应包含子程序。例17编制图3332所示零件的加工程序要求循环起始点在A801切削深度为12mm。退刀量为1mmX方向精加工余量为02mmZ方向精加工余量为05mm其中点划线部分为工件毛坯6050402615R4R2245图3332G72外径粗切复合循环编程实例3331见图3332N1T0101N2G00X100Z80N3M03S400N4X80Z1N5G72W12R1P8Q17X02Z05F100N6G00X100Z80N7G42X80Z1换一号刀确定其坐标系到程序起点或换刀点位置主轴以400rmin正转到循环起点位置外端面粗切循环加工粗加工后到换刀点位置加入刀尖园弧半径补偿5274543010
世纪星车床数控系统HNC2122T编程说明书N8G00Z56N9G01X54Z40F80N10Z30N11G02U8W4R4N12G01X30N13Z15N14U16N15G03U4W2R2N16Z2N17U6W3N18G00X50N19G40X100Z80N20M30精加工轮廓开始到锥面延长线处精加工锥面精加工54外圆精加工R4圆弧精加工Z26处端面精加工30外圆精加工Z15处端面精加工R2圆弧精加工10外圆精加工倒245角精加工轮廓结束退出已加工表面取消半径补偿返回程序起点位置主轴停主程序结束并复位例18编制图3333所示零件的加工程序要求循环起始点在A63切削深度为12mm。退刀量为1mmX方向精加工余量为02mmZ方向精加工余量为05mm其中点划线部分为工件毛坯R260R445342010245图3333G72内径粗切复合循环编程实例53810305474
N5G00Z61N6G01U6W3F80N7W10N8G03U4W2R2N9G01X30N10Z34N11X46N12G02N13G01N14U20N15Z3N16G00N17M30精加工轮廓开始到倒角延长线处精加工倒245角精加工10外圆精加工R2圆弧精加工Z45处端面精加工30外圆精加工Z34处端面精加工R4圆弧精加工54外圆精加工锥面精加工74外圆精加工轮廓结束返回对刀点位置主轴停主程序结束并复位U8W4R4Z20W10X100Z80世纪星车床数控系统HNC2122T编程说明书3333N1G92X100Z80N2M03S400N3G00X6Z3G72W12R1P5Q15X02Z05F100内端面粗切循环加工设立坐标系定义对刀点的位置主轴以400rmin正转到循环起点位置3闭环车削复合循环G73格式G73UIWKRrPnsQnfXxZzFfSsTt说明该功能在切削工件时刀具轨迹为如图3334所示的封闭回路刀具逐渐进给使封闭切削回路逐渐向零件最终形状靠近最终切削成工件的形状其精加工路径为AABB。这种指令能对铸造锻造等粗加工中已初步成形的工件进行高效率切削。54
世纪星车床数控系统HNC2122T编程说明书kzA1zXIx2Ax2AA1zx2O图3334闭环车削复合循环G73其中IX轴方向的粗加工总余量kZ轴方向的粗加工总余量r粗切削次数ns精加工路径第一程序段即图中的AA的顺序号nf精加工路径最后程序段即图中的BB的顺序号xX方向精加工余量zZ方向精加工余量fst粗加工时G71中编程的FST有效而精加工时处于ns到nf程序段之间的FST有效。注意I和K表示粗加工时总的切削量粗加工次数为r则每次XZ方向的切削量为IrKr按G73段中的P和Q指令值实现循环加工要注意x和zI和K的正负号。55
世纪星车床数控系统HNC2122T编程说明书例19编制图3335所示零件的加工程序设切削起始点在A605XZ方向粗加工余量分别为3mm09mm粗加工次数为3XZ方向精加工余量分别为06mm01mm。其中点划线部分为工件毛坯R762523525R5245N5G00X0Z3N6G01U10Z2F80N7Z20N8G02U10W5R5N9G01Z35N10G03U14W7R7N11G01Z52N12U10W10N13U10N14G00X80Z80N15M30精加工轮廓开始到倒角延长线处精加工倒245角精加工10外圆精加工R5圆弧精加工20外圆精加工R7圆弧精加工34外圆精加工锥面退出已加工表面精加工轮廓结束返回程序起点位置主轴停主程序结束并复位图3335G73编程实例3335N1G58G00X80Z80N2M03S400N3G00X60Z5N4G73U3W09R3P5Q13X06Z01F120闭环粗切循环加工选定坐标系到程序起点位置主轴以400rmin正转到循环起点位置5644342010
世纪星车床数控系统HNC2122T编程说明书4螺纹切削复合循环G76格式G76CcRrEeAaXxZzIiKkUdVdminQdPpFL说明螺纹切削固定循环G76执行如图3336所示的加工轨迹。其单边切削及参数如图3337所示。其中c精整次数199为模态值r螺纹Z向退尾长度0099为模态值e螺纹X向退尾长度0099为模态值a刀尖角度二位数字为模态值在8060553029和0六个角度中选一个xz绝对值编程时为有效螺纹终点C的坐标增量值编程时为有效螺纹终点C相对于循环起点A的有向距离用G91指令定义为增量编程使用后用G90定义为绝对编程。i螺纹两端的半径差如i0为直螺纹圆柱螺纹切削方式k螺纹高度该值由x轴方向上的半径值指定dmin最小切削深度半径值当第n次切削深度dndn1小于dmin时则切削深度设定为dmind精加工余量半径值d第一次切削深度半径值p主轴基准脉冲处距离切削起始点的主轴转角L螺纹导程同G3257
x2BZe世纪星车床数控系统HNC2122T编程说明书XDARu2Rrzw图3336螺纹切削复合循环G76d12dndn图3337G76循环单边切削及其参数RiCdKF注意按G76段中的Xx和Zz指令实现循环加工增量编程时要注意u和w的正负号由刀具轨迹AC和CD段的方向决定。G76循环进行单边切削减小了刀尖的受力。第一次切削时切削深度为d第n次的切削总深度为dn每次循环的背吃刀量为dnn158k
准得到。306世纪星车床数控系统HNC2122T编程说明书图3336中C到D点的切削速度由F代码指定而其它轨迹均为快速进给。例20用螺纹切削复合循环G76指令编程加工螺纹为ZM602工件尺寸见图3338其中括弧内尺寸根据标18有效长度417912基面图3338G76循环切削编程实例3338N1T0101N2G00X100Z100N3M03S400N4G00X90Z4N5G80X61125Z30I094F80加工锥螺纹外表面N6G00X100Z100M05到程序起点或换刀点位置N7T0202N8M03S300N9G00X90Z4N10G76C2R3E13A60X5815Z24I094K1299U01V01Q09F2N11G00X100Z100N12M05N13M30返回程序起点位置或换刀点位置主轴停主程序结束并复位换一号刀确定其坐标系到程序起点或换刀点位置主轴以400rmin正转到简单循环起点位置换二号刀确定其坐标系主轴以300rmin正转到螺纹循环起点位置59ZM60260592590
世纪星车床数控系统HNC2122T编程说明书5复合循环指令注意事项G71G72G73复合循环中地址P指定的程序段应有准备机能01组的G00或G01指令否则产生报警。在MDI方式下不能运行G71G72G73指令可运行G76指令。在复合循环G71G72G73中由PQ指定顺序号的程序段之间不应包含M98子程序调用及M99子程序返回指令。338刀具补偿功能指令刀具的补偿包括刀具的偏置和磨损补偿刀尖半径补偿。声明刀具的偏置和磨损补偿是由T代码指定的功能而不是由G代码规定的准备功能但为了方便用户阅读保持整个说明书的系统性和连贯性改在此处描述。刀具偏置补偿和刀具磨损补偿我们编程时设定刀架上各刀在工作位时其刀尖位置是一致的。但由于刀具的几何形状及安装的不同其刀尖位置是不一致的其相对于工件原点的距离也是不同的。因此需要将各刀具的位置值进行比较或设定称为刀具偏置补偿。刀具偏置补偿可使加工程序不随刀尖位置的不同而改变。刀具偏置补偿有两种形式其一相对补偿形式。如图3339所示在对刀时确定一把刀为标准刀具并以其刀尖位置A为依据建立坐标系。这样当其它各刀转到加工位置时刀尖位置B相对标刀刀尖位置A就会出现偏置原来建立的坐标系就不再适用因此应对非标刀具相对于标准刀具之间的偏置值xz进行补偿。使刀尖位置B移至位置A。标刀偏置值为机床回到机床零点时工件坐标系零点相对于工作位上标刀刀尖位置的有向距离。60
世纪星车床数控系统HNC2122T编程说明书标准刀具非标刀具Z轴偏置补偿图3339刀具偏置的相对补偿形式其二绝对补偿形式即机床回到机床零点时工件坐标系零点相对于刀架工作位上各刀刀尖位置的有向距离。当执行刀偏补偿时各刀以此值设定各自的加工坐标系。见图3340X轴偏置补偿BxAz1号刀Z轴偏置值机床零点Z2X22X122号刀X1号刀X轴偏置值轴偏置值Z12号刀Z轴偏置值工件零点图3340刀具偏置的绝对补偿形式刀具使用一段时间后磨损也会使产品尺寸产生误差因此需要对其进行补偿。该补偿与刀具偏置补偿存放在同一个寄存器的地址号中。各刀的磨损补偿只对该刀有效包括标刀。61
世纪星车床数控系统HNC2122T编程说明书刀具的补偿功能由T代码指定其后的4位数字分别表示选择的刀具号和刀具偏置补偿号。T代码的说明如下TXXXX刀具号刀具补偿号刀具补偿号是刀具偏置补偿寄存器的地址号该寄存器存放刀具的X轴和Z轴偏置补偿值刀具的X轴和Z轴磨损补偿值。T加补偿号表示开始补偿功能。补偿号为00表示补偿量为0即取消补偿功能。系统对刀具的补偿或取消都是通过拖板的移动来实现的。补偿号可以和刀具号相同也可以不同即一把刀具可以对应多个补偿号值。如图3340所示如果刀具轨迹相对编程轨迹具有XZ方向上补偿值由XZ方向上的补偿分量构成的矢量称为补偿矢量那么程序段中的终点位置加或减去由T代码指定的补偿量补偿矢量即为刀具轨迹段终点位置。补偿轨迹补偿矢量由XZ方向的分量组成编程轨迹包含T代码的程序段图3341经偏置磨损补偿后的刀具轨迹例21如图3342先建立刀具偏置磨损补偿后取消刀具偏置磨损补偿。62
X100T0202G01X50Z100Z200世纪星车床数控系统HNC2122T编程说明书刀补轨迹50X100Z250T0200编程轨迹M30图3342刀具偏置磨损补偿编程刀尖圆弧半径补偿G40G41G42G40格式G41G00XZZ100200250G42G01说明数控程序一般是针对刀具上的某一点即刀位点按工件轮廓尺寸编制的。车刀的刀位点一般为理想状态下的假想刀尖A点或刀尖圆弧圆心O点。但实际加工中的车刀由于工艺或其他要求刀尖往往不是一理想点而是一段圆弧。当切削加工时刀具切削点在刀尖圆弧上变动造成实际切削点与刀位点之间的位置有偏差故造成过切或少切。这种由于刀尖不是一理想点而是一段圆弧造成的加工误差可用刀尖园弧半径补偿功能来消除。刀尖园弧半径补偿是通过G41G42G40代码及T代码指定的刀尖园弧半径补偿号加入或取消半径补偿。G40取消刀尖半径补偿G41左刀补在刀具前进方向左侧补偿如图3343G42右刀补在刀具前进方向右侧补偿如图3343XZG00G01的参数即建立刀补或取消刀补的终点注意G40G41G42都是模态代码可相互注销。63
ZXG42沿着刀具运动方向看刀具在工件右侧G41沿着刀具运动方向看刀具在工件左侧G41沿着刀具运动方向看刀具在工件右侧G42沿着刀具运动方向看刀具在工件左侧图3343左刀补和右刀补ZX世纪星车床数控系统HNC2122T编程说明书注意1G41G42不带参数其补偿号代表所用刀具对应的刀尖半径补偿值由T代码指定。其刀尖圆弧补偿号与刀具偏置补偿号对应。2刀尖半径补偿的建立与取消只能用G00或G01指令不得是G02或G03。刀尖圆弧半径补偿寄存器中定义了车刀圆弧半径及刀尖的方向号。车刀刀尖的方向号定义了刀具刀位点与刀尖圆弧中心的位置关系其从09有十个方向如图3344所示。64
世纪星车床数控系统HNC2122T编程说明书4509Z7X162代表刀具刀位点A代表刀尖园弧圆心O162509Z7X483代表刀具刀位点A代表刀尖园弧圆心O图3344车刀刀尖位置码定义例22考虑刀尖半径补偿编制图3345所示零件的加工程序8365
世纪星车床数控系统HNC2122T编程说明书R5403127R15N8G01Z40N9G00X30N10G40X40Z5N11M30加工26外圆退出已加工表面取消半径补偿返回程序起点位置主轴停主程序结束并复位图3345刀具园弧半径补偿编程实例3345N1T0101N2M03S400N3G00X40Z5N4G00X0N5G01G42Z0F60N6G03U24W24R15加工R15圆弧段N7G02X26Z31R5加工R5圆弧段换一号刀确定其坐标系主轴以400rmin正转到程序起点位置刀具移到工件中心加入刀具园弧半径补偿工进接触工件662622
世纪星车床数控系统HNC2122T编程说明书339综合编程实例编程步骤产品图样分析1尺寸是否完整2产品精度粗糙度等要求。3产品材质硬度等。工艺处理1加工方式及设备确定。2毛坯尺寸及材料确定。3装夹定位的确定。4加工路径及起刀点换刀点的确定。5刀具数量材料几何参数的确定。6切削参数的确定。1背吃刀量影响背吃刀量的因素有粗精车工艺刀具强度机床性能工件材料及表面粗糙度。2进给量进给量影响表面粗糙度。影响进给量的因素有a粗精车工艺。粗车进给量应较大以缩短切削时间精车进给量应较小以降低表面粗超度。一般情况下精车进给量小于02mmr为宜但要考虑刀尖圆弧半径的影响粗车进给量大与025mmr。b机床性能。如功率刚性。c工件的装夹方式。d刀具材料及几何形状。e背吃刀量。f工件材料。工件材料较软时可选择较大进给量反之可选较小进给量。3切削速度切削速度的大小可影响切削效率切削温度刀具耐用度等。影响切削速度的因素有刀具材料工件材料刀具耐用度背吃刀量与进给量刀具形状切削液机床性能。数学处理1编程零点及工件坐标系的确定67
世纪星车床数控系统HNC2122T编程说明书2各节点数值计算其它主要内容1按规定格式编写程序单2按程序编辑步骤输入程序并检查程序。3修改程序。综合编程实例例编制图3346所示零件的加工程序。工艺条件工件材质为45钢或铝毛坯为直径54mm长200mm的棒料刀具选用1号端面刀加工工件端面2号端面外圆刀粗加工工件轮廓3号端面外圆刀精加工工件轮廓4号外圆螺纹刀加工导程为3mm螺距为1mm的三头螺纹。11R151335010R21220R6331026245145R2524图3346综合编程实例68545236463630M201三头42
世纪星车床数控系统HNC2122T编程说明书3346N1T0101N2M03S500N3G00X100Z80N4G00X60Z5N5G81X0Z15F100简单端面循环加工过长毛坯N6G81X0Z0N7G00X100Z80N8T0202N9G00X60Z3N10G80X526Z133F100简单外圆循环加工过大毛坯直径N11G01X54到复合循环起点位置N12G71U1R1P16Q32E03有凹槽外径粗切复合循环加工N13G00X100Z80N14T0303N15G00G42X70Z3N16G01X10F100N17X1995Z2N18Z33N19G01X30N20Z43N21G03X42Z49R6N22G01Z53N23X36Z65N24Z73N25G02X40Z75R2N26G01X44N27X46Z76N28Z84N29G02Z113R25N30G03X52Z122R15精加工R15圆弧N31G01Z133精加工52外圆换一号端面刀确定其坐标系主轴以400rmin正转到程序起点或换刀点位置到简单端面循环起点位置简单端面循环加工加工过长毛坯到简单外圆循环起点位置到程序起点或换刀点位置换二号外圆粗加工刀确定其坐标系粗加工后到换刀点位置换三号外圆精加工刀确定其坐标系到精加工始点加入刀尖园弧半径补偿精加工轮廓开始到倒角延长线处精加工倒245角精加工螺纹外径精加工Z33处端面精加工30外圆精加工R6圆弧精加工R2过渡圆弧精加工Z75处端面精加工倒145角精加工46槽径精加工R25圆弧凹槽精加工42外圆精加工下切锥面精加工36槽径69
1宏变量04950199200249250299300349350399当前局部变量全局变量0层局部变量1层局部变量2层局部变量3层局部变量世纪星车床数控系统HNC2122T编程说明书N32G01X54N33G00G40X100Z80N34M05N35T0404N36M03S200N37G00X30Z5N38G82X193Z20R3E1C2P120F3加工两头螺纹吃刀深07N39G82X189Z20R3E1C2P120F3加工两头螺纹吃刀深04N40G82X187Z20R3E1C2P120F3加工两头螺纹吃刀深02N41G82X187Z20R3E1C2P120F3光整加工螺纹N42G76C2R3E1A60X187Z20K065U01V01Q06P240F3N43G00X100Z80返回程序起点位置N44M30主轴停主程序结束并复位34宏指令编程HNC2122T为用户配备了强有力的类似于高级语言的宏程序功能用户可以使用变量进行算术运算逻辑运算和函数的混合运算此外宏程序还提供了循环语句分支语句和子程序调用语句利于编制各种复杂的零件加工程序减少乃至免除手工编程时进行繁琐的数值计算以及精简程序量。341宏变量及常量退出已加工表面精加工轮廓结束取消半径补偿返回换刀点位置主轴停换四号螺纹刀确定其坐标系主轴以200rmin正转到简单螺纹循环起点位置70
4004494504995005495505996006997007998008994层局部变量5层局部变量6层局部变量7层局部变量刀具长度寄存器H0H99刀具半径寄存器D0D99刀具寿命寄存器1000机床当前位置X1003机床当前位置A1006机床当前位置U1009直径编程1012程编机床位置Z1015程编机床位置C1018程编机床位置W1021程编工件位置Y1024程编工件位置B1027程编工件位置V1030当前工件零点X1033当前工件零点A1036当前工件零点U1039坐标系建立轴1042G54零点Z1045G54零点C1048G54零点W1051G55零点Y1054G55零点B1057G55零点V1060G56零点X1063G56零点A1066G56零点U1001机床当前位置Y1004机床当前位置B1007机床当前位置V1010程编机床位置X1013程编机床位置A1016程编机床位置U1019保留1022程编工件位置Z1025程编工件位置C1028程编工件位置W1031当前工件零点Y1034当前工件零点B1037当前工件零点V1040G54零点X1043G54零点A1046G54零点U1049保留1052G55零点Z1055G55零点C1058G55零点W1061G56零点Y1064G56零点B1067G56零点V1002机床当前位置Z1005机床当前位置C1008机床当前位置W1011程编机床位置Y1014程编机床位置B1017程编机床位置V1020程编工件位置X1023程编工件位置A1026程编工件位置U1029保留1032当前工件零点Z1035当前工件零点C1038当前工件零点W1041G54零点Y1044G54零点B1047G54零点V1050G55零点X1053G55零点A1056G55零点U1059保留1062G56零点Z1065G56零点C1068G56零点W世纪星车床数控系统HNC2122T编程说明书71
1111111411171120112311261129镜像屏蔽字1132旋转角度1135缩放中心轴11138缩放比例1141坐标变换代码21144刀具长度补偿号1147当前平面轴21150G代码模态值01153G代码模态值3G28中间点位置YG28中间点位置BG28中间点位置V镜像点位置X镜像点位置A镜像点位置U世纪星车床数控系统HNC2122T编程说明书1069保留1072G57零点Z1075G57零点C1078G57零点W1081G58零点Y1084G58零点B1087G58零点V1090G59零点X1093G59零点A1096G59零点U1099保留1102中断点位置Z1105中断点位置C1108中断点位置W1070G57零点X1073G57零点A1076G57零点U1079保留1082G58零点Z1085G58零点C1088G58零点W1091G59零点Y1094G59零点B1097G59零点V1100中断点位置X1103中断点位置A1106中断点位置U1109坐标系建立轴1112G28中间点位置Z1115G28中间点位置C1118G28中间点位置W1121镜像点位置Y1124镜像点位置B1127镜像点位置V1130旋转中心轴11133旋转轴屏蔽字1136缩放中心轴21139缩放轴屏蔽字1142坐标变换代码31145刀具半径补偿号1148虚拟轴屏蔽字1151G代码模态值11154G代码模态值41071G57零点Y1074G57零点B1077G57零点V1080G58零点X1083G58零点A1086G58零点U1089保留1092G59零点Z1095G59零点C1098G59零点W1101中断点位置Y1104中断点位置B1107中断点位置V1110G28中间点位置X1113G28中间点位置A1116G28中间点位置U1119G28屏蔽字1122镜像点位置Z1125镜像点位置C1128镜像点位置W1131旋转中心轴21134保留1137缩放中心轴31140坐标变换代码11143保留1146当前平面轴11149进给速度指定1152G代码模态值21155G代码模态值572
1156G代码模态值61159G代码模态值91162G代码模态值121165G代码模态值151168G代码模态值181171备用CACHE1174保留1177保留1180保留1183保留1186保留1189保留1192自定义输出屏蔽1157G代码模态值71160G代码模态值101163G代码模态值131166G代码模态值161169G代码模态值191172剩余缓冲区1175保留1178保留1181保留1184保留1187保留1190用户自定义输入1193保留1158G代码模态值81161G代码模态值111164G代码模态值141167G代码模态值171170剩余CACHE1173备用缓冲区1176保留1179保留1182保留1185保留1188保留1191用户自定义输出1194保留世纪星车床数控系统HNC2122T编程说明书20002600复合循环数据区2000轮廓点数20012100轮廓线类型0G001G012G023G0321012200轮廓点X直径方式为直径值半径方式为半径值22012300轮廓点Z23012400轮廓点R24012500轮廓点I25012600轮廓点J2常量PI圆周率TRUE条件成立真FALSE条件不成立假342运算符与表达式1算术运算符2条件运算符EQNEGT73
世纪星车床数控系统HNC2122T编程说明书GELTLE3逻辑运算符ANDORNOT4函数SINCOSTANATANATAN2ABSINTSIGNSQRTEXP5表达式用运算符连接起来的常数宏变量构成表达式。例如175SQRT2COS55PI18036GT14343赋值语句格式宏变量常数或表达式把常数或表达式的值送给一个宏变量称为赋值。例如2175SQRT2COS55PI18031240344条件判别语句IFELSEENDIF格式iIF条件表达式ELSEENDIF格式iiIF条件表达式ENDIF345循环语句WHILEENDW格式WHILE条件表达式ENDW条件判别语句的使用参见宏程序编程举例。循环语句的使用参见宏程序编程举例。74
世纪星车床数控系统HNC2122T编程说明书例18用宏程序编制如图3339所示抛物线ZX28在区间016内的程序。X16Z032图3339宏程序编制例图8002100X坐标110Z坐标N10G92X00Z00M03S600WHILE10LE16G90G01X10Z11F50010100081110108ENDWG00Z0M05G00X0M3075
世纪星车床数控系统HNC2122T编程说明书附表1准备功能一览表G代码组功能参数后续地址字索引G00G01G02G0301快速定位直线插补顺圆插补逆圆插补XZ同上XZIKR同上333节G0400暂停P336节G20G2108英寸输入毫米输入331节G28G2900返回到参考点由参考点返回XZ同上334节G3201螺纹切削XZ333节G40G41G4209刀尖半径补偿取消左刀补右刀补DD335节G5200局部坐标系设定XZ332节G54G55G56G57G58G5911零点偏置332节G6500宏指令简单调用PAZ311节G71G72G73G7606外径内径车削复合循环端面车削复合循环闭环车削复合循环螺纹切削复合循环XZUWPQR338节G80G81G8201内外径车削固定循环端面车削固定循环螺纹切削固定循环XZIK337节G9013绝对值编程332节76
世纪星车床数控系统HNC2122T编程说明书G91增量值编程G9200工件坐标系设定XZ332节G94G9514每分钟进给每转进给331节G36G3716直径编程半径编程332节332节注意100组中的G代码是非模态的其他组的G代码是模态的2标记者为缺省值。77
世纪星车床数控系统HNC2122T编程说明书附表2直径编程注意条件项目注意事项Z轴指令与直径半径无关X轴指令用直径值指令坐标系的设定用直径值指令圆弧插补的半径指令RIK用半径值指令X轴方向的进给速度半径的变化转半径的变化分X轴的位置显示用直径值显示附录1HNC21T车削循环宏程序1车削循环指令的实现及子程序调用的参数传递HNC21T的固定循环指令采用宏程序方法实现这些宏程序调用具有模态功能。由于各数控公司定义的固定循环含义不尽一致采用宏程序实现固定循环用户可按自己的要求定制固定循环十分方便。华中数控随售出的数控装置赠送固定循环宏程序的源代码staticcy。为便于用户阅读下面固定循环宏程序的源代码先介绍一下HNC21T宏程序子程序调用的参数传递规则。G代码在调用宏子程序或固定循环下同时系统会将当前程序段各字段AZ共26字段如果没有定义则为零的内容拷贝到宏执行时的局部变量025同时拷贝调用宏时当前通道九个轴的绝对位置机床绝对坐标到宏执行时的局部变量3038。调用一般子程序时不保存系统模态值即子程序可修改系统模态并保持有效而调用固定循环时保存系统模态值即固定循环子程序不修改系统模态。下表列出了宏当前局部变量038所对应的宏调用者传递的字段参数名。78
世纪星车床数控系统HNC2122T编程说明书宏当前局部变量宏调用时所传递的字段名或系统变量0A1B2C3D4E5F6G7H8I9J101112131415161718192021222324252627282930KLMNOPQRSTUVWXYZ固定循环指令初始平面Z模态值不用不用不用调用子程序时轴0的绝对坐标79
世纪星车床数控系统HNC2122T编程说明书31调用子程序时轴1的绝对坐标32调用子程序时轴2的绝对坐标33调用子程序时轴3的绝对坐标34调用子程序时轴4的绝对坐标35调用子程序时轴5的绝对坐标36调用子程序时轴6的绝对坐标37调用子程序时轴7的绝对坐标38调用子程序时轴8的绝对坐标对于每个局部变量都可用系统宏AR来判别该变量是否被定义是被定义为增量或绝对方式。该系统宏的调用格式如下AR变量号返回0表示该变量没有被定义90表示该变量被定义为绝对方式G9091表示该变量被定义为相对方式G91。例下面的主程序O1000在调用子程序O9990时设置了IK之值子程序O9990可分别通过当前局部变量810来访问主程序的IK之值。1000G92X0Z0M98P9990I20K40M309990IFAR8EQ0ORAR10EQ0如果没有定义IK值M99则返回ENDIFN10G91用增量方式编写宏程序IFAR8EQ90如果I值是绝对方式G908830将I值转换为增量方式30为X的绝对坐标ENDIF80
o0099g92X0Z0N1001098M98P100M30o100N20010100M98P110M99o110N30010200M99此时N100所在段的局部变量10为第一层210此时N200所在段的局部变量为第二层260N100所在段的局部变量10为第一层210世纪星车床数控系统HNC2122T编程说明书M99HNC2122T子程序嵌套调用的深度最多可以有九层每一层子程序都有自己独立的局部变量变量个数为50。当前局部变量为049第一层局部变量为200249第二层局部变量为250299第三层局部变量300349依此类推。在子程序中如何确定上层的局部变量要依上层的层数而定例为了更深入地了解HNC2122T宏程序这里给出一个利用小直线段逼近整园的数控加工程序O1000G92X0Z0M98P2X50Z0R50M30宏程序调用加工整圆O2加工整圆子程序园心为XZ半径为R81
世纪星车床数控系统HNC2122T编程说明书X23Z25R17IFAR17EQ0OR17EQ0如果没有定义RM99ENDIFIFAR23EQ0ORAR25EQ0如果没有定义圆心M99ENDIF461163记录模态码1163是G90ORG91G91IFAR23EQ90232330ENDIFIFAR25EQ90252532ENDIF02317COS012517SIN0G01X0Z1101WHILE10LE100用相对编程G91如果X为绝对编程方式则转为相对编程方式如果Z为绝对编程方式则转为相对编程方式用100段小直线逼近圆017COS102PI100COS1012PI100117SIN102PI100SIN1012PI100G01X0Z110101ENDW82
世纪星车床数控系统HNC2122T编程说明书G46恢复模态M992车削循环指令的宏程序实现下面是HNC2122T的固定循环宏程序源代码的内容。0000固定循环宏程序定义G73G74G76G80G81G820080内外径切削循环G80宏程序实现源代码调用本程序之前必须转动主轴M03或M04401152IFAR25EQ0ORAR23EQ0M99ENDIFN10G90IFAR23EQ91232330ENDIFIFAR25EQ91252532ENDIFIFAR8EQ080ENDIFIF1009EQ0412如果没有定义Z值和X值则返回用绝对方式编写宏程序如果X值是增量方式G91则将X值转换为绝对方式30为调用本程序时X的绝对坐标如果Z值是增量方式G91则将Z值转换为绝对方式32为调用本程序时Z的绝对坐标如果I值没有定义I0半径编程83
世纪星车床数控系统HNC2122T编程说明书ELSE411ENDIFg01X30241Z3242238241N20g00X42Z324223241N30G01Z25X424230241N40G01X42N50G00Z32G40M99直径编程移到加工点加工返回初始点0081端面切削循环G81宏程序实现源代码调用本程序之前必须转动主轴M03或M04401152IFAR25EQ0ORAR23EQ0M99ENDIFN10G90IFAR23EQ91232330ENDIF如果没有定义Z值和X值则返回用绝对方式编写宏程序如果X值是增量方式G91则将X值转换为绝对方式30为调用本程序时X的绝对坐标84
世纪星车床数控系统HNC2122T编程说明书IFAR25EQ91252532ENDIFIFAR10EQ0100ENDIF如果Z值是增量方式G91则将Z值转换为绝对方式32为调用本程序时Z的绝对坐标如果K值没有定义K0IF1009EQ0412半径编程ELSE411直径编程ENDIFG90g01X30241Z32N20G00X30241Z2510移到加工点4223241N30G01X42Z25N40G01Z32加工4230241N50G00X42G40M99返回初始点0082螺纹切削循环G82宏程序实现源代码调用本程序之前必须转动主轴M03或M04401152IFAR25EQ0ORAR23EQ0如果没有定义Z值和X值M99则返回85
IFAR4EQ040ENDIFIFAR17EQ0170ENDIFIFAR2EQ021ENDIFIF2LT2or2GT9921如果X向退尾量E值没有定义如果Z向退尾量R值没有定义如果螺纹头数没有定义则为单头世纪星车床数控系统HNC2122T编程说明书ENDIFIFAR5EQ0M99ENDIFN10G90IFAR23EQ91232330ENDIFIFAR25EQ91252532ENDIFIFAR8EQ080ENDIF如果螺距F值没有定义返回用绝对方式编写宏程序如果X值是增量方式G91则将X值转换为绝对方式30为X的绝对坐标如果Z值是增量方式G91则将Z值转换为绝对方式32为Z的绝对坐标如果I值没有定义86
世纪星车床数控系统HNC2122T编程说明书ENDIFIFAR15EQ0150ENDIF280IF2EQ12815150ENDIFIF1009EQ0412ELSE411ENDIFG90g01X30241Z32如果多头螺纹间距角没有定义则为0起始角度半径编程直径编程WHILE2GE142238241N20G00X42Z324223241N30G32X42Z25E4R17P28F54230241N40G01X42Z2517加工N50G00Z32返回初始点221282815ENDWG40M99移到加工点87
世纪星车床数控系统HNC2122T编程说明书0071内外径粗车削复合循环G71宏程序实现源代码调用本程序之前必须转动主轴M03或M04IFAR20EQ0ORAR17EQ0若没有定义切削深度U和退刀量RM99则返回ENDIFIFAR23EQ0ORAR25EQ0如果没有定义X值和Z值M99ENDIFIF20LE0OR17LE0M99ENDIF491152IF1009EQ0412ELSE411ENDIFG90g01X30241Z320012000IF1LE1M99ENDIF22017241IF30241GT210122ENDIF则返回如果UR小于零则返回保存G值半径编程直径编程点数点数小于等于1直接返回每次的进刀量UR进刀方向判断X88
317241IF23LT0317ENDIF417IF25LT0417ENDIF53023241123225N20G00G90X5Z12552401IF21001GE2101401ELSE401X方向每次的退刀量R退刀方向判断退刀方向为负Z方向每次的退刀量退刀方向判断Z0时退刀方向为负当前X的绝对坐标当前Z的绝对坐标移到C点下一步要移到的X位置X递减X递增世纪星车床数控系统HNC2122T编程说明书ENDIFIF5GT2100123241AND40EQ1第一点X和当前X相差较远52100123241ELSEIF5LT2100123241AND40EQ152100123241ENDIFENDIFWHILE1GT162100123241前一点X的绝对坐标72200125前一点Z的绝对坐标821001123241下一点X的绝对坐标922001125下一点Z的绝对坐标WHILE5GE8AND5LE6OR5LE8AND5GE689
x0x2iz0z2kresultz0sqrtrryx0yx01020001IF10LT2IF6EQ8117ELSE直线ENDIFENDIFG00X5G01Z1155311114G00X5Z11G00Z12552移到加工点加工到交点下一步要移到的X位置下一步要移到的Z位置退刀返回下移X值世纪星车床数控系统HNC2122T编程说明书X在两点之间有交点117975686交点ZENDIFELSE圆弧43841224001449250014523001R值475412434645454747IF46LT0460ENDIFIF10EQ2顺时针114440SQRT46交点ZELSEresultz0sqrtrryx0yx0114440SQRT4690
ENDIF001ENDW530241G00X5Z32G49M99初始点X值必须考虑直径编程问题回到初始点G90G91模态恢复世纪星车床数控系统HNC2122T编程说明书ENDW111ENDW采用绝对方式沿轨迹留有精加工余量加工最后一次01WHILE0LE20001020000112100023241加X方向的精加工余量必须考虑直径编程问题122200025加Z方向的精加工余量1323000IF10LT2直线G10X11Z12ELSE圆弧G10X11Z12R130072端面粗车削复合循环G72宏程序实现源代码调用本程序之前必须转动主轴M03或M04IFAR22EQ0ORAR17EQ0没有定义切削深度和退刀量M99ENDIF则返回91
世纪星车床数控系统HNC2122T编程说明书IFAR23EQ0ORAR25EQ0M99ENDIFIF22LE0OR17LE0M99ENDIF491152IF1009EQ0412ELSE411ENDIFG90g01X30241Z320012000IF1LE1M99ENDIF22217IF32GT220122ENDIF317241IF23LT0317ENDIF417IF25LT0417ENDIF如果没有定义X值和Z值则返回如果WR小于零则返回半径编程直径编程点数点数小于等于1直接返回每次的进刀量WR进刀方向判断ZX方向每次的退刀量R退刀方向判断X0时退刀方向为负Z方向每次的退刀量退刀方向判断Z0时退刀方向为负92
53023241123225N20G00G90X5Z1212122401IF22001GE2201401ELSE401当前X的绝对坐标当前Z的绝对坐标移到C点下一步要移到的Z位置Z递减Z递增世纪星车床数控系统HNC2122T编程说明书ENDIFIF12GT2200125AND40EQ1第一点Z和当前Z相差较远122200125ELSEIF12LT2200125AND40EQ1122200125ENDIFENDIFWHILE1GT16210012324172200125821001123241922001125前一点X的绝对坐标前一点Z的绝对坐标下一点X的绝对坐标下一点Z的绝对坐标WHILE12GE9AND12LE7OR12LE9AND12GE71020001IF10LT2IF7EQ9116ELSEZ在两点之间有交点直线ENDIFELSE交点X圆弧resultx1x2x1yz1z2z1116861279793
43824001241449250014523001R值46454512441244IF46LT0460ENDIFIF10EQ2114340SQRT46241ELSEresultx0sqrtrryz0yz0114340SQRT46241ENDIFENDIFG00Z12G01X111212411113G00X11Z12G00X512122移到加工点加工到交点下一步要移到的Z位置下一步要移到的X位置退刀返回下移X值ENDW111ENDW采用绝对方式沿轨迹加工最后一次01WHILE0LE20001020000112100023241122200025世纪星车床数控系统HNC2122T编程说明书x0x2iz0z2kresultx0sqrtrryz0yz094顺时针交点X
世纪星车床数控系统HNC2122T编程说明书1323000IF10LT2G10X11Z12ELSEG10X11Z12R13ENDIF001ENDW530241G00X5Z32G49M99直线0073封闭轮廓循环G73宏程序实现源代码调用本程序之前必须转动主轴M03或M04IFAR22M99ENDIFIFAR23M99ENDIFIF17LE0M99ENDIF491152IF1009EQEQ0ORAR17EQ0ORAR20EQ0如果没有定义切削深度UW循环次数R则返回EQ0ORAR25EQ0如果没有定义X值和Z值则返回095初始点X值必须考虑直径编程回到初始点如果R小于等于零则返回
世纪星车床数控系统HNC2122T编程说明书半径编程412ELSE411ENDIFG90g01X30241Z320171123023202413322522G90G00X2Z3WHILE0GT0WHILE1LE200042024117522176210012324140下一点X的坐标7220012550820001923001IF8LT2G8X6Z7ELSEG8X6Z7R9ENDIF111ENDW222024117332217G00X2Z311001ENDW下一点Z的坐标G值R值直线96直径编程当前X坐标即A1点X值当前Z坐标即A1点Z值移到A1点X方向的进给量Z方向的进给量移到下一个起始点
世纪星车床数控系统HNC2122T编程说明书01WHILE0LE200092000010230006210002324172200025IF9LT2G9X6Z7ELSEG9X6Z7R10ENDIF001ENDW530241G00X5Z32G49M99最后一次有精加工余量的下一点X有精加工余量的下一点Z直线0076螺纹切削复合循环G76宏程序实现源代码调用本程序之前必须转动主轴M03或M04IFAR0EQ0M99ENDIFIFAR23EQ0ORAR25EQ0M99ENDIFIFAR10EQ0M99如果没有定义刀尖角度A值则返回如果没有定义X值和Z值则返回如果没有定义K值则返回97初始点X值必须考虑直径编程回到初始点
世纪星车床数控系统HNC2122T编程说明书ENDIFIFAR20EQ0ORAR21EQ0M99ENDIFIFAR5EQ0M99ENDIFIFAR17EQ0170ENDIFIF17GT99OR17LT0M99ENDIFIFAR2EQ021ENDIFIF2GT99OR2LT0M99ENDIFIFAR8EQ080ENDIFIF0LT10OR0GT80M99ENDIFIFAR4EQ0ORAR16EQ0如果没有定义U值V值和Q值则返回如果没有定义F值则返回如果没有定义退尾长度R值退尾长度为零如果退尾长度大于99或小于0则返回如果没有定义精整次数C值精整次数为零若精整次数R大于99或小于0则返回如果没有定义螺纹锥度I值则I0若刀尖角度A小于10或大于80则返回如果X向退尾量E值没有定义98
410ENDIFIFAR15EQ0150ENDIFIF1009EQ0392ELSE391ENDIFG90g01X30239Z32N10G90IFAR23EQ91232330ENDIFIFAR25EQ91252532ENDIFIF30GT23271ELSE271ENDIFIF32GT25281ELSE281ENDIF如果多头螺纹间距角没有定义则为0半径编程直径编程用绝对方式编写宏程序如果X值是增量方式G91则将X值转换为绝对方式30为调用本程序时X的绝对坐标如果Z值是方式G91则将Z值转换为绝对增量方式32为调用本程序时Z的绝对坐标进给方向确定世纪星车床数控系统HNC2122T编程说明书99
47INT101610164814947102PI180KQsqrtnWHILE49GT14016SQRT484116SQRT481IF4041LT214041214704240TAN1WHILE40LT10算出N值X方向切削深度如果一次切削深度小于V值则设定为V值Z方向切削深度世纪星车床数控系统HNC2122T编程说明书38302740239G90G00X38Z3228423823810202740239G00X38移到螺纹起点382310202740239G32X38Z252842E4P15R17F5加工螺纹回到A点Z方向切削深度Z方向切削深度精加工38302740239G90G00X38Z3228423823810202740239G00X38移到螺纹起点382310202740239G32X38Z252842E4P15R17F5G00X30239Z324040214240TAN1ENDW40104704240TAN1WHILE47LT2100沿牙坡移动沿牙坡移动
G00X30239Z324848149491ENDWM99加工螺纹回到A点世纪星车床数控系统HNC2122T编程说明书加工螺纹G00X30239Z3247471ENDWM99ENDIF4240TAN138302740239G90G00X38Z3228423823810202740239G00X38382310202740239G32X38Z252842E4P15R17F5101回到A点Z方向切削深度沿牙坡移动移到螺纹起点
