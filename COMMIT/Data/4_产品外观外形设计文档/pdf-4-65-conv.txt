20年工程图学学报26第5期JouRNALoFENGINEERINGGRA唧CSNo5镜片的焦距调整算法及其在眼镜外形设计中的应用胡金华匡宇国浙江工贸职业技术学院浙江温州325003摘要在简要介绍了当前眼镜机械数控加工系统基本原理的基础上阐述了镜片焦距调整设计在镜片设计与编辑应用中的必要性并针对眼镜片外形编辑臌计中焦点调整的要求提出了采用逆向思维法进行镜片焦距调整的算法。通过比较直线插补与圆弧插补两种插补方式的焦距调整效果证实了运用圆弧插补进行焦距调整具有较好的镜片外形平滑性是一种切实可行的方案。关键词计算机应用镜片外形设计镜片焦距调整曲线平滑度中图分类号TP39172文献标识码A文章编号10030158200605014905EyeglassC帅tourFittingforAli驴iIIgFo眦砸删JillhuaKUANGYugllozb司ia工Igins时1hdeP0ly眦h山cwen出。uzh自i扪g325003c吣naAbstract11lenu勰ricaIcon删ingsystemofgIassesmcllineryisintroducedi11bricf锄d山esigllific粕ce锄dcess姆0ffocusadjustiIIgiIleyeglasscontollrdesignisanalyzedPrecisionandsm00血n船sarcinterpol撕on粕dH眦arinterp01ationarecomparedC0mputaIIonalresultsshowt11atarcintelpol州ongivesahiglle。qualityofeyeglassedgeKeywordscomputcrapplica廿oneye91asscontoIlrdesigneyeglassfocusadjustiIlgcurvesIIloOhI圯ss随着计算机及先进制造技术的发展眼镜机采用仿形模板将采样后的数据传输到电脑并械行业也不断朝高精度自动化智能化发展通过编写计算机图形编辑软件进行计算机图形国内外出现了少数以全自动或半自动加工的眼处理最后将数据传送到微处理控制器中微处镜数控机械设备如自动磨边机自动绕框机理控制系统再根据眼镜数据有机地控制各伺服自动割片机等。它们主要利用计算机控制技术电机从而加工出相应形状的眼镜产品。收稿日期25O卜21作者简介胡金华1979女湖南益阳人。硕士研究生主要研究方向为计算机图形学数字化人机工程机器视觉和人工智能等万方数据
采样后获取的镜片外形数据点相对于焦点是角度均匀分布的而焦点发生改变后各数据点相对于镜片焦点的极坐标也发生相应改变角度不再均匀故必须对镜片外形数据进行重新分配。隧1镜片外形编辑设计卜一图1眼镜镜片设计框图镜片焦距调整的逆向思维法也包含有直线插补和圆弧插补两种其基本步骤41为1求移动焦点后各原数据点所对虑的极坐标角度值并判断各数据点D与皿。之问是否包含有需要插补的数据点2若有需插补的点则求I程图学学报2006卑一般说束这些专用的计算机图形编辑或设y女2石一Df曲曩y计软件或采用逐点修正采样数据的方法或直其中接采用直线圆弧插补曲线拟合的方法能相对快速地处理眼镜外形的形状变化但对于镜片焦距的调整设计欠缺考虑。而由于人的两瞳孔间距各异因此在镜片外形编辑或设计过程中镜片焦距的可调整设计显得尤为必要。1镜片焦距调整的基本概念镜片的焦距移动是指在眼镜片外形保持不变的前提下使焦点位置发生改变即镜片外形的绝对直角坐标保持不变而焦点的坐标发生改变。镜片焦足巨调整设计的框图如图1所示由于口工D。y分别为第i个数据点相对于移动后的焦点的坐标值。直线插补法是指假定镜片外形的各数据点之间是直线连接求角度均匀直线与镜片外形直线交点的方法故各分配后的插补值为直线上的点而圆弧插补法是指假定各数据点之间是圆弧连接的求该圆弧与角度均匀直线交点的方法故各分配后的插补值为圆弧上的点。顺向思维法是用角度均匀直线循环测试所有的镜片外形直线段即与各直线段相交判断交点存在于哪个直线段并求出其交点值的方法而逆向思维法是指对每一条镜片外形直线段的端点进行判断看是否包含有所需要的角度以此来判断是否存在交点及几个交点并求出各交点值的方法。从上述顺向思维和逆向思维的方法可知顺向思维具有思路简单清晰易于编程实现的特点但计算循环的次数太多有360360次因而速度大大下降而采用逆向思维方法虽然编程难度相对较高但只需要判断360次大大提高了运行速度。因此下面重点介绍焦距调整的逆向思维法。2镜片焦距调整的逆向思维法焦距调整的设计是指在已知焦点位置的改变量的前提下求各角度均匀分配后的数据点相由此两点Di与D。组成的直线段与角度均匀直对于新焦点的极坐标值。焦距调整设计的方法按重新分配数据点的连接方式主要可分为直线插补法和圆弧插补法两种按分配数据点求取的方法可分为顺向思维法和逆向思维法。角度均匀直线ytan舅上其中只为分配均匀后的第f个数据点的极坐标角度。镜片外形直线段Lqy一D。yDiz一Dx线ytan谚x的交点直线插补法或求由3点口vD。与皿。组成的圆弧与角度均匀直线的交点圆弧插补法并求出其相席的极坐标值。1判断线段D。D。是否需要插补令采样分辨率为1360即每转1度采样一个数据则镜片外形上的任意点的坐标为D。工DfcosfDfyDjsini如图2所示镜片外形上的任意两点万方数据
第5期胡金华等镜片的焦距调整算法及其在眼镜外形设计中的应用151BDxDycD。OD十1y的坐标已知中心移动到日虬以后两点坐标分别为B最口ceq且最D。x卜吼Dfy一ep曲一G口y一甄则有么占arctan墨其整数部分为口占么c盯ct觚旦其整数部分为口C若玳芦一甜1则镜片外形线段丑C中包含有珊个需插补的点。3由上述分析可知此两直线的交点爿4爿即为焦距调整后得到的第噼七个数据点的直角坐标。故分配后镜片外形的第数据实现镜片焦距的调整。3圆弧插补图2镜片焦距调整示意图2直线插补镜片外形线段Bc的直线方程为七生量jBxC。y毛x一芝占。角度均匀直线0j爿的直线方程为吒恤a州x舞y七并2其中七12m结合式1和式2可得两直线的交点一的坐标为q一口一6r5万方数据卜圆弧插补的关键是求圆弧的圆心和半径最简单的办法就是过圆弧上的3点来求。但是如果对采样的数据直接迸行焦距调整由于各种高热的存在可能会导致出现噪声数据因此只有3个点不一定能代表此段外形的真实变化情况因此可能要用到各种复杂的圆弧拟合多项式拟合或B样条拟合方法等。由于设计镜片的步骤是先设计好镜片的外形然后再进行焦距调整因此这里只介绍最简单的3点圆弧插补方法。根据图2所示过圆弧上面相邻的3点口DJz毋ycDJ。x2yEDf一。xqly则镜片中心移动到日知后有盈Bx一占。毋y一eDMx一qDf。y一y。EDf一。互一B口一ty一虬且满足B口一611r位lj个点的值为r。data口i42一24此外还必须考虑直线0n爿或Bc的斜率不存在的特殊情况。结合上述步骤1遍历完所有的镜片外形数据点即可获得角度均匀分布的完整镜片外形ELLLlii一6iII通过求解该三元二阶的方程组可以得出该口LLL彤q髟
三兰曼兰兰兰兰圆弧的圆心01西及半径r的值。故该圆弧的方程为在图3一图5中镜片外形框下的曲线计算的是各点的平滑度。比较三图中的平滑度曲线可知图3与图5具有较相似的变化趋势曲线的变化也相对平滑而图4的变化则较大平滑性较差。因此采用圆弧插补的方式进行焦距调整具有更好的甲滑性是一种切实可靠的方案。图3焦距调整前的镜片外形图图4直线插补的焦距调整图图5圆弧插补的焦距调整图z一II2y一6226由式2和式6可得圆弧插补的交点AA。A。的坐标为A掣A屯A7其中2r以扫一62r2一七2口2七2r2号由该段圆弧的凹凸性及圆弧所在象限确定。与直线插补类似此交点AAA。即为焦距调整后得到的第位七个数据点的直角坐标。故分配后镜片外形的第七个点的值为rdatad足A2A28结合步骤1遍历完所有的镜片外形数据点即可获得角度均匀分布的完整镜片外形数据实现镜片焦距的调整。3运行效果比较焦距调整前的镜片外形如图3所示把该镜片的焦点向右移动5mm向下移动4Im即新的中心为054采用直线插补方式的焦距调整如图4所示圆弧插补方式的焦距调整如图5所示。部分数据如表1所示。从表l中的数据可以看出焦距发生移动后各数据点的值也随之发生变化。但比较直线插补与圆弧插补获得的数据可知采用直线插补和圆弧插补法进行焦距调整的差别并不十分显著基本上都在O011m以下最大的差距也小于003咖因此在图4和图5的镜片外形曲线中体现为放大倍数较小时根本就看不出二者的差别。但考虑到镜片加工的高精度及高平滑性的要求这里计算任意点到由该点的前3个点所组成的圆弧的距离即把该点与此圆弧的偏离程度来表征镜片外形的平滑程度。并以此来评价镜片设计的质量。万方数据
第5期胡金华等镜片的焦距调整算法及其在眼镜外形设计中的应用表l移动前的原始数据表1534结论作者简要介绍了当前眼镜机械数控加工系统的基本原理阐述了镜片焦距调整设计在镜片设计与编辑应用中的必要性提出了采用逆向思维法进行镜片焦距调整的算法。通过比较直线插补与圆弧插补两种插补方式的焦距调整效果证实了运用圆弧插补进行焦距调整具有较好的镜片外形平滑性是一种切实可行的方案。参考文献万方数据l原勇王晴眼镜业国产仪器产业升级之路叨中国眼镜科技杂志2005757592薛伟周宏明等眼镜镜片样式的参数化模型和算法叨江苏大学学报2004ll64734763QinYuex试HuDejillResearch0nmearcill唧。枷伽forthenoIIstaIIdardsec60ncueofmepistonJJo岫alofD皿曲uauIIiverSity2004496984李东孙长嵩计算机图形学实用教程M北京人民邮电出版社20048486
