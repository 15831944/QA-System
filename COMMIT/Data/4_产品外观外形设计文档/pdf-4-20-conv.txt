设计开发数字技术与应用基于摄像头的智能汽车设计吴伟鸿嘉兴学院机电工程学院浙江嘉兴314000摘要智能汽车作为当今科技时代下的新兴产物集中运用了计算机现代传感信息融合自动控制人工智能及通讯等现代科学技术是未来汽车发展的重要方向。本文详细介绍了基于摄像头传感器的智能竞速汽车控制器的设计方案分别介绍了智能车的硬件组成路径的检测识别方法和智能车的控制策略。利用摄像头传感器采集识别道路信息规划最优路径采用PID控制算法控制电机和舵机实现自动控制。关键词摄像头智能汽车设计方案中图分类号TP3914文献标识码A本设计是基于MK60DN512ZVLL10单片机开发实现的该系统采用摄像头采集识别道路两旁或者中央的引导线在此基础上利用合理闭环的算法控制智能车运动从而实现智能车快速稳定的寻迹行驶。1智能车整体结构的选型与设计11图像传感器的选择图像传感器即数字摄像头。目前市场主流的两种摄像头传感器以金属氧化物半导体元件为感光材料的CMOS摄像头和以电荷耦合元件为感光材料的CCD摄像头。综合两种摄像头解析度灵敏度成本功耗比模块电路体积重量CMOS摄像头可以满足于4米秒速度以下智能车行驶并且CMOS摄像头功耗低工作电压只需33V7V完全可以由智能车稳压后得到稳定经济所以选择CMOS摄像头中的OV7725摄像头。12起跑线检测传感器选择起跑用的是发车灯塔控制方式发车灯塔不仅发出起跑信号而且发出终点信号。我们使用基于使用HS0038B传感器的基础电路作为接收灯塔光信号一个基础电路OUT口接MK60的C5。13速度检测传感器选择一个完整的控制系统是闭环控制的所以需要测速装置用以精准反映智能车实时速度。我们采用了由欧姆龙公司研制的一款200线的小型编码器。14车模选型本次设计采用由飞思卡尔半导体公司赞助的G768型车模即为竞赛中的C车模。2智能车硬件电路设计21硬件设计方案本设计方案采用模块化方式完成总设计模块化设计使思路清晰在使用出现错误时容易修理。22电路设计方案本次设计将智能车系统电路分成两个主要部分以MK60N512ZVLQ10为核心的控制电路和以电源为核心的驱动电路。考虑到MK60最小系统电路板比较大所以将整个系统电路分为两块规则PCB板主控板和驱动板。23控制电路以MK60为核心的单片机系统的硬件电路设计主要包括以下几个部分电源电路时钟电路JTAG接口复位电路。24驱动电路因为本次比赛摄像头组使用的电机是RS380SH直流电机小车驱动芯片决定选用集成的高电流半桥电机驱动应用BTN7971B它的输出电流足以带动电机转动并且较稳定。25电源模块比赛使用飞思卡尔专用电池2000mAh的镍镉电池1块标准电压72V。文章编号100794162016110152013智能车软件算法设计31软件控制整体设计本次设计所用的软件调试工具支持C语言和汇编语言混合编程的IAREmbeddedWorkbench软件由于C语言操作简单可修改和移植性强所以本次软件设计大部分程序都使用C语言编写只有在某些地方加入了汇编语句。32主程序结构在系统初始化方面我们所用到的底层硬件资源进行初始化和上层模块初始化。在方案选择及参数设定上我们在主板上设置了一组四位的拨码开关和三个按键结合OLED显示屏实现的方案和参数的可调以在比赛时对车作适当地调整。在图像获取上对于Ov7725数字摄像头使用场中断加高速DMA传输的方式来获取图像。图像处理则采用黑线提取和中心线提取。33控制算法控制算法是智能车的灵魂为了使小车能以稳定的速度通过跑道精确的速度控制是关键采用速度闭环控制方案。4智能车开发与调试41软件开发环境系统编译下载是在IARIDE开发环境下完成的EmbeddedWorkbenchforARM是IARSystems公司为ARM单片机开发的一个集成开发环境这一开发环境使用方便入门容易和代码简明紧凑。此外由于在IAR软件中进行编写调用修正函数比较复杂繁琐所以使用了Sourceinsight3软件进行辅助编写小车程序。42硬件开发环境本次毕业设计所用的硬件开发平台为著名硬件开发公司Altium公司的AltiumDesigner10这已开发环境在板级设计特性软设计特性数据管理特性通用特性都较有优势。43软件调试软件调试主要包括程序在线仿真调试上位机调试。在线调试主要使用的是IAR中的调试器IARCSPY。上位机调试主要是通过蓝牙模块将智能车运行过程中的状态和SD卡采集的图像及时地反馈到PC机上。44现场调试现场的调试包括摄像头调焦以及固定PID参数整定速度控制算法的参数整定智能车运行状态等方面的调试。5结语在此次设计中通过不断不断尝试不断整改发现问题整改问题最终达到我们预期的设计目标。在算法方面首次采用闭环系统控制智能车采用改进PID控制算法对智能车速度及方向进行调整使智能车较之前的开环状态更加稳定最终完成了智能车的制作实现了摄像头采集识别闭环控制等的功能。收稿日期20160928作者简介吴伟鸿1994男汉浙江杭州人本科研究方向电子设计智能车研究。152
