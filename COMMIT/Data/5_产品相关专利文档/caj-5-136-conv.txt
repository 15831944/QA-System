19中华人民共和国国家知识产权局
发明专利申请撇
申请公布号
申请公布日
门卜习
申请号
申请日
申请人西门子中国有限公司
地址北京市朝阳区望京中环南路
号
发明人袁勇余明王琪张瑞国喻丹
召乙召了只产刁了
权利要求书页说明书页附图页
发明名称
对物联网要素关联数据与上报数据进行绑定
的方法和装置
摘要
本发明提供了对物联网的要素的表示所关联
的数据与上报数据进行绑定的方法包括获取
物联网的要素的表示之间的语义关系的表示基
于上报数据的上报来源以及获取的语义关系的
表示将物联网的要素的表示所关联的数据与上
报数据进行绑定。本发明提高了对物联网的要素
的表示所关联的数据与上报数据进行绑定的效
率。
一一
丝
才之
囚寸旧CNIO5988429A权利要求书页
一种对物联网的要素的表示所关联的数据与上报数据进行绑定的方法包括
获取物联网的要素的表示之间的语义关系的表示
基于上报数据的上报来源以及获取的语义关系的表示将物联网的要素的表示所关
联的数据与上报数据进行绑定。
根据权利要求的方法其中获取物联网的要素的表示之间的语义关系的表示
包括
从要素的表示的拓扑中获取要素的表示之间的语义关系所述要素的表示的拓扑是响
应于利用语义关系的表示对要素的表示进行的关联而形成的结构。
根据权利要求的方法其中要素的表示是通过调用要素的通用表示并将该通用表
示特定化来生成的。
根据权利要求的方法其中要素的通用表示是从要素的规范文件中导入的。
根据权利要求的方法其中所述要素的表示的拓扑是通过如下形成的
从产品生命周期仿真模型中识别要素及要素间的连接关系
将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正
响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系代替识别出
的要素间的连接关系。
根据权利要求的方法其中所述要素的表示的拓扑是通过如下形成的
从扫描的计算机辅助设计图纸中识别要素及要素间连接关系
将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正
响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系代替识别出
的要素间的连接关系。
根据权利要求的方法其中将物联网的要素的表示所关联的数据与上报数据进行
绑定的步骤包括
基于要素的表示的拓扑判断要素的表示的拓扑中的要素的表示所关联的数据流向要
素控制点还是流向数据采集点
如果要素的表示的拓扑中的要素的表示所关联的数据流向要素控制点从上报来源是
该要素控制点的上报数据中选择上报数据绑定
如果要素的表示的拓扑中的要素的表示所关联的数据流向数据采集点基于预定规
则从上报来源是该数据采集点的上报数据中选择上报数据绑定。
根据权利要求的方法其中预定规则包括以下中的至少一个
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示
所关联的振动数据落后于要素的表示所关联的振动数据
振动数据在特定期间内的平均方差大于温度数据在该特定期间内的平均方差温
度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方差
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要
素的表示所关联的振动数据大于要素的表示所关联的振动数据
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要素
的表示所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变
化且要素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或cNlo5988429A权利要求书页
水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示
所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要
素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数
据的变化幅度。
根据权利要求的方法还包括
确定要素的表示的拓扑中要素的表示所关联的数据的有效区间。
根据权利要求的方法其中确定要素的表示的拓扑中要素的表示所关联的数据
的有效区间的步骤包括
根据要素的表示的拓扑中的要素的表示所关联的数据与上报数据的绑定关系响应于
接收到的上报数据计算所述有效区间
接收对所述有效区间的校正。
一种对物联网的要素的表示所关联的数据与上报数据进行绑定的装置包括
获取单元被配置为获取物联网的要素的表示之间的语义关系的表示
绑定单元被配置为基于上报数据的上报来源以及获取的语义关系的表示将物
联网的要素的表示所关联的数据与上报数据进行绑定。
根据权利要求的装置其中获取单元被配置为
从要素的表示的拓扑中获取要素的表示之间的语义关系所述要素的表示的拓扑是响
应于利用语义关系的表示对要素的表示进行的关联而形成的结构。
根据权利要求的装置其中要素的表示是通过调用要素的通用表示并将该通用
表示特定化来生成的。
根据权利要求的装置其中要素的通用表示是从要素的规范文件中导入的。
根据权利要求的装置其中所述要素的表示的拓扑是通过如下形成的
从产品生命周期仿真模型中识别要素及要素间的连接关系
将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正
响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系代替识别出
的要素间的连接关系。
根据权利要求的装置其中所述要素的表示的拓扑是通过如下形成的
从扫描的计算机辅助设计图纸中识别要素及要素间连接关系
将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正
响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系代替识别出
的要素间的连接关系。
根据权利要求的装置其中绑定单元被配置为
基于要素的表示的拓扑判断要素的表示的拓扑中的要素的表示所关联的数据流向要
素控制点还是流向数据采集点
如果要素的表示的拓扑中的要素的表示所关联的数据流向要素控制点从上报来源是
该要素控制点的上报数据中选择上报数据绑定
如果要素的表示的拓扑中的要素的表示所关联的数据流向数据采集点基于预定规
则从上报来源是该数据采集点的上报数据中选择上报数据绑定。cNlo5988429A权利要求书页
根据权利要求的装置其中预定规则包括以下中的至少一个
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示
所关联的振动数据落后于要素的表示所关联的振动数据
振动数据在特定期间内的平均方差大于温度数据在该特定期间内的平均方差温
度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方差
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要
素的表示所关联的振动数据大于要素的表示所关联的振动数据
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要素
的表示所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变
化且要素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或
水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示
所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要
素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数
据的变化幅度。
根据权利要求的装置还包括
确定单元被配置为确定要素的表示的拓扑中要素的表示所关联的数据的有效区
间。
根据权利要求的装置其中确定单元被配置为
根据要素的表示的拓扑中的要素的表示所关联的数据与上报数据的绑定关系响应于
接收到的上报数据计算所述有效区间
接收对所述有效区间的校正。
一种对物联网的要素的表示所关联的数据与上报数据进行绑定的设备包括
存储器用于存储可执行指令以及
处理器用于根据所述存储器所存储的可执行指令执行如权利要求一中的任
意一个权利要求所述的方法所包括的操作。
一种机器可读介质其上存储有可执行指令当所述可执行指令被执行时使得机
器执行如权利要求一中的任意一个权利要求所述的方法所包括的操作。CNIO5988429A说明书页
对物联网要素关联数据与上报数据进行绑定的方法和装置
技术领域
本发明涉及工业控制领域尤其涉及一种对物联网的要素的表示所关联的数据与
上报数据进行绑定的方法和装置。
背景技术
物联网从广义上讲是指物和物相连的互联网其用户端扩展到任何物品和物品
之间实现物品之间的信息交换和通信。它通过互联网将传感器控制器机器人员等要素
连接在一起是物化的互联网。从狭义上讲通过局域网把物和物相连也可以叫做物联网。
作为狭义物联网的一个例子是在车间的生产线的各机器附近设置传感器感测
各机器运行时的数据例如温度振动等。同时各机器有相连的可编程逻辑控制器存
储有各机器运行时的例如速度扭矩电流等数据。传感器感测的数据和中存储的数据
在生产过程中通过网络上报到应用接口管理器。应用接口管理器在生产过程中会根据这些
上报的数据进行生产中的监控分析决策等例如故障检测。
作为狭义物联网的另一个例子是在城市水暖系统中通常在联网的每个供暖器
材暖气设备的进水口和出水口处设置压力传感器温度传感器等感测进水口出水口
处的压力温度数据等这些感测到的数据通过网络会上报到应用接口管理器。应用接口管
理器会根据这些上报的数据进行城市水暖系统的维护和管理例如监控这些功能器材是否
正常工作。
在这些狭义物联网的管理过程中在应用接口管理器中首先要知道整个物联网
的要素和数据关系。要素是指物联网中连接的对象。例如在生产线监控物联网中连接的
对象是各机器可以把机器当作要素。例如在城市水暖系统物联网中连接的对象是各功能
器材可以把供暖器材当作要素。应用接口管理器除了需要知道整个物联网的要素外还需
要知道其数据关系。即应用接口管理器接到许多上报的数据它需要区分它们分别对应着
物联网中哪个要素的哪方面的数据即对于同一要素例如马达可能同时上报的有马达
的速度扭矩电流因此当判断出上报的数据是关于此马达的数据时仍然需要判断这个
上报的数据是此马达的速度数据还是扭矩数据还是电流数据。只有知道物联网中有哪
些实际的要素并且知道上报的数据是关于哪一要素的哪一数据应用接口管理器才能在
实际运行中读懂上报的数据从而正确地监管物联网中的要素。
因此应用接口管理器需要事先建立反映物联网的要素和数据关系的现场模型
才能正确监管物联网中要素的运行。现场模型是物联网中的实际要素的连接关系协同作
用关系数据作用关系以及上报数据与各要素所关联的数据的绑定关系的综合体它是透
过上报的数据理解物联网各要素的行为的基础。现场模型包括
物联网中各要素和它们之间的语义关系。语义关系是指要素之间的连接关系和
实际运行中的相互作用关系。连接关系例如前后顺序。实际运行中的相互作用关系包括驱
动从属控制。
物联网中各要素所关联的数据以及物联网中各要素所关联的数据同上报数cNlo5988429A说明书页
据的绑定。物联网中各要素所关联的数据是指描述物联网中各要素的工作状态的监管物
联网需要的数据。例如对于马达来说其实际工作时产生的功率扭矩速度以及马达实
际工作时通过的电流等都描述马达的工作状态都是马达所关联的数据。采集并上报这些
数据对于监管物联网以便理解物联网中要素的行为进行正确的决策来说都是需要的因
此都是物联网中各要素所关联的数据。绑定是指上报数据中的哪个数据对应着物联网中哪
个实际要素所关联的哪个数据。
可选地现场模型还可包括各要素所关联的数据的有效区间。例如对于汽车摩擦
线中的摩擦轮减速箱来说只有当汽车真正运动到摩擦轮附近时这时它的减速箱的振动
数据才对诊断分析有效其余时段的振动数据是没有意义的。因此应用接口管理器仅知道
物联网中各要素都关联着什么数据并知道哪一上报数据对应着该数据有时是不够的。应
用接口管理器还需要知道该数据哪个区间是有效的即在对要素的监管和分析中需要的。
现有技术中是由领域专家到现场去勘察手绘出上述现场模型交由云端专家理
解后将相关信息编程到应用接口管理器的程序中从而应用接口管理器了解现场模型以
使得在生产线等的实际运行中应用接口管理器能够正确理解上报的数据进行决策和诊
断。但是现场勘查的成本很高尤其是绑定要素所关联的数据和上报数据时领域专家需
要仔细甄别各种数据并分析各种数据的走向造成现场模型建立过程效率低。。
发明内容
有鉴于此本发明的一个实施例解决的问题之一是提高对物联网的要素的表示所
关联的数据与上报数据进行绑定的效率。
根据本发明的一个实施例提供了一种对物联网的要素的表示所关联的数据与上
报数据进行绑定的方法包括获取物联网的要素的表示之间的语义关系的表示基于上
报数据的上报来源以及获取的语义关系的表示将物联网的要素的表示所关联的数据与
上报数据进行绑定。
可选地获取物联网的要素的表示之间的语义关系的表示包括从要素的表示的
拓扑中获取要素的表示之间的语义关系所述要素的表示的拓扑是响应于利用语义关系的
表示对要素的表示进行的关联而形成的结构。
可选地要素的表示是通过调用要素的通用表示并将该通用表示特定化来生成
的。
可选地要素的通用表示是从要素的规范文件中导入的。
可选地所述要素的表示的拓扑是通过如下形成的从产品生命周期仿真模型中
识别要素及要素间的连接关系将识别出的要素转换成要素的表示并接收对转换成的要
素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关
系代替识别出的要素间的连接关系。
可选地所述要素的表示的拓扑是通过如下形成的从扫描的计算机辅助设计图
纸中识别要素及要素间连接关系将识别出的要素转换成要素的表示并接收对转换成的
要素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示间的语义
关系代替识别出的要素间的连接关系。
可选地将物联网的要素的表示所关联的数据与上报数据进行绑定的步骤包括cNlo5988429A说明书页
基于要素的表示的拓扑判断要素的表示的拓扑中的要素的表示所关联的数据流向要素控
制点还是流向数据采集点如果要素的表示的拓扑中的要素的表示所关联的数据流向要素
控制点从上报来源是该要素控制点的上报数据中选择上报数据绑定如果要素的表示的
拓扑中的要素的表示所关联的数据流向数据采集点基于预定规则从上报来源是该数据
采集点的上报数据中选择上报数据绑定。
可选地预定规则包括以下中的至少一个如果在要素的表示的拓扑中要素
的表示在要素的表示的下游则要素的表示所关联的振动数据落后于要素的表示所
关联的振动数据振动数据在特定期间内的平均方差大于温度数据在该特定期间内的
平均方差温度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方
差如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要
素的表示所关联的振动数据大于要素的表示所关联的振动数据如果在要素的表
示的拓扑中要素的表示和要素的表示是前者驱动后者则要素的表示所关联的水压
或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的表示所关
联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示所关
联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的
表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的
变化幅度。
可选地该方法还包括确定要素的表示的拓扑中要素的表示所关联的数据的有
效区间。
川可选地确定要素的表示的拓扑中要素的表示所关联的数据的有效区间的步骤包
括根据要素的表示的拓扑中的要素的表示所关联的数据与上报数据的绑定关系响应于
接收到的上报数据计算所述有效区间接收对所述有效区间的校正。
根据本发明的另一个实施例提供了一种对物联网的要素的表示所关联的数据与
上报数据进行绑定的装置包括获取单元被配置为获取物联网的要素的表示之间的语义
关系的表示绑定单元被配置为基于上报数据的上报来源以及获取的语义关系的表示
将物联网的要素的表示所关联的数据与上报数据进行绑定。
可选地获取单元被配置为从要素的表示的拓扑中获取要素的表示之间的语义
关系所述要素的表示的拓扑是响应于利用语义关系的表示对要素的表示进行的关联而形
成的结构。
可选地要素的表示是通过调用要素的通用表示并将该通用表示特定化来生成
的。
可选地要素的通用表示是从要素的规范文件中导入的。
可选地所述要素的表示的拓扑是通过如下形成的从产品生命周期仿真模型中
识别要素及要素间的连接关系将识别出的要素转换成要素的表示并接收对转换成的要
素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关
系代替识别出的要素间的连接关系。
可选地所述要素的表示的拓扑是通过如下形成的从扫描的计算机辅助设计图
纸中识别要素及要素间连接关系将识别出的要素转换成要素的表示并接收对转换成的cNlo5988429A说明书页
要素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示间的语义
关系代替识别出的要素间的连接关系。
可选地绑定单元被配置为基于要素的表示的拓扑判断要素的表示的拓扑中的
要素的表示所关联的数据流向要素控制点还是流向数据采集点如果要素的表示的拓扑中
的要素的表示所关联的数据流向要素控制点从上报来源是该要素控制点的上报数据中选
择上报数据绑定如果要素的表示的拓扑中的要素的表示所关联的数据流向数据采集点
基于预定规则从上报来源是该数据采集点的上报数据中选择上报数据绑定。
可选地预定规则包括以下中的至少一个如果在要素的表示的拓扑中要素
的表示在要素的表示的下游则要素的表示所关联的振动数据落后于要素的表示所
关联的振动数据振动数据在特定期间内的平均方差大于温度数据在该特定期间内的
平均方差温度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方
差如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要
素的表示所关联的振动数据大于要素的表示所关联的振动数据如果在要素的表
示的拓扑中要素的表示和要素的表示是前者驱动后者则要素的表示所关联的水压
或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的表示所关
联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示所关
联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的
表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的
变化幅度。
可选地该装置还包括确定单元被配置为确定要素的表示的拓扑中要素的表示
所关联的数据的有效区间。
川可选地确定单元被配置为根据要素的表示的拓扑中的要素的表示所关联的数
据与上报数据的绑定关系响应于接收到的上报数据计算所述有效区间接收对所述有效
区间的校正。
根据本发明的另一个实施例还提供了一种对物联网的要素的表示所关联的数据
与上报数据进行绑定的设备包括存储器用于存储可执行指令以及处理器用于根据
所述存储器所存储的可执行指令执行前述方法所包括的操作。
根据本发明的另一个实施例还提供了一种机器可读介质其上存储有可执行指
令当所述可执行指令被执行时使得机器执行前述方法所包括的操作。
通过本发明实施例基于上报数据的上报来源以及获取的语义关系的表示自动
将物联网的要素的表示所关联的数据与上报数据进行绑定省去了人工绑定时详细勘察现
场的繁琐提高了绑定效率。
另外本发明实施例提供了一种帮助现场工程师快速建立现场模型的工具该工
具对不同的要素不同的语义关系都不同的表示现场工程师可以通过例如拖曳这些表示
的方式将要素的表示借助语义关系的表示组合在一起形成拓扑因此整个工具相比于现
有技术大大提高了建立现场模型的效率。
另外本发明的一个优选实施例还能根据要素的表示的拓扑中的要素的表示所关
联的数据与上报数据的绑定关系响应于接收到的上报数据自动为现场工程师计算出要CNIO5988429A说明书页
素的表示的拓扑中要素所关联的数据的有效区间相比于现有技术中现场工程师通过复杂
的勘测和镇密的分析来人工计算有效区间的方式大大提高了建立现场模型的效率。
附图说明
本发明的其它特点特征优点和益处通过以下结合附图的详细描述将变得更加
显而易见。
图示出了根据本发明一个实施例的建立反映物联网的要素和数据关系的现场
模型的方法的流程图。
图示出了根据本发明一个实施例的将要素的表示的拓扑中的要素的表示所关
联的数据与上报数据进行绑定的流程图。
图示出了根据本发明另一个实施例的建立反映物联网的要素和数据关系的现
场模型的方法的流程图。
图示出了根据本发明一个实施例的确定要素的表示的拓扑中要素的表示所关
联的数据的有效区间的流程图。
图示出了根据本发明一个实施例的汽车摩擦线中的一个物联网的要素连接关
系图。
图示出了根据本发明一个实施例的建立反映物联网的要素和数据关系的现场
模型的装置的框图。
图示出了根据本发明另一个实施例的建立反映物联网的要素和数据关系的现
场模型的装置的框图。
图示出了根据本发明一个实施例的建立反映物联网的要素和数据关系的现场
模型的设备的结构图。
具体实施方式
下面将结合附图详细描述本发明的各个实施例。
图示出了根据本发明一个实施例的对物联网的要素的表示所关联的数据与上
报数据进行绑定的方法的流程图。
下文的物联网如无另外说明指的是狭义的物联网。
在步骤中获取物联网的要素的表示之间的语义关系的表示。
在一个实施例中具体地从要素的表示的拓扑中获取要素的表示之间的语义关
系所述要素的表示的拓扑是响应于利用语义关系的表示对要素的表示进行的关联而形成
的结构。
本发明的一个实施例提供了一种工具。在该工具中将要素如机器用要素的
表示来表达将语义关系例如控制用语义关系的表示来表达。要素的表示是要素在现场
模型中的抽象表达方式。语义关系的表示是语义关系在现场模型中的抽象表达方式。关联
是指现场模型中要素之间的联系。要素的表示的拓扑是指要素的表示相互关联后形成的
表达一个完整的被监控系统如上文提到的汽车摩擦线城市水暖系统相关的物联网中
各实际的要素和它们之间的语义关系的图形。
要素的表示是通过调用要素的通用表示并将该通用表示特定化来生成的。要素的cNlo5988429A说明书页
通用表示是指要素所述的类在现场模型中通用的抽象表达方式或者说是要素所述的类在
现场模型中的模板。例如所有的马达在工具中都用一个特定的图形或符号来表达这种特
定的图形或符号就是马达的通用表示而马达的图形或符号就是马达的表示。特定化
就是将要素的通用表示变成要素的表示的过程。例如在生成马达的表示时先调用马达
的通用表示然后例如在该通用表示指定的位置处加就生成了马达的表示。在马达的
通用表示指定的位置处加就属于特定化。
在一个实施例中要素的通用表示是从要素的规范文件中导入的。要素的规范文
件是指说明要素的性能结构参数所关联的数据的文件例如设备说明书设备操作指
南等。在要素的规范文件中清楚地说明了要素所关联的数据例如马达的说明书中清楚
地说明了马达速度马达扭矩马达状态马达通过的电流是马达在实际运
行中需要监控的重要参数因此马达所关联的数据是这四个数据。这样现场工程师只要
拖曳要素的通用表示并特定化就可以形成要素的表示不用再去现场勘测每一要素都关
联有哪些数据简化了现场模型的建立。
例如马达驱动变速箱。用户可以在该工具中调用马达的通用表示在指定位
置处添加成为马达的表示。接着用户调用变速箱的通用表示在指定位置处添加
成为变速箱的表示。然后用户调用表示驱动的表示例如从到的空心箭头表示
控制将马达的表示和变速箱的表示用该空心箭头连接起来就完成了对马达的
表示和变速箱的表示的关联。
以图所示的一个汽车摩擦线为例。两个马达分别驱动变速箱
变速箱分别控制摩擦滚轮的滚动速度。要素控制点
在图中是可编程逻辑控制器但也可能是其它要素控制点分别控制马达
的马达速度马达扭矩马达状态马达通过的电流并将这些数据分别
通过线上报给应用接口管理器。在变速箱处分别设置振动传感器
用于感测变速箱处的振动数据。在摩擦滚轮处分别设置
张力传感器用于感测摩擦滚轮处的磨损张力数据。振动传感器
感测的振动数据和张力传感器感测的磨损张力数据发送到数据
采集点图中是数据采集卡但也有可能是其它起数据采集功能的器件由数据采
集点通过线上报给应用接口管理器。应用接口管理器根据来自要素控制
点或数据采集点的上报数据在汽车摩擦线的运行过程中控制汽车摩擦线
的运行在出现故障时进行故障诊断。
对于图所示的汽车摩擦线用户首先调用本发明实施例提供的工具中的马达的
通用表示然后进行特定化分别形成马达的表示和马达的表示。接着用户调
用表示并列关系的通用表示例如双向空心箭头在马达的表示和马达的表
示之间进行关联表示马达和马达是并列关系。接着用户调用变速箱的通用表
示然后进行特定化分别形成变速箱的表示。用户调用表示驱动关系的通用表
示例如单向空心箭头在马达和变速箱之间形成关联表示是前者驱动后者
并在马达和变速箱之间形成关联表示是前者驱动后者。接着用户调用摩擦滚
轮的通用表示进行特定化分别形成摩擦滚轮的表示。用户调用表示控制关系
的通用表示例如单向实心箭头在变速箱和摩擦滚轮之间形成关联表示是cNlo5988429A说明书页
前者控制后者并在变速箱和摩擦滚轮之间形成关联表示是前者控制后者。最
后就形成了将图中的每一要素的表示用语义关系的表示关联起来之后的拓扑。该拓扑
与图的主要区别可以认为是图中只有连接关系没有表示出要素之间的语义关系。
由于本发明实施例提供的工具对不同的要素不同的语义关系都有不同的表示
现场工程师可以通过例如拖曳这些表示等方式将要素的表示借助语义关系的表示组合在
一起形成拓扑相比于现有技术完全手绘图纸的方式大大提高了现场工程师建立现场模
型的效率。
另外由于一些要素例如马达变速箱摩擦滚轮经常是一起出现的可以将它们
组合在一起作为一个表示。这样用户例如只需将该组合的表示拖曳过来就同时生成了马
达变速箱摩擦滚轮和三者内部的语义关系。通过这种组合的表示的方式也大大提高了
建立现场模型的效率。
本发明的一些实施例还可以借助于产品生命周期仿真模型或计算机辅助
设计以图纸来进一步简化上述现场模型的建立工作提高建立现场模型的效率。
产品生命周期仿真模型是在产品实际生产前对生产线各要素以及各要素
之间的连接或配合关系的设计模型。它类似于图那样的模型。它与本发明实施例的要素
的表示的拓扑的区别之一在于第一它只有要素之间的连接关系没有语义关系第二
它反映的是设计时的要素和要素之间的连接关系但设计时要素在实际中通常会改变。例
如设计时计划使用马达生产但实际上由于马达故障改为使用马达生产。如果只
参考产品生命周期仿真模型就容易作出错误的判断和决策。
首先从产品生命周期仿真模型中识别要素及要素间的连接关系。
以图那样的模型为例从产品生命周期仿真模型中识别要素即识别出图
中的马达变速箱摩擦滚轮等。从产品生命周期仿真模型中识别要素间的连接关系
即识别图中的要素间的中间连线。本领域中有许多已知方法能够从产品生命周期
仿真模型中识别要素及要素间的连接关系故不赘述。
然后将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正。
从产品生命周期仿真模型中识别出的要素未必是通过本发明实施例中的
现场模型中规定的要素的表示来表达的因此要首先转换成本发明实施例中工具规定的要
素的表示的形式。经过这样的转换可以统一同一类型要素的表达形式避免同一类型要素
表达形式不一致在后续根据现场模型进行被监控系统的监管和故障诊断时造成问题。
习各识别出的要素转换成要素的表示是通过先判断识别出的要素的类将识别出的
要素转换成这一类要素的通用表示并将该通用表示特定化完成的。
例如假设识别出的要素是马达判断识别出的要素的类是马达然后将识别出
的马达转换成马达的通用表示在马达的通用表示的指定位置处加就完成了将识别出
的马达转换成马达的表示。
由于如前所述产品生命周期仿真模型反映的只是设计时的要素但设计
时要素在实际中通常会改变因此需要对转换成的要素的表示进行修正。
在一种实施方式中该修正可以通过接收现场工程师输入的修正进行。
例如产品生命周期仿真模型中识别出马达但实际上投入运行的是马达
。现场工程师是知道这一情况的因此在本发明实施例提供的工具中将马达的表示修cNlo5988429A说明书页
正为马达的表示。本发明的实施例接收该修正。
在另一种实施方式中该修正可以通过自学习的方式进行。
川例如本发明实施例的工具存储用户以前使用工具时修正要素的表示的修正历
史该修正历史包括修正前的要素的表示和修正后的要素的表示。如果修正历史表明只要
转换成的要素的表示是要素的表示用户就会将其修正为要素的表示那么下次当转
换成的要素的表示是要素的表示时工具就会自动将其修正为要素的表示。
接着响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系
代替识别出的要素间的连接关系。
产品生命周期仿真模型中只有要素之间的连接关系没有语义关系因此
需要用像素的表示间的语义关系替代连接关系。
在一种实施方式中现场工程师将要素的表示之间的语义关系输入工具例如调
用某语义关系的表示放到两个要素的表示之间本发明实施例的工具就用该语义关系代替
这两个要素之间的连接关系。
在另一种实施方式中用自学习的方式确定要素的表示间的语义关系。例如本发
明实施例的工具存储用户以前使用工具时在要素的表示之间添加的语义关系的表示。如果
该历史表明只要是在要素的表示和要素之间用户历史上添加的语义关系都是前者
控制后者的关系那么下次就自动用该语义关系替代识别出的要素和之间的连接关
系。
另外还可以借助于计算机辅助设计图纸来简化现场模型的建立工作。
计算机辅助设计图纸是借助计算机来设计生产线各要素以及各要素之间
的连接或配合关系的图纸。它与产品生命周期仿真模型类似它也只有要素之间的
连接关系没有语义关系而且它也反映的是设计时的要素和要素之间的连接关系但设计
时要素在实际中通常会改变。
从扫描的计算机辅助设计图纸中识别要素及要素间连接关系。这可以通过
已有的扫描和识别技术实现。
将识别出的要素转换成要素的表示并接收对转换成的要素的表示的修正。
这一该过程与借助于产品生命周期仿真模型来简化现场模型的建立工作
中的相应过程是类似的。
响应于接收要素的表示间的语义关系用接收的要素的表示间的语义关系代替识
别出的要素间的连接关系。
该过程与借助于产品生命周期仿真模型来简化现场模型的建立工作中的
相应过程是类似的。
在步骤中基于上报数据的上报来源以及获取的语义关系的表示将物联网
的要素的表示所关联的数据与上报数据进行绑定。
上报数据的上报来源是指应用接口管理器从要素控制点还是数据采集点接收上
报数据。在物联网中一部分要素自身有专门的控制器或控制设备与这一部分要素相关联
的上报数据可以由这些控制器或控制设备直接上报。将这些专门用于控制物联网中某些要
素可以从其直接获得有关这些要素的上报数据的控制器或控制设备统称为要素控制点。
在物联网中还有一些上报数据不是通过物联网中固有的控制器或控制设备获得的而是cNlo5988429A说明书页
通过例如传感器等的数据采集的方式收集并集中汇聚到一些节点可以是接口设备也
可以仅是集线器来上报的将这些起汇聚作用的节点称为数据采集点。
以图为例如前所述马达的马达速度马达扭矩马达状态
马达通过的电流是分别通过要素控制点经线上报给应用接口
管理器的变速箱处的振动数据摩擦滚轮处的磨损张
力数据是通过数据采集点上报给应用接口管理器的。因此上报数据
的上报来源可能有两个一个是要素控制点另一个是数据采集点。应用接口管理器从数据
采集点接收到的数据有可能是变速箱处的振动数据摩擦滚轮处的磨
损张力数据变速箱处的振动数据摩擦滚轮处的磨损张力数
据。从要素控制点上报的数据也可能是多个数据。应用接口管理器利用下
面所述的绑定来区分这些数据。绑定是指上报数据中的哪个数据对应着物联网中哪个实际
要素所关联的哪个数据。
图示出了根据本发明一个实施例的将要素的表示的拓扑中的要素的表示所关
联的数据与上报数据进行绑定的流程图。
在步骤中基于要素的表示的拓扑判断要素的表示的拓扑中的要素的表示
所关联的数据流向要素控制点还是流向数据采集点。
由于要素的表示之间的语义关系的表示都已确定因此数据的流向关系已确定
从而机器可以自动确定要素的表示所关联的数据流向要素控制点还是流向数据采集点。仍
以图为例。根据要素的表示的拓扑中的各语义关系的表示可以确定出变速箱处的
振动数据摩擦滚轮处的磨损张力数据变速箱处的振动数据
摩擦滚轮处的磨损张力数据是流向数据采集点的而马达的
马达速度马达扭矩马达状态马达通过的电流是流向要素控制点
的。
在步骤中如果要素的表示的拓扑中的要素的表示所关联的数据流向要素控
制点从上报来源是该要素控制点的上报数据中选择上报数据绑定。以马达的马达速
度为例马达的控制点是那么应用接口管理器从控制点上报的数据中
选择而不是从控制点上报的数据中选择。但控制点上报的数据有马达的
马达速度马达扭矩马达状态马达通过的电流应用接口管理器接下来会
例如根据速度扭矩电流的变化频率幅度等的不同以及马达状态是一个与其它相比不
同类型的数据这些方面对它们进行细分最后在上报数据中区分出马达的马达速度
即实现马达的马达速度与上报数据的绑定。
在步骤中如果要素的表示的拓扑中的要素的表示所关联的数据流向数据采
集点基于预定规则从上报来源是该数据采集点的上报数据中选择上报数据绑定。
预定规则包括以下中的至少一个
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的
表示所关联的振动数据落后于要素的表示所关联的振动数据
振动数据在特定期间内的平均方差大于温度数据在该特定期间内的平均方
差温度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方差
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者CNIO5988429A说明书页
则要素的表示所关联的振动数据大于要素的表示所关联的振动数据。
如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则
要素的表示所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据
的变化且要素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水
压或水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的
表示所关联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化
且要素的表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水
温数据的变化幅度。
对于例如在汽车摩擦线应用中摩擦滚轮在马达的下游在摩擦滚轮和
马达处都设置振动传感器且振动传感器感测的振动数据都由数据采集点上报。应用接
口管理器在这两个上报的振动信号中发现一个振动信号的相位落后于另一个振动信号的
相位则认为相位较晚的是摩擦滚轮处的振动数据相位较早的是马达处的振动数据。
对于例如在汽车摩擦线应用中如果数据采集点上报的数据有马达的温度
数据变速箱的振动数据摩擦滚轮的磨损张力数据应用接口管理器取一段特定
期间如分钟在这分钟内三个数据中平均方差最大的被认为是变速箱的振动数据
平均方差其次大的被认为是马达的温度数据平均方差最小的被认为是摩擦滚轮的磨
损张力数据。
对于例如在汽车摩擦线应用中马达驱动变速箱马达的振动数据和
变速箱的振动数据都由数据采集点上报。应用接口管理器认为两个上报的数据中幅度较
大的是马达的振动数据幅度较小的是变速箱的振动数据。
对于例如在城市水暖系统应用中供热水锅炉驱动城市水暖系统中的所有暖
气片。供热水锅炉里的水一定是最先变热然后城市水暖系统中的暖气片才能从上游到下
游逐渐变热。因此供热水锅炉处的水温传感器最先感测到水温上升在城市水暖系统中的
暖气片后感测到水温上升且供热水锅炉处的水温上升的幅度一定大于城市水暖系统中的
暖气片处的水温上升的幅度。假设供热水锅炉处的水温数据和某一位置的暖气片处的水温
数据都由数据采集点上报应用接口管理器认为两个上报的数据中水温数据上升较早的一
个是供热水锅炉处的水温数据上升较晚的一个是某一位置的暖气片处的水温数据或者
认为两个上报的数据中水温数据上升幅度大的是供热水锅炉处的水温数据上升幅度小的
是某一位置的暖气片处的水温数据。
另外在城市水暖系统应用中当供热水锅炉加水压时一定是供热水锅炉的水压
传感器最先感测到水压数据变大然后城市水暖系统中的暖气片处的水压传感器感测到水
压数据变大。而且在供热水锅炉的水压传感器感测到的水压数据变大的幅度一定大于城
市水暖系统中的某一位置的暖气片处的水压传感器感测到的水压数据变大的幅度。假设供
热水锅炉处的水压数据和某一位置的暖气片处的水压数据都由数据采集点上报应用接口
管理器认为两个上报的数据中水压数据上升较早的一个是供热水锅炉处的水压数据上升
较晚的一个是某一位置的暖气片处的水压数据或者认为两个上报的数据中水压数据上升
幅度大的是供热水锅炉处的水温数据上升幅度小的是某一位置的暖气片处的水压数据。
对于例如在城市水暖系统应用中城市水暖系统中的暖气片是从上游到下游cNlo5988429A说明书页
逐渐变热的。因此供热水锅炉的水升温后在城市水暖系统上游某点的暖气片处的水温传
感器最先感测到水温上升在城市水暖系统下游某点的暖气片处的水温传感器感测到水温
上升且上游某点的暖气片处的水温上升的幅度一定大于下游某点的暖气片处的水温上升
的幅度。假设上游某点的暖气片处的水温数据和下游某点的暖气片处的水温数据都由数据
采集点上报应用接口管理器认为两个上报的数据中水温数据上升较早的一个是上游某点
的暖气片处的水温数据上升较晚的一个是下游某点的暖气片处的水温数据或者认为两
个上报的数据中水温数据上升幅度大的是上游某点的暖气片处的水温数据上升幅度小的
是下游某点的暖气片处的水温数据。
另外在城市水暖系统应用中当供热水锅炉加水压时一定是上游某点的暖气片
处先感测到水压数据变大然后下游某点的暖气片处的水压传感器感测到水压数据变大。
而且在上游某点的暖气片处的水压传感器感测到的水压数据变大的幅度一定大于下游某
点的暖气片处的暖气片处的水压传感器感测到的水压数据变大的幅度。假设上游某点的暖
气片处的水压数据和上游某点的暖气片处的水压数据都由数据采集点上报应用接口管理
器认为两个上报的数据中水压数据上升较早的一个是上游某点的暖气片处的水压数据上
升较晚的一个是下游某点的暖气片处的水压数据或者认为两个上报的数据中水压数据上
升幅度大的是上游某点的暖气片处的水温数据上升幅度小的是下游某点的暖气片处的水
压数据。
上述规则一并不是穷举。本领域技术人员可以根据要素的表示所关联的数据
的物理规律和要素的表示间的语义关系设置其它规则。
仍以图为例。变速箱处的振动数据摩擦滚轮处的磨损张力
数据变速箱处的振动数据摩擦滚轮处的磨损张力数据都是
流向数据采集点。首先根据取一段特定期间例如分钟。在分钟之内变速箱
处的振动数据的平均方差变速箱处的振动数据的平均方差都会明显大
于摩擦滚轮处的磨损张力数据的平均方差摩擦滚轮处的磨损张力
数据的平均方差。因此可以先判断出数据采集点上报的四个数据中平均方差较
大的两个是变速箱处的振动数据变速箱处的振动数据较小的两个是
摩擦滚轮处的磨损张力数据摩擦滚轮处的磨损张力数据。至
于在平均方差较大的两个数据中区分变速箱处的振动数据变速箱处的振动
数据一个例子是假设变速箱是一个新变速箱而变速箱是一个年久失修的
变速箱可以认为在这两个振动数据中幅度较大的是新变速箱的振动数据幅度较
小的是旧变速箱的振动数据。在平均方差较小的两个数据中区分摩擦滚轮处的
磨损张力数据摩擦滚轮处的磨损张力数据的例子是假设摩擦滚
轮刚上过润滑剂可以认为在这两个振动数据中幅度较大的是摩擦滚轮处的
磨损张力数据幅度较小的是摩擦滚轮处的磨损张力数据。
图示出了根据本发明另一个实施例的建立反映物联网的要素和数据关系的现
场模型的方法的流程图。与图相比它增加了步骤即确定要素的表示的拓扑中要素的
表示所关联的数据的有效区间。
图示出了根据本发明的一个实施例的步骤的具体流程图。
在步骤中根据要素的表示的拓扑中的要素的表示所关联的数据与上报数据cNlo5988429A说明书页
的绑定关系响应于接收到的上报数据计算所述有效区间。
例如对于上述减速箱的振动数据来说只有汽车运动到摩擦滚轮附近时减速箱
的振动数据才对诊断分析有效其余时段的振动数据对诊断分析没有意义。对有效区间的
提取往往需要很强的领域知识通常是现场工程师是不具备的。但如果不告知应用接口管
理器有效区间应用接口管理器又不知道应利用哪一段的数据难以做出有效判断。
在本发明的实施例中例如设置光栅传感器检测汽车到达摩擦线从光栅传感器
到摩擦滚轮附近的距离为汽车的速度为。是已知的。可以通过马达减速箱摩擦
滚轮的驱动关系再根据如马达速度摩擦滚轮直径等估计出。马达速度等又可以根据要素
的表示的拓扑中的要素的表示所关联的数据与上报数据的绑定关系从上报数据中提取出。
因此机器可以自动为现场工程师估算出汽车从光栅传感器运动到摩擦滚轮的时间前后
各加一段规定的时间作为有效区间例如在一个模板中呈现给现场工程师。
在步骤中接收对所述有效区间的校正。
即现场工程师如果对机器自动估算出的有效区间不满意可以进行校正。本发明
实施例的工具接收这种校正按照校正后的有效区间进行以后的监管和诊断工作。
也可以以不同于图所示的方式来执行步骤例如接收对有效区间的校正也可
以省略。
图示出了根据本发明一个实施例的一种对物联网的要素的表示所关联的数据
与上报数据进行绑定的装置包括获取单元被配置为获取物联网的要素的表示之间
的语义关系的表示绑定单元被配置为基于上报数据的上报来源以及获取的语义关
系的表示将物联网的要素的表示所关联的数据与上报数据进行绑定。图中的各单元可
以利用软件硬件例如集成电路等或软硬件结合的方式来实现。
可选地获取单元被配置为从要素的表示的拓扑中获取要素的表示之间的语
义关系所述要素的表示的拓扑是响应于利用语义关系的表示对要素的表示进行的关联而
形成的结构。
可选地要素的表示是通过调用要素的通用表示并将该通用表示特定化来生成
的。
可选地要素的通用表示是从要素的规范文件中导入的。
可选地所述要素的表示的拓扑是通过如下形成的从产品生命周期仿真
模型中识别要素及要素间的连接关系将识别出的要素转换成要素的表示并接收对转换
成的要素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示间的
语义关系代替识别出的要素间的连接关系。
可选地所述要素的表示的拓扑是通过如下形成的从扫描的计算机辅助设计
图纸中识别要素及要素间连接关系将识别出的要素转换成要素的表示并接收对
转换成的要素的表示的修正响应于接收要素的表示间的语义关系用接收的要素的表示
间的语义关系代替识别出的要素间的连接关系。
可选地绑定单元被配置为基于要素的表示的拓扑判断要素的表示的拓扑
中的要素的表示所关联的数据流向要素控制点还是流向数据采集点如果要素的表示的拓
扑中的要素的表示所关联的数据流向要素控制点从上报来源是该要素控制点的上报数据
中选择上报数据绑定如果要素的表示的拓扑中的要素的表示所关联的数据流向数据采集cNlo5988429A说明书页
点基于预定规则从上报来源是该数据采集点的上报数据中选择上报数据绑定。
川可选地预定规则包括以下中的至少一个如果在要素的表示的拓扑中要素
的表示在要素的表示的下游则要素的表示所关联的振动数据落后于要素的表示所
关联的振动数据振动数据在特定期间内的平均方差大于温度数据在该特定期间内的
平均方差温度数据在该特定期间内的平均方差大于张力数据在该特定期间内的平均方
差如果在要素的表示的拓扑中要素的表示和要素的表示是前者驱动后者则要
素的表示所关联的振动数据大于要素的表示所关联的振动数据如果在要素的表
示的拓扑中要素的表示和要素的表示是前者驱动后者则要素的表示所关联的水压
或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的表示所关
联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的变化幅度
如果在要素的表示的拓扑中要素的表示在要素的表示的下游则要素的表示所关
联的水压或水温数据的变化晚于要素的表示所关联的水压或水温数据的变化且要素的
表示所关联的水压或水温数据的变化幅度小于要素的表示所关联的水压或水温数据的
变化幅度。
如图所示建立反映物联网的要素和数据关系的现场模型的装置还可以包括
确定单元。确定单元被配置为确定要素的表示的拓扑中要素的表示所关联的数据的
有效区间。
可选地确定单元被配置为根据要素的表示的拓扑中的要素的表示所关联的
数据与上报数据的绑定关系响应于接收到的上报数据计算所述有效区间接收对所述有
效区间的校正。
现在参考图其示出了按照本发明一个实施例的一种对物联网的要素的表示所
关联的数据与上报数据进行绑定的设备的示意图。该设备可以包括存储器和处理
器。存储器可以存储可执行指令。处理器可以根据存储器所存储的可执行指
令实现前述装置的各个单元所执行的操作。
此外本发明实施例还提供一种机器可读介质其上存储有可执行指令当所述可
执行指令被执行时使得机器执行处理器所实现的操作。
本领域技术人员应当理解上面所公开的各个实施例可以在不偏离发明实质的
情况下做出各种变形和改变。因此本发明的保护范围应当由所附的权利要求书来限定。CNIO5988429A说明书附图页
闷

口白一自一
一二
产卜洲才才
图图
图
卜卜
才冲户
图CNIO5988429A说明书附图页
困困一倒CNIO5988429A说明书附图页
图
口口到到
图
