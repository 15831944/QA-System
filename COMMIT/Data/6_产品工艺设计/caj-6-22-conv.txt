重庆大学硕士学位论文




低温压力容器计算机辅助焊接工艺设计

系统的开发与研究







硕士研究生姚宗湘

指导教师许先果

教

授

学科专业材料加工工程



重庆大学机械工程学院

二OO五年四月



MasterDissertationofChongqingUniversity


ComputerAidedSystemof
Lowtemperaturepressurevessel

WeldingProceduresDesign







CandidateYaoZongxiang

SupervisorProfessorXuXianguo

MajorMaterialsProcessEngineering

CollegeofMechanicalEngineering

ChongqingUniversity

April2005

重庆大学硕士学位论文

中文摘要

I

摘要

本文在分析专家系统应用于焊接领域内的基础上根据焊接工艺设计的原理
研究了焊接工艺设计的特点提出了系统的设计思想确定了系统总体框架及各
模块功能从而建立了计算机辅助低温压力容器焊接工艺设计系统CAWPDS。
计算机辅助焊接工艺设计系统属于设计型的焊接应用软件。本文所研究开发
的CAWPDS系统不仅具有焊接工艺文件管理能力而且可以模拟焊接领域专家指导
焊接工艺人员进行焊接工艺设计编制WPS文件。
系统采用数据库技术实现对焊接工艺文件的计算机化管理提供了焊接工艺
评定报告焊接工艺规程标准文件格式和对工艺文件的浏览维护查询和打印
功能。系统建立了焊接母材焊接材料焊接方法焊接设备及焊接坡口等焊接
资料数据库不仅提供了浏览维护查询等计算机管理功能而且与专家系统
工具相结合作为实现知识咨询和解释功能的基础。系统是在数据库管理系统
ACCESS支持下采用可视化编程工具VisualBasic60在windows2000环境下开
发的具有友好的人机界面易于使用和维护。本系统允许有使用权限的用户对
数据库进行修改和扩充以实现系统功能的扩充。系统的推理机设计成多级模式
以便于控制系统的推理和程序的调试。系统的解释模块提供了实时的在线帮助和
系统的使用说明可方便用户操作和使用。
采用本计算机辅助焊接工艺设计系统可以提高低温压力容器焊接工艺人员编
制WPS的效率使低温压力容器焊接生产企业节省资金缩短技术准备周期解脱
技术人员的繁重劳动采用计算机辅助焊接工艺设计系统也可以提高焊接厂家的
现代化管理水平和科技实力增强企业的竞争能力。

关键词专家系统数据库工艺设计焊接低温压力容器




重庆大学硕士学位论文

英文摘要

II

ABSTRACT

Inthispaperthefeatureofweldingprocessdesigningisanalyzedbasedonthe
relevantprinciplesbyanalyzinguseofexpertsysteminweldingNotonlytheideasof
thesystemdesigningarebroughtforwardbutalsothesystemframeworkand
correspondingmodulefunctionarepresentedThencomputeraidweldingprocess
designingsystemoflowtemperaturepressurevesselCAWPDSisbuilt
CAWPDSisatypeofapplicationsoftwarefordesigninthefieldofweldingThe
systemcannotonlymanageprocessfilesbutalsosimulateexpertintheweldingfield
toinstructtechniciandesigningweldingprocessandworkingoutWPSfiles
Bymakinguseofdatabasethesystemcaneffectivelymanageweldingprocess
documentswhichincludesprocedurequalificationrecordweldingprocedure
specificationItsuppliesthesefileswiththestandardsformsandhasthefunctionsof
browsinginquiringmaintainingandprintingCombinationwithtoolofexpertsystem
isthefoundationofconsultationandexplanationofknowledgeThedatabasetoolof
thesystemofisACCESSItutilizesVisualBasic60asdevelopmenttoolsIthasgood
humancomputerinterfacesandcanbeeasilyoperatedinWindows2000Theuserwho
hasrightofeditingcanmodifyandextendinordertoexpandthesystemThecontrol
inferenceofsystemisdesignedintomultistagemodelitisconvenienttocontrolthe
inferenceofsystemandprogramdebugservicingTheexplainmoduleofsystem
provideshelpandtheillustrationofsystemonlineintimeItisconvenientforthe
customertouseandoperate
WPShasthefeatureinreducingcostshortingtheperiodicityforpreparing
technologyreducinglaborintensityimprovingthemanagelevelandincreasing
enterpriseabilityofcompetition

Keywordsexpertsystemdatabasedesignofprocesswelding
Lowtemperaturepressurevessel




重庆大学硕士学位论文

目录

III

目录

中文摘要



英文摘要



1绪论

1

11
课题研究背景

1


12
专家系统概述

2

13
专家系统在焊接领域的应用和发展趋势

3

131
国外研究现状

3


132
国内研究现状

4

133
我国焊接专家系统现存的问题

6
134
焊接专家系统发展趋势

6
14
数据库技术在焊接工程中的应用

7
141
数据库技术简介

7
142
数据库技术在焊接工程中的应用

8
15
课题分析

9
151
焊接工艺计算机化管理的新需求

9
152
数据库技术与专家系统结合的必然性

11

153
本课题研究的内容与意义

12
154
CAWPDS的适用范围

13
2系统分析与总体结构设计

14


21
系统研究构思

14
211
焊接工艺设计的特点

14
212
系统设计思想

15
22
系统功能分析与总体结构

16
221
系统功能分析

16
222
系统总体结构

17
23
系统开发工具的选择

19
231
操作平台选择

19
232
编程语言选择

19

233
硬件开发环境

21

24
数据库管理系统及其选择

21
241
数据库系统简介

21
重庆大学硕士学位论文

目录

IV
242
数据库的选择

22
3CAWPDS系统数据库的设计

24

31
数据库设计概述

24
32
CAWPDS数据库的设计

25
321
数据库设计规则

25
322
CAWPDS数据库需求分析

26
323
系统数据库概念结构设计

28
324
系统数据库逻辑设计与物理设计

29
33
系统数据库的建立

30
34
数据库的安全维护

31
4CAWPDS系统专家系统的设计

32

41
概述

32

42
系统知识库的设计

32
421
知识获取与表示

32
422
知识库的设计

34
43
推理机的设计

35
44
系统解释机制

37

45
人机交互界面的设计

38

5
系统模块设计与运行实证

39


51
系统登录

39

52
系统主界面模块

40

521
系统用户界面设计原则

40

522
系统主界面设计

41
53
查询模块

42

531
母材查询

42
532
焊接材料的查询

42
533
焊接方法和焊接设备的查询

44
534
焊接坡口查询

44
535
焊接工艺文件的查询

45
54
焊接工艺制定模块

45

541
基本条件输入

46
542
选择焊接材料

48
543
接头和坡口设计

48
544
预热及焊后热处理

49重庆大学硕士学位论文

目录

V
545
焊接工艺规范参数

50
546
工艺设计结果

50
55
知识获取与管理模块

52
56
焊接工艺文件管理模块

54

57
焊接资料库维护

54

571
焊接母材库

54
572
焊接材料库

54
573
焊接方法及焊接设备库

54
574
坡口图形库

54
58
系统使用说明和帮助

56

6结论

57
致谢
58

参考文献
59


















重庆大学硕士学位论文
1
绪论

1

1绪论

11课题研究背景
焊接在现代工业生产中已成为一种重要的加工工艺它已广泛应用于金属
结构桥梁造船航空航天海洋工程核动力工程微电子技术以及石油
化工电力冶金建筑等工业部门
1
。随着科学技术的不断发展焊接已成为一
门独立的学科。
焊接学科自诞生半个世纪以来已从单一的加工工艺发展为综合性的制造技
术。它涉及的技术领域包括结构材料结构设计焊接方法设备工装焊件毛
坯的前处理与加工焊接标准焊接过程的机械化与自动化焊接工艺过程控制
焊缝质量监控检验和管理焊件的后处理及涂装焊接环保及焊接结构的失效
分析等
2
。
传统的焊接工艺设计及焊接工艺文件的编制和管理都是由人工进行的。焊接
工艺文件一般是由焊接工程师按照一定的标准规范从相关工艺试验中得出结论
在事先准备好的表格中逐项进行填写。其中工艺文件中必不可少的焊接接头形式
图一般由手工绘制也有采用示意图事先印制好的但缺乏真实性。这种传统的
工艺设计方法在实际应用过程中存在许多问题受个人经验和知识影响较大工
艺经验及知识缺乏整理和继承标准化规范化程度太低也影响WPS的交流重
复性劳动多也较繁重生产环节衔接不紧密容易浪费大量的物力人力财
力。
新的焊接工艺从设计评定到确定要制作一定的焊接工艺文件如焊接工
艺说明书WPS焊接工艺评定报告PQR等。焊接工艺设计最终所产生的焊
接工艺卡是具有法令性的将成为生产制造中所必须遵循的规范和依据。因此
每项内容都应根据成熟的生产经验或工艺经验的有效结果提出和确定。
由于焊接制造工艺具有多学科综合技术的特点以电子信息自动化人
工智能新材料为核心的新一代工程科技的迅猛发展及其与焊接技术的融合使
得焊接技术能够更多更快地融入最新科学技术的成就而具有时代发展的特征。焊
接学科自诞生以来一直受到诸多学科最新发展的直接引导尤其是受材料信
息学科新技术的影响不仅导致了数十种焊接新工艺的问世而且也是焊接工艺
的操作正经历着从手工焊到自动焊自动化柔性化到智能化的过渡。焊接自动
化机器人化以及智能化已成为公认的发展趋势。智能化焊接技术其中包括焊
接工艺设计和焊接工艺文件的编制与管理由人工进行转化为计算机辅助设计及
管理技术已成为焊接界科学工作者研究的新热点
3
。重庆大学硕士学位论文
1
绪论

2

12专家系统概述
专家系统的出现使人工智能研究进入了一个崭新的阶段并形成持续不断的
研究热潮。专家系统的研究及成功应用使人工智能从模型世界走向现实世界
并极大地推动了人工智能的理论研究与发展。专家系统的创始人EAFeigenbaum
指出专家系统是第二次计算机革命的工具
4
。
所谓专家系统ExpertSystem即ES是一个采用基于知识的程序设计方法建
立起来的具有大量专门知识并能运用这些知识解决特定领域中实际问题的计
算机程序系统。它应用人工智能的理论与技术根据一个或多个人类专家提供的
特殊领域知识进行逻辑推理模拟人类专家思维的过程来解决那些需要由专家来
解决的问题
56
。专家系统是人工智能中最活跃最有成就的一个研究领域。一个
专家系统的功能主要是依赖于大量的知识事实规则设想及强化的智能功能
所以也常叫做知识工程系统
3
。
专家系统也是一个计算机程序
7
。它具有咨询学习教育等功能。这决定了
它体现出与传统程序不同的一些特色和传统程序没有达到的许多优良特征。专家
系统的一般结构如图所示
7

9
。











同传统的程序相比专家系统的处理对象是以符号形式描述的知识而非数
据处理数据采用启发式方法而非算法。一般而言专家系统具有如下特点
9

14

针对性专家系统以牺牲通用问题求解能力来换得在某一狭窄领域的高水
平的问题处理能力
符号推理
启发性专家系统主要处理难度较大的不良结构问题需运用多种启发式
经验知识。这些启发式知识往往具有不完全性和不确定性因此专家系统常常要
人

机

接

口
推

理

机解

释

程

序知识获取程序

综合数据库知识库
图11专家系统流行结构
Fig11ThecommonstructureofExpertSystem
用户专家重庆大学硕士学位论文
1
绪论

3
采用不精确推理等非常规推理方法
透明性专家系统具有自我认识能力可向用户解释其推理过程并能回答
一些关于它自身的问题
灵活性由于专家系统知识库采用了独立于程序的外部显式表示方法用
户很容易对其进行修改或补充进而适应不同用户的不同经验知识及需求。
完整的专家系统主要包括人机接口知识库推理机数据库知识获取机
构解释机构六个部分。一般地专家系统至少应包括知识库推理机知识获
取机构和人机界面四个部分
15
。知识库是用来存储和管理领域知识这些知识以
规则和事实的形式存储在一起推理机控制整个系统协调工作它根据知识库的
知识按一定的推理策略解决相应的问题知识获取机构针对特定领域将理论
知识和经验移植到知识库人机界面负责系统与用户之间的信息交换。这些组成
元素之间存在着相互联系。
目前专家系统在模拟人类专家求解问题的过程中还存在着许多难以解决的
理论和技术问题这些问题是造成目前专家系统的脆弱性局限性低效性的原
因和阻碍发展的关键所在。
专家系统特别适用于那些需要大量专家经验与知识来解答问题的领域。由于
焊接领域知识显著的复杂性经验性焊接被认为是最适合于开发专家系统的领
域之一。因此焊接专家系统研究虽然起步较晚但仍获取较大的发展。经过国
内外焊接工作者多年的探索和努力目前的焊接专家系统已涉及到焊接生产的所
有主要方面。

13专家系统在焊接领域的应用和发展趋势
焊接作为一门难以精确化的热加工工艺技术它是依靠积累的经验知识配以
必要的理论而解决实际问题的因而专家系统可以在焊接领域中得到很好地应用
16
。焊接工艺是随着生产环境和生产发展而变化的因而焊接工艺设计不具有精
确的定义和严密的分析具有模糊推理的性质与焊接质量有关的一些指标难以
量化因此可以说焊接工艺设计是应用专家系统的理想领域。事实上用专家系
统来抽象焊接工程师和冶金专家以及各种标准的知识是合适的。近年来专家系
统在焊接领域中的应用得到了人们的重视国内外都展开了相应的实践。
131国外研究现状
焊接领域ES的开发研究始于80年代中期美英日等国都开展了这方面的
研究工作。
国外开发的焊接ES主要涉及工艺设计或工艺选择包括多因素的焊接材料选
择或焊接方法选择焊接缺陷或设备故障诊断焊接成本估算实时监控焊重庆大学硕士学位论文
1
绪论

4
接CAD疲劳设计符号绘制焊工考试等几乎包括了焊接生产的所有主要阶
段及主要方面
17

22
。英美已有很多商品化的ES。其中焊接工艺设计及焊接工艺
选择专家系统占了相当大的比例国外已有许多开发成功的系统。美国焊接研究
所开发的Weldselector最具有代表性
2324
该ES系统能为用户选择焊接方法和焊
接材料它有150多条规则可用于100多种母材。英国培尔法斯特皇家学院机械
工程系Taylor博士研制了一个船舶用钢埋弧焊工艺制定的ES
25
经生产现场验证
测试并得到满意的效果。Machwood工程实验室利用ES设计了一个蒸气管道焊接ES
它是为蒸气管道的对接焊制定工艺流程的。Southampton大学开发了一个焊接工艺
选择系统适合小于1英寸铝合金板材的焊接。美国StoneWebster开发的焊接工
艺选择系统WeldProcedureSelectionProgram已商品化。大阪大学建立了一个
CO
2
工艺选择ES系统
26
。英国焊接研究所开发的WeldcrackExpertSystem用来诊断
接头中裂纹的种类
1719
。Miller公司开发了一个焊机故障诊断专家系统Miller
ExpertSystem目前已商品化
27
。在压力容器方面安全评定也逐渐趋于规范化
如CEGBR6
28
CNDA84
29
等。美国卡内基梅隆大学AHKnhne教授研究能与机器
人配套使用的专家系统WeldAssist
30
它具有三方面的功能焊接预测不
连续性工艺改进。Sicad和leving开发了一个GMAW或GTAW与焊接机器人相结合
的ES系统
31
它根据用户输入的参数负责制定出工艺规程。德国亚琛大学研制
了一个自动焊接专家系统它作为整个焊接机器人的一部分。ES和CAD相配合使用
CAD主要功能是绘制焊接符号Johns开发的Weldsymple就是这样的一个系统
32
。
目前就总体水平来看世界各国焊接领域中专家系统应用已开始从研究阶
段和试用阶段向商品化阶段迈进。
132国内研究现状
焊接专家系统发展至今国内外水平差距较大。国外水平较高产品种类多
商用程度高而国内水平相对较低以实验原型和应用原型居多。焊接专家系统
类型以焊接工艺选择和缺陷分析为主其它类型很少且不成熟开发工具有限
国内焊接专家系统开发周期长成本高普及率及商用化程度较低。目前焊接专
家系统只是停留在知识表达及智能推理阶段而自动获取知识的能力匮乏缺乏
表达深层知识的能力。另外焊接专家系统应用程度参差不齐各企业自行开发
的专家系统应用良好而通用系统应用相对较差
33
。表11列出了我国近年来开发
的焊接专家系统。
我国焊接ES研究始于1998年最早见于报端的是南昌航空工业学院的焊接方
法选择ES。清华大学哈尔滨工业大学天津大学甘肃工业大学天津焊接研
究所等单位都先后进行了焊接ES的开发。1989年焊接学会有关专业委员会在清华
大学召开了首次焊接专家系统专题学术会议。通过交流经验有力地促进了重庆大学硕士学位论文
1
绪论

5
表11我国已开发的焊接专家系统
Table11OurcountryproducedWeldingExpertSystem
名称功能类型开发者备注
焊接方法选择专家系统方法选择南昌航空工业学
焊接材料选择专家系统焊材选择清华大学
焊接缺陷识别专家系统缺陷诊断上海交通大学
压力容器缺陷评定规范
CDVA84咨询专家系统
断裂评估清华大学达实用水平
铝合金焊接工艺制定
专家系统
工艺选择哈尔滨工业大学
弧焊工艺选择专家系统工艺选择哈尔滨工业大学
弧焊工艺制定与咨询
专家系统ESW
工艺选择
工艺制定
清华大学已商品化
有缺陷结构安全评定
专家系统
断裂评估清华大学达实用水平
焊缝裂纹预测与诊断
专家系统WCPDES
裂纹预测与诊断天津大学达实用水平
碳钢及合金结构钢SMAW
专家系统
工艺选择天津大学用INSIGHT2开发
焊接变压器设计
专家系统
CAD
上海交通大学
吉林工业大学
达实用水平
超声波焊接专家系统CAD上海交通大学
激光焊缝质量诊断实时
专家系统
缺陷实时诊断清华大学达实用水平
通用型弧焊工艺专家
系统QHWES
工艺选择工艺
制定
清华大学
已商品化
DOSWINDOWS

国内焊接ES开发技术的普及与提高。1992年9月中国焊接学会与中国焊接协会在
太原联合举办了计算机在焊接生产中应用的学术交流会。这次会议展示了我
国几年来的一些计算机应用研究成果对于未来发展具有指导意义。在1996年
焊接学会与中国焊接协会又在太原组织了第二届计算机在焊接中应用的学术与
技术交流会会议总结了近几年中国计算机在焊接方面的应用讨论了在焊接
生产中采用信息时代先进制造技术的动向。我国计算机技术在焊接方面研究已逐重庆大学硕士学位论文
1
绪论

6
步走向成熟部分系统已经商品化。例如哈尔滨工业大学的专家系统已在华北
油田玉门油田大庆油田管理局等单位广泛应用并取得了满意的效果
1634

37
。
操作平台大都由DOS平如转化为Windows平台有的已在Windows95平台上运行并
且范围不断扩大。

133我国焊接专家系统现存的问题
纵观目前的焊接工艺设计专家系统仍然存在以下的问题
33


应用范围比较窄。第一从涉及的材料方面来看目前所建立的焊接工艺
设计专家系统主要对象多为钢材焊接并基本是同种材料的焊接对于铝合金
钛合金及铜合金等有色金属的焊接及异种材料的焊接涉及的比较少。第二从焊
接方法上来看主要以弧焊方法为主并主要是单一的焊接方法对于组合的焊
接方法考虑的比较少。

缺少开放性。目前的许多焊接工艺设计专家系统试图一劳永逸建立后
不再更新和扩展更没有提供扩展的接口。事实上焊接技术在不断地发展新
材料新工艺不断涌现焊接工艺设计知识需要不断更新和补充计算机技术
也在迅猛地发展。专家系统设计人员一方面要不断地更新和改进系统才能跟
上时代发展的步伐另一方面要使所建立的系统方便用户更新和修改使用
户可以不断地添加知识以满足新的需要。

与实际应用有一定的距离。现有的系统一般按照某一标准编制设计的内
容一般是一个大致范围不够具体和实际的焊接工艺设计书还存在一定的差异
不能直接使用。

知识库更新困难。目前大多数焊接工艺设计专家系统的规则是直接基于知
识的描述。这样的规则给程序设计者带来了很大的方便即能很好地实现规则
设计和维护又能很好地与其它专家系统交流。同时这又是不足的根源主要表
现在第一用户看不懂规则。符号化的规则描述是造成用户的主要障碍之一。
第二规则维护不方便。从焊接工艺设计的特点看规则众多规则维护和设计
采用文件形式的操作对用户来说由于过多的英文和文件名使用起来很不方便。
第三规则不易扩充。目前焊接工艺设计专家系统对规则的扩充无能为力因
为它包含了文件名的定义和关键字的定义对用户来说无法知道文件名和关键
字的含义。第四规则不安全不易网络化管理。从安全角度考虑目前焊接工
艺设计专家系统的规则保存成文本是公开的没有一点安全保护措施很容易
被人盗用知识。从专家系统的发展方向看开放性的集成化的和网络化的是
今后发展的方向。基于文件操作的专家系统不能满足这方面的要求。

134焊接专家系统发展趋势
焊接专家系统的开发与研究虽然已取得了可喜的成就但其发展程度还相当重庆大学硕士学位论文
1
绪论

7
不完善未来的开发任务依旧任重而道远其发展趋势如下
16

集成化及通信网络化将进一步加强这意味着对焊接专家系统的通用性要
求将提高但并不是盲目的追求通用性而忽视专用性专家系统的开发。应视具体
情况综合各方面的利弊权衡经济可行性而言。
专家系统的开发工具将不断更新以WINDOWS为开发平台综合ANNOO
FUZZY等人工智能技术的开发工具将不断涌现并成为主流。
人工智能技术的发展与成熟必将使焊接专家系统趋向于混合化互补性强的
系统自动获取知识的能力也将不断地提高。
现有的焊接专家系统只能进行浅层的符号推理很少深入到元知识这一层
次其推理过程简单灵活性差难于解决复杂问题。随着焊接专家系统的发展
具有元知识处理能力的焊接专家系统将脱颖而出。
多媒体技术将在焊接专家系统中得到进一步的应用。多媒体技术由于具有
图文声效并茂和强大的感染力等特点而有着广阔的发展空间。但目前由于其巨大
的工作量仅限于在培训销售环节的焊接软件中应用。相信不远的将来计算机
软硬件环境的进一步发展多媒体技术必将越来越广泛地应用于焊接专家系统的
开发中去。
焊接领域的各种标准将进一步得到统一。伴随着网络化的发展各种数据
标准等的一体化和统一化进程加快。从前那种重复开发各有标准各自建立特
定数据库的做法必将改变其发展方向是建立共享性的统一数据库进而使焊接
专家系统的开发发生巨大的变化。

14数据库技术在焊接工程中的应用
141数据库技术简介
数据库技术已成为现代信息技术的重要组成部分是现代计算机信息系统和
计算机应用系统的基础和核心。所谓数据库系统是一种有组织地动态地存储有
密切联系的数据集合并对其进行管理的计算机软件以及硬件所组成的系统。数
据库系统是由数据库管理系统存储于存储介质上的数据和应用程序所组成
38
。
数据库管理系统DataBaseManagementSystem即DBMS是管理和维护数据
库数据的一种软件。一个数据库管理系统应具备以下功能数据库定义功能数
据存取功能数据库运行管理功能数据库建立与维护功能和数据库通信功能。
数据库技术从20世纪60年代末开始先后经历了层次型数据库网络型数据
库和关系型数据库三个发展阶段。现在人们把层次型数据库网络型数据库和
关系型数据库系统称为传统数据库系统而与之对应的数据库技术称为传统型数
据库技术。采用数据库技术具有以下显著特点
39
重庆大学硕士学位论文
1
绪论

8
数据共享性数据共享的意义是指多种应用多种语言互相覆盖地共享数
据集合。在传统的文件组织中每个数据文件是为特定的应用所私有的而数据
库是从整体的观点来看待和描述数据数据不再是面向某一应用而是面向整个
系统。这样可以大大减少数据的冗余度既节约存储空间减少存储时间又可
以避免数据之间的不相容性和不一致性。
数据结构化数据库系统不仅考虑数据项之间的联系还要考虑记录型之
间的联系一对一一对多和多对多系统首先描述这种联系然后通过存取
路径来实现这种联系。
数据冗余量小易于扩充在数据库的应用中既可以取整体数据的各种
合理子集用于不同的应用又可以在应用需求改变或增加时重新选取不同的子
集或加上一小部分数据来满足变化的需要。
具有较高的数据与程序独立性数据库系统提供两方面的映像功能数据
的存储结构与逻辑结构的映像功能总体逻辑与某类应用所涉及的局部逻辑结构
之间的映像功能。第一种功能使得当数据的存储结构改变时数据的逻辑结构可
以不变从而应用程序也不必改变这就是数据和程序的物理独立性。第二种功
能使得当总体逻辑结构改变时通过对映像的相应改变而保持局部逻辑结构不变
而根据逻辑结构编写的应用程序就不必修改即数据和程序具有逻辑独立性。
对数据实行集中统一控制数据库系统提供统一数据定义增删检索及
更新操作的手段并且统一控制数据的安全性完整性和保密性。
近年来数据库技术日益成熟一些大型关系数据库如OracleMicrosoftSQL
Server等已经提供数据仓库技术以及数据挖掘分析工具能够处理海量数据具
有一定的智能。它可以处理不同来源的数据实现不同的数据格式转换在知识
库系统中可以随时地添加事实性知识和规则性知识大大增强知识库的完整性
和处理能力
40
。
142数据库技术在焊接工程中的应用
焊接数据库作为数据库技术在焊接领域应用的一个分支自然具有数据库本
身的一般特点。其组成由三个部分焊接数据库数据库管理系统应用程序。
焊接数据库存储相关的数据和信息数据库管理系统为用户提供一个管理数据库
的平台应用程序为用户提供使有数据库的界面。焊接数据库将焊接领域内各种
数据信息资料和文件等有规律地组织保存起来可以快速地查询方便地使
用。由于焊接生产的复杂性焊接数据库能极大地提高工作效率和准确率。因此
焊接数据库在焊接领域内的应用极其广泛。
从20世纪70年代末日本英国美国德国等工业发达国家相继开始了
焊接数据库系统的研究工作并开发出了许多这方面的软件。日本于1976年专门重庆大学硕士学位论文
1
绪论

9
成立了焊接数据库委员会并于1986年召开了第五次会议提出要建立试验钢材
焊接方法坡口形状焊接材料焊接条件焊缝金属化学成分预热和后热
焊后热处理以及焊接接头性能的数据库。
1984年美国专门成立了材料数据网在世界范围内收集有关材料的数据
包括力学性能物理性能化学成分以及电化学腐蚀性能等。
英国焊接研究所于1986年建立了焊接工艺数据库WeldSpec该系统可以按照
工艺评定号母材类别接头型式厚度范围焊接方法及焊接位置进行焊接工
艺评定记录查询
41
。
德国焊接协会也于1987年开始建立焊接信息系统其中包括焊接文献数据库
和焊接记录数据库。
我国焊接数据库的研究始于20世纪80年代中后期迄今已开发了多个焊接数
据库系统。1986年甘肃工业大学和哈尔滨焊接研究所合作开始进行焊接工艺数
据库系统的研究。该系统可以模拟焊接热过程和热影响区相变规律及性能变化规
律结合已有的工艺试验数据和经验选择和设计最佳的焊接工艺参数。
哈尔滨工业大学和哈尔滨锅炉厂于1986年开始合作研究锅炉及压力容器焊
接数据库。该系统包括钢材的机械性能与化学成分国内外钢材牌号对照焊接
材料化学成分及力学性能焊接性试验结果及焊接CCT图等为进一步进行合理的
焊接工艺设计奠定了基础。另外天津大学和清华大学也都建立了不同的焊接数
据库系统。
1999年太原重型机械学院与太重集团用面向对象的语言Delphi4开发了钢制
压力容器焊接工艺评定专家系统用户根据实际情况输入查询的必备条件该系
统可根据输入数据对数据库进行快速检索找出符合的记录得到评定结果若
不存在符合查询条件的记录可使用模糊查询找出最接近的记录
42

46
。
随着网络技术的发展及现代企业的网络化研究者开始进行焊接数据库的网
络化研究。1999年哈尔滨工业大学现代焊接生产技术国家重点实验室与大庆油田
股份有限公司合作研制开发了基于ClientServer模式的焊接工艺管理数据库系
统可以完成焊接工艺评定焊接工艺规程管理并能根据标准完成工艺评定必
要性判断。同时设计了多层保护的安全机制实现了焊接工程数据库网络化推
进了焊接工程数据库的发展和应用
47
。
目前数据库技术已经渗透到焊接领域中从原材料焊接试验焊接工艺到
焊接生产的各个方面其基本类型与主要功能如表12所示。

15课题分析
151焊接工艺计算机化管理的新需求
重庆大学硕士学位论文
1
绪论

10
表12焊接数据库系统的基本类型与主要功能
Table12Basictypesandmainfunctionsofweldingdatabasesystems
系统基本类型主要功能或内容
焊接工艺评定数据库系统记录维护记录查询记录打印
焊接工艺规程数据库系统
记录定位编辑记录添加记录删除记录
拷贝记录浏览记录记录预览和打印坡口图形处理
焊工档案记录
焊工资格审查焊工培训与考核
焊工持证项目到期检查焊工考试通知
材料成分与性能数据库系统材料成分数据材料性能数据材料牌号对照
焊接材料数据库系统
焊接材料性能数据焊接材料生产厂家焊接材料价格
焊接材料质量检测数据焊接材料标准专利
焊接性数据库系统
铁研试验结果插销试验结果最高硬度试验结果
冷裂纹敏感性试验结果
焊接CCT图管理CCT图输入CCT图查询组织性能预测
焊接标准咨询系统
不同焊接方法的各种参数母材类别组别及最低强度
要求焊接材料类别组别确定所需力学性能试验

随着现代工业和现代制造业的高速发展焊接技术起到了越来越重要的作用。
为了能够提高焊接结构的质量和性能一个至关重要的因素就是正确地选择焊接
工艺参数制定正确的焊接工艺并严格执行焊接工艺。但由于焊接过程本身的
显著复杂性多因素性经验性使得焊接工艺参数的选择以及选择的步骤多而
繁杂。总的来说焊接工艺的制定具有如下特点
与焊接工艺文件支持文件密切相关在制定焊接工艺时要依次查找焊接
工艺规程WPS库焊接工艺评定报告PQR库和焊接工艺指导书WPD库
根据查找的结果来决定是直接使用现成的WPS或者根据已有的PQR制定WPS或者
根据已有的WPD来制定PQR进而制定WPS或者重新制定WPD按照一整套过程来
制定WPS。
需要考虑的各种影响因素比较多涉及的相关信息量大诸如焊接方法
钢种类别接头厚度焊材种类焊接工艺参数焊后热处理制定等都是必须加
以考虑的因素。因各种因素包括的具体内容也相当多比如焊接材料就有焊条
焊丝焊剂钨极保护气体等五种每种焊材又包含若干个子类而每间个子重庆大学硕士学位论文
1
绪论

11
类又包括若干具体的焊材。因此制定焊接工艺过程中所涉及到的数据信息比较
多。
从事焊接工艺制定的工程技术人员既要具备相当的理论基础又要有一定
的实践经验制定焊接工艺是一个复杂的多因素过程不是通过简单的计算就可
以实现的而是依赖于焊接工程技术人员根据以往的经验法则等借助专业书
籍和技术落后规范经过分析计算比较筛选才能得出一个在生产中可行
经济上较优的工艺方案。
焊接工艺计算机一体化管理是智能化焊接技术的一个重要方面。要真正实现
焊接工艺计算机一体化管理就要求焊接工艺设计专家系统和焊接工艺数据库系
统二者之长开发一个既像专家系统那样利用规则制定比较合理的焊接工艺又
能像数据库系统那样对焊接工艺文件和焊接工程信息进行有效管理的综合系统。
但在目前已开发的诸多焊接工程软件中满足上述焊接工艺计算机化一体化管理
需求的并不多见。这就要求把人工智能和数据库技术的结合引入焊接领域开拓
新的应用前景。
152数据库与专家系统结合的必然性
数据库技术和专家系统都是计算机科学两个十分重要的领域其发展已有近
十年的历史并已在各自的领域取得突出成就而获广泛应用。
专家系统可以处理非结构化决策问题可进行知识表达并运用启发式搜索和
推理解决某些具有专家水平的问题同时具有知识获取和解释功能但缺乏有效
地搜索和利用大型知识库的能力知识库管理能力比较差工作效率比较低这
些都阻碍了专家系统的发展和应用
4849
。
而目前应用最广泛的数据库管理系统着重于解决结构化决策问题在数据
共享并发控制数据存取和查询方面功能很强并具有低数据冗余的特点但
缺乏数据抽象能力不能处理知识没有推理演绎能力缺乏自然语言理解能力。
鉴于专家系统和数据库存在的问题和矛盾人们认识到了数据库技术和专家
系统相结合彼此取长补短相互促进共同发展的广阔前景。所谓专家系统与数
据库技术的组合直观上是指两个领域各自引入对方较为成功的经验和技术为已
所用从而提高系统的功能和效率处理更为复杂的问题。这种结合不仅涉及专
家系统的连接和集成而且也涉及专家系统和数据库技术的相互应用和扩充
50

53
。
基于规则的产生式系统是目前知识工程中使用比较普遍的一种。它具有知识
结构与人类思维和会话形式接近易于理解规则形式表示一致易于操作和控
制能有效地表达深层知识具有高度的模块化等特点。对于那些人类专家知识
已经基本成熟形式化较好的学科领域使用产生式的知识表示方法是建立专家
系统的一个简便而有效的方法
5455
。重庆大学硕士学位论文
1
绪论

12
153本课题研究的内容及意义
本课题结合焊接工艺的技术特点已有焊接工艺设计专家系统和焊接工艺数
据库的现状在充分利用已有资料的前提下以比较成熟的数据库技术为基础
对制定焊接工艺的专家知识和经验进行分析处理对工艺设计的推理过程进行
分析对焊接工艺文件的标准格式和相关焊接资料信息进行归纳整理尝试采
用通过开发工具建立一个基本满足低温压力容器用钢焊接工艺设计计算机一体化
需求的系统即计算机辅助低温压力容器焊接工艺设计系统CAWPDS
ComputerAid
WeldingProcessDesigningSystem
满足对相关焊接工艺文件的常规管理而且
应用人工智能原理来提高其知识表达与推理能力实现一定程度的智能化。
本课题主要工作内容如下
建立必要的数据库
根据低温压力容器焊接工艺的特点收集整理规范大量的焊接工艺知识。
建立需要的母材库焊接材料库工艺参数库设备库坡口图形库辅助知识
库等各种焊接工艺制定过程中所需的数据库。
工艺知识整理
对低温压力容器的各种焊接标准和工艺规程设计知识经验进行了整理并
加以规范化。
工艺设计系统分析
根据低温压力容器焊接工艺设计原理结合工厂的生产实际确定系统的工
作流程及各模块的功能。
工艺设计
对低温压力容器生产过程中可能用到的各种母材焊材焊接方法进行了工
艺设计包括零件信息的输入工艺参数的确定热处理温度的确定焊接工艺
卡的生成等。
编程实现与关键技术的解决
选择可视化编程语言VisualBasic60实现友好的人机界面设计工艺编制
数据库的设计工艺卡片的输出等。
需要解决的主要问题
焊接过程是一个复杂的物理化学过程正确选择焊接工艺参数并非一件易
事。其难点主要在于怎样把经验性很强的焊接工艺设计过程通过计算机来表达出
来。需要解决的具体问题有相关标准规则的表达与执行焊接工艺参数的确定
焊接工艺评定必要性的确定以及焊接工艺数据库的管理与维护等。
开发本系统具有以下几个方面的意义
对于从事焊接工艺制定的工程技术人员应用本系统可以设计出较好的焊重庆大学硕士学位论文
1
绪论

13
接工艺文件这样可以弥补有经验的高级焊接工艺设计师的不足减少和避免人
为的错误。对于有经验的焊接工程技术人员本系统提供了较好的设计工具和依
据可以使他们从繁琐复杂的焊接工艺制定中得以适当解脱出来去从事更有意义
的工作。
有利于焊接工艺文件的标准化和规范化。采用本系统中的焊接工艺数据库
系统不但可以实现对焊接工艺文件的有效管理而且格式和内容统一可以方
便地调整文件的格式和内容。
采用计算机辅助焊接工艺设计不仅可以利用计算机高速处理信息的能力
更重要的是可以将焊接工艺专家的集体智慧和经验融于其中保证获得高质量的
焊接工艺规程有利于信息共享节省不必要的重复开发费用。
应用计算机辅助焊接工艺设计还可以获得可观的经济效益。它不仅可以缩
短工艺编制周期而且可以保证工艺制定的正确性防止重复评定和重复制定。
本系统是以低温压力容器焊接工艺为背景进行开发的。因此本系统具有较
好的应用意义和使用价值。
154CAWPDS的适用范围
CAWPDS是以低温压力容器焊接工艺设计为背景进行开发的其使用范围为

适用于焊接工艺文件的计算机化管理系统提供了相关的焊接工艺评定报
告和焊接工艺规程的标准格式按照向导的指引即可完成常规焊接工艺设计。

适用于制定低温压力容器的常用焊接工艺。

适用于对焊接坡口图形的查询系统提供了包括焊接坡口的适用焊接方法
和使用场合。

适用于对常用焊接工程资料的查询系统提供了包括焊接母材焊接材料
焊接方法和焊接设备等在内的相关资料。











重庆大学硕士学位论文
2
系统分析与总体结构设计

14

2系统分析与总体结构设计

21系统研究构思
本课题研究开发的针对低温压力容器制造的焊接工艺设计与管理而开发的系
统CADPDS是一个直接面向生产实际和工程设计人员的应用系统。本系统针对低
温压力容器焊接工艺设计特点应用各种先进的计算机技术和科学的软件方法而
进行开发的。
211焊接工艺设计的特点
焊接是压力容器制造中和一种重要的加工方法之一。如平板拼接筒节与筒
节筒节与封头人孔短接接管与壳体及法兰间的连接内件的组焊以及支
管与壳体间的连接等等。大多由相关的焊接方法来完成。目前低温压力容器焊
接常用的方法有手工电弧焊埋弧自动焊熔化极惰性气体保护焊钨极氩弧焊
等离子弧焊等。应用最普遍的是手工电弧焊和埋弧自动焊。钨极氩弧焊则用于焊
缝根部要求融合良好的打底焊接。熔化极氩弧焊及等离子弧焊多用于不锈钢及铜
铝等有色金属的焊接电渣焊则用于厚壁壳体的纵缝和环缝的焊接。
焊接工艺主要是指焊接的先后次序和相应的内容也就是焊接件的实际生产
过程通常不包括零部件的具体加工如下料成型等。而焊接工艺的设计就
是确定具体的加工工艺路线和内容包括焊接方法焊接参数等从而保证整体
焊接工艺的完整性和有效性的过程
56
。
焊接工艺设计相对于机加工的工艺设计而言具有以下几个特征
焊接结构形状复杂特征变化很多结构特征的表述难度很大。相对而言
冷加工零件几何形状比较有规律相互之间有很多相似之处容易利用成熟技术
通过分类编码或其它方法可以较完整地覆盖零件的结构和工艺信息并借此生
产完整的工艺。
焊接结构件的制造是装配和焊接的组合加工过程它们即有一定的独立性
又有极为密切的关系。相同的结构采用不同的焊接顺序也会有不同的参数结果
这些都增加了解决问题的难度。
焊接加工中焊接材料种类多环境条件复杂而且它们的变化对焊接参数
焊接工艺流程的影响很大并且由于焊接属于热加工是一个经验性很强的工作
难于找到实用可行的规律也很难抽象出一个数学模型进行仿真。而冷加工机
械自动化的实现相对容易对机床等进行控制也比较实际加工参数和顺序容易
确定。
在焊接结构件的制造中除了焊接以外与之相关联的还有很多辅助工序重庆大学硕士学位论文
2
系统分析与总体结构设计

15
如组装定位焊前预热焊后热处理等这些工序具有一定的随机性。
然而焊接结构件作为一种进行结构件其本身具有相对的稳定性。考虑结
构件的分类在同一类焊接结构件中无论结构还是功能都具有一定的相似性
和继承性根据结构功能工艺相似的原则同一类焊接结构件的焊接工艺也
具有一定的相似性和继承性。
212系统设计思想
基于企业现状和焊接工艺设计的一般特点并针对当前计算机辅助焊接工艺
设计系统的不足吸取它们的优点确定了如下设计思想。

面向企业的思想

此系统是面向企业的设计工作应以具体企业为研究对象开发CAWPDS并以
企业的实际使用效果为目标。开发的CAWPDS系统所输出的工艺文件应符合工厂焊
接生产的习惯和经验应采用企业工艺设计人员和操作人员习惯和熟悉的工艺术
语。同时系统应简单实用以利于用户操作和培训。

人机协同的思想

焊接工艺设计所涉及的工艺规程比较复杂知识获取难度较大经验性也非
常强。如果单纯依靠计算机进行工艺设计生成的工艺可能不尽合理系统开发
的成本也可能比较高。采用人机协同的思想工艺设计人员不仅在系统设计
的各阶段可交互修改工艺内容而且参与系统推理决策过程实现人的主动性和
创造性工作而数据处理规则化知识的推理工作由计算机来完成。人机协同
工作使系统的工作设计更容易提高系统的适应能力。

专家系统的思想

工艺设计是一门经验性强涉及面广的综合学科属于典型的多因素复杂问
题目前还不能建立实用的数学模型和相应的通用算法来解决许多决策依赖于
经验知识。在开发CAWPDS的过程中应该充分利用企业成功的设计案例以及技术
人员的经验采用专家系统的技术可以实现专家知识的积累利用动态更新
提高系统的智能性和实用性。

多元化的思想

不同的企业由于生产条件环境习惯经验的差异工艺差别较大而且
对于同一企业由于不同的加工方法生产方式不同类型零件的工艺内容。因
此CAWPDS要规划出合理一致的工艺必须根据工厂的不同的零件类型零件
的制造要求和生产任务的紧迫性灵活采用不同的CAWPDS。

快速原型的思想

快速原型是在初步明确设计需求后以一个典型的焊接件为例把系统主要
功能接口作为设计依据快速开发出软件初始模型然后对原型系统进行评价重庆大学硕士学位论文
2
系统分析与总体结构设计

16
修改扩充和调整不断完善原型扩充系统功能。


22系统功能分析与总体结构
221系统功能分析
开发低温压力容器计算机辅助焊接工艺设计系统主要是帮助焊接技术人员正
确而迅速地制定合适的焊接工艺。所以在本系统中我们将主要从焊接生产企业
的实际生产过程和技术入手分析确定低温压力容器焊接生产厂家对焊接工艺专
家系统的功能需求进而设计出CAWPDS的功能模型。经分析焊接企业对本系统存
在如下功能需求
能够对PQR和WPS等焊接工艺文件进行有效的管理。本系统对这些焊接工艺
文件提供了比较完备的管理手段以便提高用户对焊接工艺文件的管理水平和效
率。它不仅可以对工艺文件进行检索查阅调用存储及删除修改添加等
还可对焊接工艺文件进行组合查询用户可对工艺文件编号焊接方法母材等
重要条件进行组合查询。
能够模拟人类焊接专家进行焊接工艺的制定。用户可以根据系统提示选择
母材母材牌号焊接位置等初始条件利用专家系统工具逐步推理在与用户
不断交互过程中实现焊接工艺的制定。
能够进行知识库维护和管理。知识库是体现一个专家系统生命力的重要部
分。专家系统要像人类专家那样解决问题就必须从人类专家及其有关资料中获
取知识并将知识以适当的表示形式储存在计算机内以便于工作检索修改和
应用。在本系统提供对知识库中已有规则的查询和维护。
能进行焊接坡口图形的查询。焊接坡口形式是焊接工艺的一项主要技术。
坡口形式选择与设计的好坏不仅直接影响到焊接结构的生产加工工艺效率及
成本。本部分提供了对坡口图形的维护与管理。用户可以添加删除更新坡口
图形。图形库的开发与维护采用OLE技术把Windows的画图程序链接到程序中来处
理坡口图形。
能够进行焊接资料库的维护和管理。焊接工艺制定过程中需要了解一定
的信息如母材焊材焊接方法焊接设备等等。本部分就提供了对母材牌号
化分成分及机械性能焊接材料牌号化学成分主要用途焊接设备焊接方
法等相关信息的查询。
能够提供系统使用的在线帮助。此部分属于系统的辅助功能模块。为用户
提供了简单实用的在线提示与系统帮助功能。
根据上述对本系统的功能需求分析可以确定低温压力容器CAWPDS的基本功
能结构如图21所示。重庆大学硕士学位论文
2
系统分析与总体结构设计

17














222系统总体结构

专家系统其实质也是一组计算机程序所以应当而且必须遵循软件开发的一
般规律对于本系统来说亦是如此。一般的基于规则的产生式专家系统的结构主
要有领域知识库推理机全局数据库人机交互界面。焊接CAWPDS是一个涉及
焊接工艺制定焊接工艺文件管理焊接相关资料查询等方面的复杂系统其总
体结构如图22所示。按其内容主要有以下几个模块组成
数据库系统模块

该模块主要是系统运行时所需要的各种焊接资料数据库包括母材库焊接
材料库工艺参数库焊接设备库焊接方法库以及坡口图形库等几个综合数据
库它们下面还包含一些其它细节的数据库。数据库系统提供一定程度的开放
可满足以后数据库的扩充。

焊接工艺文件管理和查询模块

系统的焊接工艺文件管理部分建立了焊接工艺评定
PQR
库焊接工艺规程

WPS
库提供了标准格式和对工艺文件的查询浏览维护和打印功能同
时保存专家系统的工艺制定结果进行统一维护和管理。

工艺设计模块。
工艺设计模块是焊接CAWPDS系统的核心部分主要由它来完成焊接工艺规程
设计。本模块是根据用户输入的初始条件然后通过信息模块中的数据和知识库
中的规则通过检索查询或者推理最终用户在与系统交互的过程中完成焊
接工艺的设计工作。
低温压力容器计算机辅助焊接工艺设计系统
焊

接

工

艺

设

计

知识库维护和管理

焊接工艺文件管理

系统使用说明及帮助

焊接坡口图形查询

焊接工艺文件设计

输出
WPS

PQR
制定
WPS

PQR
WPS
的管理

PQR
的管理

系统资料库维护与管理

母材化学成分及力学性能查询

焊材化学成分及力学性能查询

焊接方法查询

焊接设备查询

图21系统功能结构图
Fig21Systemfunctionstructure
工艺参数查询
重庆大学硕士学位论文
2
系统分析与总体结构设计

18


































否

开始
选择登录用户名及口令
用户名及口令
是否正确

用户库中是

否有该用户

是否以录入用

户的正确权限

登录系统

进入系统
是
否
否

是
是
焊
接
工
艺
设
计
搜索可用
的
PQR
设计

编辑

建议

WPS
根据

PQR

制定

WPS
显示保存
焊
接
工
艺
文
件
管
理
保
存

添
加

删
除

修
改
系
统
知
识
库
维
护
知
识
库
维
护
及
更
新
母
材
库
的
添
加
删
除
修
改
系
统
资
料
库
维
护

焊
材
库
的
添
加
删
除
修
改

坡
口
图
形
库
添
加
删
除
修
改

焊
接
设
备
及
方
法

库
添
加
删
除
修
改

工
艺
参
数
库
添
加
修
改
删
除

系
统
帮
助
帮
助
说
明
及
解
释
口

令

设

置

更
改
口
令

图
22
主程序流程图

Fig23Mainprogramflow
否

是否退出系统
结束
是
母

材

查

询

焊
接
设
备
与
方
法
查
询

焊
材
查
询

坡
口
图
形
查
询

工
艺
参
数
查
询

查
询

工
艺
文
件
查
询重庆大学硕士学位论文
2
系统分析与总体结构设计

19
系统帮助模块

系统帮助模块是系统的辅助功能模块阐述了系统的结构具备的知识以及
能够完成的功能。系统帮助模块中的系统使用指南简洁明了地介绍了系统的使用
方法。在本系统中为用户提供了简单实用的在线提示与系统帮助功能。


23系统开发工具的选择
在系统的软硬件开发环境的选择上我们不仅考虑了系统开发的需要还考
虑了企业实际的接受能力。
231操作平台选择
本系统是以
Windows
作为操作平台。
Windows
是最为流行的微机图形操作系
统它具有漂亮直观统一的用户界面和便捷的操作方式。
Windows
是基于消息
循环的多任务运行机制它可以在其它程序运行同时间歇运行另外的程序
而不必终止原来运行的程序。
Windows
环境的这一特点是由零事件驱动的机制决定
的这同
MSDOS
顺序驱动的运行机制是截然不同的。
Windows
可以共享计算机的
所有资源如输入

输出设备内存屏幕等为实现动态数据交换提供基础这
是符合信息发展方向的。

Windows
是一个标准的平台。它提供了友好的图形用户界面
GUIGraphical
UserInterface
充分利用了显示在点陈显示器上的各种图形更好地发挥屏幕直
观表达信息的特点。
Windows
提供的操作对象只有窗口菜单对话框和图标等
每一个对象都代表着特定的功能并给用户以应有的提示使得用户学习和操作
更为简单和方便。
Windows
系统同时配备了许多软件开发工具。

因此采用
Windows
集成环境下的各种软件工具作为此系统的开发平台不但
可以进一步增强系统的实用性和扩展性使人机界面更加友好生动降低系统
开发的成本还能使
CAWPDS
系统各子模块间的动态数据交换成为可能。

232编程语言选择
以
VisualBasic60
作为开发语言。目前市场上主流的开发工具有
Microsoft
的
VB

VC

Sybase
是
PB

IBM
的
VA

Inprise
的
CBuild
及
Delphi
5759
。而
VisualBasic
是
RAD

RapidApplicationDevelopment
系列的第一个产品是微软公司推出的
市场影响最大优秀的可视化开发环境它摆脱了所有底层消息的处理采用了
一种非常巧妙的方法将
Windows
编程复杂性封装起来易学易用数据库开发功能
强大使编程人员能更快速地编写出功能强大的高质量的
Windows
应用程序而无需
顾及一些不必要的细节。越来越多的用作大型公司数据和客户机

服务器

ClientServer
简称
CS
应用程序的前端开发工具与后端的
OracleSQLserver
等数据库相结合提供一个高性能的客户机

服务器解决方案
60
。
重庆大学硕士学位论文
2
系统分析与总体结构设计

20
在众多开发软件面前本系统采用
VisualBasic60
主要是因为它具有以下特
点
可视化的编程方法以及向导的功能使开发人员几乎不用加入太多的代码
就可以开发出标准的
Windows
程序。
使用交互式方法开发应用程序使传统的编码编译测试代码三个步骤
之间不存在有明显的区别。由于
VisualBasic60
是解释型语言在编码者输入代码
时就加以解释及时捕获并解释大多数语法或拼写错误编程效率高。

使用
VB
编程人员无需编写大量代码去描述界面外观和位置从而使编程效
率大大提高。
VB
中文版开发环境集
Windows
应用程序的设计编辑编译和调试
等多种功能为一体使用十分方便可以充分节省编程人员的时间和精力。

数据访问特性允许对大部分数据库格式建立数据库前台应用程序和可升
级的服务功能。


ActiveX
技术允许使用其它应用程序提供的功能例如
MicrosoftWord
字处理
器
MicrosoftAccess
电子数据表及其它
Windows
应用程序。

已完成的应用程序是使用
VisualBasic
虚拟机的真正的
exe
文件供运行时可
自由发布的动态链接库
DLL
。


VisualBasic60
不但仍然支持标准化设计而且在语言上还进行了扩展。提
供了面向对象的程序设计允许抽象化模块化的分层结构具有多态性继承
性和封装性。


Web
编程能力强大能够开发基于网络客户机

服务器应用程序
61
。

VisualBasic60
不仅具有上述特点还有强大的异常处理能力。
程序设计时出现错误是在所难免的哪怕是最好的程序员也会出错。无论程
序员如何地精心设计精巧地编写代码力求使程序达到完美但实际上并不能
完全消除错误。而所出的错误千差万别各不相同有些是程序员输入代码时所
致有些是由于操作过程中试图完成非法操作还有一些是因为在编写代码时考
虑不周。程序在设计中可能遇到的错误大致分为三类语法及编译错误这是
因为语句不符合规则引起的如输入错误的关键字语句中漏掉了标点
if
或
Endif
不匹配拼写变量错误或者是在下一个语句时忘了在前面的语句加下划线。
运行错误是在程序运行过程中代码试图执行不能执行的操作引发的错误。
逻辑错误。
VisualBasic60
能够帮助用户找到编译和语法的错误而且还提供了调
试工具供查找和排除运行错误和逻辑错误。

就理想的情况而言
VisualBasic
过程根本不需要错误处理代码。但实际上情
况却是这样硬件出现的问题或用户出乎意料的操作都会造成运行时出错这种
错误使代码终止而且通常无法恢复应用程序的运行其它错误也许不会中断代重庆大学硕士学位论文
2
系统分析与总体结构设计

21
码但这些中断可以使代码产生意想不到的操作。
VB
提供了如下几种方法
61


使用中断模式

中断模式可以终止应用程序的执行并提供有关应用程序
的情况。因为变量和属性的设置被保留下来所以可以分析应用程序的当前状态
并输入修改内容这些修改反过来会影响应用程序的运行。

使用调试窗口

在中断模式下可以使用调试窗口立即窗口及
各本地窗口分析数据到底发生了什么变化确定变量和属性得到了哪些不正
确的值为什么会得到这些值从而找出发生错误的根源所在。

本文在考虑低温压力容器计算机辅助焊接工艺设计系统软件的异常处理能力
时自行编制了在软件运行中可能遇到的异常处理程序。在系统中使用以上的异
常处理原理基本上达到了软件的异常处理功能可以使系统软件发生异常后自动
执行异常处理程序而不会中断或退出系统。

233硬件开发环境
CPU

Pentium133
以上

内存
64MB
以上
RAM
硬盘
1GB
以上容量

显示驱动
256
色
610480
分辨率

支持
Windows
的显示适配卡

CDROM
驱动器

鼠标或其它设备


24数据库管理系统及其选择
241数据库系统简介
数据库系统提供了一种集中存储和维护信息的方法主要有数据库管理系统
DBMS
数据库应用程序数据库
Database
三大部分组成。数据库管理系统
专门负责组织和管理数据信息数据库应用程序提供获取显示更新
DBMS
存储
的数据的手段数据库是有一定组织的彼此相关的数据集合。

数据库管理系统是数据库系统的核心部分。使用数据库管理系统主要有三个
优点第一数据的组织存储和管理与应用程序严密分开。第二便于扩展现
有应用系统和开发新的系统。第三通过标准界面一个应用程序的数据可由其
它应用程序共享。使用数据库管理系统对整个企业的数据进行组织存储和管理
是实现集成化信息管理系统的先决条件。

DBMS
经历了文件管理系统层次数据库系统网状数据库系统关系数据库
系统和面向对象的数据库系统五个主要发展阶段。其中关系数据库以其完整的理
论基础和直观的表达方法在商业应用数据库中居主导地位。
重庆大学硕士学位论文
2
系统分析与总体结构设计

22
数据库管理系统
DBMS
是为数据库的建立使用和维护而配置的软件系统。
它建立在操作系统上是位于操作系统与用户之间的一层数据管理软件负责对
数据进行有效的统一管理和控制。用户使用的各种数据库命令及应用程序的执行
都要通过数据库管理系统。数据库管理系统还承担着数据库的维护工作按照数
据库管理员
DBA

DataBaseAdministrator
所规定的要求保证数据库的安全性
和完整性。数据库管理系统的主要功能有以下几个方面



数据库定义功能
DBMS
通过数据定义语言
DDL

DataDefinition
Language
即
DDL
对数据库的结构进行描述包括外模式模式和内模式的定
义。各种模式翻译程序把用
DDL
编写的各种模式翻译为相应的内部表示分别称
为目标外模式外模式和目标内模式。这种目标模式是对数据库的描述而不
是数据本身。它们是刻画数据库的框架被保存在数据字典是
DBMS
存取和管理
数据的基本依据。

数据库存取功能
DBMS
提供数据操纵语言
DML

DataManipulation
Language
即
DML
实现对数据库数据的基本操作检索插入修改和删除。

数据库运行管理这是DBMS运行时的核心部分包括并发控制存取控制
安全性检查完整性约束条件的检查和执行数据库内部的维护如索引数
据字典的自动维护等等。所有数据库的操作都要在这些控制程序的统一管理下
进行以保证事务的正确运行保证数据库的正确有效。

数据组织存储和管理DBMS分门别类地组织存储和管理各类数据。包
括数据字典用户数据存取路径等确定以何种文件结构和存取方式在存储级
上组织这些数据如何实现数据之间的关系。数据组织和存储的基本目标是提高
存储空间的利用率选择合适的存取方法提高存取效率。
数据库的建立和维护它包括数据库初始数据的载入转换功能数据库
的转储恢复功能数据库的重组功能和性能监视分析功能等等。这些功能大
都由各个实用程序来完成。
在目前的软件市场上数据库管理系统主要有以下几种Microsoft公司推出
的SQLServer和Access数据库软件Oracle公司开发的Oracle数据库Informix
公司推出的InformixPowerSoft公司推出的PowerBuilderFoxSoftware公司
开发的FoxPro以及VisualFoxProBorland公司开发的DBASE和PARADOX等。
242数据库的选择
Access是Microsoft公司推出的在Windows环境下运行的关系型数据库软件
72
。Access既是一个数据库管理系统同时又为用户开发应用程序提供了良好的
环境。Access使用了SQL语句来处理表中的数据。作为一个关系型数据库管理系统
Access可谓功能强大使用灵活用它可以很方便地创建表设置字段类型和特重庆大学硕士学位论文
2
系统分析与总体结构设计

23
征定义主关键字及建立单个和多个字段的索引。Access可以直接访问和更新
ParadoxDbase系列FoxBase等数据库此外Access还可以处理电子表格中的数
据及文本文件中的数据。Access既可单机运行又可上网运行并提供了完全面
向对象的编程工具。综合Access的上述特点本系统采用的数据库管理系统是
Access。

本课题在Access作为后台数据库焊接资料库系统知识库。以
VisualBasic60
作为前端开发工具基于专家系统原理进行低温压力容器计算机辅助焊接工艺设
计系统的开发研究。
























重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

24

3CAWPDS系统数据库的设计

31数据库设计概述
对于一个专家系统来说需从数据库中不断获取数据以及向数据库中加入
专家系统中形成的新知识新规则更新数据库中陈旧的过时的数据所以一
个专家系统必须有数据库的支持而且数据库设计的合理与否在很大程度上决定
了系统能否开发成功。数据库设计是研制数据库及其应用系统的技术是指对于
一个给定的应用环境构造最优的数据库模式。建立数据库及其应用程序使之
能够有效的存储数据满足用户的应用要求信息要求和处理要求数据库设计
的基本任务是根据企业的信息需求处理需求和数据库的支撑环境包括
DBMS

操作系统和硬件设计出数据模式包括外模式逻辑模式和内模式以及典型
的应用程序。信息需求表示企业所需要的数据及其结构处理需求表示企业经常
需要进行的数据处理。数据库设计的基本过程如图
31
所示
68
。数据库设计的成果
有二一是数据模式二是以数据库为基础的应用程序。















数据库设计一般包括以下几个阶段

需求分析阶段

这是数据库设计的起点要求准确了解与分析用户需求。本系统的需求分析
是在查阅相关厂家的多年焊接信息并与焊接专家进行深入交流下做出的。

概念结构设计阶段

需求分析
概念设计
逻辑设计
物理设计
信息需求
处理需求
需求说明
内模式
与
DBMS
无关

的数据模式

外模式概念模式

和典型应用程序

DBMS
特征

硬件操作总体特征

图
31
数据库设计的基本过程

Fig31Theprocesstodesignadatabase重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

25
这是数据库设计的关键。概念设计的任务是根据需求说明书中采集的素材
使用某种概念数据模型清楚地表示数据之际间的相互关系。概念设计通常采用的
是
ER

EntityRelationship
即实体联系方法即用
ER
图来进行设计。也就
是通过对用户需求进行综合归纳和抽象形成一个独立的具体的
DBMS
的概念模
型。

逻辑结构设计阶段

根据数据库概念设计的结果设计出数据库的概念模式和外模式。这个阶段
是整个系统赖于实现的基础直接影响到数据库的使用性能而且结构的合理性
还直接关系到数据库能否很好地适应应用需求的变化。也是将概念结构转化为某
个
DBMS
所支持的数据模型并进行优化。本系统选用关系模型。

物理设计阶段

数据库物理设计的任务是将逻辑设计得到的概念模式转换为内模式。此阶段
为数据模型选取一个最适合应用环境的物理结构包括存储结构和存取方法。

数据库设计涉及许多方面从静态的信息需求到企业的业务政策各种因
素常会产生矛盾还要考虑到企业未来的发展将会给数据库设计带来的问题。因
此数据库设计是一个复杂的变化的需要不断改进的创造性的过程。


32CAWPDS数据库的设计
321数据库设计规则
数据库的记录包含的信息存放在每个字段中定义数据库结构涉及创建若干
字段来存放用户为数据库表中的每一个记录收集的信息以便有效的对数据库进
行管理主要包括数据库字段定义字段类型及其长度。确定数据库字段时应注
意以下几个方面

尽可能增大数据库的完备性

建立数据库的目的是创造有用的输出信息或者是用户能用于总结和分析的
信息所以在建立一个数据库之前应先对用户可能认为有用的资料进行考虑
并考虑进行数据处理时涉及的数据项。故数据字段应包括由用户明确提出的项
在任何报表中包括的或任何计算机中使用的项为一个报表处理或操作确定顺序
的项及有助于记录的项。

例如
PQRDBS
不同的焊接工艺评定母材的类型对接头的性能要求及焊接
方法等不完全相同涉及到的参数种类数目和内容有比较大的差别因此结构
设计时应内容全面保证能够全面地记录每份工艺评定书的内容同时系统应能
够进行有效的查询和工艺评定必要性判断并考虑屏幕布局和打印报表的美化。
例如母材字段的设计要考虑异种材料焊接情况所以要将母材分为两个字段。
重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

26
数据库资源尽可能适应共享的需要

一个数据库在大多数情况下不是孤立存在的可能会调用其它的数据资源
也可能被其它的数据库调用。因此在建立数据库时要有利于数据共享。

尽可能减少数据的冗余度

当字段很多时同时可建立多个数据库按共同的字段将它们连接起来但注
意要去掉每个数据库中在别的文件中可以查到的信息项以避免冗余也既数据结
构不应该包含重复的多余字段。因此应有条理地对字段进行描述以便建立合适
的数据库结构。

字段命名简单明了

在数据库建立之前应为字段提出一套命名规则。这些指导规则应尽可能性简
单使其可能要修改系统的程序员容易记住这些规则。同时命名要明确能概括其
含义避免不必要的令人费解的缩写。

322CAWPDS数据库需求分析
本系统的主要目的是利用数据库技术强大的存储数据高效检索数据和对数
据进行处理的功能来对焊接工艺文件和焊接相关信息进行管理。焊接工艺的设计
和管理是一个相当复杂的过程系统中涉及的数据资料很多在本系统中将所
涉及的数据资料分为两大部分一是存放焊接基本资料主要包括母材母材牌
号规格焊材种类牌号及规格焊接接头类型坡口形式焊接工艺参数
焊前及焊后热处理等这些项相对比较固定二是存放焊接工艺文件这些焊接
工艺文件主要包括焊接工艺评定报告
PQR
焊接工艺规程
WPS
焊接工艺
设计书
WPD
随着新材料新产品的出现该部分会发生改变。由此可看出焊
接工艺的设计和管理所涉及的信息量之大如何合理有效地收集管理和利用这
些信息就成为系统数据库部分的主要任务。数据库系统的成功设计和实现不
仅对于实现焊接工艺文件的计算机化管理有重要意义同时也能为正确制定焊接
工艺提供有力的支持。

本系统的主要功能是制定焊接工艺及焊接文件的计算机化管理下面结合焊
接工艺文件的制定过程来对系统进行分析。

在计算机尚未应用到焊接生产中时焊接工艺的设计主要是由手工制定的。
手工制定工艺卡的过程大致是

首先分析焊接构件母材如果采用法定认可的母材则母材免做评定试验
否则应对母亲才进行评定

在企业设备允许的条件下选用母材适当的焊接方法

根据母材厚度范围和焊接方法确定接头形式坡口类型参数设计及焊
缝形式等
重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

27
依据有关焊接工艺国标或企业标准确定填充材料焊接层次各种焊接
工艺参数焊前及焊后热处理等工艺参数

以表格或工艺卡的形式将焊接工艺的各项内容显示出来。

可用图
32
直观地表示手工制定焊接工艺卡的过程。













CAWPDS
系统制定焊接工艺的流程如图
33
这是一个比较复杂的过程。系统
运行时用户首先选择进入工艺卡生成选项系统开始寻找工艺卡库看是否有合
适的焊接工艺卡。如没有则开始设计工艺卡由用户输入基本数据以母材母
材规格焊接方法等任意组合条件作为关键字在人机交互的方式下由规则推
理结合必要的人为选择判断逐步运行并确定接头坡口形式预热参数焊
接工艺参数焊后热处理及其参数等最后输出附带其它信息的完整的焊接工艺
卡表单。此后系统查阅焊接工艺评定库对工艺卡上涉及的重要因素或补加因
素作评定的必要性判断给出工艺卡的有效性提示。对于输出的有效性工艺卡
用户阅读后若对其中次要因素不满意可请求对其修改在输入修改数据后得
到新的工艺卡最后保存并打印工艺卡。查找过程中所涉及到的各种数据都有类
可循而且这些数据之间有一定的逻辑关系。例如焊接接头是由母材的规格和
焊接方法决定的而焊接接头又构成了焊接生成的产品。对于在不同的焊接工艺
文件中具有相同类型的数据可以用数据库技术中的数据字典
DD

Data
Dictionary
来控制和管理这些信息。系统数据字典的主要数据卡如图
34
所示。

数据库作为本系统的核心部分应具备的功能有

数据输入和存储

数据库能提供对各种焊接工艺数据的输入和存储功能
不仅能输入文本数据还能存入图形。

数据库查询检索

不仅能查询焊接基本资料如母材的化学成分机械性
能焊接工艺参数等而且还能对焊接工艺文件进行查询。

母

材

是否需要

评定

母材评定

焊接方法
生成焊接工艺卡
接头类型坡口形式

参数设计及焊缝形式


填充材料焊缝焊接层次
焊接规范参数焊前及焊后

热处理

是
否

图
32
手工制定焊接工艺卡过程图

Fig32Theprocessofplanningaweldingprocedurebyhand重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

28






























数据输出

对于查询检索出来的数据数据库系统能够提供良好的显示界
面并且可能按照一定的格式输出查询结果。

323系统数据库概念结构设计
数据库的需求分析明确之后需要认真的分析焊接工艺制定过程中涉及到的
数据以及涉及的数据信息及数据之间的关系。然后对这些信息用分类聚集和
名字母材

定义母材

牌号

温度等级

使用状态

常用焊接方法

化学成分

机械性能

焊接
性

工艺要点

名字焊接材料

定义焊接材料

类型

牌号

用途

名字焊接方法

定义焊接方法

特点

焊接设备

主要工艺参数

应用范围

名字焊接设备

定义焊接设备

设备型号

主要

参数

用途
名字焊接接头

定义焊接接头

接头形式

坡口形式

焊
接位置

名字焊接工艺参数

定义焊接工艺参数

电流

电压

焊接速度

焊接线能量

名字热处理

定义热处理

处理类型

温度

时间

图
34
主要数据卡片图

Fig34Thediagramofmaindatacards
否

保存到工艺卡库

否
否

无
是

一份

否

输入初始条件

打开
PQR
修改工艺

保存到
PQR
库

评定


修改数据
有
自选
PQR
是
浏览打印焊接工艺卡

多份

多份

系统优选
PQR

生成焊接工艺卡
是
否
规则推理
输入焊接条件

焊接工艺卡设计


图
33
系统制定焊接工艺卡流程图

Fig33Theflowchartofsystemweldingcarddesigning
有无可用的
PQR


满意否

修改

保存

评定否
合格否
重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

29
概括的抽象机制对收集到的数据及对数据的处理要求进行分类组织最终得到
数据库系统的实体和实体的属性。具体如下

母体材料

牌号规格化学成分机械性能焊接性工艺要点

焊接材料

类型牌号化学成分主要用途

焊接接头

接头形式坡口形式坡口图形焊接位置适用的焊接方法

焊接方法

方法名称方法特点对应的焊接设备应用范围

焊接设备

设备名称设备型号用途

焊接保护气体

气体类型配比适用母材

焊接工艺参数

焊接电流电弧电压焊接速度焊接线能量

预热及层间温度

温度大小加热方式

焊后热处理

热处理类型温度大小后热时间加热方法冷却方法

分析各个实体之间的关系确定其各自的联系类型如下

对于一个确定的母材可以选择不同的焊接方法而对一种焊接方法也可
选多种母材进行焊接故母材和焊接方法之间就存着多对多的关系可表示为
m

n
。

对于一个确定的焊接方法可选择不同的焊接材料而一种焊接材料只能对
应一种焊接方法故焊接方法与焊接材料之间一对多的关系表示为
1

n
。

母材确定后可选不同的焊接接头进行焊接而一种焊接接头可选用不同的
母材故母材与焊接接头之间也是多对多的关系表示为
m

n
。

一种焊接方法可对应多种焊接工艺参数而一种焊接规范参数却只对应于某
种确定的焊接方法故焊接方法与焊接规范参数之间存在的关系为一对多表示
为
1

n
。

一种焊接接头可以使用不同的焊接设备而一种焊接设备适用于多种焊接接
头故焊接接头和焊接设备之间存在着多对多的关系表示为
m

n
。

通过上述的分析将系统中涉及到的实体及其属性和实体之间的关系用
ER
模型表
示如图
35
出来从而建立数据库的概念模型。

324系统数据库逻辑设计与物理设计
逻辑设计的中心任务是找出能表达
ER
模型的数据模型如层次模型网络模
型和关系模型进行
ER
模型向数据模型的转化。即在概念设计的基础上将概念
模型转化为具体的
DBMS
支持的数据类型包括数据项记录和记录之间的关系等。
因本系统采用的是关系型数据库故选用的是关系模型。从
ER
模型向数据库转换
的步骤如下

确定各实体的主关键字
写出实体内部属性之间的函数依赖重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

30


























把函数依赖关系表达式中的实体名换成相应的主关键字

根据中各函数依赖关系分组得到一组关系

完成所有ER模型向关系的转换后就形成了关系数据模型。
数据库的物理设计其主要任务是使数据库的逻辑结构能在实际的物理存储
设备上得以实现建立一个具有较好性能的物理数据库。数据库的物理设计主要
解决以下3个问题恰当地分配存储空间决定数据的物理表示确定存储
结构。数据库物理设计在很大程度上与选用的数据库管理系统有关。

33系统数据库的建立
系统数据库是进行焊接工艺设计的基础数据库结构设计是建立设计系统的
基础。本系统数据库的建立主要是从系统功能来进行考虑的。本系统主要是实现
接头形式

母

材
母材牌号

母材规格
材种类
化学成分机械性能焊接性工艺要点

类型
牌号
化学成分主要用途
焊接材料

焊接接头
坡口形式
坡口图焊接位置焊
接方法
焊接方法

方法名称特点焊接设备
应用范围
焊接工艺参数
焊接电流电弧电压
焊接速度焊接线能量
温度大小
加热方式
预热及层间温度

热处理类型
温度大小
时

间加热方式冷却方式
焊后热处理
焊接设备

设备名称

设备型号
用途
保护气体

气体类型配比
适用母材
图
35
焊接工艺数据库
ER
模型示意图

Fig35TheERmodeloftheweldingdatabase重庆大学硕士学位论文
3CAWPDS
系统数据库的设计

31
低温压力容器计算机辅助焊接工艺设计与管理从功能出发充分考虑完成此功
能所必须的信息以保证系统能够实现即定的功能。

在设计数据库过程中从实用性来讲主要考虑的因素包括焊接工艺规程
是焊接操作人员进行焊接的依据制定过程中要参考相应的焊接工艺评定报告。
本系统结合焊接工艺制定的推荐形式参考了现有的焊接结构的工艺评定报告和
焊接工艺文件资料充分注意了其实用性。根据上述的分析本系统将建立
12
个
基本表这些表涵盖了焊接工艺文件管理和焊接工艺文件制定过程中的相关数据
按其类型可分为两大类第一类是焊接基本资料类包括焊接母材表焊接材料
表焊接方法表焊接设备表焊接工艺参数表坡口库其中焊材表又分为三
个子表即焊丝表焊条表焊剂表以及保护气体表。第二类是焊接工艺文件表
焊接工艺评定报告表
PQR
焊接工艺规程表
WPS
二个基表。


34数据库的安全维护
数据的安全性是指保护数据库以防止不合法的使用所造成数据泄露和破坏。
数据库的安全性就是数据中数据的安全性
6970
。为实现系统的安全性本系统所
采用的措施有用户标识和设置访问权限的方法。通过对用户和用户权限的检验
以防止非法用户使用计算机或者合法用户的非法操作对于那些有意或无意对数
据库进行的非法操作都予以拒绝并给出警告。
用户标识和权限设置的目的在于检查企图使用计算机的人是否有使用权。在
CAWPDS
系统中采用了用户标识口令密码和设置权限方法。根据系统中设置的
权限可将用户分成二个等级系统用户和一般用户。系统用户可通过操作密码数
据库来修改系统用户的名称及密码并最终决定是否放弃在系统维护中删除的系
统数据及管理系统数据一般用户可随时访问本系统而无权修改。

在本系统维护中如删除编辑添加等修改维护功能只有系统用户才有权访
问而一般用户只能进行浏览查阅如果越权访问系统将给出警告并拒绝
访问。只有这样才能保证使用该系统各用户责任分工明确有利于系统的安全
性保密性。
一般而言通过上面措施基本能满足一般数据的安生性的考虑。但对于一些
重要的数据库如存放用户标识和口令密码数据库存放
PQR
的焊接工艺评定数
据库等仅靠上述措施仍难于完全保证数据安全性。某些用户尤其某些内部用户
或对于数据库文件有一定专业知识的人员可能利用其他方法越权获取用户标识
口令密码或者打开数据库文件来窃取甚至删除信息。因此需要对数据库中存储的
重要数据进行加密处理以实现数据存储的安全维护。目前本系统对数据库的
加密工作还没有得到很好的解决。重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

32

4CAWPDS系统专家系统的设计

41概述
CAWPDS
在一定程度上是一个基于知识的系统它之所以具有专家的水平
是因为它把焊接领域的相关知识结合到程序设计中去使程序具备像专家求解问
题时一样的推理学习和解释能力在一定程度上可以起到焊接工艺制定专家的
作用。
结合焊接工艺制定的特点本系统按照以下三项原则建立专家系统
系统性原则

在本系统中把专家系统开发工具
CLIPS
与数据库管理系统
DBMS
有机地集成起来由数据库管理系统既管理数据库又管理知识库从而形
成一个结构紧凑功能全面的系统。
有效性原则在设计系统时注重焊接工艺制定结果的有效性。本系统建立
的目的是面向生产实践因此以满足实际需要为原则不以信息量大为开发目标。

可更新性原则考虑到系统今后的发展本系统采用模块化结构设计相
互独立性较强从而使某一模块的修改对系统整体的影响较小便于系统不断更
新和完善。


42系统知识库的设计
421知识获取与表示
所谓知识就是人们对客观事物包括自然的和人造的及其规律的认识。知
识还包括人们利用客观规律解决实际问题的方法和策略等
62
。CAWPDS系统要实现
智能设计就必须严格控制其知识的来源知识是系统一切行为和导出结果的基础。

知识获取是开发专家系统的基础性工作是将领域知识收集整理归纳分
类的过程。知识表示是指将获取的领域知识形式化的过程也是将之形式化为适
合于计算机处理的过程。我们知道专家系统是建立在人类知识之上的问题解答
系统拥有知识是专家系统与其它计算机软件系统的本质区别。而知识获取和知
识表示正是使专家系统具有知识的第一步工作。

在专家系统中可将知识分为事实和规则两大类。知识获取就是整理事实
归纳规则的过程但是在一般情况下想要获取的领域知识并不都是规范化存在的
具有很大的随意性尤其是领域专家的经验等启发性知识更具有不确定性不完
全性和隐蔽性这使得知识获取工作变得如此艰难以致成为制约专家系统发展
的瓶颈问题。因而这就更需要人们去不断地收集整理归纳领域知识即
要求人们集中地进行大量知识获取工作也要求将这一过程贯穿于整个专家系统重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

33
的建造和使用过程之中。

知识获取的方法有人工获取方式半自动获取方式和自动获取方式。人工获
取方式主要是通过知识工程师与领域专家繁琐而深入的交谈及大量的阅读文献
查阅技术资料等方式获得然后由知识工程师整理归纳。半自动获取方式是指借
助于知识编辑器归纳整理程序或文本理解程序等知识工程语言和知识获取工具
进行的知识获取方式。第三类是自动获取方式是指系统自身具有获取知识的能
力它不仅直接和领域专家进行对话从专家提供的原始信息中学习到专家
系统所需的知识。而且还能从系统自身的运行实践中总结出新的知识发现知识
中可能存在的错误不断自我完善建立起性能优良知识完善的知识库它属
于机器学习的范畴是一种非常理想的知识获取方式。

本专家系统主要是通过知识工程来获取焊接领域知识。知识工程师主要通过
以下两条途径来进行知识获取工作一是通过阅读焊接领域的书籍科技文献及
技术资料等进而归纳总结出焊接领域知识一是通过与焊接专家的交谈讨论
等交流活动进行的焊接专家知识的获取。这两种方式获取的知识各有侧重第一
种方式获取的知识主要是一般性知识包括焊接领域的原理规则事实等第
二种方式获取的知识主要是焊接专家个人的经验诀窍等启发性知识。

知识表示主要是建立各种知识系统的重要环节目前常用的知识表示方式主
要有一阶谓词逻辑表示产生式规则表示框架表示语义网络表示面向对象
表示脚本表示剧本表示关系表示等。这些方法都是显式地表示知识。此外
利用人工神经网络也可以表示知识但这种知识表示方式是隐式地。本系统采用
的知识表示方式是应用最广泛最成熟的产生式规则表示法这种知识表示方法与
通常面向人的知识表示形式比较接近容易理解方便使用同时知识的表示
呈显式也能适应系统进一步扩展知识的需要。另外产生式系统的结构和专家
系统的结构相类似也主要有知识库全局数据库和推理机组成而且产生式系
统不能把计算视为预定顺序的操作而是将它看成由数据决定的以某种顺序使
用产生式规则的过程。产生式的这些特点决定了它非常适合于专家系统的开发
因而本系统也采用产生式构建。

产生式是美国数学家EPost在1943年提出的他根据串替代规则提出了一种
称之为Post机的计算模型模型中的每一条规则称为一个产生式把一组产生式
放在一起并让他们互相配合协同作用即构成产生式系统。产生式的基本形
式是PQ或ifPthenQ其中P是产生式前提Q是结论。产生式的巴科斯BNF
BackusNormalForm范式的严格形式描述及语义为

产生式知识系统产生式规则AND产生式知识系统
产生式规则前提结论
重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

34
前提简单条件复合条件
结论事实操作
复合条件简单条件AND简单条件AND简单条件简
单条件OR简单条件OR简单条件
操作操作名操作
产生式规则主要表示的是专家系统中的规则为了构建产生式系统我们还需
要表示规则中的知识。确定性知识我们可以采用三元组的形式表示即对象
特征值或关系对象1对象2而对于不确定性事实则可用可信度因子的
方法来表示即对象特征值可信度或关系对象1对象2可信度
表示。例如低温容器用钢16MnDR可表示为16MnDR类别低温压力容器用钢
焊丝H08MnA配用焊剂HJ431可表示为配用H08MnAHJ431采用埋弧焊焊接工艺
16MnDR钢可表示为IF16MnDR焊接埋弧焊THEN配用H08MnAHJ431。
在知识获取和知识表示之后我们还要进行知识的检测与求精工作。在知识
的获取与表示过程知识经过一系列的变换在这个过程中存在着各种各样导致
知识不健全的因素如提供者提供的知识不一致不完整甚至错误理解的偏
差表示的模式不当等这就会产生系统知识的冗余矛盾从属环路不完
整等问题。为了保证知识库的正确性需要做好知识的检测求精工作。在本系统
的开发过程中主要是请焊接专家阅读检查修改整理后的领域知识并用已
知结论的事实情况来考核领域知识尽量在输入计算机之前将知识中和错误检查
出来。
422知识库的设计

知识库是专家系统的核心之一知识库中知识的质量直接关系到整个专家系
统的性能和运行效率因而它的设计工作具有重要的意义。知识库的设计主要是
设计知识库的结构形式即知识的组织形式。

专家系统中的知识库一般采用层次结构或称网状组织模式
41
。这种结构模
式是把知识按某种原则进行分类然后分类分层次存放。比如关于母材的知
识可分为低碳钢合金钢不锈钢耐热钢等部分关于坡口的知识可分为手工
电弧焊坡口气体保护焊坡口埋弧自动焊坡口等部分。知识库的层次结构可
方便知识的调度和搜索从而使得推理时知识的调度灵活迅速可以加快推理
进度。另外还有一类关于知识的知识称为元知识它是管理调度领域知识
和专家知识的知识。例如系统输入的是低温容器用钢选用手工电弧焊则调
用焊条库选用知识模块这就是一条元知识。

在本系统的知识库中存放的焊接领域知识可以分为两大类第一类事实性
知识主要表现为各种技术数据资料这些资源都存放在数据库其位置在数重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

35
据库服务器上它们存在的物理形式是由数据库管理系统管理着一个个数据库和
数据表。另外数据库和数据表之间的各种对应关系也体现了某种知识。第二类是
概念性知识是关于如何应用焊接知识的知识它们存储在系统推理模块中即
存在于系统的程序代码之中。

母材库中主要存放着常用的低温压力容器用钢的化学成分力学性能以及一
些涉及到的基本性能如使用的温度等级常用的焊接方法及焊接性等等。这
部分资料主要选自各种焊接手册及文献
6364
对这些数据分别存储在不同的表内。
如要对这部分数据进行扩充只需加入到相应的数据表中即可。

焊材库中主要存放各类焊丝焊条的化学成分力学性能以及主要用途也
存放着焊剂保护气体等辅助焊接材料的类型成分等数据资料。这部分资料也
来源于各种焊接手册
65
。

焊接方法库主要存放的是低温压力容器所用到的焊接方法的特点常用焊接
设备主要工艺参数及应用范围。

焊接设备库存放的是常用焊接设备的型号名称主要用途。

坡口库中存放着
GB98588
气焊手工电弧焊及气体保护焊坡口形式及尺寸
和
GB98588
埋弧焊坡口基本形式及尺寸的大部分坡口图形及相关参数。

焊接工艺参数库主要存放各种条件下的焊接参数包括焊接电流电弧电压
焊接速度气体流量等相关的参数。此库中存放着大量的焊接工艺资料可供调用
这些焊接工艺数据资料是进行推理求解的基础。目前系统中收集的数据资料大部
分来自标准手册小部分来源于厂家提供的实际生产数据。

文件库存放着各种焊接工艺文件的数据库主要包括PQR子文件库和WPS子文
件库。

文本库主要存放解释文本。

上述数据库是本系统的具体组织形式在运行时还需要对其进行各种运算组
合。

由于本系统的知识库采用的是数据库的形式因此对知识及知识库的管理就
是对数据及数据库的管理包括知识的添加修改删除等以及知识的一致性
完整性冗余性检查等。

知识的一致性完整性冗余性检查由数据库管理系统完成。知识的一致性
指知识库中的知识相容的即无矛盾的。

知识的完整性指知识中的约束条件。

知识的冗余性指知识的重复。


43推理机的设计重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

36
推理机又推理机构推理引擎或控制机构是与知识库相对应的另一个重要
概念是专家系统的重要组成部分是控制如何应用专家知识进行领域问题求解
的计算机程序。设计推理机重点考虑推理策略匹配策略推理方法和方向搜
索策略冲突消除策略等。另外由于推理机的推理是基于知识库中的知识进行
的所以推理机必须与知识库相对应相配套与知识的表示相适应除了能进行
常规的处理外推理机还要能够处理元知识及元规则能够规划模块的划分任务
等
66
。

产生式系统有两种基本的推理方式向前推理和向后推理。前者又称为数据
驱动的推理后者又称为目标驱动推理。当然常用的还有混合驱动控制即综合
使用前面两种基本的推理方式
67
。
























推理开始
令
I1
取出规则的前提部分

取出规则
I
的结论部分
是

将这些结论加入数据库
并记录规则
I
是

否

否
令
II1
推理结束
否
是
图
41
正向推理机示意图
Fig41Forwordreasoningmachinechart
这些前提都在

数据库中吗

这些结论是

新事实吗

还能产生新的
事实吗
重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

37
由于本系统属于设计型专家系统故选用向前推理也称正向推理方式事
件驱动方式事实数据驱动方式是一种从已知的事实出发逐步将已知事实和
规则进行匹配依次推导出结论的推理过程。图31是正向推理机示意图其大致
推理过程是首先将用户输入的事实与产生式规则的前提进行匹配然后按照冲
突消解策略从匹配成功的策略实例中选择一条规则执行选中规则的动作依次
修改全局数据库再用更新后的全局数据库中的数据重复上述的匹配选择更新
工作直到得出结论或全局数据库不再发生变化为止。

本系统的推理层次模型图如图42包括焊接材料选择规则焊接方法选择规
则焊接接头坡口设计规则预热及热处理制定设计规则焊接工艺参数设计
规则等。
















44系统解释机制
具有解释功能是专家系统与其它应用软件相区分的又一个重要标志。通常所
说的解释是指专家系统对用户所需求的概念和系统的行为象领域专家一样做出通
俗易懂的解释同时领域专家可通过解释系统了解系统的运行状况
71
。用户的问
题一般是通过用户接口语言以一种对用户方便直观的方式提出的而且已经过用
户接口部分转换变成了解释器所需要的内部形式。为了实现解释功能专家系
统应将推理过程和其它处理过程等历史过程记录下来以便于工作必要时以某种
方式重演其历史过程以解决人们对其行为提出的各种疑问。

实现解释机制主要有以下几种方式路径跟踪法和预制文本法策略解释法

推



理



规



则



库

初始条件

焊接材料

工艺设计结果

工艺规范参数

预热及焊后热处理
焊接方法

焊接接头及坡口

第一步推理

第二步推理

第三步推理

第四步推理
第五步推理

第六步推理

图
42
系统推理层次模型示意图

Fig42Thediagramofinferringlayermodelinthesystem重庆大学硕士学位论文
4CAWPDS
系统专家系统的设计

38
和自动程序员法。由于路径跟踪法和预制文本法这种方法相对比较容易实现故
本系统采用这两种方法来实现系统的解释功能。路径跟踪法是对推理过程进行跟
踪将问题求解所使用的知识自动记录下来用户提问时解释器向用户显示问题
求解路径。预制文本解释法是一种最简单的解释方法它是把问题的解释预先用
自然语言或其它易于理解的形式写成文本插入程序段或相应的数据库中在推
理过程中或推理之后一旦用户询问到已有预制文本解释提交给用户。这种形式
或以在线帮助的形式存放在帮助文件中或在窗体上的帮助菜单上或是在窗体
控件上的
ToolTipText
属性中。


45人机交互界面的设计
人机交互界面是用于专家系统与外部的交流的界面它为人机对话提供必要
的手段。系统界面设计主要遵循以下几个方面的基本原则一致性即界面设
计应与任务信息的表达有一定的一致性和相似性适应性界面应尽可能地
适应用户用户应处于控制地位界面应适应用户个人的特征和技术水平等
简明性用户可以用最小的步骤来实现一个操作尽量减少用户操作提高用户
效率结构性界面设计应该是结构化的从而减少复杂性用简单的方法将
有关的信息提供给用户。

界面的设计包括两个方面一是指面向最终用户或使用者的界面在该界面
的设计中可以引入多媒体技术采用图形界面改善了人机对话的条件方便了
用户的使用一是指面向系统开发者和维护者的界面在本系统中它是由开发工
具
VisualBasic60
和
Access
提供的。它易学易用具有帮助信息解释功能使使
用者赏心悦目。

人机界面是系统与专家及一般用户交流的人机接口用于完成输入输出工作。
在
CAWPDS
系统中焊接领域专家或焊接工程师通过人机界面输入原始数据
以启动专家系统如果数据充分则用户在系统的引导下就可完成某种工作如果
推理过程中由于数据不充分而无法得到结论时系统会要求用户参与决策。而在
开发界面中开发人员可以完成系统的维护更新和系统数据库的扩充工作。

本系统将数据库设计成开放式或半开放式。对这部分资料的更新维护与扩
充可以在用户界面下完成。但如果要进行修改系统推理机或者修改数据类型则必
须在系统开发界面下进行。




重庆大学硕士学位论文
5
系统模块设计与运行实证

39

5系统模块设计与运行实证

软件开发的最终目标是产生能在计算机上执行的程序而程序设计是实现
系统目标的所要完成工作的主要部分完成代码的编写才能实现用户要求的功
能。程序设计的任务是根据系统的需求分析和用户的具体使用要求进行总体设
计分析划分功能模块根据各个功能模块的要求具体制定程序设计的流程框
图最终完成编码工作。


51系统登录
用户成功登录网络后首先出现在用户面前的是系统封面和登录窗口。在此
窗口中要求用户输入用户名和口令从而确定该用户的权限。选择用户级别并输
入相应的密码这是用户进入相应工作模块的钥匙界面如图
51
所示。系统设
置了二种权限这二种用户有不同的权限。系统管理员用户可对所有系统数据进
行间接操作一般用户只能进行查询和打开现存的文件。







系统是通过如下的程序代码来判断用户是否为合法用户的。

图
51
系统登录窗口

Fig51Theloginfromofthesystem重庆大学硕士学位论文
5
系统模块设计与运行实证

40
SubMain
DimFloginAsNewfrmlogin

显示登录窗体

fLoginShowvbModal

判断是否是授权用户

IfNotfloginOKThen
LoginFailedsoexitapp
End
EndIf
UnloadFlogin

判断是将进入系统

SetfMainFormNewfrmMain
fmianFormShow
Endsub
如果需要修改用户密码用户可在进入系统后在系统菜单中修改密码修改
窗口如图
52
所示。若用户名或者密码不正确则系统会提示密码不正确请重
新输入否则提示密码修改成功。






52系统主界面模块
521系统用户界面设计原则
用户界面是用户与计算机之间传递交流信息的媒介是用户使用计算机系
统的综合操作环境。通过用户界面用户可以向计算机系统提供命令数据等输
入信息这些信息经计算机系统处理后又通过用户界面把产生的输出信息送回
给用户。用户界面的核心内容包括显示风格和用户操作方式它集中体现了计算
机系统的输入输出功能以及用户对系统的各个部件进行操作的控制功能。设计
图
52
用户修改密码窗口

Fig52Theformusedforchanginguserspassword重庆大学硕士学位论文
5
系统模块设计与运行实证

41
友好的用户界面是应用软件开发的一个重要组成部分。

CAWPDS
系统用户界面的设计以最大限度地满足用户的需求和使用方便为目
的在设计过程中遵循的基本原则如下

本系统设计具有
Windows
环境下界面风格的用户界面以简单明了的方式与
用户进行交流在窗口中尽可能地包含较多的信息。

在用户和系统交互时尽可能地方便用户操作对用户的输入具有一定的
容错性和检测能力并用信息窗口来提示用户操作的注意事项和操作的正确性。

在满足功能的前提下尽量采用按钮操作来减少数据的输入量加快数据
的录入速度提高系统解决问题的能力。

在同一用户界面中用窗口分隔不同种类的信息所有的菜单选择数据
输入与显示和其它功能保持风格一致性。
522系统主界面设计
系统成功登录后就会显示如图53所示的界面。在设计本系统的过程中主界面
采用的是MDIMultipleDocumentInterface即多重文件界面设计。MDI就是
允许应用程序同时打开多个子窗口的用户界面。使用MDI可以同时打开多个文档
以不同的子窗口显示在程序画面中并让用户随意在多个文档之间来回交换。














系统主界面类似一本书的目录从主菜单中可以看出系统能完成哪些功能。
系统提供了添加用户及修改用户密码查询可以查找在焊接工艺制定的过程中需
要用到的焊接母材化学成分力学性能及焊接性焊材的化学成分及用途等焊
图
53
系统主界面

Fig53Mainformofthesystem重庆大学硕士学位论文
5
系统模块设计与运行实证

42
接方法焊接设备接头坡口等相关参数的查询等等。在用户打开多个窗口时
可以使用窗体菜单对打开的窗口进行各种排列。还可以进行焊接工艺制定工艺
文件管理知识及焊接资料库的维护等。


53查询模块
在此模块中系统提供了对母材焊材焊接方法焊接设备坡口图形以
及焊接工艺文件等相关信息的查询。

531母材查询
点击主界面下的查询菜单下的母材子菜单就可进行母材相关信息的查
询。它包括母材基本性能化学成分及力学性能查询。图
54
显示的是所有低温压
力容器用钢基本性能查询的结果。它包括母材牌号工作温度使用的状态以及
焊接性和常用的工艺措施。

















532焊接材料的查询
单击查询菜单中的焊接材料下拉菜单出现图
55
所示的界面。若需查询焊条
或焊丝或焊剂则只需选择焊材类型并选择其牌号就可查询其对应的化学成分或
者是力学性能。


图
54
焊接母材基本性能查询结果界面

Fig54Thequeryformofweldingbasematerialperformance重庆大学硕士学位论文
5
系统模块设计与运行实证

43













现以焊剂
HJ250
为例说明具体的操作步骤选焊材类型为焊剂右边的焊接材
料牌号一栏就会出现低温压力容器常用焊剂的牌号选择你要查询的焊剂牌号后
单击查询按钮就会出现相应的查询结果如图
56
所示。


















图
55
焊接材料查询条件界面

Fig55Thequeryformofweldingmaterial
图
56
焊剂查询结果界面

Fig56Thequeryresultformofweldingmaterial重庆大学硕士学位论文
5
系统模块设计与运行实证

44
533焊接方法和焊接设备的查询
焊接方法查询与焊接母材查询类似进入查询焊接方法子菜单后会提示输
入要查询的焊接方法名称再单击查询就会出现相应的信息。

焊接设备的查询与焊接材料的查询相类似。也要选择相应的焊接设备名称
每一设备名称对应多个设备型号选择你要查询的焊接设备型号即可。这里不再
详细说明。

534焊接坡口查询
坡口的选择主要同母材的厚度焊接方法焊接位置等有关故系统在设计
时把这三项作为坡口查询的条件查询条件输入窗口见图
57
用户只需输入母材
的厚度并输入焊接方法及焊接位置再按确定按钮则符合条件的坡口信
息就会出现在浏览窗口图
58
若没有符合条件的系统会提示对不起没有你
要查找的焊接坡口。当系统搜索到的记录有多条时用户可像翻页一样反复进行
查看比较方便了工艺设计时进行坡口选择。



















图
57
坡口查询条件输入界面

Fig57Theformofinputconditionforsearchinggroove
图
58
坡口查询结果界面

Fig58Theresultformofsearchinggroove重庆大学硕士学位论文
5
系统模块设计与运行实证

45
535焊接工艺文件的查询
对焊接工艺文件进行查询是本系统的一个主要功能。利用计算机对焊接工艺
文件方便快速地查询不仅可节省用户的时间还可避免对已评定的工艺进行重
复编制。对焊接工艺文件的查询既可按照目录清单查询也可有用户输入焊接基
本条件进行查询如母材牌号焊接方法焊接位置接头类型坡口形式等特
征参数来查询或其几个特征的组合来查询。在本系统中采用的是组合查询的方式。
界面如图
59
。结果显示界面这里不再给出。可参考后面的焊接工艺评定维护界面。













54焊接工艺制定模块
能够正确制定焊接工艺是本系统的主要功能之一。工艺设计主要是完成焊接
工艺说明书
WPS
的编制工作并将编制好的
WPS
输出。众所周知编制
WPS
一般都需要
PQR
做基础。有
PQR
做基础的
WPS
可直接指导焊接施工没有
PQR
做基
础的
WPS
只能作为焊接施工的参考意见是否正确需经实践检验。因此可将编制
WPS
的工作分为两种类型一是搜索现有的
PQR
和
WPS
工艺方法通过对搜索的
工艺文件的修改制定出新的
WPS
一是直接设计新的
WPS
工艺文件系统将从基
本条件出发利用现有的知识库中的各种推理规则与知识完成焊接材料选择
坡口设计焊接参数设计预热及焊后热处理等一系列的设计任务并自动处理
各参数之间的约束与联系最终生成一份完整的建议性的
WPS
文件。这就需要系
统组织好对现有的各种工艺文件的管理工作。对现有工艺文件的有效管理是本专
家系统的主要特色之一。

当程序运行进入工艺设计模块时系统会提示用户输入初始条件由系统根
据所输入的条件首先要进行工艺文件的搜索工作流程图第三章已介绍过见图
33
先在系统内的
PQR
搜索有无可用的

搜索界面如图
510
若有的话就浏
图
59
焊接工艺文件查询输入界面

Fig59Theinputformofsearchingweldingfiles重庆大学硕士学位论文
5
系统模块设计与运行实证

46
览查看设计方案若检索出来多个结果默认情况下打开第一个文件。要打开
其它文件用户可以在浏览数据库记录中双击文件的编号。图
511
是搜索结果对话界
面点击图中的确定按钮进入焊接工艺文件的显示界面。

如果没有搜索到可用的
PQR
则可以点击下一步按钮进入焊接工艺设计。


























541基本条件输入
基本条件输入对话框如图
512
所示。在该界面中用户可以通过输入的基本条
件如母材种类厚度接头形式焊接方法等条件运用推理规则知识库中
的知识进行逻辑推理在与用户的不断交互过程中最终完成焊接工艺的制定。

图
511
搜索结果

Fig511Searchresulting
图
510
搜索界面

Fig510Searchform重庆大学硕士学位论文
5
系统模块设计与运行实证

47

































图
512
工艺制定初始条件界面

Fig512Theinitialformofdesigningprocedure
图
513
选择焊接材料界面

Fig513Theselectionformofweldingmaterials重庆大学硕士学位论文
5
系统模块设计与运行实证

48
542选择焊接材料
此页面包括焊条焊剂和焊丝焊接电特性和钨极等四个方面的选择内容

如
图
513
所示

。系统根据初始条件中选择的母材种类和母材规格来决定可采用的焊
接方法。同一种母材可以选用多种焊接方法不同规格的母材可以采用的焊
接方法也是不一样的因此系统对母材和母材规格进行了组合自动给出常用的
焊接方法供用户选择。在用户选择焊接方法以后系统综合考虑母材和焊接方法
给出与之相对应的焊材牌号供用户选择。用户根据所选的焊接方法在焊条焊丝
焊剂钨极焊材规格和焊接电特性中做出选择。系统在相应的选择栏目处给出
了提示信息用户把光标置于选择框上稍停片刻即可显示提示信息。单击下
一步按钮进入接头和坡口设计界面。

543接头和坡口设计
本页面包括接头形式坡口形式坡口图三个部分如图
514
所示。系统根
据用户选择母材种类母材规格和焊接方法自动给出可采用的接头形式。在用户
选择接头形式后系统根据母材种类母材规格焊接方法接头形式自动调出
并显示相应的坡口图。另外采用了
OLE

ObjectLinkingandEmbedding
即对象的
链接和嵌入技术把
Windows
的画图板程序链接到程序中用户只需单击坡口图
即可进行修改。单击下一步按钮进入预热与焊后热处理页面。
















图
514
接头和坡口设计界面

Fig514Theformofdesigningjointandgroove重庆大学硕士学位论文
5
系统模块设计与运行实证

49
544预热及焊后热处理
对话界面如图
515
所示。

在该对话界面中要对焊接母材的工艺特点进行简单的说明并就焊接条件的
变化导致的热处理规范的变化进行了简单的叙述。此外还进行了焊前焊后的
热处理规范的能量参数设计包括预热温度预热时间层间温度后热温度
焊后热处理温度保温时间消除应力处理的温度时间等。这些温度参数是与
具体的母材有关的。单击下一步按钮进入工艺规范参数页面。



























图
516
工艺规范参数界面

Fig51Theformofdesigningprocedureparameters
图
515
预热及焊后热处理界面

Fig515Theformofdesigningpreheatandpostweldheattreatmentgroove重庆大学硕士学位论文
5
系统模块设计与运行实证

50
545焊接工艺规范参数
它主要包括焊接电流焊接速度焊接电压等工艺规范参数如图
516
所示
焊接工艺参数的选择比较复杂即使同一种焊材同一种规格在不同的应用场合
也可能选择不同的工艺规范参数。系统根据母材规格焊接方法和焊材规格给出
了比较典型的工艺规范参数。如果需要修改可以直接在编辑框中进行系统会
自动保存修改结果。单击下一步按钮进入工艺卡显示界面设计。

546工艺设计结果
单击工艺参数规范设计界面下一步按钮就进入了查看设计结果界面
在此系统中焊接工艺的设计结果将以三页报表的形式输出设计方案报表形式
见
517

518

519
所示。

如果对输出结果满意就可送交打印否则修改不能在报表页面进行修改的
返回到设计页面修改。

WPS
的第一页主要包括文件编号产品名称单位名称编制人及审核人
焊接位置及母材等的基本信息第二页主要是焊接接头及坡口的信息第三页主
要是规范参数及焊后热处理等信息。



















图
517
系统设计结果第一页

Fig517Firstpageofdesigningresults重庆大学硕士学位论文
5
系统模块设计与运行实证

51

































图
518
系统设计结果第二页

Fig518Secondpageofdesigningresults
图
519
系统设计结果第三页

Fig519Thirdpageofdesigningresults重庆大学硕士学位论文
5
系统模块设计与运行实证

52
55知识获取与管理模块
知识库维护是专家系统开发工具的基本功能建立和修改知识库是开发工具
重要的一环。在这个系统中采用的是数据库管理系统管理知识库并把规则和
事实用数据库的关系模型来表示所以知识的获取和知识库的维护可以通过对数
据库的记录操作来实现。

在系统主界面上单击工艺制定模块菜单的子菜单知识获取与管理后
会出现如图
520
的界面。本页面显示的是系统规则信息库中的信息。对于知识库的
管理系统下面做一介绍。



















在知识库管理系统中提供了如下功能

浏览功能

单击工具条上的按钮可对规则信息库中的规则和事实进行浏
览。

搜索功能

在搜索字段选择中选择要搜索的项目并在搜索值中
输入要搜索的字符可在规则信息库中搜索相关信息。

修改删除功能

如果要对规则和事实进行修改可在编辑框中直接进行
修改后按保存按钮在确认之后完成修改。在修改规则时不能修改规则名
系统把规则名的修改视为添加规则因为规则名是规则和事实在规则库中的内部
图
520
知识获取和管理界面

Fig520Theformofmanagingandacquiringknowledge重庆大学硕士学位论文
5
系统模块设计与运行实证

53
标识。如果要删除规则单击删除按钮并对弹出消息框确认后即要完成。

知识获取是知识工程中的重要程序知识获取贯穿于一个专家系统生命周期
的始终。要使本系统在一定程度上具有代替焊接工程师制定焊接工艺的作用就
要向系统中不断添加从焊接专家焊接专业文献和有关标准中抽取出来的知识。
本系统进行了基于关系数据库的知识获取的尝试

其设计方案如下

单击添加按钮系统刷新页面进入知识获取阶段用户在编辑框中输入要
添加的规则和事实。在添加规则和事实时不用输入优先级由系统自动添加

因
为事实没有优先级系统为事实自动设置其优先级为
10000
和
10000
以区别于规则。
单击检查按钮系统进行一致性检查主要检查所添加的规则和事实是否与
知识库中的已有规则和事实重复系统给出提示信息。单击保存按钮系统
按动作部分是否为空分别把用户输入信息保存为规则和事实。
























图
521PQR
库维护界面

Fig521TheformofPQRdatabasemaintaining重庆大学硕士学位论文
5
系统模块设计与运行实证

54
56焊接工艺文件管理模块
采用计算机对焊接工艺文件进行管理不仅提高文件的管理效率缩短文件
的编制时间而且有利于焊接工艺文件的标准化。在此部分设计了焊接工艺评
定报告
PQR
和焊接工艺规程
WPS
方便用户对焊接工艺文件进行维护和管理。

焊接工艺评定报告维护界面第一页如图
521
所示。它主要有如下功能

浏览功能

单击工具条上的按钮可对焊接工艺评定报告的内容进行浏览。

记录维护

具有权限的用户可对其进行编辑修改添加记录等。

打印

用户可对其需要的文件进行打印输出。

焊接工艺规程维护界面
WPS
与焊接工艺评定维护界面基本类同这里不
再详细讲述。

57焊接资料库维护
焊接基本资料库是指进行焊接工艺制定过程中涉及到的有关参考数据是制
定焊接工艺所必须的。一般用户不能使用此模块。在本系统中设计的焊接资料模
块包括焊接母材库焊接材料库焊接方法库焊接设备库坡口图形库。

571焊接母材库
母材的数据主要存放在数据表中组织形式规范检索比较方便。母材库主要
包括母材牌号使用状态温度等级化学成分力学性能以及常用焊接方法
焊接性及其焊接工艺的主要措施等。此模块提供了记录的浏览和编辑功能。其界
面如图
522
所示。

572焊接材料库
焊接材料涉及到焊条焊丝焊剂及保护气体四个小库分别针对各焊材的
类型特点和使用范围进行设计。四种焊材的界面基本类似下面给出焊条库的
界面如图
523
所示。

573焊接方法库及焊接设备库
焊接方法库包括了方法名称特点对应的焊接设备及方法特点等内容。焊
接设备库中主要包括设备名称设备类别设备型号工作范围适用的焊接
方法和用途等内容。其显示界面类同于图
523
。
574坡口图形库
坡口图形是保证获得优良焊接接头的重要措施因此焊接坡口的设计是焊接
工艺设计的重要部分不同的焊接方法和接头形式具有不同的坡口形式在制定
焊接工艺的过程中通常根据国家有关标准来选择坡口形式。在本系统中设计了
如图
58
所示的坡口图形库包括坡口所属接头类型坡口形式坡口适用的焊接
方法母材厚度和使用场合等内容。在坡口图形的显示中采用了
OLE
技术把
Windows
的画图板程序链接到程序中用户只需要单击坡口图即可使用画图板程
重庆大学硕士学位论文
5
系统模块设计与运行实证

55

































图
523
焊条库维护界面

Fig523Theformofweldingwiresmaintaining
图
522
焊接母材库维护界面

Fig522Theformofweldingbasematerialmaintaining重庆大学硕士学位论文
5
系统模块设计与运行实证

56
序对坡口图进行修改。


58系统使用说明和帮助
系统的使用说明和帮助是为了方便用户使用和制作的辅助性程序文件主要
有系统的使用说明和系统的在线帮助两部分组成。有户可以在使用中启动帮助
也可以在程序目录下找到并点击低温压力容器计算机辅助焊接工艺设计系
统
hlp
直接启动启动帮助文件后系统将显示帮助文件界面。

在系统的帮助文件中详细介绍了低温压力容器计算机辅助焊接工艺设计系统
的使用方法介绍了系统保个工作模块的工作流程以及各个工作界面上的各控件
的具体操作方法。
























重庆大学硕士学位论文
6
结论

57

6结论

计算机辅助焊接工艺设计系统属于设计型的焊接应用软件。本文所研究开发的
CAWPDS系统不仅具有焊接工艺文件管理能力而且可以模拟焊接领域专家指导焊
接工艺人员进行焊接工艺设计编制WPS文件。因此研究开发具有较好实用功能
的计算机辅助低温压力容器焊接工艺设计软件具有重要的工程意义。

下面对本文所作的工作进行总结

根据焊接工艺设计的原理分析了焊接工艺设计的特点提出了系统设计思
想确定了系统的总体框架及各功能模块的功能。

利用易学易懂的ACCESS数据库建立了提供系统运行的各种数据库如母材成
分及力学性能焊材成分及力学性能焊接方法库焊接设备库坡口图形库
焊接工艺参数库等。

根据焊接过程的需要建立了焊接参数查询模块方便了用户和使用和咨询。
为了保证数据库的安全性设置了只有具有管理员身份的用户才能对数据库进行
维护。

便于焊接工艺文件的查询和维护。

采用可视化编程语言对CAWPDS系统各界面进行设计功能实现和数据的管
理。

系统开发过程中应用了OLE和Data等技术解决了各模块之间的查询接口与
数据的传递问题。

利用此系统可以快速准确地生成规范的可用于实际生产的图文并茂的工艺
卡。

本系统提供的在线帮助使用户可以在短时间内掌握系统的运行原理增强
了软件有使用性。

开发计算机辅助焊接工艺设计系统是一项艰巨而复杂的工作需要投入巨大的
人力物力。经过作者的努力虽然取得了一些成果但要真正实现系统的实用
化和商品化在许多许多还有待不断地提高和完善。所以我们还需不断地学习和
提高。以使系统最大程度地满足用户的需要。





重庆大学硕士学位论文

致谢

58

致谢

本文在尊敬的导师许先果老师的悉心指导下完成的。在我的学业和论文的研
究工作中无不倾注着导师辛勤的汗水和心血。导师严谨的治学态度渊博的知识
踏实的工作作风使我获益非浅。从尊敬的导师身上我不仅学到了扎实宽广的
专业知识也学到了做人的道理。在此我要向我的导师致以最衷心的感谢和深深
的敬意。
在论文完成有过程中还得到了朱成华罗怡刘拥军李铜罗丹等同学
的热心支持和帮助在此表示诚挚的谢意。
最后衷心感谢在百忙之中评阅论文和参加答辩的各位专家老师





姚宗湘
2005年3月于重大















重庆大学硕士学位论文

参考文献

59

参考文献

1
周振丰张文銊

焊接冶金与金属焊接性

第二版

机械工业出版社
198811
2
陈裕川主编

焊接工艺评定手册

北京

机械工业出版社
2000
年
1
月

3
吴林陈善本

智能化焊接技术

国防工业出版社
20008
4
黄可鸣

专家系统导论

南京

东南大学出版社
1998
5
蔡自兴徐光佑编著

人工智能及其应用

北京

清华大学出版社
1996
年
5
月

6NilsJNilsson
著

郑扣根庄越挺译

人工智能

北京

机械工业出版社
2000
年
9
月

7
傅京孙等

人工智能及其应用

清华大学出版社
1987

18
8
吴泉源刘江宁

人工智能与专家系统

国防科技大学出版社
1995

613
9
张全寿周建锋

专家系统建模原理及方法

中国铁道出版社
1992

812
10
吴信东

专家系统技术

北京电子工业出版社
1998
11
林尧瑞张钹石纯一

专家系统原理及实践

北京清华大学出版社
1998
12
施鸿保王秋荷

专家系统

西安交通大学出版社
1991

1718
13
周洪泽等译

专家系统指南

哈尔滨东北林业大学出版社
1989
14PattersonDWIntrodutiontoArtificialIntelligenceandExpertSystemsPrenticeHall
Inc1990
15
冯培恩刘谨主编

专家系统

北京机械工业出版社
1993
年
7
月

16
葛玉华霍立兴张玉凤

焊接专家系统的应用与发展

焊接技术
2000292

4142
17WLucasADBrightmoreESforweldingengineersMetalConstruction19875

254260
18KlausRainerSchulzeNewDevelopmentsinWeldingTechnologyWeldingResearchAbroad
Vol40No101991

1416
19WLucasMicrocoputersPackagesandExpertsystemfortheWeldingengineerWelding
MetalFabrication

1990584

206212
20WLucasWeldingEngineeringExpertSystemMultimediaComputerProgramsWelding
MetalFabrication

Vol631995

141148
21JNorrishMicrocomputerinWeldingWeldindMetalFabricationVol611993

4752
22BdotHJMSoftwareinWeldingtheUseofStandardSoftwareinWeldingIndustries

W
Doc
125091
Vol46No11992

2731
23
王宗杰

焊接专家系统的国内外研究现状及发展前景

计算机在焊接生产中的应用的学
术与技术交流会论文集
1992

95100
24JoneJEESMatchsWeldingElectrodestotheJobWeldingJournal

1987452
25WATaylorEStoGeneralArcWeldingProceduresMetalConstruction

19867

426431重庆大学硕士学位论文

参考文献

60
26
菊岛信

焊接
ES
的开发

焊接技术
19914

4548
27
冯梅

铝合金焊接工艺设计
ES
哈工大硕士学位论文
1996
28milneIminsworthRAdowlingARetalAssessmentoftheintegrityofstructurecontaining
defectsIntJofvespiping19883214

3104
29
中国机械工程学会压力容器分会中国化工学会化工机械与自动化学会

压力容器缺
陷评定规范
CVDA84

1984
30AHKuhneHBCaryFBprinzAnESforRoboticArcWeldingWeldingJournal
1987112125
31
郑炜

铝及铝合金弧焊工艺方案制定
ES
哈工大硕士学位论文
1992
32HBCarySummaryofComputerProgramsforWeldingEngineeringWelding
Journal199114045
33
肖德钢

魏艳红等

新一代焊接工艺设计专家系统

焊接
20019
34
张建勋

焊接工程计算机专家系统的研究现状与展望

焊接技术
200130
增刊


1113
35
赵熹华

王宸煜

张若冰等

焊接专家系统的开发技术及其在我国的发展

汽车工业与材料
19991

911
36
赵熹华

王宸煜

焊接专家系统现状及发展趋势

机电产品开发与创新
20004

2729
37
陈森昌

焊接专家系统综述

湖北汽车工业学院学报
19981

6975
38
罗晓沛

数据库技术

北京清华大学出版社
1999
39
琚春华凌云张益平

基于关系数据库的专家系统工具
JEST
的开发

黑龙江商学院学报
1994104

1219
40
汪林林马锐

对用
RDBMS
建立专家数据库系统的研究

计算机应用
200112

2528
41
陈丙森

计算机辅助焊接技术

北京

机械工业出版社
1999
42
陈冰泉赵义奎

焊接数据库的研究与发展

湖北工学院学报
2002172

171172
43
华学明黄海李佳慧

焊接工艺数据库及焊接工艺评定

上海工程技术大学学报
2001152

3942
44
王学东

焊接材料数据库管理系统

沈阳工业大学学报
2001233

192195
45
陈春红

张建勋

裴怡

钢制压力容器焊接工艺设计与管理专家系统和研究

工程建设与设
计
20011

3942
46
吴志生王成文杨新华

焊接工艺评定计算机管理系统的开发

工艺与新技术
2001305

2324
47
张立斌姚玉环董炳伟

不锈钢专家系统研究

佳木斯大学学报
2001191

97100
48
徐浩磐等编著

知识库系统导论

北京

科学出版社
2000
年
1
月

49
苑强

周业明

人工智能与数据库技术结合策略探索

现代计算机
19991

3336
50
刘英群

何丕廉

孟昭鹏

论数据库技术与人工智能的融合

计算机工程与设计重庆大学硕士学位论文

参考文献

61
1999205

1217
51
白振兴

专家数据库系统的结构设计分析及其实现

计算机研究与发展
1994311

3740
52EfraimTurbanLouisEFrenzelExpertsystemsandappliedartificialintelligenceUSAPrentice
Hall1992
53
曹元大何宝宏

专家系统与数据库的结合

北京理工大学学报
1998181

9698
54DavidEMonarchiJamesRSmithTherepresentationofrulesintheERmodelData
KnowledgeEngineering1992939

4561
55EdwardCLuczakDesigningExpertSystemsUsingaDatabaseDesignMethod
httpwwwghgnetclipsdownloaddocumentation
56SiewertTAWhatsavailableinweldingsoftwareWeldingjournal199911

3943
57
同志工作室
VisualBasic60
数据库开发实例

人民邮电出版社
2001
年
1
月第
1
版

58
张炜
VisualBasic60
数据库开发应用教程

航空工业出版社
2000
年
6
月第
1
版

59
陈弘原等
PowerBuilder80
实用教程

中国水利水电出版社
2001
年
1
月第
1
版

60
李晓黎张晓辉
VisualBasicOracle9i
数据库应用系统开发与实例

人民邮电出版社
2003
年
6
月第
1
版

61
美
TedCoombsJonCampbell
著

邓少鹍

邓云佳

等译
VisualBasic
编程实用大全中
国水利水电出版社
2002
年
11
月

第
1
版

62
廉师友

人工智能技术导论
M
西安电子科技大学出版社
2000
63
机械工程标准手册编委会编

机械工程标准手册焊接与切割卷第
1
版

北京中国标准
出版社
20019
64
美

美国焊接学会编

黄静文等译

焊接手册第四卷金属及焊接性

第七版

北京

机械工
业出版社
1991
65
吴树雄

电焊条选用指南

第
2
版

北京

化学工业出版社
1996
66
吕碧峰

弧焊工艺专家系统的开发

大连铁道学院
2000
级硕士论文
2003
67
陆汝钤

人工智能

科学出版社
20022
68
王能斌编著

数据库系统原理

北京电子工业出版社
2001
年
1
月

69
施伯乐

丁宝康

数据库系统导论

高等教育出版社
1992

125155200233
70
黄上腾

王绍英

数据库原理

上海交通大学出版社
1996

519105113
71
候廷红

焊接工艺智能数据库系统的研究

重庆大学
2000
级硕士论文

72
朱纪东等
Access
一种新型关系数据库软件

新浪潮

电脑信息
1996
第
1
期

