分类号
TG4539


密级





铝合金点焊工艺设计及质量控制智能化研究
TheResearchonIntellectualizedProcessDesignandQuality
ControlofSpotWeldingofAluminumAlloys


曹海鹏


指导教师姓名赵熹华

职称

教授单位吉林大学

专

业

名

称材料加工工程

论文答辩日期
20050606
授予学位日期


答辩委员会主席姜启川

教授

论

文

评

阅

人冯吉才

教授


孙大谦

教授

2005
年
4
月

吉林大学博士学位论文原创性声明
本人郑重声明所呈交学位论文是本人在指导教师的指导
下独立进行研究工作所取得的成果。除文中已经注明引用的内
容外本论文不包含任何其他个人或集体已经发表或撰写过的作
品成果。对本文的研究做出重要贡献的个人和集体均己在文中
以明确方式标明。本人完全意识到本声明的法律结果由本人承担。
学位论文作者签名枷06
日期Ws年月t夕日
作者姓名曹海鹏论文分类号TG4539
保密级别研究生学号2002431023
学位类别博士授予学位单位吉林大学
专业名称材料加工工程
培养单位
院所中心
材料科学与
工程学院
研究方向焊接机电一体化学习时间
2002年4月
至2005年5月
论文中文题目铝合金点焊工艺设计及质量控制智能化研究
论文英文题目
TheResearchonIntellectualizedProcessDesignand
QualityControlofSpotWeldingofAluminumAlloys

关键词38个铝合金电阻点焊工艺设计质量控制人工智能
姓名赵熹华职称教授
导师情况
学历学位工作单位吉林大学
论文提交日期2005年4月25日答辩日期20年月日
是否基金资助项目是基金类别及编号
国家自然科学基金
50175048
如已经出版请填写以下内容
出版地城市
名省名
出版者机构名称
出版日期出版者地址包括邮编
I

提

要


本文研制集散型智能系统进行铝合金电阻点焊过程智能控
制。在上位机系统中设计了一个集成模糊神经网络基于规则
的推理和基于事例的推理的新型铝合金电阻点焊工艺设计智能系
统。该系统将基于规则的推理和模糊神经网络深层次的结合并
辅助以基于事例的推理进行铝合金电阻点焊工艺设计工艺实例
验证表明这种点焊工艺参数的求解策略是成功的。
在集散型铝合金电阻点焊智能控制系统的下位机系统中为
提高铝合金电阻点焊过程控制精度首次采用DSP芯片TMS320
LF2407A作为逆变电阻点焊智能控制器的主芯片采用模糊控制技
术进行电阻点焊过程控制并提出了结合焊接电流及电极电压相
结合的质量控制方法。目

录

I

目

录

第
1
章

绪

论
1

11
研究目的与意义
1

12
电阻点焊质量控制途径
2

121
电参数质量控制方法
2

122
非电参数质量控制方法
2

13
人工智能技术在点焊中的应用
4

131
人工智能技术在点焊工艺设计中的应用
4

132
人工智能技术在点焊过程控制中的应用
5

133
人工智能技术在点焊质量评测中的应用
7

14
逆变焊接电源的发展状况
8

15DSP
的发展状况和性能特点
10

16
本文研究内容
12

第
2
章

系统总体设计
14

21
总体概述
14

22
铝合金点焊工艺设计智能系统
15

221
设计思想
15

222
系统总体分析
17

223
系统的智能模型
18

224
系统总体流程
20

23
铝合金点焊质量智能控制系统下位机总体设计
21

231
控制参数的选择
22

232
电流采集方式
23

233
控制算法的选择
24

234
系统总体结构
25

24
本章小结
26
吉林大学博士学位论文

II
第
3
章

铝合金点焊工艺设计智能系统
27

31
知识表示
27

311
面向对象的知识表示
27

312
基于规则推理的知识表示
29

32
基于事例推理的铝合金点焊工艺设计
31

321
基于事例推理在本系统中应用分析
31

322
检索机制的建立
31

323
修正
35

324
事例库的建立
43

33
混合多种人工智能技术的铝合金电阻点焊工艺设计
44

331
设计目标
44

332
模块总体设计
45

333
铝合金点焊工艺参数设计
46

334
模糊神经网络
47

34
数值模拟在
FNN
中的应用
59

35
铝合金点焊工艺设计求解验证
59

36
本章小结
63

第
4
章

基于
DSP
点焊智能控制器的硬件设计
65

41
设计目标
65

411
逆变频率的选择
65

412
系统需求分析
66

413
控制系统的构成及功能
66

42DSP
及其周边电路设计
67

421DSP
芯片的选择
68

422
主控板的设计
69

43
显示模块的设计
71

431
显示控制模块
T6963C71

432
液晶显示模块与
DSP
硬件接口形式
72

44IGBT
驱动模块的设计
74

441LF2407A
的
PWM
输出
74
目

录

III
442IGBT
驱动模块的选择与设计
75

45
电流采样电路
77

46
故障检测及保护功能
77

47
本章小结
78

第
5
章

基于
DSP
点焊智能控制器的软件系统设计
79

51
软件系统总体设计
79

511
系统功能模块分析
79

512
系统功能模块构成
80

513
软件系统总体流程
81

52
焊接程控程序
81

53
人机交互系统的软件设计
84

531
消息机制
84

532
用户输入模块
85

533
液晶显示系统设计
85

54
故障检测及报警模块的软件设计
88

55
模糊控制系统的设计
88

551
模糊控制器的组成
89

552
输入量维数的确定
89

553
输入输出参数的选择
90

554
论域等级的确定
92

555
隶属函数的确定
94

556
模糊控制规则的建立
96

557
模糊推理以及反模糊化
97

56
系统仿真
99

57
铝合金电阻点焊过程智能控制算法
103

58
本章小结
103

第
6
章

结

论
104

参考文献
106

附

录
114
吉林大学博士学位论文

IV
致

谢
115

摘

要
I

ABSTRACTIV


第
1
章

绪

论

1
第1章绪论
11研究目的与意义

电阻点焊广泛应用于车辆制造航空航天家用电器及电子工业等
1
。
点焊过程是一个高度非线性有多变量耦合作用和大量随机不确定因素的过
程同时点焊的形核过程处于封闭状态无法观测特征信号的提取比较困
难形核过程的时间极短焊接质量的监测和控制难度较大
234
。在经典控
制理论指导下点焊过程控制方法大多数都是基于一定的假设条件下建立数
学模型而实际焊接过程的复杂程度使得这些模型与实际对象间差异较大
难以达到满意的适应效果无法满足工业发展对电阻点焊质量提出的高可靠
性的要求。

以人工神经网络
artificialneuralnetANN
技术模糊逻辑控制
fuzzy
logicalcontrolFLC
专家系统
expertsystemES
智能主体为标志的人工智
能技术在解决高度非线性和严重不确定系统控制方面同经典控制方法相比较
具有巨大的优势和潜力在信号处理智能控制模式识别机器视觉非
线性优化自动目标识别传感技术等方面取得了很大的进展
512
。模糊控
制是根据状态变量及操作者的经验或专家的分析进行模糊推理而确定控制系
统的输出并不需要知道控制对象的精确数学模型故适用于控制对象数学
模型复杂及系统动态变化剧烈的场合

例如非线性及多输入多输出控制对
象

。神经元网络被用于控制系统的原因可概括如下利用神经元网络可以描
述任意的非线性函数利用它可使系统具有自学习功能适于非线性时变系
统它所构成的学习方法简明单一学习时并行使用各种数据
131415
。多智
能主体是一个对复杂系统进行分析设计构造的有力思想方法和工具。随着
人工智能技术的不断发展和成熟其在电阻点焊过程中的应用也越来越广泛
具有广阔的前景。电阻点焊过程的智能控制已经成为电阻点焊质量控制的一
个重要方向
16
。

铝及其合金具有比强度高耐腐蚀易加工成型可以反复回收利用等吉林大学博士学位论文

2
优点是汽车工业和航空航天工业的重要材料。但由于铝合金熔点低屈服
强度低导电导热性能良好以及表面易形成致密氧化膜等特点使得铝合金
的点焊必须采用大电流短时间的焊接规范而且其焊接质量随着焊接参数
的变化波动严重
1718
。随着铝合金材料在上述工业中应用越来越广泛铝合
金的点焊工艺设计及其质量控制也引起了更为广泛的关注。将计算机技术引
入铝合金点焊焊接工艺设计改革传统的焊接工艺手工准备的落后模式实
现焊接工艺设计智能化不仅可以改造传统低效手工作业模式提高工艺设
计水平将焊接工艺人员从繁重的重复性劳动中解脱出来而且可以实现专
家经验知识的继承和共享避免重复工作造成的浪费提高焊接生产企业的
劳动生产率具有重大的技术经济和社会意义。

随着微处理器计算速度的不断提高使在线实时精确的铝合金点焊
过程进行控制成为可能。在逆变技术和高速微处理器的快速运算能力的基础
上结合人工智能技术对铝合金电阻点焊进行质量控制提高铝合金电阻
点焊质量具有重要的工程应用和理论研究意义。

12电阻点焊质量控制途径

121电参数质量控制方法

在点焊过程中比较重要的参数有焊接电流焊接时间电极力电极
间电压焊接过程中的动态电阻
1920
等。通过对上述一种或者多种参数进行
监测控制进而对点焊熔核进行质量控制成为最有效的点焊质量控制方法。

焊接电流是电阻点焊过程中非常重要的参数直接影响电阻点焊的质量。
恒流控制就是维持焊接电流有效值不变以保持焊接区热输入量基本不变
从而保证焊接熔核直径基本稳定。该控制方法特别是对电源电压容易波动的
场合具有明显的补偿效果因此应用广泛
21
。

122非电参数质量控制方法

在点焊过程中金属因受热产生体积膨胀从而推动电极产生位移电第
1
章

绪

论

3
极位移的大小是焊点金属熔化量多少的量度能够反映点焊熔核的形成状况。
热膨胀电极位移监控法也正是基于这种体积变化的原理。由于这种现象对于
各种金属及其合金都普遍存在所以它的应用范围也很普遍
2225
。
Tsai
等人
将有限元引入利用热膨胀电极位移进行点焊质量控制领域中在相应的电阻
点焊有限元模型基础上通过试验或有限元分析可得出合格焊点的参数匹配
范围。实际焊接时在该范围内进行选择参数用有限元分析计算模型计
算点焊过程热膨胀探讨利用热膨胀电极位移控制点焊过程与质量的方法
26
。但是由于一般的热膨胀位移传感装置存在着固有的缺陷在板材厚度
较小时和焊点位置靠近板材边缘时热膨胀法存在着较大的偏差又由于一
些点焊机机臂刚性不足等原因使得热膨胀位移监控未能得到推广应用。一
般认为单独采用热膨胀位移法对铝合金点焊质量控制作用有限。

超声波质量控制技术是根据超声波在金属介质中传播的特性利用界面
反射反射法或利用穿透焊点熔核的声波衰减程度透射法来判断焊点
质量的一种技术。文献
27
提出了一种采用超声波进行点焊质量控制的方法
也可适用于铝合金板材的点焊。其通过超声信号来表征点焊过程中熔核的生
长过程进而可以计算熔核的尺寸并进行相应的控制。同超声波质量控制技
术类似声学辐射红外等的非电参数监控法也获得一定的应用。但是由于
这些方法复杂性高代价昂贵经常受点焊过程中相关因素的影响其应用
受到了一定的限制。

铝合金的电阻点焊质量控制技术究其原理都是通过控制焊接诸参数以达
到控制熔核形成。在这一方面吉林大学的赵熹华教授提出了一条独辟蹊径的
方法即采用孕育处理的方法影响熔核凝固过程并实现对凝固组织稳定有
效的控制。目前的各种常用的点焊质量控制技术都是围绕如何保证熔核尺寸
稳定是从量的角度实现的质量控制而孕育处理力图从控制点焊熔核
凝固过程本身出发即从质的方面改善和提高焊点质量。通过对
LY12CZ
铝合金点焊熔核进行孕育处理成功的将未经孕育处理时
LY12CZ
铝合金点
焊熔核内的柱状晶

等轴晶组织转变为完全等轴晶的组织并细化了晶粒
使熔核中的薄弱面彻底消失提高了力学性能其拉剪载荷可提高
13
抗
疲劳循环次数可提高
2
倍以上
28
。

由于铝合金点焊过程的特殊性单一的电参数动态电阻热膨胀位移
等质量控制方法效果并不明显铝合金电阻点焊的质量控制将由传统的单一吉林大学博士学位论文

4
控制模式发展为多种控制模式相结合的方式。其控制理念由传统的控制向智
能化集成化发展先进的控制技术计算机技术人工智能技术电子技
术将会越来越广泛深入地应用到铝合金点焊质量控制领域其应用范围也将
走出实验室向工程化实用化发展。

13人工智能技术在点焊中的应用

131人工智能技术在点焊工艺设计中的应用

电阻点焊过程是一个高度非线性多变量耦合作用的复杂过程。焊接工
艺集中体现了焊接技术本身的复杂性与经验性是保证焊接质量的前提因
而被视为焊接生产中最为关键的技术之一。电阻点焊工艺设计智能系统属于
设计型智能系统具备一般工程设计的特点高度智能复杂专家水平
创造性。应用人工智能技术来进行电阻点焊工艺设计是解决这一问题的有效
途径
2930
。

文献
31
提出一个集成专家系统技术人工神经网络模糊技术的电阻
点焊工艺参数选择人工智能系统。该系统采用专家系统技术和人工神经网络
技术进行电阻点焊工艺参数规划通过集成多种人工智能技术建成一个智能
混合系统充分利用多种人工智能技术的优势。系统使用模糊技术对电阻点
焊工艺参数进行优化一般情况下经过几次优化后就可以得到相应理想的
优化的点焊工艺参数。

文献
3233
研究的电阻点焊工艺参数选择系统中将神经网络和其他几
种知识表示形式集成在同一个系统中以神经网络的表示形式为系统的核心
利用神经网络的自学习功能对大量现有事例进行学习提取隐含的内在规
律并转化为网络自身的结构系统利用神经网络的非线性映射特性能够
较完备表示点焊过程中工艺参数选择和焊点质量评测所需的专家知识能够
迅速响应外部请求并作出判断从而满足了点焊过程对实时性的要求由传
统的知识表示形式为神经网络提供所需的预处理和知识解释从而充分发挥
各自的优势有效地解决神经网络存在的不精确和缺乏对推理过程的明显解
释等自身缺陷。
第
1
章

绪

论

5
电阻点焊工艺参数众多参数之间一般情况下是一种离散的病态的多
对多映射关系在采用人工神经网络技术实现电阻点焊工艺参数规划时在
较大范围内使用人工神经网络进行输入和输出之间的映射比较困难如果样
本集数量同网络结构规模比例相差很大则其泛化能力很差。

132人工智能技术在点焊过程控制中的应用

电阻点焊过程是一个热力
电三者耦合的时变过程而且具有
过程时间短难以直接对焊接质量
进行检测等特点点焊实施过程中
干扰因素较多网压波动电极磨
损电流波动等这些都使得点焊
过程难以建立精确的数学模型用
传统的控制方法对电阻点焊质量进
行监控变得非常困难
343536
而采
用用人工智能技术替代传统的控制
方法对电阻点焊过程进行控制获得了较好的效果
37
。

文献
38
提出了一个智能点焊控制系统采用模糊逻辑推理技术来补偿
在电阻点焊过程中工艺参数的偏差对点焊熔核形成过程的影响采用模糊逻
辑控制来解决电阻点焊工艺过程中缺少精确的数学模型的缺陷。在点焊实时
控制中采用电极位移量作为焊接熔核形成过程的表征信号并以其作为调
节焊接过程参数的反馈参数来获得合适的电阻点焊熔核形成热量输入。在一
个较宽焊接工艺条件范围内以大量实验数据为基础提取出相关的电阻点
焊过程控制规则。采用人工神经网络来提供点焊过程中输入输出参数之间的
映射并调整相应的模糊规则。其控制总体示意图见图
11
。该
ANN
结构为
471
的网络

以实验数据离线训练成标准电极位移
D
和位移变化率
V
与加
热百分数
H
和焊接时间
t
的模型电阻点焊过程中
ANN
实时提供不同
焊接条件下的电极位移和位移变化率。模糊控制器输出晶闸管的控制角以
调节焊接输入能量使实际的电极位移曲线不断逼近标准电极位移曲线达
到控制焊接质量的目的。其缺点是电极位移不能排除电阻焊设备自身特性对
图
11FLC
算法框图
38

Fig11theblockdiagramofFLCalgorithmn吉林大学博士学位论文

6
其的影响这对
ANN
的样本集提出很高的要求在实际应用过程中较难实
现。

文献
39
等提出一个电阻点焊模糊自适应控制系统建立了一个电流
参考模型根据动态电阻的划分提出了一种点焊质量的评估方法。首先根据
焊接电流和动态电阻采用有限元法离线计算出焊接能量焊接电流与熔核
尺寸间关系的参考模型。在实际的控制系统中将动态电阻分成
4
个不同的阶
段根据实时检测出的焊接过程动态电阻值通过电流参考模型得出过程的
参考参数由模糊控制器发出自适应控制指令完成点焊过程的自适应控制
如图
12
所示。由于铝合金以及不锈钢在电阻点焊过程中动态电阻曲线为
单调下降而不同于低碳钢动态电阻的变化因此这种方法难以在铝合金不
锈钢等材料上获得应用。

文献
40
研制了一个神经网络同模糊技术结合的点焊质量控制系统采
用人工神经网络模块作为以时间为输入以电极位移电极位移速率作为输
出的映射而以电极位移作为模糊控制器的模糊偏差输入量以提供给熔核
的能量作为输出控制量。计算机模拟结果显示该系统抗干扰能力强而且能
够对在线工艺扰动进行补偿能够得到满意的点焊接头。文献
41
研制了一
个复杂的基于人工神经网络技术的点焊在线质量监控系统包含的人工神经
网络不需要任何的材质电极和焊机特性之间的规则说明通过基于样本的
训练系统可依据电流和电压测量值对焊点质量进行预测。由于神经网络能
够识别结果中的干扰通过相应的训练它可以自适应的识别电极磨损电
极形状工件厚度以及分流等工艺参数的变化并预测其对焊接质量的影
响。

传统的点焊电源控制器多采用
PID
控制方式而模糊控制器与
PID
控制
图
12
模糊自适应控制框图
39
Fig12thecontroldiagramofadaptiveFuzzy
39
第
1
章

绪

论

7
器相比具有调节速度快鲁棒性好等优点现在采用模糊控制算法的点焊控
制器已越来越多
4246
。文献
474849
都开发了电阻点焊模糊控制器工
艺试验表明其性能良好具有较高的精度及稳定性。

近年来随着计算机网络技术的迅速发展分布式人工智能技术已经成为
一个新的研究热点
50
。在分布式人工智能研究中多智能主体
multiple
agents
由于可以通过知识共享而相互交流交互越来越引起众多学者的关
注
51
。一个智能主体在没有人进行干涉的情况下具有推理决策能力具有较
高的智能性。文献
52
研究了一个应用多智能体系统来实现点焊机器人柔性
加工系统的协调控制。其系统针对点焊柔性加工系统的特点构造了具有任
务管理智能体通信管理智能体以及与物理设备相对应的多个节点智能体的
多智能体控制系统。该多智能体系统采用黑板结构通过集中式的网络结构
以及协商的合作协调机制在系统中进行资源分配规划生产任务监视资源
运行以便充分利用系统资源。

133人工智能技术在点焊质量评测中的应用

文献
5354
中用焊接电流有效值每半个周波的动态电阻值电极直径
及焊接热量作为
BP
网络的输入参数对焊点直径进行估测根据焊点直径所
处区域来确定焊接电流的增加步长这样既完成了对焊点质量的估测又完
成了为补偿点焊电极磨损而对焊接电流增加步长的优化设定。将
ANN
模式
识别和映射能力与模糊逻辑控制处理不确定和非精确数据的能力相结合建
立新的控制系统可以克服现有控制系统在镀锌钢板焊接质量监控方面的不
足和局限性。

文献
55
提出用扫描声学显微镜结合人工神经网络技术来监控电阻点焊
焊点质量的方法。它采用数学形态学技术从焊点的扫描图像中可以得到点焊
熔核的几何尺寸参数等并以这些参数作为人工神经网络的入口参数而采
用点焊熔核的剥离试验及专家的评判作为神经网络的输出参数。采用
JAVA
编程来实现扫描图像处理人工神经网络学习等。通过神经网络的训练得到
输入输出参数之间的映射结果表明其具有很高的辨识正确率。

文献
56
针对铝合金的电阻点焊研究了人工神经网络在点焊质量评测
中的应用。以
LD10CS
铝合金为例分析了铝合金焊接时动态电极电压的变吉林大学博士学位论文

8
化提出了以每周波动态电极电压为输入参数以焊点强度和熔核直径为输
出参数的误差逆传播神经网络对点焊质量进行评测的方法。由于电极间的
动态电压综合了动态电阻和焊接电流两方面的因素可以较好地反映焊点的
状态因此将焊接过程每周波
002s
的动态平均电压
U
di
i12

14
表征
为网络的输入而焊点的拉剪力熔核直径作为网络的输出。根据网络的输
入输出矢量

构造了一个输入层单元数为
14
一个隐含层一个输出层单元数
为
2
的
BP
网络以试验提供的
36
组训练数据作为样本网络。实验结果表明
了该估测方法的可行为铝合金点焊的在线质量估测奠定了良好基础。

文献
5758
建立人工神经网络点焊质量预测与评估模型。利用
ANN
对
输入输出的映射以动态电阻作为输入参数焊点质量

如熔核尺寸拉剪强
度等

作为输出参数用实验数据作为训练样本对
BP
网络进行训练训练后
的网络能自动完成从输入到输出的映射从而能对电阻点焊熔核质量进行评
估。文献
59
研究了人工神经网络点焊质量预测模型中网络结构样本集选
取以及作用函数等对神经网络训练及输出结果精度的影响。

文献
60
提出了一个采用神经网络同模糊算法相结合的电阻点焊智能质
量控制系统。以没有飞溅情况下的与点焊电极位移相关的电极位移及其变化
率等参变量和在产生飞溅条件下的不同焊接周波的动态电阻作为模糊逻辑的
输入参数以点焊熔核的强度特性作为输出构造了一个模糊系统。采用神经
网络学习算法作为模糊输入的前处理提高了系统的学习能力和智能性。模
糊推理采用
TakagiSugeno
为内核实验结果反映出系统具有较小的预测误
差。

14逆变焊接电源的发展状况

随着半导体电力电子技术和计算机技术的快速发展以及大功率电子元
器件的出现为弧焊电源技术提供了广阔的发展空间特别引人瞩目的是具
有更新换代意义的高效节能重量轻体积小的逆变焊机。世界发达国家自
1978
年研制第一台逆变焊机并使其商品化以来该机便获得了高速发展其
品种规格和使用范围都在迅速地增加并向多功能微机控制方向发展已
成为高新技术的标志之一
6162
。逆变焊机按开关器件来分有晶闸管式晶体
管式场效应管式和
IGBT
四种类型。其基本工作原理如下所示单相或三第
1
章

绪

论

9
相
5060Hz
的交流网路电压经输入整流器整流借助大功率电子开关

晶闸
管晶体管场效应管和
IGBT
管

的交替开关作用又将直流变换成几千至
几万
Hz
的中频交流电再分别经中频变压器整流器和电抗器的降压整
流与滤波就得到所需的焊接电压和电流输出电流可以是直流

ACDCACDC
或交流。借助于大功率电子开关和闭环反馈电路实现
对外特性和电弧电压焊接电流的控制调节。这种电源基于变频原理以小
巧的中频变压器取代了传统焊机中笨重的工频变压器使工作在中频下的主
功率变压器和电抗器体积变小。铜铁总量减少后铜损铁损也相应下降
焊机效率可达
80

90
。而且由于惯性环节的减少及采用了电子电路
可以非常方便地对电弧电流电压的静动态波形参数特征进行微秒毫秒级
的控制因此它的输出电流可以逼近焊接工艺所要求的理想状态。

现代逆变技术之所以得到如此广泛的应用是因为其具有诸多优越性
它能明显减小用电设备的体积和重量节省材料高效节能减小功率损失
并具有较大的功率因数动态响应快控制性能和电气性能好等优点
63
。其
良好的响应和控制性能为焊接过程控制提供了良好的基础。因而其具有巨大
的发展空间和市场潜力。作为逆变技术的先决条件电力电子器件的快速发
展为现代逆变技术奠定了良好的基础并为不同的逆变应用场合提供了不同
的元器件支持
64
。近年来功率器件
IGBT
发展较快它是
MOSFET
与
GTR
的复合器件既具有
MOSFET
的工作速度快输入阻抗高驱动电路简单的
优点又包含了
GTR
的载流量大阻断电压高等优点其工作频率范围可以
从几
K
几十
K
所以
IGBT
很适合中等功率电源的应用是作为焊机电源
的较好的开关器件。目前在各发达工业国家逆变焊机已相当普遍手工电
弧焊
TIG
焊
MIGMAG
焊已广泛采用逆变电源。据有关资料统计报道
美国整流焊机的
16
日本气保焊机的
41
和整流焊机的
32
均已采用逆变
式焊机
65
。目前美国的米勒日本的松下富士芬兰的肯比等焊接设备
公司均能生产成熟的可供商业出售的
IGBT
焊机产品。

我国逆变焊机的研究开发起步于
20
世纪
70
年代末期。
1982
年成都电
焊机研究所开始研制晶闸管逆变式弧焊整流器并于次年研制出我国第一台
商业化的
ZX7250
逆变式弧焊电源当年通过该项目的部级鉴定。
80
年代末
期各高等学校科研院所生产厂家先后生产了各种容量的晶体管逆变焊
机场效应管逆变焊机
IGBT
逆变焊机等一系列产品。其中不少乡镇企吉林大学博士学位论文

10
业和民营企业也通过技术转让等方式参与其中
66
。从
1994
年起全国范围
内掀起了新一轮的逆变焊机热潮并取得了可喜的成果。经过几十年的技术
发展我国逆变焊接电源的可靠性已经有了相当的保障产品的性能也在不
断的提高市场份额逐年增加。而我国的逆变焊机产品主要集中在弧焊领域
产品种类大多局限于手工焊机与
TIG
焊机焊机结构也相对简单焊机潜力
也不能得到充分发挥高端市场仍被国外产品所占领。

逆变技术在弧焊设备中的应用为逆变阻焊电源提供技术参考发展逆
变式点焊机的条件已日臻成熟。从国际范围看逆变式点焊机出现于
20
世纪
80
年代中期。之后日本美国等国家先后推出逆变式电阻焊机产品并应
用于汽车家电电子行业并建立了以逆变点焊机器人为主的汽车车身焊
装线使逆变式电阻点焊机进入实际应用阶段。如韩国
TAESUNG
公司的系
列产品
TST105

TST300
和
TST5000
及美国汉森
HANSON
公司生产的
IGBT
逆变式
170KVA

340KVA
点焊

凸焊

缝焊三用焊机等。国内虽在逆
变弧焊领域比较成功但在电阻焊领域该项技术的优点还未得到发挥仍
有待于进一步的研究与开发。在这方面国内研究工作开展较早的单位有华南
理工大学上海交通大学吉林工业大学和成都电焊机研究所等等已经可
供应国内市场的有广州松兴电器有限公司生产的
DB

6ADB

6T
逆变式精
密点焊机成都电焊机研究所研制的悬挂式逆变次级整流点焊机等
6773
。

15DSP的发展状况和性能特点

DSP
是数字信号处理
digitalsignalprocessing
或集成化的单片数字信
号处理器
digitalsignalprocessor
的英文缩写。
DSP
技术是利用计算机或专
用处理设备以数值计算法方法对信号进行采集变换综合估算与识别
等加工处理借以达到提取信息和便于应用目的的一种技术
7477
。
DSP
技术
包括数字信号处理的理论和数字信号处理的实现。

数字信号处理是一门涉及许多学科而又广泛应用于许多领域的新兴学
科。在通常的实时信号处理中它具有可程控可预见性精度高稳定性
好可靠性和可重复性好易于实现自适应算法大规模集成等优点这都
是模拟系统所不及的。

在数字信号处理技术发展的初期二十世纪
50

60
年代人们只能在第
1
章

绪

论

11
微处理器上完成数字信号的处理。直到
70
年代有人才提出了
DSP
的理论
和算法基础。一般认为世界上第一个单片
DSP
芯片应当是
1978
年
AMI
公
司发布的
S2811
。
1979
年美国
Intel
公司发布的商用可编程器件
2920
是
DSP
芯片的一个主要里程碑。这两种芯片内部都没有现代
DSP
芯片所必须有的单
周期乘法器。
1980
年日本
NEC
公司推出的
PD
是第一个具有硬件
乘法器的商用
DSP
芯片从而被认为是第一块单片
DSP
器件。随着大规模
集成电路技术的发展
1982
年美国德州仪器公司推出世界上第一代
DSP
芯
片
TMS32010
及其系列产品标志着实时数字信号处理领域的重大突破。同
通用微处理器相比最新的数字信号处理器具有以下特点

1
采用哈佛结构而不是传统的冯诺曼结构传统的冯诺曼结构的
数据总线和指令总线是公用的因而在高速运算时在传输通道上会出现瓶颈
现象。而采用哈佛结构的
DSP
芯片片内至少有
4
套总线程序的地址总线与
数据总线数据的地址总线与数据总线。由于这种结构的程序总线和数据总
线分离因而可以在一个机器周期内同时获取程序存储器内的指令字和数据
存储器内的操作数从而提高了执行速度。

2
采用硬件乘法器数字信号处理中最基本的一个运算是乘法累加
运算也是最重要和最耗时的运算为了提高芯片的运算速度必须大幅度
降低乘法运算的时间。于是在
DSP
芯片中设计了硬件乘法器并且运算所需
时间最短仅为一个机器周期。这种单周期的硬件乘法器是
DSP
芯片实现高
速运算的有力保证。现代高性能的
DSP
芯片数据字长从
16
位增加到
32
位
具有两个或更多的硬件乘法器以便提高运算速度。

3
采用多个并行处理单元
DSP
内部一般都集成了多个处理单元比
如
MUL
硬件乘法器


ACC
累加器


ALU
算术逻辑单元


ARAU
辅助算
术单元


DMA
控制器等。它们可在同一个周期内并行地执行不同的任务。

4
采用了流水线技术
DSP
芯片的哈佛结构就是为实现流水线技术
而设计的。采用流水线技术可使
DSP
芯片单周期完成乘法累加运算极大地
提高了运算速度。

5
采用了大容量片内存储器外部存储器一般不能适应高性能
DSP
核的处理速度因此在片内设置较大容量的程序

数据存储器以减少对外部存
储器的访问速度充分发挥
DSP
核的高性能。

6
设置了多种外设和接口为了加强
DSP
芯片的通用性
DSP
芯片吉林大学博士学位论文

12
上增加了许多外设。例如多路
DMA
通道外部主机接口外部存储器接
口芯片间高速接口外部中断串行口定时器可编程锁相环
AD
转
换器和
JTAG
接口等。

7
设置了特殊寻址模式为了满足
FFT
积分数字信号处理的特殊要
求
DSP
芯片大多包含有专门的硬件地址发生器用以实现循环寻址和位翻
转寻址并在软件上设置了相应的指令。

8
设置了零消耗循环控制数字信号处理有一大特点很多运算时间
都用于执行较小循环的少量核心代码上。大部分
DSP
芯片具有零消耗循环控
制的专门硬件可以省去循环计数器的测试指令提高了代码效率减少了
执行时间。

9
安排了
JTAG
接口
DSP
芯片的结构非常复杂工作速度又非常高
外部引脚也特别多封装面积也非常小引脚排列异常密集对于此种情况

传统的并行仿真方式已不适合于
DSP
芯片。于是有关国际组织公布了
JTAG
接口标准。在
DSP
芯片内部安排
JTAG
接口为
DSP
芯片的测试和仿真提
供了很大的方便。

10
程序的加载引导
DSP
芯片要执行的程序一般在
EPROMFLASH
存储器中。但是该存储器的访问速度较慢虽然有一些高速
EPROMFLASH
存储器但价格昂贵容量有限而高速大容量静态
RAM
的价格又在不断
下降。故采用程序的加载引导是一个性能价格比较好的方法。
DSP
芯片在上
电复位后执行一段引导程序用于从端口

异步串行口
IO
口主机接口

或外部
EPROMFLASH
存储器中加载程序至
DSP
芯片的高速
RAM
中运行。

在近
20
多年时间里
DSP
芯片的应用已经从军事航空航天领域扩大
到信号处理通信雷达消费等许多领域。主要应用有信号处理通信
语音图形图像军事仪器仪表自动控制医疗家用电器等
7884
。

16本文研究内容

铝合金电阻点焊质量控制过程是个复杂的系统工程从铝合金电阻点焊
工艺设计到电阻点焊过程控制等很多因素子系统都对铝合金电阻点焊质
量有着较大的影响。本文拟建立一个铝合金电阻点焊智能集散型控制系统
以主控计算机为中心管理结合分散在工业控制用微处理器控制系统。主第
1
章

绪

论

13
控计算机具有丰富的人机交互资源以及大量的存储空间容易实现友好的人
机界面控制管理功能较强。而下位工业微控制器直接面对工业测控对象
执行底层控制以及数据采集功能。主控计算机和下位工业控制器既可以相互
独立工作彼此又具有联系二者集成一个铝合金电阻点焊智能控制系统。
其中主控计算机完成总体控制功能包括铝合金电阻点焊工艺参数设计模
块总体控制对下位控制器采集的数据进行存储分析等功能。下位机完成
铝合金电阻点焊过程实时控制在线数据采集等功能。本文研究内容为上位
机软件控制系统中铝合金电阻点焊工艺设计智能系统及下位机铝合金电阻点
焊过程智能控制器本文为国家自然科学基金支持项目铝合金电阻点焊工
艺设计及质量控制智能化的主要部分项目编号为
50175048
。

在上位机软件控制系统中本文研制一种铝合金电阻点焊工艺设计智能
系统其主要内容包括

1
建立合理的铝合金电阻点焊工艺设计智能模型以利于实现基于规
则
rulebasedreferenceRBR
的推理基于事例的推理
casebasedreference
CBR
与
FNN
相结合。

2
采用
CBR

RBR
和
FNN
等多种人工智能技术相结合的混合推理方
式以克服单一推理方式所固有的不足尽可能的贴近领域专家的思维方式
进行铝合金电阻点焊工艺设计。

3
建立多途径知识学习方式包括基于规则的学习基于事例的学习
基于
ANN
的学习及系统自学习等学习方式。

对于铝合金电阻点焊过程智能控制器的研究包括

1
为提高铝合金电阻点焊过程控制精度采用
DSP
芯片
TMSLF2407A
作为逆变电阻点焊智能控制器的主芯片设计相应的人机交互模块
IGBT
驱动模块故障检测以及保护等辅助功能模块的硬件组成为进行铝合金电
阻点焊质量控制提供硬件条件。

2
在分析控制器功能的基础上进行软件系统各功能模块的设计。包
括人机交互子模块故障诊断模块等。采用相应的人工智能技术进行电阻点
焊过程控制并进行相应仿真提高铝合金电阻点焊过程控制的质量。

吉林大学博士学位论文

14
第2章系统总体设计
21总体概述

自
70
年代中期第一套集散控制系统
distributedcontrolsystemDCS
在
工业控制领域应用以来随着电路技术显示技术软件技术以及其他新技
术的应用和发展集散控制系统得到了飞速的发展其主要特点为集中管理
和分散控制。随着计算机技术以及网络技术的不断发展集散型系统不仅主
要用于分散控制而且向着集成管理的方向发展。集散型控制系统从系统结构
通讯层


铝合金电阻点焊智能控制系统下位机
总控制层

铝
合
金
电
阻
点
焊
工
艺
设
计
智
能
模
块


铝
合
金
电
阻
点
焊
质
量
预
测
模
块


铝
合
金
电
阻
点
焊
焊
接
参
数
记
录
及
存
储
铝合金电阻点焊智能控制系统上位机
图
21
铝合金电阻点焊集散型智能控制系统

Fig21theDCSstructureofAARSWintelligentcontrolsystem第
2
章

系统总体设计

15
上分析基本上都由三部份组成分散过程控制装置部分集中管理系统以
及相互之间通讯系统
85
。采用集散型智能控制系统可以提高铝合金电阻点焊
过程及质量可控性提高系统的智能化水平便于应用于大规模生产的质量
及过程控制比较符合铝合金电阻点焊易于实现大规模生产以及机械化的特
点。铝合金电阻点焊集散型智能控制系统总体结构如图
21
所示。系统由铝
合金电阻点焊智能控制系统上位机通讯层和铝合金电阻点焊智能控制系统
下位机组成。其中铝合金电阻点焊智能控制系统上位机完成系统总体管理控
制功能其中包括铝合金电阻点焊工艺参数智能设计模块铝合金电阻点焊
质量预测模块以及铝合金电阻点焊焊接参数记录及存储模块组成。铝合金电
阻点焊智能控制系统下位机完成焊接过程的实时控制前端数据采集接受
系统上位机指令等功能。二者通过通讯层连接实现两个系统之间的数据传输。
上位机同下位机之间彼此互相联系而又相互独立从而可控性良好。本文主
要研究内容为上位机中的铝合金电阻点焊工艺设计智能模块以及下位机中铝
合金电阻点焊智能控制系统。

22铝合金点焊工艺设计智能系统

221设计思想

铝合金电阻点焊工艺设计智能系统属于设计型智能系统。焊接工艺设计
属于工程设计的范畴具备一般工程设计的特点高度智能复杂专家
水平创造性。逻辑思维和形象思维相结合是设计思维活动的特征
868788
。
形象思维很大成分与人类专家的经验有关即对专家经验知识的依赖性较强
逻辑思维则依靠一定的规则定理依靠推理来对问题进行求解。在人类的
智能活动中两者互相渗透共同完成求解过程。智能系统的求解应尽可能
模仿人类专家的思维过程。设计系统一般都是非确定系统。即它没有或者部
分没有确定的计算方式或数学模型不能以纯逻辑思维的形式来求解一般
都必须借助形象思维来求解必须通过人的经验通过学习验证再学习
再验证的多次循环来接近所求证的目标状态。铝合金电阻点焊工艺设计无疑
也是非确定系统而且是一个多输入多输出的病态的复杂求解过程它是一吉林大学博士学位论文

16
个在很大程度上依赖于专家知识经验的问题求解过程其中既有直觉的快
速类别的经验思维和形象思维又有深层次的逻辑思维。系统中的许多参数
不可能一开始就取得有些参数还需要通过再设计才能确定。如焊接工艺中
的焊机参数本身是求解目标但同时又是确定焊接参数所必须的约束条件。
由于设计系统的初始状态中包含部分未知状态参量从而使设计系统成为局
部的闭环系统而闭环系统必须通过反复设计才能求解。

由于铝合金电阻点焊工艺本身的复杂性同一种材料可能根据不同的质
量要求可以有偏软偏硬等多套合格的焊接规范甚至可能随着具体的焊机
而变化因此点焊工艺制定经常是通过大量工艺试验对多种可行方案的择
优。这种情况使得如果单一使用传统的基于规则的专家系统技术具体点焊
工艺设计知识的规则提取非常困难几乎难以避免诸多规则间的矛盾和冲突
从而引起规则推理过程中的组合爆炸和相互冲突等问题。人工神经网络研究
的兴起使人工神经网络在很多领域都表现出强大的生命力。其从结构上模
仿人脑具有强大的联想功能对于没有学习的事例也可进行预测。而且
知识获取较为容易具有传统专家系统所不具备的优势。但其也有不足如
只适合小规模问题的泛化否则精度下降

需要一个齐全的训练样本集

网
络结构的确定没有一致的解决办法网络权值的训练比较费时无法解释推
理依据或推理过程等
899091
。目前的研究显示单一的智能方法都有着自身
的不足而且铝合金电阻点焊工艺设计过程是个病态问题的求解过程难以
用单一的智能方法进行较为理想的求解。

基于上述对设计系统特点的认识铝合金电阻点焊工艺设计系统的关键
在于根据系统的功能需求分析充分考虑点焊领域专家在进行点焊工艺设
计时的思维活动过程依据点焊工艺本身所具有的特征并结合专家系统
人工神经网络模糊推理等人工智能的实现方法建立相应的智能模型并
由此得出系统的控制结构。然后根据控制结构采用相应技术来设计智能系
统的各个部件完成智能系统的设计工作。
第
2
章

系统总体设计

17
222系统总体分析

2221
铝合金点焊工艺设计过程总体分析

铝合金电阻点焊工艺参数包括材质参数焊接参数设备参数接头
形式以及操作要求。其中材质参数包括材质类别牌号板材厚度以及材质
的物理性质参数导电性导热性屈服强度等焊接参数包括预热电流
预热时间焊接电流焊接电流时间后热电流后热电流时间预压力
锻压力锻压时间等等而设备参数包括供电波形设备容量电极臂参数
电极材质尺寸类型等接头形式包括焊点间距搭边尺寸等。一般情
况下由已知材质参数和设备参数求解相应的焊接参数以及操作要求。在某
些情况下设备参数同时也可作为未知参数即为求解目标的一部分。通常
情况下焊接领域专家在进行铝合金电阻点焊工艺设计过程时首先回忆或
者查找以前曾经完成的铝合金点焊工艺事例如果存在同当前待求解事例相
似的工艺事例则提取出相似事例作为求解当前点焊工艺的蓝本并对不同
之处予以修正然后得出新的铝合金电阻点焊工艺参数。如果没有同当前待
求解的工艺要求相近似的工艺事例则领域专家根据铝合金电阻点焊的工艺
规则考虑铝合金电阻点焊的过程特征根据相应的工艺要求制定其工艺参
数。

2222
系统功能分析

铝合金电阻点焊工艺设计过程是一个复杂的多参数的求解过程。分析铝
合金电阻点焊工艺设计过程系统功能分析如下

1
根据影响铝合金电阻点焊过程的本质因素混合多种智能推理方法
进行铝合金电阻点焊工艺参数的求解

2
能够就焊接工艺方面相关知识提供较为全面的咨询包括电极选用
材料焊接性焊接缺陷等方面的知识资料等

3
能够对系统所具有的知识进行更新即具有学习能力

4
智能系统的知识表示推理机应有较好的灵活性
吉林大学博士学位论文

18
5
具有良好的知识库接口并提供控制推理过程的途径。

系统的功能结构如图
22
所示。点焊工艺设计智能系统由三个主要的功
能模块构成即点焊工艺设计模块机器学习模块以及咨询模块。在点焊工
艺设计模块中完成焊接初始条件的输入设计点焊工艺规范和能对已制定的
工艺规范进行修改的功能。在机器学习模块中包括事例库的维护推理规
则的维护及神经网络的训练学习三个子模块。在咨询模块中完成材质点焊
焊接性咨询电极知识咨询和点焊缺陷分析等功能子模块。


图
22
铝合金点焊工艺设计智能系统功能结构图

Fig22thefunctionstructureofintelligentprocessdesignof
aluminumalloysspotwelding

AASW


223系统的智能模型

工程设计系统的智能模型就是模拟设计思维方法的计算机模型模型的
建立要有利于采用相应的人工智能技术。根据铝合金电阻点焊工艺设计的特
点本系统采用了多种智能技术的混合模型。通过人机交互接口同总控层进
行信息交互。在总控制层中采用专家系统技术对由用户提出的求解初始条
件进行解析根据不同设计阶段的设计目标选择相应的智能求解技术。焊接

点焊工艺

设计智能

系

统
点焊工艺设计
机器学习
点焊知识咨询
输入点焊基本条件

制定点焊工艺规范

修改点焊工艺规范

事例库维护

推理规则维护

点焊性咨询

电极知识咨询

神经网络训练

点焊缺陷分析
第
2
章

系统总体设计

19
工艺参数的求解主要由基于事例的求解基于模糊推理的求解以及基于神经
网络的求解三部分构成。这三部分是相互关联在一起更好的完成焊接工艺参
数求解的设计目标

。传统的专家系统技术比较适合处理符号文字的逻辑处
理因此用作进行点焊工艺辅助知识的设计。系统总体控制模型见图
23
。

建立铝合金点焊工艺设计智能系统的集成模型是设计整个系统的关键。系统
设计智能化的一个目标就是能够模拟焊接领域专家的思维特点本系统使用
基于事例推理来实现焊接领域专家在工艺参数设计过程中利用先前设计经验
的类比思维并且首次同模糊推理技术相结合从深层次上模拟设计过程的领
域专家的思维中的模糊性的特点提高系统的智能化水平。

随着计算机技术的不断发展铝合金点焊过程的数值模拟取得了很快的
发展
9295
。点焊熔核形成过程的不可见性和焊接过程的瞬时性给试验研究
带来了很大的困难数值模拟成为点焊机理研究的关键技术之一。建立点焊
工艺参数与焊点质量之间的关系是实现铝合金点焊过程控制智能化的基础
也是制订焊接工艺方案的重要依据。本文引入数值模拟技术作为神经网络样
本集的一个有益补充。

图
24
为系统的集成模型。系统由铝合金电阻点焊工艺参数求解推理机
模块机器学习模块和工艺参数辅助咨询模块组成。其中推理机模块主要由
带有模糊推理的基于事例的铝合金电阻点焊工艺参数求解和以
FNN
技术为
核心的工艺参数求解组成。基于数据库技术的基于事例学习和以模糊神经网
络训练学习构成了系统的知识学习模块并采用数值模拟铝合金电阻点焊工
人机交互接口
专家系统总控层
基于模糊推理的
参数求解

基于神经网络的
参数求解

基于专家系统
的辅助工艺

基于事例的参数
求解

图
23
系统的总体控制模型

Fig23thegeneralcontrolmodelofthesystem吉林大学博士学位论文

20
艺过程为
FNN
提供相应的网络训练基本数据。



















Fig24thesystemmodeloftheintelligentprocessdesignof
aluminumalloysspotwelding
224系统总体流程

系统总体运行流程见图
25
。进入主菜单后用户选择不同的功能系
统则执行相应的功能模块。在点焊工艺参数设计模块中首先进行基于事例
推理的铝合金电阻点焊工艺参数求解充分模拟焊接领域专家的类比形象思
维。如果求解不成功则转入模糊神经网络的求解然后输出点焊工艺参数。
在工艺知识咨询模块中系统根据用户输入的咨询条件使用数据库技术进行
相应的检索并输出检索结果。在机器学习功能模块中采用多种学习方式
系统分别更新各自的知识库实现对知识的学习功能。

图
24
铝合金点焊工艺设计智能系统模型

B
A
铝合金电阻点焊工艺设计智能系统

推

理

机


机器学习


辅助咨询

基
于
事
例
推
理
的
求
解
模
糊
神
经
网
络
的
求
解
基
于
事
例
的
学
习

模
糊
神
经
网
络
的
学
习
工艺知识

数据库

模糊神经网络
节点知识库
事

例

库

CBR

RBR
模糊推理技术
B

FNN
求解技术
A
数

值
模

拟第
2
章

系统总体设计

21
23铝合金点焊质量智能控制系统下位机总体设计

铝合金电阻点焊自身的特点对铝合金电阻点焊设备及其控制系统提出
了很高的要求。常用的铝合金电阻点焊焊接设备包括三相次级整流式点焊机
直流冲击波点焊机三相低频点焊机以及逆变点焊机等。其中逆变焊接电
源由于主变压器体积小重量轻节约材料损耗而且控制性能好动态响
应快易于实现焊接过程的实时控制在性能上有着很大的优势。逆变电阻
点焊电源已经成为一个发展趋势。电力电子技术的不断发展
IGBT
等功率
返回主菜单
主

菜

单
数据库技术检索
输入检索条件
工艺知识输出
工艺知识咨询
教
授
式
学
习

基
于
事
例
库
学
习
F
N
N
网
络
学
习
更新知识库

机器学习

点焊工艺参数输出

是
否

输入初始条件

基于事例的求解

成功

基于
FNN
求解

工艺参数设计

图
25
总体流程图

Fig25thetotalflowchart吉林大学博士学位论文

22
元件可靠性的逐步提高以及微处理芯片业高速的发展为提高铝合金电阻
点焊的质量控制水平和精度提供了很好的支持。本文为提高铝合金电阻点焊
质量智能控制精度与水平研制了电阻点焊逆变焊接电源及其控制器在此
硬件设备的基础上讨论铝合金电阻点焊智能质量控制算法的应用。

电阻点焊设备中的控制系统作为整个设备的控制核心其控制算法的选
择控制结构的设计相应控制器各个参数的选择对控制系统的精度实
时性可靠性有着重要的影响。在已经确定了焊机主电路采用了逆变形式后
控制系统的硬件及软件总体设计是电阻点焊质量智能控制的核心部分。

231控制参数的选择

电阻点焊过程是个复杂的多参数影响多变量耦合时变的过程。影响电
阻点焊质量稳定的因素是多方面的。材质自身的物理性质导电性导热性
热容性导磁性等板厚加工状态表面状态等决定了焊接过程参数的选
择供电过程中网压的波动焊接过程中电流的波动在加压机构方面焊
接压力的波动是否具有良好的随动性在结构方面已有焊点的分流装
配间隙太小在对铝合金电阻点焊的影响方面电极的材质形状尺寸以
及磨损程度等对点焊质量的影响更为明显。在点焊工艺参数设计过程中包括
电流压力通电时间电极形状及尺寸点距及边距等。


式中
T
温度

r

z
坐标


T
温度为
T
时电阻率


导温系数


热容

体积

简化的电阻点焊热传导微分方程式见
21

96
其中包括一个内部热源
项

热源强度取决于焊接区电流密度分布。内部热源可进一步写作

v
T
C
j

2
a
v
c
4
22
16
D
I
C
j
Q
T
v
T
T




v
T
C
j
r
T
rr
T
z
T
a
t
T

2
2
2
2
2

1













21
22第
2
章

系统总体设计

23
从上式可以推导出在其他条件稳定的情况下对焊接区温度影响最大的是
电流通路的直径其次是焊接电流而后是电阻率。

电阻点焊熔核形成过程是一个热电机械力三者的耦合过程。很难直
接进行控制一般情况下只能通过调整焊接电流电极压力以及改变电
流通过时间等参数来对熔核的生长进行控制。

电阻点焊控制参数的选择要对电阻点焊熔核的形成具有重要的影响或者
能够反映熔核的形成以及生长。很多研究人员对电阻点焊过程控制方式作了
大量研究焊接电流电极间电压电极位移动态电阻等都可以作为电阻
点焊过程控制参数。电极位移能很好的反映点焊过程熔核的生长变化情况
近来获得了很多研究人员的重视。但是薄板的电阻点焊过程电极位移参数不
够敏感而且点焊机机臂本身刚性对电极位移有很大的影响动态电阻曲线
特征控制方法大多适合在电阻点焊焊接过程中动态电阻曲线有着二次峰值的
材质如低碳钢。而铝合金由于其动态电阻曲线经过最初的陡降后趋于平坦
难以用于焊接过程控制焊接电流由于直接影响点焊熔核的形核和生长过程
是其热量的来源而且采集方便是电阻点焊过程质量控制应用最为广泛的
监测参数。焊接过程中保持焊接电流的恒定对保证熔核尺寸有着重要的意
义。但是在焊接过程中由于网压波动次级回路阻抗的变化焊件表面状况
不均等情况都会使稳定的焊接条件发生波动直接影响焊接质量点焊电
极间电压和电流这两个动态电参数间的拟合关系既可反映焊接输入能量的变
化特征又可反映熔核形成过程中的物理变化特征。对电流与电压特征量的
综合处理可以解决不同材料电阻点焊中诸如网压波动分流电极磨损
铁磁性物质进入二次回路等影响因素对熔核形成过程的影响。因此本系统
以电阻点焊过程中的电流作为主要控制参数同时采集电极间电压参数作为
辅助监测参数以此提高电阻点焊过程的质量控制精度。

232电流采集方式

电流的检测涉及两个方面电流信号的采集及电流有效值的计算。采集
电流最直接的方法是从二次侧采样该方法的缺点在于二次电流值非常大
对硬件要求高线路复杂。本文采用高精度霍尔电流传感器采集逆变点焊机
一次侧电流不仅能提高采样电流检测精度而且可增强系统抗干扰能力。
吉林大学博士学位论文

24
电流有效值的计算采用离散化积分法。虽然离散化积分法会占用
CPU
较
多的计算时间但该法不存在理论误差同时使用高性能运算速度快的
LF2407A
可弥补其占用
CPU
时间长的不足因此采用离散化积分法来计算
焊接电流有效值。

233控制算法的选择

在电阻焊逆变设备中逆变器变压器都表现出非线性。在焊接模块中
的焊接区动态电阻是随焊接时间变化的函数而且随着焊接电流电极压力
大小而改变是典型热电力三者耦合的时变过程的结果这都导致了难
以对电阻点焊过程建立精确的数学模型。采用合适的智能控制方法是解决这
个问题的有效措施。

在智能控制方式中人工神经网络技术在解决非线性控制问题过程中也
非常有效有学者从事这方面的研究。但是人工神经网络的求解过程本质是
个并行的权重相乘然后求和的过程。其中权重大多数情况下都是浮点数这
种浮点数的乘积运算对于以工业控制用的微处理器来说运算比较耗费时间
实时性处理比较困难。


Fig26thebasicschematicoffuzzycontrol

模糊控制是以模糊集合论模糊语言变量及模糊理辑推理为基础的计算
计算

控制

变量

模糊
量化
处理
模糊
控制
规则
模糊
决策
非模

糊化

处理

给定值




传感器被控对象执行机构

ADDA
图
26
模糊控制的基本原理框图第
2
章

系统总体设计

25
机智能控制其基本概念是由美国加利福尼亚大学著名教授查德
L

A

Zadeh
首先提出的经过
20
多年的发展在模糊控制理论和应用研究方面均取得重
大成功。模糊控制的基本原理框图如图
26
所示。实现一步模糊控制算法的
过程描述如下微机经中断采样获取被控制量的精确值然后将此量与给定
值比较得到误差信号一般选误差信号作为模糊控制器的一个输入量。把误
差信号的精确量进行模糊化变成模糊量。误差模糊量可用相应的模糊语言表
示得到误差模糊语言集合的一个子集经由模糊控制规则

模糊算法

根
据推理的合成规则进行模糊决策得到模糊控制量。对于工业控制微处理器
来说可以把模糊控制规则量化成模糊控制表在实时控制过程中通过检
索模糊控制表得到控制量大大减少了在线计算时间有利于实现在线控制。

234系统总体结构

系统总体结构如图
27
所示由逆变点焊机主电路及其控制器组成。主
电路采取逆变形式为提高点焊过程质量控制精度作好准备在变压器一次
侧采样焊接电流信号在二次侧采样焊接电极间电压信号送至以模糊控制
逆变点焊机控制器
整
流
滤
波

逆
变
器

变
压
器
整


流

焊


接

逆变点焊机主电路
模糊控制

电
流

电极间电压
PWM
驱动

图
27
质量控制系统总体结构
Fig27thestructureofqualitycontrolsystem

380V吉林大学博士学位论文

26
为核心的点焊控制器并输出
PWM
信号对主电路逆变模块进行控制从
而调节焊接过程的电流参数实现电阻点焊过程的质量控制。

24本章小结

本章首先阐述铝合金电阻点焊工艺设计智能系统的设计思想在对铝合
金电阻点焊工艺设计过程系统应该具有的功能以及各种人工智能技术具体
分析的基础上结合对焊接领域专家的思维过程的充分模拟设计系统的智
能集成模型及各主要模块功能最后给出总体运行流程。


本章在深入分析铝合金电阻点焊过程的基础上采用逆变电阻焊接电源
及其控制器作为铝合金电阻点焊质量控制的硬件载体选择焊接电流与电极
间电压作为铝合金电阻点焊过程控制的监测参数以恒流控制为系统控制的
主要质量控制方式。基于铝合金电阻点焊过程是典型的非线性控制过程难
以建立精确的控制模型本章采用模糊控制方法作为铝合金电阻点焊逆变电
源的控制器的主要控制算法以此提高焊接电流的控制精度并给出总体控
制框图。第
3
章

铝合金点焊工艺设计智能系统

27
第3章铝合金点焊工艺设计智能系统
31知识表示

铝合金电阻点焊工艺设计智能系统也可以称为一个混合了多种智能处理
技术的专家系统即同样是基于知识的系统。系统的性能在很大程度上决定
于知识的存储管理和控制即决定于系统的知识库管理。系统知识库管理
的对象是知识由于知识本身的复杂性以及人们对知识理解的多样性而造
成对知识概念的某些不一致性因而如何将知识有效的表示出就成为了一个
重要的问题。

知识表示是用计算机能够接受并进行处理的符号和方式来表示人类的知
识它既涉及信息是以何种方式存放在人类大脑中的更关心大量知识在符
号计算中应如何形式的描述。一般来说知识表示包含两层含义用给定的
知识结构按一定的原则组织表示知识解释所表示知识的意义。就其形
式而言知识表示就是用于组织求解某些问题所需的知识的数据结构。因而
同一知识可以有不同的表现形式但不同的表现形式可能产生不同的效果
97
。

本系统中主要采用了面向对象的知识表示方法基于规则的知识表示方
法基于神经网络的知识表示方法以及数据库等。

311面向对象的知识表示

典型的知识表示方法有基于一阶谓词演算的逻辑型语言产生式系统
框架结构语义网络逻辑系统面向对象的知识表示等等。

本系统是混合了多种智能技术的问题求解系统同时也产生了多种知识
表示方式但主体是以面向对象的知识表示作为框架其中根据系统的性能
要求以及组织形式具体应用具体的知识表示方式。


面向对象的知识表示是指采用基于信息隐蔽和抽象数据类型概念的面
向对象方法来表示知识它把所有的实体都描述成对象。每个对象都包括其吉林大学博士学位论文

28
静态结构属性和一组操作方法。对象按类

子类

超类
构成偏序关系。上一层对象的属性可以有条件的被下一层对象所继承对象
之间除了互相传递信息外没有其他的联系。用户要完成的任务也是通过发
送消息来实现的。面向对象的知识表示方式封装性好层次性强模块化程
度高有很强的表达能力更能用于解决不确定的问题。

封装是指把数据和处理这些数据的函数结合成单独的实体这个实体被
称为对象或者类。继承是面向对象技术最具有吸引力的地方。通过继承可
以从一个现存类得到一个派生类原有的类称为基类或父类而新产生的类
称为子类或派生类。通过继承子类可以拥有父类的属性或方法。而多态性
是指依据不同的类或对象可以改变一个特定的函数如何操作这称为多态
性。多态性是面向对象方法的另一个显著的特点。继承性和多态性的组合
可以较为容易的生成一系列虽类似但却又独一无二的对象。由于继承性这
些对象共享许多相似的特征又由于多态性同一方法函数对应于同一
对象有一种表现方式而对另外的对象则有另一种表现方式。

点焊工艺设计是一个复杂的求解过程其针对材质的差别供电波形的
不同板材厚度的差异来制定点焊工艺参数。其中充满了共性和个性的辨证
的哲学逻辑。而面向对象的知识表示和面向对象的程序设计方式所具有的封
装性继承性和多态性的特征所具有的表示客观世界的事物行为的相似
性和差异性的能力正是解决上述问题的一个强有力的工具。

在面向对象的知识表示方法中类的设计是关键环节即如何定义类之间的
分类继承关系以及类本身的属性和处理方法。

铝合金类类为所有其不同铝合金类的父类其派生类包括防锈铝类
硬铝类锻铝类等。同样这些派生类也继承了其基类的属性和方法而同
时这些派生类也具有自己独特的属性与方法。现举例说明如下

铝合金金属类的定义如下


金属类


属性


板厚

导电性


导热性


屈服强度
第
3
章

铝合金点焊工艺设计智能系统

29
焊接工艺规范参数结构


方法

求解工艺点距

求解边距

求解焊接参数


构造函数


析构函数


由用户输入获得材料性质


设置缺省物理性质


铝合金金属类作为其他所有类的基类具有板厚和导电性导热性屈
服强度等物理特征的属性以及由用户输入获得材料性质

的方法而这些
属性和方法被其所有派生类所继承即其所有派生类也都具有这些属性和方
法。求解工艺点距求解边距这两个方法由不同的铝合金派生类继承。不同
铝合金派生类的设置缺省物理性质的方法对材质的物理性质进行初始化
给各项物理性质设定一个缺省的值。当由用户输入获得材料物理性质失败后
可由缺省的物理性质即系统设置的该类别典型的材质的物理特性进行推
理求解这样在很大程度上增强了系统的灵活度更加符合人类专家的思
维方式。点焊工艺设计智能系统采用面向对象的知识表示方法进行知识表示
能够清楚的表现出点焊工艺设计知识的组织结构具有良好的层次性有利
于模拟人类专家的智能推理求解过程。而且本系统的实现是采用
VC60
编程语言
VC
是一种典型面向对象的程序设计语言采用面向对象的知
识表示方法也便于程序实现。

312基于规则推理的知识表示

本系统采用的是多种智能推理方法而基于规则的推理是本系统的一种
重要的推理技术因而基于规则推理的知识表示也是系统采用的一种重要知
识表示方法。基于知识的表示方法可分为元知识和领域知识。元知识是管理
知识的知识。本系统中利用元知识来控制系统推理所用的模块即利用元知
识来控制系统的推理过程。而领域知识是针对点焊工艺设计求解过程所需要吉林大学博士学位论文

30
的专家知识。

1
元知识及其表示

元知识就是关于怎样组织管理利用和获取领域知识的知识。在本系
统中元知识被用来控制在问题求解的过程中针对具体的求解目标系统
应该使用哪些知识模块即与系统的推理控制密切相关。把关于问题的求解
的控制知识从控制结构下分离出来以元规则的形式表现出来。系统在求解
过程中针对具体的求解目标元规则控制系统调用相应的知识模块。

由于元知识库是从控制结构中分离出来即元知识同领域知识一样对
于用户来说是开放的这样保证了系统的开放性。用户通过更新修改元知
识库即可对系统的控制结构进行更新修改增强了系统获取知识的能力
提高了系统的灵活性。在实现方面采用文本文件来实现元知识库便于用
户查看与更新。

2
领域知识表示


1
一阶谓词逻辑法。

谓词是用来刻画个体关系的个体是指可以独立存在的事物。如在本系
统中求解焊接电流的求解子神经网络的输入参数之一的焊接时间时首先要
判别材料属性。对这一类知识系统采用了一阶谓词逻辑法。如材质类别
防锈铝合金。一阶谓词逻辑法可以精确表示知识其知识表示具有独立性。
当新知识被发现时很容易添加到知识库中去而不会影响到其他知识。


2
产生式规则表示法

这是专家系统最常用的知识表示法。其表现形式为

如果

条件

则

结论

其含义为如果条件被满足那么结论成立。其中条件和结论可以是
多个。

这种表示方法与专家在解决实际问题时所采用的启发式分析方法非
常相似即在什么样的焊接条件下相应的焊接工艺措施被采用。如下所示

IF
材质类别防锈铝合金

ANDIF
板厚
10mm
THEN
焊接时间
004s
规则的内部表示应满足完备性逻辑性可拆装性等要求。
第
3
章

铝合金点焊工艺设计智能系统

31
32基于事例推理的铝合金点焊工艺设计

321基于事例推理在本系统中应用分析

基于事例的推理就是由目标事例的提示而获得记忆中的源事例并由源事
例来指导目标事例求解的一种策略其核心在于用过去的事例和经验来解决
问题
98
。

因此
CBR
自九十年代以来受到充分重视显示出远大的前景其中
CBR
与
RBR
的结合引起许多研究者的浓厚兴趣。

但是
CBR
的研究毕竟刚
刚开始尚有许多未解决的问题。其运行中一些缺点如维护事例一致性的
困难等等尚需在以后的研究工作中逐步加以克服。

点焊工艺制定经常是通过大量工艺试验对多种可行方案的择优。这种
情况使得具体点焊工艺设计知识的规则化提取非常困难几乎难以避免诸多
规则间的矛盾和冲突从而引起规则推理过程中的组合爆炸和相互冲突等问
题。引入基于事例的推理通过建立事例库存储各种具体工况下的最优事
例正好极为有效地解决了这些问题对于点焊工艺设计问题无疑是非常合
适的。

322检索机制的建立

3221
检索机制

基于事例的推理是通过检索与待求解问题相似的已有的问题求解方案
加以类比和联想来求解的过程。所以如何检索如何确定相似性原则是一个
首先需要解决的问题。基于事例的推理的重要环节是建立事例的检索机制
找出与当前任务最具相似性的事例。一个事例往往包含了丰富的信息在这
些信息中并不是每一个细节都对事例的性质和特征有着等同的影响考察那
些使事例区别于其它事例的属性将会有助于判别该事例与其它事例或当前的
设计要求是否相似。这类属性被称为特征属性。对于焊接工艺设计问题可
以认为事例的设计目标初始条件及约束条件等属于特征属性它们构成了吉林大学博士学位论文

32
整个事例的特征实际上就是事例产生过程中所满足的设计任务。

在设计过程中给定设计任务实际上就决定了将来产生的设计方案即
事例的主要功能。因此可以认为具有相似设计任务的事例是相似事例而
从事例库中寻找最佳事例也即寻找与输入情况最匹配或最有用的事例。由
以上可知关于事例特征的提取是否恰当合理的问题关键是检索机制建立
的是否恰当合理。

3222
铝合金电阻点焊工艺特征分析

在铝合金点焊工艺设计求解过程中一个工艺事例包含了丰富的信息
在这些信息中并不是每一个细节都对事例的性质和特征有着等同的影响考
察那些使事例区别于其它事例的属性将会有助于判别该事例与其它事例或当
前的设计要求是否相似。这类属性被称为铝合金点焊工艺特征属性。铝合金
点焊工艺设计是一个多层次多任务多目标的复杂设计问题涉及的因素
面广如母材规格供电波形焊机类型等等。因此点焊工艺事例特征提
取也较为复杂。其特征层次如图
31
所示。

本系统依据点焊工艺的特殊的工艺过程将点焊工艺特征分为两大类
事例特征和事例特征。事例特征又分为焊机容量供电波形和电极。
焊接电流波形是对铝合金电阻焊工艺过程影响较大的因素很能表征金属材
料的工艺条件和所用设备的特点。而供电波形根据焊接电源的输出波形又可
分为工频交流次级整流直流冲击波三项低频逆变式及电容储能波形
等。选择不同的电流波形就必须制定相应的工艺参数。而焊机容量则限制
点焊工艺电流的选取在某些情况下由于焊机容量不足也可以采用相对
偏软的规范延长焊接时间相对降低焊接电流以及焊接压力从而降低对
焊接电源容量的要求。电极形状以及尺寸对铝合金点焊质量也有着很大的影
响。在本系统中事例特征是指对点焊工艺设计的限制和约束影响较大的
因素其中所包含的特征难以予以类比修正或者难以建立合适的模型
进行类比修正处理。事例特征所包含的因素也是本系统在进行点焊工艺
设计过程中大部分由用户输入的初始条件即第类约束条件如图
32
所示。

事例特征包含板厚电阻率热导率以及屈服强度四种因素。事例特
第
3
章

铝合金点焊工艺设计智能系统

33

征是在事例特征所包含的因素的约束限制下对材质点焊工艺制定影
响较为重要的因素。材质的板厚不同其点焊工艺参数就必须相应的进行调
整。在一般情况下电阻率越小的材质其点焊性则越差。点焊过程中熔
核形成所需要的能量来源于焊接电流流经电极与板材板材与板材之间的接
触电阻及板材本身的电阻所产生的电阻热。因此材质的导电性是衡量其点
事例特征

事例特征事例特征
图
31
基于事例推理的事例特征
事例特征
板

厚电阻率热导率屈服强度
交


流
整


流
低

频
冲
击
波
电极形状

焊机容量
供电波形
锥
台
形
球
面
形
电
容
储
能
事例特征
逆


变
Fig31thecasecharactersofCBR吉林大学博士学位论文

34
焊性的一个重要因素。点焊工艺过程实质是电热的动态变化平衡过程材
质与电极的导热性对其温度场的形成有着非常重要的影响直接影响着点焊
熔核的形状与尺寸故材质的导热率也是必须考虑的一个重要因素。在第
类事例特征的约束情况下材质的高温强度是制定点焊工艺参数之一的电极
压力时需要考虑的另一个重要因素。将上述的四种因素归为第类事例特
征是因为在第类事例特征的约束下上述四种因素对点焊工艺参数制定
的影响比较容易进行适当的类比修正。



图
32
点焊参数输入窗口

Fig32theinputwindowofspotweldingprocessparameters
3223
检索策略与运行流程

在基于事例推理的过程中检索机制的建立是非常重要的一个环节。检
索的目的是找到以前相似的事例对原有的经验进行总结从而指导新事例
的求解。基于事例的推理是建立在检索到与待求事例具有充分相似性的已知
事例从而进行类比修正。检索的原则是在已知事例与待求事例具有相
同的事例特征的约束下搜索与待求事例的事例特征最相似的已知事例。
检索机制的建立应符合点焊工艺设计系统自身的特点根据点焊工艺事例特
征的层次结构来建立检索的层次。事例特征中的约束因素又可分为两类一
种是用户必须提供的条件而另一种既可由用户输入又可由系统给出的。必第
3
章

铝合金点焊工艺设计智能系统

35
须由用户提供的事例特征即系统进行点焊工艺参数设计求解的初始条件也
就是已知条件。而既可由用户输入又可以由系统给出的事例特征则可以成为
初始已知条件也可以为求解的一个中间目标。系统以第类事例特征为条
件进行点焊工艺事例库的检索并建立一个临时数据库。如果事例库为空
则提示用户没有满足相应条件的事例。如果事例库中的记录不为空则查找
此种材质的电阻率屈服强度等特征。如果找不到则提示用户进行补充输
入。系统将在临时库中搜索材质电阻率屈服强度及板厚最相似的点焊工艺
事例作为搜索到的事例。

323修正

生产实际中很难找到完全相同的两个点焊工艺事例。因此基于事例
的推理机制的一个重要的研究方面应该是对于相似事例的修正即充分模拟
人类专家类比联想的思维方式。本系统采用的相似事例检索方式是在焊机
容量供电波形及电极形状参数等第类事例特征的限制下以材质的
电阻率和板厚作为事例是否相似的衡量依据。因此本系统的基于事例的推
理的修正部分就是围绕如何修正材质电阻率板厚等第类事例特征
带来的偏差来考虑的。板厚是任何焊接工艺设计系统都要首先考虑的一般
情况下材质的板厚不同其点焊工艺参数也就随之不同。而电阻率则是根
据点焊工艺特征而提取出的。材质的物理成分不同其导电性随之带来差异
物理成分相似的材质其电阻率也相近。从点焊工艺过程来看熔核的形成所
需的能量主要由待焊母材在焊机施加的电流流过时其本身的电阻热所产
生的。在供电波形压力点焊电极等参数相同的情况下其温度场的平衡
变化的主要影响因素为材质的导电导热性能。而材质电阻率与导热性基本
上呈现单调关系因此本系统提取出材质的电阻率为表征其点焊性的一个重
要的事例特征。电极压力是铝合金电阻点焊的重要参数之一当电极压力过
小时由于焊接区金属的塑性变形范围及变形程度不足造成因电流密度过
大而引起加热速度大于塑性环扩展速度从而产生严重喷溅。而电极压力过
大将使焊接区接触面积增大总电阻和电流密度减小焊接区散热增加因
此熔核尺寸下降严重时会出现未焊透缺陷。电极压力的选择同焊接材质本
身的抗变形强度以及焊接规范强度有着直接的关系。在其他参数相同的条件吉林大学博士学位论文

36
下材质的抗变形强度是选择焊接压力时要考虑的非常重要的因素。本系统
选用材质的屈服强度作为焊接压力选择的一个重要表征。


材质的物理性质及板厚同电阻点焊工艺参数之间的关系是较为模糊的关
系难以建立精确的电阻点焊的工艺参数对电阻点焊过程影响的数学模型。
在其他规范相似的情况下板材厚的材质所需要的焊接电流电极压力相应
也大导电性好的铝合金材质其获得相应的点焊熔核所需要的焊接电流较大
强度高的铝合金材质获得相似的点焊过程变形时所需要的压力也比较大。即
电阻率直接影响焊接电流参数的选择屈服强度直接影响压力参数的选择。
本文采用模糊推理关系实现铝合金电阻点焊基于事例推理的修正。

在材质相似的情况下板厚是影响焊接电流及电极压力的重要因素。本
文建立了板厚及其偏差对焊接电流及电极压力的模糊修正关系如图
33
所
示。板厚及其偏差模糊空间划分为
VSSMSMLLVLNLNSZPSPL
电
流偏差模糊空间划分为
432101234
压力偏差模糊空间划分为
NB

NM

NL

Z

PL

PM

PB
板厚及其偏差模糊划分见图
34
图
35
压
力偏差及电流偏差模糊划分见图
36
图
37
。




图
33
板厚及偏差修正模糊关系

Fig33thefuzzyrelationshipoftheplatethicknessanditsbias第
3
章

铝合金点焊工艺设计智能系统

37

图
34
板厚的模糊划分

Fig34thefuzzificationoftheplatethickness

图
35
板厚偏差的模糊划分

Fig35thefuzzificationoftheplatethicknessbias

图
36
压力偏差的模糊划分

Fig36thefuzzificationoftheforcebias吉林大学博士学位论文

38

图
37
电流偏差的模糊划分

Fig37thefuzzificationofthecurrentbias

图
38
电流模糊推理关系

Fig38therelationshipofcurrentfuzzyinferencerelationship


图
39
压力模糊推理关系

Fig39therelationgshipofforcefuzzyinference
第
3
章

铝合金点焊工艺设计智能系统

39

图
310
电阻率模糊划分

Fig310thefuzzficationofresistivity
在基于事例推理的铝合金电阻点焊工艺参数的求解中电阻率以及屈服
强度的偏差是进行对搜索到的相似事例进行修正的重要因素。在板材厚度相
同的情况下对焊接电流参数的模糊修正中其输入参数为相似材质电阻率
电阻率偏差而以相似焊接电流同待求焊接电流之间的偏差作为求解目标
其模糊关系示意图见图
38
。强度及其偏差对电极压力的模糊推理关系如图
39
所示。

对电阻率及其偏差屈服强度及其偏差进行相应的模糊划分电阻率划
分为
VLLMBVB
电阻率偏差划分为
NB

NM

NL

Z

PL

PM

PB
强度及其偏差划分为
VLLMBVB

NB

NM

NL

Z

PL

PM

PB
其中电阻率电阻率偏差屈服强度及其偏差模糊划分分别见
图
310
图
313
所示。


图
311
电阻率偏差模糊划分

Fig311thefuzzificationofresistivitybias吉林大学博士学位论文

40

图
312
屈服强度模糊划分

Fig312thefuzzificationofyieldstrength

图
313
屈服强度偏差模糊划分

Fig313thefuzzificationoftheyieldstrengthbias
模糊推理规则是建立在领域专家对铝合金电阻点焊过程的认知的基础
上体现了较多的领域专家的经验是一个逐步优化的过程。模糊规则的设
计中确定模糊规则的基本原则是要符合模糊输入参数变量对模糊输出变量
的本质影响即当电阻率比较小时焊接电流应相应增加板厚比较大时
焊接电流也应该相应增加。板厚及其偏差对焊接电流电极压力的模糊推理
规则见图
314
。材质的强度比较大以及板厚比较大时焊接压力也增加以获
得必要的变形保证电流导通面积。电流及压力模糊修正规则见图
315
图
316
其模糊推理曲面见图
317
图
318
。
第
3
章

铝合金点焊工艺设计智能系统

41

图
314
板厚修正模糊推理规则

Fig314thefuzzyinferencerulesofamendingtheplatethickness

图
315
电流模糊推理规则

Fig315therulesofcurrentfuzzyinference

图
316
压力模糊推理规则

Fig316therulesofforcefuzzyinference吉林大学博士学位论文

42

图
317
电流模糊推理曲面

Fig317thesurfaceofcurrentfuzzyinference
系统将电阻率及其偏差强度及其偏差进行模糊划分后经过相应模糊
规则库进行模糊推理后分别得到同电阻率偏差相对应的电流偏差
1
同板
厚及其偏差相对应的电流偏差
2
板厚偏差对应的压力偏差
1
以及强度偏差
对应的压力偏差
2
最终得到最后的电流偏差和压力偏差从而对找到的相
似事例进行修正得到新的工艺参数。基于事例推理的模糊修正框图如图
319
所示。


图
318
压力模糊推理曲面

Fig318thesurfaceofcurrentfuzzyinference第
3
章

铝合金点焊工艺设计智能系统

43
Fig319theblockdiagramoffuzzyamending
324事例库的建立

事例库是针对问题领域的当前己知事例的基于经验的重新整理。因此
一个事例就是一个文档化的经验知识按领域内容放置它应该包括问题描
述事例特征该问题的解以及相应解的结果。本系统的数据库分为两部分
一个表在事例组织结构上参考了系统运行输出结果的数据形式使二者一致
这样新事例的记忆就变成了当前输出的直接复制大大方便了事例库系统
的再学习如表
31
所示另一个用来描述在前一个表中所不包含的上一节
所提取出的点焊工艺事例特征其中包括材质名称电阻率热导率及屈服
强度。

表
31
点焊规范参数事例表

Table31thecasetableofprocessparametersofspotwelding
字段名称

数据类型

材质类别

文本

A
板名称

文本

A
板厚度
mm
数字

电阻率及其偏差
模糊化

板厚及其偏差模
糊化

强度及其偏差模
糊化

电流偏差
1
电流偏差
2
压力偏差
1
压力偏差
2
电流偏差

压力偏差
模糊规则库
1
规则库
2
规则库
2
模糊规则库
3
图
319
模糊修正框图吉林大学博士学位论文

44

续

字段名称

数据类型

B
板名称

文本

B
板厚度
mm
数字

焊前状态

文本

焊机型号

文本

最大电流
A
数字

焊接时间
s
数字

焊接电流
A
数字

回火时间
s
数字

回火电流
A
数字

回火间隔时间
s
数字

回火次数

数字

预压力
KN
数字

锻压力
KN
数字

锻压开始时间
s
数字

电极压力
KN
数字

电极端面直径
mm
数字

球面电极半径
mm
数字

操作要求

备注

33混合多种人工智能技术的铝合金电阻点焊工艺设计

331设计目标

传统的专家系统模糊系统以及神经网络各有优势将多种智能推理技
术结合起来则可优势互补各展所长这也是新型专家系统的发展趋势
99105
。因此本模块的设计思想是采用多种智能推理技术的混合系统通过
专家系统技术模糊技术和人工神经网络技术的结合充分模拟领域专家的
思维过程提高本系统的求解性能。
第
3
章

铝合金点焊工艺设计智能系统

45
本系统的设计目标为铝合金电阻点焊工艺设计智能系统能够根据用户
输入信息搜索相应的点焊工艺设计特征信息如果系统在数据库中找不到
则提示用户再次输入如果找到则根据此信息进行点焊工艺设计的求解过
程。从而可以避免因为系统数据库没有此种铝合金材质牌号的原因导致求解
失败并且能够根据铝合金电阻点焊工艺过程的本质特性对不同类别的铝
合金材质甚至材质类别相同而物理性质不同而设计相应的点焊工艺规范即
能够根据不同种类的材料本身的物理性质求解出相应焊接工艺规范参数。

Fig320themodelofintelligenthybridsystem
332模块总体设计

铝合金电阻点焊工艺设计是一个复杂的多输入多输出的病态的问题求
解过程。分析铝合金电阻点焊工艺设计参数可分为工艺参数焊机型号接
头的点距和边距电极特性以及操作要求等五种求解目标。其中焊机型号
焊接波形焊机容量和电极特性电极材料和电极形状的选取都对点焊
工艺参数的选取有着重要的影响。焊接工艺参数设计主要为焊接电流焊接
智能混合系统

基于
ES
的技术

焊

机

型

号


电

极

特

性


操

作

要

求


基于
FNN
技术

点

距

与

边

距


点
焊
工
艺
参
数


图
320
智能混合系统模型吉林大学博士学位论文

46
时间和电极压力。不同铝合金材质类别材质名称其点焊工艺参数则不同
甚至同一材料点焊工艺参数也有软硬之分求解空间巨大难以用恰当的
知识进行表示或基于产生式的规则进行推理。而是一个相对独立的空间和
丰富的样本数据集适合模糊处理技术和人工神经网络进行处理而这一部
分正是传统专家系统的软肋所在。接头的点距和边距可根据材质的类别及板
厚不同可划分为不同的神经网络。其余的则以字符处理为主或者有着相应
的经验处理公式采用专家系统处理技术则较为容易。铝合金电阻点焊工艺
设计智能混合模型如图
320
所示。
333铝合金点焊工艺参数设计

焊接电流波形是对电阻焊工艺过程影响较大的因素很能表征金属材料
的工艺条件和所用的设备的特点。而供电波形根据焊接电源的输出波形又可
分为逆变工频交流次级整流直流冲击波三项低频及电容储能波形
18
。
选择不同的电流波形就必须制定相应的工艺规范。而焊机容量则限制点焊
工艺的软硬特性在某些情况下由于焊机容量不足也可以采用偏软的规
范。

点焊电极的选用对点焊工艺过程也有着较大的影响。电极是焊接回路的
一个重要组成部分正确的选用电极是获得点焊优质接头的重要手段。电极
材料是决定电极寿命和焊接质量的重要因素之一焊接材料不同材质的热
物理性质不同则应该选用不同的电极材料。电极形式锥台形电极球面
形电极和电极端面尺寸对点焊过程的热平衡以及工艺对中性都有着一定的
影响。

不同的铝合金材质类别供电波形点焊工艺参数的制定有很大的区别。
由于点焊母材的材质类别不同导电性导热性塑性及热循环的敏感性等
等物理性质的不同决定了不同类别材质的点焊性有很大的差异不同类别
铝合金材质点焊工艺参数的制定也有很大的不同。一般情况下材质可分为
防锈铝合金硬铝合金锻铝合金铸造铝合金超硬铝合金等。

本模块的主要设计目的为在供电波形电极选用的限制条件下结合
模糊推理技术和人工神经网络等多种人工智能技术设计一个通用推理模块
根据不同材料的不同的热物理特性模拟人类专家的思维过程求解出相应第
3
章

铝合金点焊工艺设计智能系统

47
的工艺参数。

点焊工艺设计时一般首先考虑的是材质的类别材质的类别不同则考
虑不同的规范参数这是基于一种经验式的思维方式。深入研究点焊的工艺
过程其实质是点焊母材部分在高温下熔化成液态后又结晶为点焊熔核的
过程。其能量的产生源于焊接电流通过焊接回路时的电阻热。点焊时的电阻
是产生内部热源电阻热的基础是形成焊接温度场的内在因素。点焊焊
接区的总电阻
R
由焊件间接触电阻
R
e
电极与焊件间接触电阻
R
ew
以及焊
件本身的内部电阻
R
w
共同组成
18
。即

R

R
e
2R
ew

2R
w


31


其中内部电阻
2R
w
的析热量约占内部热源的
90

95
是形成熔核的热
量基础。而材料的电阻率是衡量
R
w
的标志故材料的电阻率是深入研究点焊
工艺参数的一个重要参数。

点焊工艺过程是一个动态的热平衡过程其散热过程同样是影响熔核形
成的重要因素。点焊过程的热量散失主要有三种途径通过电极热传导损失
的热量通过焊件热传导损失的热量及通过对流热辐射散失的热量。其中
主要是通过电极和焊件热传导而散失热量。母材的热导率是影响热散失的
一个重要因素在一般情况下材质的热导率同电阻率之间存在一定比例关
系故本文只采用电阻率作为铝合金电阻点焊热平衡过程的表征。

334模糊神经网络

模糊理论同人工神经网络结合有多种方式本文在输入输出参数模糊化
的基础上通过人工神经网络的反向传播前向网络技术来丰富提取输入输出
映射之间的推理规则。

3341FNN
输入输出参数的确定

点焊工艺设计模块主要是应用
FNN
技术求解出材质的点焊工艺参数中
的焊接电流焊接时间及电极压力三种重要工艺参数。随着网络规模的扩大
训练样本的数量也就随之要求增加。而在工程实际应用中训练样本增加的
代价很大而且较为困难。在训练样本一定的情况下网络规模的增大其吉林大学博士学位论文

48
泛化性则变差出现过拟和此时随着训练次数的增加虽然网络在训练集上
的误差继续下降但在其他样本上的误差可能反而上升即泛化能力下降。

由上所述在样本集一定的情况下网络规模应尽可能的减小输入输
出参数个数应在满足需要的条件下保持最小。在输入变量中板厚是必不
可少的。而其他影响点焊工艺过程的母材物理性质因素则应尽可能的压缩。

在点焊工艺设计过程中输出变量一般会考虑为焊接电流焊接时间以
及电极压力。但是点焊过程是一个复杂的不良求解过程即使是同一种材质
同一板厚其他限制条件相同其点焊工艺也可根据焊接时间的不同分为软
硬不同的规范即其映射对应方式并不是一对一的映射关系而是一对多的
映射方式。在专家系统技术或者人工神经网络技术中这种一对多的映射关
系实现起来比较困难。

焊接规范的软硬量度是以反映焊接区加热速度快慢为主要特征大电流
短时间参数的规范为硬规范而小电流长时间参数的规范为软规范。焊接
规范的相对软硬以焊接时间作为量度较为适当。焊接时间一般在秒的百分之
几到十分之几。本系统把焊接时间作为规范强度的表征引入输入变量空间
这样焊接时间到焊接电流的映射就变为一对一映射容易应用专家系统技术
或者模糊神经网络技术实现。而焊接时间的确定则可以通过建立一个数据库
按照材质类别名称进行索引从而得到。
FNN
结构图见图
321
。

Fig321thestructureofFNN


导电性

板厚

规范强度

屈服强度


模

糊

化


网

络

层


解

模

糊

焊接电流
焊接压力
图
321FNN
结构图第
3
章

铝合金点焊工艺设计智能系统

49
3342
输入输出参数的模糊划分

电极形状和尺寸对铝合金电阻点焊焊接电流和电极压力的选取也有着很
重要的影响球面电极半径增加则电流密度下降电极压力产生的变形减
少但是由于电极对铝合金电阻点焊焊接参数的影响的样本集难以收集丰富
点焊规范模糊神经网络的输出仅有焊接电流和电极压力。其中电极压力和焊
接电流材质的热强度和规范敏感性有关。焊接规范软硬不同材质的热强
度不同热敏感性不同其电极压力也就不同。但如果将电极压力和焊接电
流同时作为输出变量由于电极压力的分布较为分散网络构建时训练较
为困难而且网络的泛化性很差联想推理结果不理想。本模块将这二者分
开以焊接电流为输出参数构建一个子网络求解焊接电流以电极压力为
输出参数构建一个子网络求解电极压力。因此在上面所示的输入参数中没
有包含电极参数的影响在系统求得焊接电流和压力后根据电极的变化进
行优化。


图
322
规范强度模糊划分

Fig322thefuzzificationofprocessstrength

根据收集到铝合金电阻点焊工艺参数样本将模糊神经网络的输入输出
参数进行模糊划分。规范强度模糊划分见图
322
板厚电阻率和屈服强度
模糊划分见其模糊划分见图
34
图
310
及图
312
。模糊神经网络的输出参
数电流及压力的模糊划分见图
323
图
324
。

吉林大学博士学位论文

50

图
323
电流输出模糊划分

Fig323thefuzzificationofthecurrentoutput

图
324
压力输出模糊划分

Fig324thefuzzificationoftheforceoutput
3343FNN
结构

许多文献探讨了从神经元网络中提取规则的方法
106109
多层前向网络
是其中最常用的一种。它把神经元按层排列每一层的神经元只与上一层和
下一层的神经元相连。它的一个突出特点是它是一个通用的近似器也就
是说它可以按任何期望精度拟合任意连续实型函数。在理论上它与以模
糊规则为核心构成的模糊系统是等价的。利用这种等价性本文使用它来自
动生成系统的模糊规则。首先用样本数据训练神经元网络再从训练后的神第
3
章

铝合金点焊工艺设计智能系统

51
经元网络中提取模糊规则。

本节以电流求解
FNN
为例说明模糊神经网络的构造方法。首先把电阻
率板厚规范强度模糊化得到

i

i
1
第
ii1
模糊区域的隶属度

N
模糊区域划分数目


电阻率

规范强度

板厚

电流


网络层解模糊模糊化
图
325
电流
FNN
结构图

Fig325thecurrentFNNstructure吉林大学博士学位论文

52
N
P
j

0

0

i

i
1
P

j
模糊神经网络输入
j




1

2

3
。

经过模糊化的输入矢量进入神经网络层得到焊接电流的模糊输出在
经过反模糊化后得到精确论域的焊接电流输出。





i

i
1
第
ii1
模糊区域的隶属度

M
模糊区域划分数目

T
模糊神经网络输出。

电流求解模糊神经网络结构图如图
325
所示。压力求解模糊神经网络结构同
电流求解模糊神经网络结构相似此处不予表示。

3344
神经网络的实现

Fig326themodelofBPnet

迄今为止有多种人工神经网络模型被开发和应用其中反向传播网络
M
T

0

0

i

i
1

S
m
q
Z
q
T
X
f


f


f


f


f


f


V
q

W
m
Y
q

图
326BP
网络模型第
3
章

铝合金点焊工艺设计智能系统

53
是应用最为广泛的神经网络模型。
BP
网络最初由
Werbos
开发的反向传播训
练算法是一种迭代梯度算法用于求解前馈网络的实际输出与期望输出间的
最小均方差值。
BP
网是一种反向传递并能修正误差的多层映射网络。当参数
适当时此网络能够收敛到较小的均方差。
BP
网的短处是训练时间较长且
易陷于局部极小。

BP
应用最为广泛它主要应用于模式识别和函数逼近。本系统中的神经
网络模型都采用
BP
网模型。
BP
网络是一种具有三层或三层以上的阶层型神
经网络。上下层之间各种神经元实行全连接。最基本的
BP
网是三层前馈网
络即输入层隐含层和输出层如图
326
所示。对上述模型的描述如下
T
ni
xxxxX







21

为网络的输入向量。
T
qiq
VVVVV







21

为隐含层的
权矩阵其中
V
i
为第
i
个隐层节点的权向量
T
nii
vvvvV







21

。
T
qkq
ttttT







21

为隐含层的净输入
T
qkq
zzzzZ







21

为隐含层的
输出同时也作为下一层的输入。
T
mim
WWWWW







21

为输出层的权矩
阵其中
W
i
为第
i
个输出节点的权向量
T
mii
wwwwW







21

。
T
miq
ssssS







21

为隐含层的净输入
T
miq
yyyyY







21

为隐含层
的输出。

BP
网络的学习过程是由模式的正向传播和误差的反向传播所组成的。在
正向传播过程中输入信息经隐含单元逐层处理并传向输出层如果输出层
不能得到期望的输出则转入反向传播过程将实际值与网络输出之间的误
差沿着原来的连通路径返回通过修改各神经单元的权值使误差减少然后
再转入正向传播过程如此反复计算直到误差小于设定值或达到预定义的
学习次数为止。目前众多学者提出了许多改进的算法包括变学习率算法吉林大学博士学位论文

54
弹性
resilient

BP
算法共扼梯度算法准牛顿共扼算法
LevenbergMarquardt
等算法来提高
BP
算法的效率。一般情况下在小规
模系统中LevenbergMarquardt
算法的收敛速度是最为迅速的本文中采
用
LevenbergMarquardt
算法。

3345
神经网络结构的确定

泛化能力是衡量一个网络结构确定是否合理的一个重要的因素所谓泛
化能力是指经过训练后的网络对未在训练集中出现的但来自同一分布的
样本作出正确反映的能力。学习不是单纯的记忆已经学习过的输入而是通
过训练样本学习到隐含在样本中的有关环境本身的内在的规律性从而对未
出现的输入也能给出正确的输出。影响泛化能力的因素有三训练样本的数
量和质量当样本来源可靠时只与数量有关网络结构以及问题本身的复杂
程度
14
。在训练样本时精度和泛化能力是相互矛盾的如果过分追求精度
会出现过拟和现象即网络对训练样本过度强化而对训练样本以外的样本
却不能做出正确的输出。

表
32
求解电流
FNN
不同隐含层训练结果对比

Tab32thetrainingcomparisonofdifferenthidelayersofcurrentFNN
隐含层数

方差

训练次数

21793500
22152500
23020500
24107500

网络结构的选择对网络的推广能力是一个关键性的问题一般来说网络
结构一定时其中待学习的参数是有限的参数学习是在这个有限维空间中
的搜索。没有先验知识时结构的搜索空间要大得多而对应与每个结构又
有许多可能的参数组合所以搜索空间很大。结构的设计比参数的学习要困
难没有确定可循的方法。一个公认的指导原则是在没有其他先验知识的情
况下能与给定样本符合一致的最简单规模最小的网络就是最好的选择第
3
章

铝合金点焊工艺设计智能系统

55
这相当于使样本点的偏差在允许范围条件下用最平滑的函数去逼近未知的
非线性映射
14
。

图
327
不同隐含层训练对比

Fig327thetrainingcomparisonofdifferenthidelayers
athehiddenlayeris10bthehiddenlayeris11
cthehiddenlayeris12dthehiddenlayeris13
网络结构的选择对网络的推广能力是一个关键性的问题一般来说网络
结构一定时其中待学习的参数是有限的参数学习是在这个有限维空间中
的搜索。没有先验知识时结构的搜索空间要大得多而对应与每个结构又
有许多可能的参数组合所以搜索空间很大。结构的设计比参数的学习要困
难没有确定可循的方法。一个公认的指导原则是在没有其他先验知识的情
况下能与给定样本符合一致的最简单规模最小的网络就是最好的选择吉林大学博士学位论文

56
这相当于使样本点的偏差在允许范围条件下用最平滑的函数去逼近未知的
非线性映射
14
。


图
328
电流
FNN
训练方差图

Fig328theerrsquareofcurrentFNNtraining
根据
RobertHechtNielson
的论证一个
BP
三层网络可以实现任意精度
的逼近任何连续函数。故本模块所有的
FNN
网络层
BP
网络都采用三层结构。
其中隐含层选用
sigmoid
函数作为处理函数而输出层选用线性函数作为处
理函数。
BP
网络的隐含层单元的数目的确定如上所述没有确定可循的方法。
只能在一定的训练次数条件下在误差允许的情况下求得模糊神经网络最
小的网络层隐层单元数。图
327
为点距神经网络结构训练对比可以看出中
间层节点数为
11
时网络的效果最好。表
32
为求解电流
FNN
不同中间层
节点训练方差对比由表
32
可看出在隐含层节点数为
23
时候网络的效果最
好其训练时方差曲线见图
328
。

3346
程序的实现

本模块是以
VC

60
为主体以
MATLAB
为辅助实现的。程序的主
体部分采用
VC

60
进行设计而涉及人工神经网络的设计部分的程序设
计则由
MATLAB
来完成。
MATLAB
是适用于科学和工程计算的数学软件系
第
3
章

铝合金点焊工艺设计智能系统

57






























Fig329theflowchartofgeneralcontrol
N
N
Y
Y
开始
用户输入
读取元规则

确定求解子模块

求解焊接时间
求解焊接电流
用户输入
焊机型号
电流符合
焊机型号
求解电极压力
求解工艺点距
求解边距
求解其余参数
结束
增加焊接时间

求解焊接电流

求解焊机型号

图
329
模块总控流程图吉林大学博士学位论文

58
统。作为数值软件的
MATLAB
对计算数学领域的特定问题类型如数值线性
代数数值逼近最优化方法等都给出了该类问题的高效率的算法。随着
MATLAB
版本的不断推出其功能不断的得到增强。现在
MATLAB
已经
成为集当今人类众多学科的先进技术于一体成为科学计算和教学试验的强
大工具。在其附带的神经网络工具包中提供了神经网络设计训练仿真
等丰富而强大的支持。

本模块的主体程序流程控制数据读取等由
VC

60
编程实现充分发
挥其主流程序设计语言的优势神经网络的设计和训练验证由
MATLAB
编
程实现。在
MATLAB
环境下神经网络设计训练结束后将其节点权值矩阵
存储在数据文件中而由
VC

60
实现在需要的时候从数据文件中读取网
络权值从而进行推理计算。

程序的总体流程如图
329
所示。在本模块中由于采用了以焊接时间作
为求解焊接电流的输入参数之一在输出焊接电流超出用户制定的焊机型号
的最大电流限制时可以逐步增加焊接时间以期减少焊接电流从而符合
焊机型号的限制给系统推理带来更多的灵活性。

3347
知识获取和机器学习

知识获取和机器学习是人工智能研究的核心获取知识和学习能力是人
类智能的基本表现形式也是系统具有智能的根本途径。知识获取是指把已
有的知识从人脑或书本中总结和抽取出来并转换为某种表现形式以及总
结已经获取的实例归纳新知识存入知识库同时调试和精练知识库使知识
库中的知识具有相容性和达到语义要求。机器学习是研究学习的计算理论
建立学习的计算机模型使计算机具有学习能力学科。机器学习是解决知识
自动获取的根本途径主要采用归纳综合而不是演绎。

本系统所有的模糊神经子网络或者子神经网络采用的都是有师学习的
BP
学习算法。在
BP
网络中各种变量之间的数学关系不能显式给出而只
能通过样本的训练才能得到。而且它只能给出不超出样本范围的数据件的
依赖关系。神经网络的训练是通过样本的输入和期望输出来进行的。每个隐
层和输出层上的神经元通过对其输入加权求和再经过一个转换函数传递
函数而得到结果。通过训练后网络通过节点权值映射出输入与输出之间第
3
章

铝合金点焊工艺设计智能系统

59
的关系。神经网络学习的结果是得到一系列权值矩阵学习的知识就分布地
存储在这些权值矩阵中。这些分布存储的知识的运用是通过神经网络的前向
计算实现的。

神经网络的学习过程可用于系统的再学习或者系统的知识扩充。其中系
统再学习是指对于原先已有的知识进行更新和完善。其过程非常简单因为
网络的算法和层次结构已经确定只需在原训练好的样本集中加入新的样本
或是根据需要在原样本的基础上进行修改然后重新训练神经网络学习后
的新的知识通过修改过的网络权值矩阵重新分布在相应的子神经网络中。

34数值模拟在
FNN中的应用

FNN
神经网络的训练需要样本集合具有一定的分布性即能够在较大范
围内覆盖从输入空间到输出空间的映射。通过焊接工艺试验来获得大量的数
据样本可以用于
FNN
的示教学习。然而焊接工艺试验要消耗大量的人力
物力和财力通过工艺试验的方法获得各种工艺条件下的相关数据也不切
实际。但如果实验数据不够丰富
FNN
的泛化精度就不够理想。本文利用铝
合金点焊过程数值分析模型以点焊过程的物理本质为基础通过计算机模
拟与仿真得出的各种工艺条件下焊接热过程基础数据再配合以少量的工
艺试验数据用这两类数据对神经网络进行示教学习将大大减少试验工作
量节省人力物力。即通过铝合金数值模拟模型得到从铝合金材质的物
理性质电阻率屈服强度板厚以及焊接时间通电波形焊接电流
电极压力作为输入空间到点焊

熔核直径作为输出空间的映射。将符合要求的
熔核直径的样本集作为
FNN
的样本集丰富
FNN
的学习样本空间。具体铝
合金电阻点焊数值模拟模型请参见文献
110
。

35铝合金点焊工艺设计求解验证

本文所研究的铝合金电阻点焊工艺设计智能系统进行学习时将样本分
为学习训练样本和检验样本两类。学习训练样本用来学习铝合金电阻点焊工
艺知识检验样本用来检验学习效果以及推理结果是否合理。

吉林大学博士学位论文

60

0
10000
20000
30000
40000
50000
60000
70000
0405060811216225
板厚mm
焊
接
电
流

A

输出值
给定值

图
330
输出焊接电流同参考值比较

Fig330thecomparisonbetweentheoutputsofcurrentandreferences

图
330

331
为
LF2
电阻点焊焊接规范主要参数焊接电流焊接压力的
输出对比。表
33
为
LF2
点焊主要工艺参数焊接电流焊接压力输出值与给
定值的对比。从表
33
图
332
及图
333
中可以看出相对于板厚参数系统
对经过学习训练过的样本有着较高的精度系统输出工艺参数同给定工艺参
数最大偏差不超过
4
而对于没有学习过的样本也可以给出较为接近的工
艺参数偏差值也不超过
6
。对于学习样本中不包含的材料系统的推理
输出见表
34
。对表中
LF3M

AA6111

T4
经过工艺试验后得到优化后的工
艺参数及其拉剪载荷数据见表
35
。


0
5000
10000
15000
20000
25000
0405060811216225
板厚mm
焊
接
压
力

N

输出值
给定值

图
331
输出压力同参考值比较

Fig331thecomparisonbetweentheoutputsofforceandreferences
第
3
章

铝合金点焊工艺设计智能系统

61

表
33
焊接参数输出值与参考值的对比

Tab33thecomparisonbetweentheoutputsofweldingparametersandreferences
板厚
mm


输出焊接电流
值
A


给定电流参考
值
A


输出焊接压力

N


给定压力参考
值
N


04190601900044834413
05215802150051595099
0623010

240005907

5590
08291002900066546865
10328703300082838238
12362303700095019611
1646050440001301612454
2050520500001660516475
2559050580002027320888
注

为检验样本


表
34
系统输出规范参数表

Tab34thetableofoutputparametersofthesystem
材质名称

电阻率

nm

板厚

mm


焊机类型
焊接时间

s


焊接电流

A


焊接压力

N


LF3M5115
三相整流
010356003752
AA6111

T4
4412
三相整流
010286004016

由表
35
对比可以得出系统输出焊接规范参数同实际优化过的焊接工
艺参数较为接近。图
332
为铝合金电阻点焊工艺智能设计系统窗口之一图
333
为系统输出铝合金电阻点焊工艺参数卡。



吉林大学博士学位论文

62
表
35LF3M

AA6111

T4
点焊工艺参数及其力学性能数据

Tab35theprocessparametersofRSWofLF3MandAA6111

T4andtheirmechanical
properties
材质

试样号

焊接电流
A
焊接时间
s
电极压力
N


拉剪载荷
N

D

1343003591
D

2341003334
D

3341003740
D

4346003517
LF3M
D

534400
0104000
4032
F

1269002722
F

2268002810
F

3268002610
AA6111

T4
F

426700
0103800
2796


图
332
铝合金电阻点焊工艺智能设计系统窗口之一

Fig332oneofthewindowsofintelligentprocessdesignofaluminumalloysspotwelding
第
3
章

铝合金点焊工艺设计智能系统

63

图
333
铝合金电阻点焊工艺规范输出

Fig333theoutputofprocessparametersofaluminumalloysresistancespotwelding

36本章小结

本章通过分析专家系统和模糊神经网络的各自特点提出了将传统专家
系统与模糊神经网络技术相结合的思想用于点焊工艺设计智能系统中。并根
据点焊工艺参数的特点将点焊工艺参数分解细化把点焊工艺求解过程分
解为不同的求解子模块并按照各模块的具体特点具体应用相应的智能技吉林大学博士学位论文

64
术。以焊接时间来表征规范强度作为求解焊接电流的输入参数之一充分
适应点焊工艺设计的复杂求解特征并可根据焊机的容量限制来灵活的调整
焊接电流使之适应用户指定的焊机具有良好的优化性质。以材质的热物
理性质作为模糊神经网络输入参数将材质的物理性质对点焊过程的影响引
入到焊接工艺规范的求解过程中深层次模拟了人类专家在进行点焊工艺设
计中的思维过程并以此作为材质的辨识特征改变以往类似系统中以材料
库中材料名称来识别材质的方式增加系统的推理灵活性。通过验证表明
系统对经过学习训练过的样本有着较高的精度系统输出工艺参数同给定工
艺参数最大偏差不超过
4
而对于没有学习过的样本也可以给出较为接近
的工艺参数偏差值也不超过
6
。本系统所设计的混合多种人工智能技术
的铝合金电阻点焊工艺参数的求解策略是成功的。第
4
章

基于
DSP
点焊智能控制器的硬件设计

65
第4章基于DSP点焊智能控制器的硬件
设计

本章主要研究内容为铝合金电阻点焊集散型智能控制系统下位机中铝合
金电阻点焊智能控制器。

随着现代工业自动化程度的提高和生产节拍的加快对焊接结构件焊接
质量的要求越来越高在批量生产的电阻点焊中尤为重要。但是在电阻点焊
过程中不可避免地存在网压波动焊接回路阻抗变化分流及电极磨损等干
扰因素这些都会影响焊接质量。尤其在铝合金电阻点焊过程中由于其熔
点低导电导热性能良好以及表面易形成致密氧化膜等特点使得铝合金的
点焊必须采用大电流短时间的焊接规范而且其焊接质量随着焊接参数的
变化波动严重。这就对电阻点焊电源控制器提出了更高的要求。采用
DSP
芯
片作为逆变点焊电源的主控芯片有助于提高焊接电源的控制精度而且其高
速的处理速度和合理的内部设计结构结合模糊控制等人工智能技术为电阻
点焊过程的智能控制提供了强大的支持。

41设计目标

411逆变频率的选择

点焊逆变器的逆变频率从理论研究和实际应用来看常用在
600

2000Hz
。随着逆变频率的提高变压器铁芯的截面积大大减少但频率的进一
步提高并不能带来更大的效率。电阻焊机的最大特点是低电压大电流其变
比及导线截面积都不可能太小因此继续减少铁芯截面积的意义不大。本文
所研制的焊接电源的逆变频率为
1000Hz
既可以显著降低变压器铁芯体积
同时可以获得良好的控制精度。
吉林大学博士学位论文

66
412系统需求分析

电阻点焊过程控制系统要求实时检测逆变主电源的电流以及次级电极间
电压。由于铝合金电阻点焊过程多采用硬规范大电流同其他金属材料的
电阻点焊过程相比焊接时间非常短通常是
002

020s
而且本系统的控
制目标是中频电阻点焊逆变电源这就对系统的实时控制性能提出了非常高
的要求。因此所设计的逆变点焊电源智能控制器应具有如下功能

1
核心控制芯片及其周边电路有较高的运行速度和并行处理能力

由
于是中频逆变焊接电源控制器要求能在
ms
单位内完成对焊接信号的检测
采集以及处理并且完成相应的智能控制算法同时要完成对主电路功率元
件的驱动以及点焊过程相关动力的驱动。

2
具有较强的抗干扰能力

电阻点焊焊接电源工作在大电流的工作状
况而且随着焊接电源频率的提高系统的抗干扰要求也随着增高加之焊
接场所多是环境条件差外界干扰源多这就要求系统必须采取有效的措施
保证整个系统的工作可靠性。

3
故障检测与报警功能

逆变点焊电源主要功率元件
IGBT
工作在条
件比较恶劣的频繁开关状态。系统应该能对
IGBT
的过流主变压器的过热
以及用户不适当的选择进行保护提示乃至报警。

4
具备良好的人机交互界面

人机交互界面是用户同逆变点焊电源之
间的沟通桥梁良好的人机交互提供给用户简洁的可操作性同时也有利于
系统的故障检测与排除。

5
同主控计算机的通讯能力

系统应该提供同主计算机的通讯功能来
实现主计算机同控制系统之间的数据传输这样用户可以将焊接过程中参数
记录在案也有利于对焊接过程中的参数变化进行分析。

413控制系统的构成及功能


系统采用模块化设计方法各模块单独设计单独调试最后进行系统
集成。这使得系统的设计调试和维护都十分方便。系统总体框图如图
41
所示。
第
4
章

基于
DSP
点焊智能控制器的硬件设计

67
2407
电磁阀
人机交互
液晶显示
键盘
故障检测
电压检测电流检测
驱动
焊接
次级
整流
变压器
逆变
整流
滤波
通讯
图
41
基于
DSP
的逆变点焊电源控制系统框图

Fig41theblockdiagramofgeneralcontroloftheinvertedspotwelderbasedDSP

电流检测模块从主电路的变压器一次侧完成焊接电流采样滤波并计
算其有效值后送至
DSP
主控模块进行处理。电压检测模块从次级点焊电极上
完成电压参数的采样去噪后送至
DSP
主控模块。故障检测模块检测主电路
的
IGBT
功率元件以及主变压器等器件如果发生过流过热等异常行为
则向主控模块提示并报警。
IGBT
驱动模块执行
DSP
主控模块发出触发命令
完成对主电路
IGBT
的触发与关断。电磁阀驱动模块完成点焊过程中对压力
的程序控制命令的执行实现焊接过程中的预压焊接锻压等程序功能。
通讯模块完成
DSP
主控模块同计算机直接的数据传输便于焊接过程参数的
记录以及分析。人机交互模块由薄膜键盘以及液晶显示模块组成实现用户
对焊接参数的选择功能模块的控制完成用户与系统之间的交流通讯功能。

42DSP及其周边电路设计


吉林大学博士学位论文

68


图
42TMS320LF2407A
体系结构
111

Fig42thesystemstructureofTMS320LF2407A
111


421DSP芯片的选择

在当前的
DSP
中美国
TI
公司的
TMS320
系列以其优越的性能价格比
在国内外市场上占有重要地位其中的
TMS320LF2407A
把一个高性能的
DSP
内核和微处理器的片内外围设备集成为一个芯片成为传统的微控制器
A150
D150
RAM25kW
BootROM
Flash
32kW
C2
DSPcore

16
位
T
寄存器
16

16
乘法器
32
位
P
寄存器
桶形移位器

32
位
ALU
32
位

累加器

8
个辅助寄存器

2
个状态寄存器

16
位

移位

寄存

器

事件管理器

4
个定时器

6
个全比较单元

16
个
PWM
输出
死区控制逻辑

6
个输入捕捉

40
路数字
IO
看门狗定时器

SCISPICAN
AD
转换器

8
路
10
位
ADC
8
路
10
位
ADC









外
设
总
线
程序

数据
IO
总线
第
4
章

基于
DSP
点焊智能控制器的硬件设计

69
和昂贵的控制多片设计的一种廉价的替代产品堪称业界最具竞争能力的数
字化控制器。此处理器是一种特殊用途的微处理器其结构和指令集特别适
合于执行信号处理类算法丰富的片内外围设备又使其适于控制应用。
TMS320LF2407A
体系结构如图
42
所示
111
。

由图可见
TMS320LF2407A
的结构特点特别有利于在控制系统中应用。
改进的哈拂结构具有分离的程序和数据总线这种多总线结构允许同时取
指令和操作数使得指令和数据能并行移动和同步执行加快了执行速度。
流水线操作流水线操作使取指译码取操作数和执行等操作可重叠执行。
流水线操作决定了的指令基本上都是单周期指令。采用硬件乘法器
DSP
的
硬件乘法器使得乘法运算可以在
1
个指令周期内完成而单片机的乘法指令
实际上是由加法和移位以软件方式来实现因此实现乘法运算就比较慢。
快速的指令周期
TMS320LF2407A
的工作时钟频率很高时钟频率达到
40MHz
即指令周期为
25ns
。

特殊的
DSP
指令芯片的一个重要特征就是
有套专门为数字信号处理而设计的指令系统。
DSP
的指令集简化了数字信号
处理过程。优化的事件管理模块和外围电路从图
42
可见在芯片中集成了
转换大容量存储器定时器比较单元捕获单元波形发生器数字
IO
口
SPI

SCI

CAN
等其中
4
个通用定时器和
12
个比较单元的结合能产
生多达
16
路的输出足以满足
IGBT
主电路的驱动。此外
TMS320LF2407A
具有快速的中断处理能力数据指针的逆序寻址功能硬件寻址控制以及多
种节电模式等特有的性能这些特性有利于
TMS320LF2407A
在点焊逆变器
智能控制中的应用。综上所述本系统选择
TMS320LF2407A
作为逆变点焊
电源的核心控制芯片。

422主控板的设计

主控板是本系统的核心部分由
DSPTMS320LF2407A
存储器
AD
转换电路键盘编码电路显示接口电路模拟电源数字电源以及
IGBT
驱动输出接口电路等组成。电路框图见图
43
。

存储设备采用
CY7C1021CV33
是高速
CMOS
静态
RAM
其存储容量达到
64Kword
其工作电压为
33V

8

12ns
的存储速度完全同
TMS320LF2407
芯片相匹配可以实现同
CPU
直接相接。本系统由两片
CY7C1021CV33
构吉林大学博士学位论文

70
成了主控板的存储设备其中一片作为数据存储器而另一片作为程序存储
器。使用
CY7C1021CV33
作为程序存储器便于系统开发过程中软件的维护
与更新。基于
DSP
的主控板见图
44
。


图
43
基于
DSP
主控板框图

Fig43theblockdiagramofthemaincontrolpanelbasedonDSP

电
流
检
测

电
压
检
测

薄
膜
键
盘

液
晶
显
示

R
S
2
3
2
传
感
信
号

I
G
B
T
驱
动

LF2407A
接口电路
64K
存储
64K
存储
总



线

A

D
接
口
1
A

D
接
口
2
数
字
电
源

模
拟
电
源

键
盘
编
码

显
示
接
口

通
讯
接
口

故
障
检
测

电
平
转
换
第
4
章

基于
DSP
点焊智能控制器的硬件设计

71

图
44
基于
DSP
的主控板图

Fig44thepictureofthemaincontrolpanel
43显示模块的设计

液晶显示器
LCD
具有功耗低体积小重量轻超薄等诸多其它显示器
无法比拟的特点被广泛应用于各种仪器和低功耗电子产品中。
LCD
可分为
段位式
LCD
字符式
LCD
和点阵式
LCD
前两者只能显示有限种字符而
点阵式
LCD
不仅能显示字符还可以显示汉字及各种图形并且可实现屏幕
的上下左右滚动显示反转显示及显示闪烁等功能用途十分广泛。为提高
系统人机交互的能力提高系统的可控性与可视性本系统采用点阵式液晶
显示模块
FM240128B
其点阵矩阵为
240

128
。内集成
T6963C
液晶显示控
制模块及相应的显示存储器。

431显示控制模块
T6963C吉林大学博士学位论文

72
T6963C
液晶显示控制器多用于中小规模的液晶显示器件常被装配在图
形液晶显示模块上以内藏控制器式图形液晶显示模块的形式出现。它具有
8
位地址及数据总线接口可以图形方式字符方式及图形和字符合成方式
进行显示。它具有内部字符发生器
CGRAM
共
128
个字符。
T6963C
可管理
64kRAM
作为显示缓冲区及字符发生器
CGRAM
并可允许外部
CPU
随时访
问显示缓冲区甚至可以进行位操作。

存储器中设置空间内的每一个

位

都
与液晶屏上的一个像素点相对应而

位

的二值性就表示液晶屏上像素
是否

显现

。
T6963C
则将存储器中设置区域的内容不断地扫描式地送向液
晶屏用户则通过显示模块对外的接口将需显示的

数据

送入存储器中的设
置区域。其电路控制模块图见图
45
。

图
45T6963C
控制液晶显示模块图

Fig45theLCDmodelcontrolledbyT6963C
432液晶显示模块与
DSP硬件接口形式

通常有两种液晶显示模块同
TMS320LF2407A
的接口方法。一种是将
LCD
的数据线
D0

D7
通过锁存器同
LF2407A
的数据总线的低八位相接
通过地址线同
IS
信号线作片选信号将
LCD
映射到
LF2407A
的
IO
空间中
控
制
总
线

控
制
总
线

240128LCD
T6963C
列驱动器
行
驱
动
器

32KRAM第
4
章

基于
DSP
点焊智能控制器的硬件设计

73
的一定地址。这种连接方式的优点是不占用
LF2407A
的
IO
端口但是元件
较多连接方式比较复杂其时序控制多由硬件来实现。本文采取将
LCD
的数据端口直接同
LF2407A
的数字
IO
端口相连接方式电路元件少稳定
性好充分利用了
LF2407A
丰富的数字
IO
资源而且其时序的配合完全由软
件完成。其电路原理图如图
46
所示。

FG
1
VSS
2
VDD
3
V0
4
WR
5
RD
6
CE
7
CD
8
NC
9
RESET
10
DB0
11
DB1
12
DB2
13
DB3
14
DB4
15
DB5
16
DB6
17
DB7
18
FS
19
VOUT
20
A
21
K
22
LCD
DSPDA4
DSPDA5
DSPDA6
DSPDA7
DSPDB0
DSPDB1
DSPDB2
DSPDB3
DSPDB4
DSPDB5
DSPDB6
DSPDB7
10K
R1
5V
RESET

图
46LCD
同
LF2407A
直接相连接方式

Fig46thedirectconnectionbetweenLCDandLF2407A吉林大学博士学位论文

74
44IGBT驱动模块的设计

441LF2407A的
PWM输出

计数周期计数周期
死区
PWM
X1


低
PWM
X
高
比较匹配发生点
计数器值
比较值
大于周期

图
47
非对称
PWM
波形产生示意图
111
Fig47thesketchmapofgeneratingasymmetricPWMwave
111

图
48PWM
输出驱动
IGBT
模块

Fig48thePWMoutputwavedrivingIGBT
LF2407A
包括
2
个事件管理模块
EVA
和
EVB
每个事件管理模块有
3
个全比较单元每个全比较单元带有可编程死区发生器每个全比较单元
以定时器
1

EVA
模块或者定时器
3

EVB
模块为时基可输出
6
路带
可编程死区控制的
PWM
脉冲。在每个
PWM
周期内可根据需要改变
PWM
的占空比通过设置定时器
1
或定时器
3
为不同计数模式可选择全比较单
元输出非对称
PWM
波形对称
PWM
波形或空间矢量
PWM
波形。当定时
IGBT
驱动模块
1
IGBT
驱动模块
2
IGBT
驱动模块
3
IGBT
驱动模块
4
L
F
2
4
0
7
A
P
W
M
输
出
电
平
转
换
功
率
驱
动第
4
章

基于
DSP
点焊智能控制器的硬件设计

75
器
1
或定时器
3
工作在连续增计数模式可产生适用驱动逆变点焊电源控制
的非对称
PWM
波形其原理示意图如图
47
所示。
PWM
输出及驱动
IGBT
的模块框图见图
48
。


图
49PWM
输出实测波形

Fig49theactualwaveofPWMoutput

图
49
为系统占空比为
80
时本驱动模块的一路
PWM
输出实测波形
图形所示为高有效
PWM
。

442IGBT驱动模块的选择与设计

IGBT
作为点焊逆变电源的主要功率转换元件其是否能够正常的开通与
关断直接关系到焊接电源的工作是否正常。
IGBT
的驱动及保护是逆变点焊
电源设计的关键。一个理想的
IGBT
驱动器应具有以下基本性能动态驱动
能力强能为
IGBT
栅极提供具有陡峭前后沿的驱动脉冲能向
IGBT
提供
适当的正向栅压以及能向
IGBT
提供足够的反向栅压有足够的输入输出电
隔离能力。
吉林大学博士学位论文

76

图
410M57962L
内部原理图
112

Fig410theinternalschematicdiagramofM57962L
112
1
2
3
DIGITALPOWER5V
1
2
3
CONTORLSIGNALIN
JP4
1
2
3
CONTORLSIGNALOUT
JP6
12
34
56
CONTORLSIGNALIN
JP5
D5V
D5V
PDPINTB
IGBTDRIVE
PDPINTBPDPINTB
IGBTDRIVEIGBTDRIVE
1
1
2
2
3
3
4
4
5
5
6
6
7
7
8
8
9
9
10
10
11
11
12
12
13
13
14
14
M57962L
U2
SIGNALIN1
U1
ERA40
D3
30V
DZ3
25V
DZ2
25V
DZ1
47uF
C9
47uF
C10
DGND
DGND
DGNDDGND
IGBT1
IGBT2
IGBT3
IGBT1
IGBT2
IGBT3
47K
R3
33
R4
170
R2
330
R1
15V
10V

图
411IGBT
驱动模块原理图

Fig411theschematicdiagramofIGBTdrivermodels第
4
章

基于
DSP
点焊智能控制器的硬件设计

77
本系统采用光耦隔离式
IGBT
驱动模块
M57962L
作为
IGBT
的驱动模块。
M57962L
的内部电路原理图见图
410
。
M57959
则需双电源
15V

10V
供电。而
M57959
则可输出
10V
的偏压能可靠地关断
IGBT
。
M57959L
而且具有封闭性软关断功能能够在
IGBT
短路时软关断
IGBT
从而完成
对主电路的保护。
IGBT
驱动电路原理图见图
411
。

如图
411
所示由端口
13

14
输入
IGBT
触发信号
IGBT
栅极获得相
应的触发脉冲
IGBT
导通。如果
IGBT
发生短路则管脚
8
为低电平光耦
U1
导通则
PNPINTB
端口由高电平变为低电平
PWM
输出停止给主控
电路发出警报。
45电流采样电路

本系统电流采样方案中使用
MAX314
作为整流桥把传感器输出的交流
电流信号转变为直流电压信号然后经过放大信号保护滤波后送
DSP
采
样。由于滤波模块的存在使得电流传感器输出的信号中表达方向的部分被去
除而我们关心的电流大小的信息却被完好的保存了下来这样做的好处是不
论电流的正负只要它们的大小一样就被表示成一个正电压使后续的
AD
采
样部分和在
DSP
中的信号处理都得到了简化并且由于采样窗口宽增加了采
样的精度。
MAX314
是
MAXIM
公司的
4

2
常开
2
常闭单刀单掷
COMS
模拟开关无电压死区在
15V
供电时最大开

关时间小于
300ns
导通电阻
小于
10
它的各个开关的开

关由各自的逻辑控制输入决定。经放大后的
信号经过信号线路保护器
MAX4506
可以防止电压过高和过低的信号进入
滤波器和
AD
转换器引起器件故障。信号从
MAX4506
出来后经过
10MHz
的
RC
低通滤波器后进入
DSP
的
AD
转换模块。

46故障检测及保护功能

电源主电路中的
IGBT
及变压器的冷却非常重要为避免由于温度过高
引起系统异常本系统针对
IGBT
的过流过热以及主变压器的过热设计了
故障检测及保护模块。
LF2407A
为保障系统中功率转换电路和驱动电路的安
全可靠工作提供了功率驱动保护中断输入引脚
PDBINTA
和
PDBINTB
利吉林大学博士学位论文

78
用它们可以方便地实现各种保护功能包括过电流和过热保护等。本系统将
PDINTB
信号同
IGBT
过流过热以及主变压器过热检测信号相连接同时
将按照系统故障信号的分类不同
LF2407A
的数字
IO
连接用于判断故障产
生原因。一旦检测值超过给定值保护电路发出
2
路信号一路作为故障类
别信号将直接送入
LF2407A
将
PDBINTB
变为低电平
LF2407A
随即停止
PWM
输出并产生中断另一路则将检测信号送至
LF2407
的数字
IO
端口。
系统在中断中对故障检测类别输入
IO
进行判别从而获得故障产生原因
并对用户作出提示其电路原理图如图
412
所示。


47本章小结

为提高铝合金电阻点焊过程控制精度首次采用
DSP
芯片
TMSLF2407A
作为逆变电阻点焊智能控制器的主芯片并设计了相应的人机交互模块
IGBT
驱动模块故障检测以及保护等辅助功能模块的硬件组成为进行铝
合金电阻点焊质量控制提供了硬件基础。

低电平
PDPINTB
IOPC1
IOPC2
IOPC7
IOPA3
或
非
门

IGBT
过热
主变压器过热

IGBT
过流
网压检测

T
M
S
3
2
0
L
F
2
4
0
7
A
图
412
故障检测及保护模块原理图
Fig412theschematicoffaultsdetectionandprotection第
5
章

基于
DSP
点焊智能控制器的软件系统设计

79
第5章基于DSP点焊智能控制器的软件
系统设计
51软件系统总体设计

软件系统是整个控制系统的灵魂本章采用模块化的设计方法分别设
计点焊智能控制器软件系统的各功能模块然后总体进行调试。

511系统功能模块分析

本软件系统为前面所介绍的基于
DSP
的逆变点焊电源智能控制器所设
计因此首先要满足电阻点焊程序设定的要求系统的控制目标是中频逆变
点焊电源这就对系统的实时控制性能提出了非常高的要求而且要能够实
现所采用的相应智能控制算法。应具有如下功能

1
电阻点焊焊接参数设定功能

系统应能够设定点焊焊接参数包括
预热电流预热通电时间预热间隔时间焊接电流焊接电流通电时间
后热间隔时间后热电流后热电流通电时间预压开始时间锻压力施加
时间压力保持时间等焊接参数。

2
智能控制模块

这是本电阻点焊质量智能控制系统的核心模块其应
能够实现核心的点焊过程智能控制算法输出控制参量完成智能化质量控
制。

3
系统控制参数采集功能

系统应对传感器采集的变压器一次侧电流。
二次侧电极间电压参数进行转换完成其有效值的计算给控制模块提供可
以处理的数字变量。

4
数字量输出转换模拟输出量模块
DA
系统将智能控制模块的输出
由数字量转换为驱动
IGBT
开通和关断的模拟量。

5
具备良好的人机交互界面

人机交互界面是用户同软件系统的沟通
桥梁良好的人机交互提供给用户简洁的可操作性同时也有利于系统的故吉林大学博士学位论文

80
障检测与排除。

6
故障诊断模块

能够对硬件系统产生的报警及故障诊断进行判别进
而作出提示。

7
同主控计算机的通讯能力

系统应该提供同主计算机的通讯功能来
实现主计算机同控制系统之间的数据传输这样用户可以将焊接过程中参数
记录在案也有利于对焊接过程中的参数变化进行分析。

图
51
软件系统总体框图

Fig51theblockdiagramofthesoftware
512系统功能模块构成

软件系统总体框图如图
51
所示。键盘输入模块完成用户输入液晶显
示模块完成焊接相关信息的显示二者共同完成人机交互功能焊接程序设
定模块完成用户对焊接相关程序参数的设定以及传送有关变量故障诊断
模块完成故障信号来源判别并作出相应提示检测参数模块完成焊接电流
以及电极间电压信号的采集及转换
PWM
输出模块完成对输出控制量的
DA
转换通讯模块完成控制器系统同工业控制计算机之间的数据通讯智能控
制模块是控制器软件系统的心脏完成对焊接过程的智能控制相关算法。

智能
控制
模

块
键
盘
输
入
模
块

液
晶
显
示
模
块

焊
接
程
序
设
定

P
W
M
输
出
模
块

通
讯
模
块

故
障
诊
断
模
块

检
测
参
数
A

D
主控层
第
5
章

基于
DSP
点焊智能控制器的软件系统设计

81
焊接参数初始化
液晶初始化
键盘初始化
DSP
初始化
1
键盘是否
有按键
1
参数设定
焊接
焊接参数
是否设定
脚踏开关
是否按下
初始化
开始
功能选择处理

图
52
软件系统总体流程图

Fig52theflowchartofthesystemsoftware
513软件系统总体流程

系统上电后经过
DSP
相关内部寄存器设置初始化液晶显示程序初始
化键盘程序初始化以及焊接相关参数初始化后进入液晶显示主界面。用
户可以通过键盘及液晶显示子系统进行焊接参数设置同计算机进行数据传
输以及开始焊接等功能。用户如果按下开始焊接脚踏开关系统检测焊接
参数是否设置如设置好则关闭除焊接程序循环以外的中断设置进入焊
接程序如果没设置好则给用户相应提示。系统进入等待状态等待用户
下一步命令。软件系统总体流程参见图
52
。

52焊接程控程序

焊接程控程序主要完成焊接过程的时序控制本系统设计的焊接过程时吉林大学博士学位论文

82
序参见图
53
。

I
t
1
1
2
t
2
1
I
3
t
3
4
4
t
2
6
5
t
5
6
t
I
3
7
t
7
w
I
t
图
53
电阻点焊时序图

Fig53thetimeroutineofresistancespotwelding
t
1
焊接压力开始同预热开始之间间隔

t
2
预热电流通电时间

t
3
预热过程结束同主焊接电流开始间隔

t
4
焊接过程通电时间

t
5
焊接过程结束同焊接后热电流开始间隔

t
6
后热过程通电时间

t
7
压力保持周期。
焊接时序控制参见流程图
54
。


在点焊时序控制中焊接程序电流控制程序是电阻点焊过程控制的
关键。点焊电流是通过
DSPLF2407A
的
PWM
输出控制
IGBT
的导通占空比
从而控制次级焊接电流。本系统采用
T1
计时器设定计时时间而将计时器
T3
的周期设定为
05ms
即电阻点焊周期的一半。通过设定
CMP4

CMP5
比较寄存器的值来设定
PWM
输出的占空比。系统利用
T3
计数器同
CMP4

CMP5
寄存器值比较而产生的中断来设定相应的
PWM
输出占空比。示意图第
5
章

基于
DSP
点焊智能控制器的软件系统设计

83
见图
55
。


图
54
焊接时序控制流程图

Fig54theflowchartofthecontrolofweldingtimeroutine
图
55PWM
输出示意图

CMP4
中断
0CMP4
中断
1CMP4
中断
0
中断
0CMP5
中断
1CMP5
中断
0CMP5
结

束

N
N
N
Y
Y
N
Y
Y
计时
t
4

延

时
t
3
0
执行焊接程序
t
5
0
延

时

t
6
0
执行后热程序

计时
t
7

执行电极抬起

1
1
开

始

计时
t
1

延

时

执行加压程序

t
2
0
执行预热程序
吉林大学博士学位论文

84
Fig55thesketchofPWMoutput
PWM
输出控制如下所示

1
CMP5
中断
0
空闲。

2
CMP5
中断
1
设置下一个
CMP5
比较寄存器为
0
根据电流采样模糊推
理计算修正的占空比写入下一个
CMP5
寄存器设置奇偶寄存器值为
0


3
CMP4
中断
1
空闲。

4
CMP4
中断
0
设置下一个
CMP5
比较寄存器为
0
根据电流采样模糊推
理计算修正的占空比写入下一个
CMP5
寄存器设置奇偶寄存器值为
0
。

53人机交互系统的软件设计

人机交互系统是用户同控制系统进行交互沟通的桥梁人机交互系统的
设计关系到系统控制功能的正常实现。人机交互系统分为用户键盘输入以及
液晶显示两部分。系统的设计应该具备模块化易扩展性而且人机交互系
统实质上是人机控制信息通信的接口负责控制整个系统控制信息的流向。
为使系统具备良好的信息可控性本系统设计了消息触发消息响应机制负
责处理系统中控制信息的产生流向控制以及处理。

531消息机制

人机交互系统的消息有两大类一类为显示消息类另一类为键盘消息
类。其中显示消息类中包括窗口消息文本框消息输入框消息按钮框
消息键盘消息由数字键消息方向键消息确认
Click
消息以及功能键
消息组成。

数字键消息类向系统发送数字键
0

9
按下的消息方向键消息类在用户
按下上下左右方向键向系统发送相应的消息码确认
Click

消息在用户按下确认键时产生功能键消息完成功能模块的调用消息。

窗口消息负责处理用户选择不同的显示窗口时候的消息处理文本框消
息处理方向键消息等输入框消息处理数字键消息方向键消息等按钮框
消息处理方向键确认键等消息系统消息分类见图
56
。
第
5
章

基于
DSP
点焊智能控制器的软件系统设计

85
图
56
人机交互系统消息分类

Fig56themessageclassificationofmanmachineinteractionsystem

532用户输入模块

用户输入软件模块建立在薄膜
键盘及键盘解码器基础上。键盘输
入采用中断方式在用户输入模式
阶段中如有用户按键发生系统
产生相应中断并对用户按键进行
识别产生相应的按键消息发送
给系统等待系统相应。经过系统相
应后清除处理后的消息码进入
下一个消息处理。程序处理流程图
见图
57
。

533液晶显示系统设计

本系统采用液晶显示模块作为
系统显示的硬件基础。采用液晶显
显示

消

息

键盘消息
窗

口

消
息
文

本

框
消
息
输

入

框
消
息
按

钮

框
消
息
数

字

键
消
息
方

向

键
消
息
确
认

C
l
i
c
k

消
息
功

能

键
消
息
Y
N
输入消息处理

开始

等待用户输入

有输入

进入输入中断

产生输入消息

清除消息码

图
57
消息处理流程

Fig57theflowchartofmessagehandle吉林大学博士学位论文

86
示模块可以更加直观的反应用户对焊接相关参数的设定控制功能的选择
以及提供用户系统故障检测提示报警等功能。

5331
液晶显示数据结构

图
58LCD
显示驱动模块

Fig58thedrivenmodelofLCDdisplay

本显示系统采用四种显示类型窗口文本框输入框按钮框。不同
类型的控件存储在不同的区域即
ROM
空间中开辟窗口数据区文本框数
据区按钮数据区输入框数据区。每种显示类型设定了相应的检索
ID
及
相应的数据结构。检索
ID
一般结构如下所示窗口
ID

1
字窗口号
6Bit

默认焦点控件
4Bit
本控件的类型
3Bit
下一控件的类型
3Bit
。其中
文本框数据结构文本框
ID

1
字起始横坐标起始纵坐标文本内容。
输入框数据结构输入框
ID

1
字起始横坐标起始纵坐标显示内容
左右上下方向键响应消息
Click
响应消息。按钮框数据结构按钮框
ID

1
字起始横坐标起始纵坐标显示内容左右上下方向键响应消息
Click
响应消息。

文字显示
LCD
底
层驱动
程序
画横线

画竖线

文字反显
字库第
5
章

基于
DSP
点焊智能控制器的软件系统设计

87
5332
液晶显示程序设计

系统经过初始化后进入液晶显示程序首先装载主窗口及其相应控件
然后等待用户的消息输入对消息进行解析处理后调用相应的显示控件显
示程序。显示控件的显示程序以系统的
LCD
显示基本程序为底层进行相应
显示元素的显示。
LCD
显示基本程序结构见图
58
。显示基本程序以
LCD
底层驱动程序为核心由文字显示反显画横线及画竖线组成。系统为便
于系统信息显示建立了自己的字库为系统文字显示提供了支持。图
59

510
为液晶显示界面的部分显示图片。


图
59
液晶显示界面之
1
Fig59oneoftheinterfaceofLCDdisplay

图
510
液晶显示界面之
2
Fig510theotheroneoftheinterfaceofLCDdisplay吉林大学博士学位论文

88
54故障检测及报警模块的软件设计

故障检测及报警模块实现对硬件系统的故障检测及报警信号的识别向
用户作出提示以及停止有关焊接程序的运行相关硬件电路参见
46
小节。
系统采用中断来处理故障诊断信号。处理程序流程见图
511
。故障发生后
产生故障报警信号并触发
LF2407A
外部中断
XINT1
。
XINT1
中断为高级
别中断其中断优先级高于系统其他工作中断。系统进入中断停止
PWM
输出切断焊接电源然后识别故障信号判别出故障产生原因对用户作
出提示屏蔽相关工作中断后退出中断至此故障检测结束。

55模糊控制系统的设计


模糊控制系统不依赖于系统精确的数
学模型特别适宜于复杂系统

或过程

与
模糊性对象等采用因为它们的精确数学
模型很难获得或者根本无法找到。模糊控
制中的知识表示模糊规则和合成推理是
基于专家知识或熟练操作者的成熟经验
并通过学习可不断更新具有智能性和自
学习性。模糊控制系统的核心是模糊控制
器而模糊控制器均以计算机

微机单片
机等

为主体因此它兼有计算机控制系统
的特点如具有数字控制的精确性与软件
编程的柔软性等。在电阻点焊过程中不可
避免地存在网压波动焊接回路阻抗变化
分流及电极磨损等干扰因素这些都会影
响焊接质量。为了补偿上述各种因素对焊
接质量的影响要求采用更加精确的方法
来监测与控制点焊过程和质量。采用模糊
控制方法它不要求建立系统的精确数学模型将它与控制理论相结合较
故障产生信号

故障中断发生

停
PWM
输出

识别故障信号

故障显示

屏蔽相应中断

返回主界面

图
511
故障检测流程

Fig511theflowchartofdiagnosis第
5
章

基于
DSP
点焊智能控制器的软件系统设计

89
之传统的控制方法不仅可获得更高的控制精度而且可提高点焊控制器的智
能化程度。本文采用模糊控制作为逆变点焊控制器的智能控制核心。

551模糊控制器的组成

模糊控制器组成包括输入量模糊化接口数据库规则库推理机和
输出解模糊接口五个部分。模糊控制器的输入必须通过模糊化才能用于模糊
控制输出的求解因此它实际上是模糊控制器的输入接口主要作用是将真
实的确定量输入转换成一个模糊矢量。数据库所存放的是所有输入输出变
量的全部模糊子集的隶属度矢量值

即经过论域等级的离散化以后对应值的
集合

若论域为连续域则为隶属度函数。在规则推理的模糊关系方程求解
过程中向推理机提供数据。模糊控制器的规则是基于专家知识或手动操作
熟练人员长期积累的经验它是按人的直觉推理的一种语言表示形式。模糊
规则通常由一系列的关系词连接而成如
IF

THEN

AND
等。模糊规则库
是模糊控制的核心部分。推理是模糊控制器中根据输入模糊量由模糊控
制规则完成模糊推理来求解模糊关系方程并获得模糊控制量的功能部分。
它通常是在模糊控制器设计过程中选定的推理算法软件逐步被应用。模糊推
理是模糊逻辑理论中最基本的问题。推理的结果经过输出解模糊接口将输
出的模糊控制量的输出转化成精确的数字控制量。

552输入量维数的确定

图
512
模糊控制器模式图

Fig512thepatternoffuzzycontroller
aonedimensionFLCbtwodimensionFLCcthreedimensionFLC
a
一维模糊控制器
b
二维模糊控制
c
三维模糊控制
一维模糊
控制器

EU
EC
E
dt
d
一维模糊
控制器

E
U
ECC
EC
一维模糊

控制器

dt
d
dt
d
E
E
U吉林大学博士学位论文

90
对于单变量模糊控制系统通常有如图所示三种模式一维模糊控制器
如图
512a
所示。二维模糊控制器如图
512b
所示。三维模糊控制器如
图
512c
所示。一维模糊控制器的输入变量往往选择为受控变量和输入给定
的偏差量
E
。由于仅仅采用偏差值很难反映受控过程的动态特性品质因
此所能获得的系统动态性能是不能令入满意的。这种一维模糊控制器往往
被采用于一阶被控对象。二维模糊控制器的两个输入变量基本上都选用受控
变量和输入给定的偏差
E
和偏差变化
EC
由于它们能够较严格地反映受控
过程中输出变量的动态特性因此在控制效果上要比一维模糊控制器好得多
也是目前采用较广泛的一类模糊控制器。三维模糊控制器

的三个输入变量分
别为系统偏差量
E
偏差变化量
EC
和偏差变比的变化率
ECC
。由于这类模
糊控制器结构较复杂推理运算时间长因此除非对动态特性的要求特别高
的场合一般较少选用三维模糊控制器。综合考虑上述原因本文采用二维
模糊控制器。

1820222426283032343638
4000
5000
6000
7000
8000
9000
10000
11000


c
u
r
r
e
n
t


A

dutyratio

图
513
焊接电流同
IGBT
占空比关系

Fig513therelationbetweenweldingcurrentandthedutyratioofIGBT

553输入输出参数的选择

输入参数即为系统的监测参数。本模糊控制系统的设计目标是保持焊接第
5
章

基于
DSP
点焊智能控制器的软件系统设计

91
过程中焊接电流的恒定因此采用焊接过程中电流参数为输入参数变量。在
全桥逆变点焊电源焊接过程中焊接电流的大小近似的与
IGBT
导通时间的
占空比成比例关系如图所示
513
。图
513
为在稳定的情况下焊接回路
次级电流同
IGBT
占空比之间的对应关系。因此选取
IGBT
触发
PWM
波
形的占空比作为控制变量也就是输出参数。通过调节
IGBT
单周期导通时
间的长短来调节焊接过程中焊接电流的变化。

在电阻点焊模糊控制的输入参数选择中一般情况下是把经过
AD
转换
过的电流有效值同设定电流值的偏差及偏差的变化率作为模糊控制器的输入
变量。在这种情况下由于电阻点焊焊接过程的电流参数范围比较宽通常
为几千安培到上万安培这就给后面的模糊区域划分带来了困难。如果模糊
区域划分过宽则系统的控制精度则会降低如果模糊区域划分很细则在
系统推理规则的制定及系统推理方面过与复杂不利于程序处理。

在本文所设计的模糊控制系统的输入参数选择中采用检测电流有效值
同电流设定值的偏差同电流检测值的比值及其变化率作为模糊控制器的输入
参数。见下式


100


i
di
i
I
II
E


51



1

iii
EEC


52



iii
U



53


其中
i
I
第
i
时刻的电流检测值


d
I
电流设定值

i
E
第
i
时刻的偏差百分比

i

1
E
第
i

1
时刻的偏差百分比

i
C
第
i
时刻的偏差变化百分比

i
U
第
i
时刻的控制量输出
吉林大学博士学位论文

92
i

第
i
时刻
IGBT
导通时占空比增量

i

第
i
时刻
IGBT
导通时占空比。

采用
E
i

C
i
作为输入参数可以降低输入参数的范围从而提高模糊划
分的控制精度。而且以
IGBT
导通时候的占空比增量百分比
U
i
作为控制系统
的控制量同输入参数的设定相适应。
U
i
以当前占空比为控制对比量是动
态的控制量的输出这样将提高系统的动态响应和控制精度。

本模糊系统输入输出参数见图
514
。

554论域等级的确定

模糊控制系统的控制变量输入信号和输出信号是有界的。在模糊控
制系统中这个有限界一般称为该变量的基本论域它是实际系统的变化范
围基本论域都是精确量。输入变量的基本论域可以通过实验或理论指导来
确定它在控制过程中往往是不变化的。本文中偏差百分比输入变量论域为

15

15
百分比则偏差变化率的论域为
30

30
百分比输
出控制量的论域为
15

15
百分比。在进行模糊推理之前首先要把
输入变量输出变量量化在论域范围内即进行论域等级划分。电流偏差比
的论域
E
可表示为

E

N
1

N
1

1



1

0

1



N
1

1

N
1


偏差比变化率的论域可表示为

C


N
2

N
2

1



1

0

1



N
2

1

N
2


i

图
514
模糊控制输入输出参数

ii

i
I


100


i
di
i
I
II
E

1

iii
EEC

模糊控制驱动
IGBT
Fig514theinputandoutputparametersoffuzzycontrol第
5
章

基于
DSP
点焊智能控制器的软件系统设计

93
输出控制量的论域
U
可表示为

U

M

M

1



1

0

1



M

1

M


论域的量化等级同模糊系统的控制精度有着直接的关系。图
515
所示为
将电流偏差变化率为
7
个等级的模糊划分图
516
为其输出参数
IGBT
占空
比的量化模糊划分。而图
517
为给如上所述的模糊划分建立模型后在有干
扰信号输入时候的输出曲线图。由图
517
可以看出外加干扰信号幅值在
10

10
区域时控制系统的输出偏差较大已经超过了
2
。


图
515
模糊变量
E
论域划分

Fig515theclassificationoffuzzyvariableEinfuzzyfield

图
516
模糊变量
C
论域划分

Fig516theclassificationoffuzzyvariableCinfuzzyfield吉林大学博士学位论文

94
0000500100150020025003
10
8
6
4
2
0
2
4
6
8
10
times
e
r
r



输出信号
干扰信号

图
517
模糊控制输出曲线与目标曲线对比

Fig517thecomparisonbetweenoutputcurveoffuzzycontrolandtargetcurve
由此可见如果量化等级较为粗糙则系统控制精度随着下降。如果量
化等级过高则将失去模糊控制模糊的含义模糊推理规则难以建立而且
占用大量的存储单元使算法过于复杂化。经过优化本系统所设计的量化
等级为
N
1

17

N
2

16

M

17
。

555隶属函数的确定

隶属函数用来表示模糊论域中各点对模糊语言变量的隶属程度。隶属函
数在一般情况下是根据经验给出的尤其对于被控制对象不甚了解的模糊
控制器的设计来说隶属函数的选择具有较大的主观性。一般来说隶属函数
的形状越陡峭分辨率就越高控制精度也较高反之如果隶属函数的变
化很缓慢则控制特性也较为平缓系统的稳定性也越好。

常见的隶属函数的形状有三角形钟型高斯型以及梯形等。本文采用
最常见的三角形隶属函数可以使运算简单便于处理。隶属度函数的选择
也要具有一定的噪声容忍度。在电阻点焊的过程中要受到各种干扰因素的
影响这就使数据的采集过程中含有一定量的噪声。本文中隶属度函数三角
形底边的宽度选取为
2
既可以排除噪声的干扰同时也保持了系统的灵第
5
章

基于
DSP
点焊智能控制器的软件系统设计

95
敏性和控制精度。



图
518
电流偏差百分比的模糊划分

Fig518thefuzzificationofthecurrenterrorpercentage

图
519
电流偏差百分比变化率的模糊划分

Fig519thefuzzificationofthegradientofcurrenterrorpercentage

两个隶属度函数的交集体现了两个模糊字集之间的关系。当交集较小时
候系统控制较为灵敏反应速度比较快。但是当交集过小时候系统则失
去了模糊性控制动作难以连续变化剧烈系统不稳定。当交集较大时候
系统具有较好的适应性鲁棒性较好。但是当交集过大的时候系统的控制
特性将会过于模糊控制量也因此会变得很模糊最终导致它们不同
语言值的隶属函数几乎相同。这意味着控制量无法传递多少有意义的信息
最终导致控制品质的下降。而且当交集过大的时候将容易引起模糊规则的吉林大学博士学位论文

96
干涉性增强影响系统的可控性。本系统的隶属度函数交互程度选择交点在
05
处。输入参数
E

C
输出参数
U
的模糊划分见图
518
图
519
以及图
520
。

图
520IGBT
导通占空比百分比的模糊划分

Fig520thefuzzificationofthedutyratiopercentageofIGBT
556模糊控制规则的建立


模糊控制规则是模糊控制器的设计核心部分是进行模糊求解的动力模
块。控制规则的完整性干涉性和相容性关系到控制系统的可靠性和其鲁棒
性。控制规则的设计中体现了较多的领域专家的经验是一个逐步优化的
过程。确定模糊控制规则的基本原则是当电流偏差百分比比较大时以消除
电流偏差为主要目标当电流偏差百分比很小时候以系统稳定无振荡超
调为主要目标。即当偏差很大时无论偏差变化如何控制量取大值。

当偏
差为中等大小时如果偏差变化很大且向增大偏差的方向变化控制量取
大值如果偏差变化很大且向减小偏差的方向变化控制量取中等大小
偏差变化中等大小且向增大偏差的方向变化控制量取大值如果偏差变
化中等大小且向减小偏差的方向变化控制量取中等偏小。如果偏差变化
小控制量取中等大小。

当偏差为小值时但偏差变化很大且向增大偏差
的方向变化控制量取中等大小当偏差变化很大且向减小偏差的方向变
化时控制量暂不变化。

依据以上原则把焊接电流的偏差百分比
E
和偏差百分比的变化率作为第
5
章

基于
DSP
点焊智能控制器的软件系统设计

97
输入量
IGBT
导通时候的占空比变化率为输出量建立模糊控制系统的规
则。本系统一共建立
272
条规则部分如下所示其中的数字部分表示经过
量化后的模糊区域划分等级。


14if
E
is8and
C
is6thendutyratiois7
15if
E
is8and
C
is7thendutyratiois6
16if
E
is8and
C
is8thendutyratiois6
17if
E
is8and
C
is8thendutyratiois8
18if
E
is8and
C
is7thendutyratiois8
19if
E
is8and
C
is6thendutyratiois8

557模糊推理以及反模糊化

模糊推理是模糊控制中根据输入模糊量由模糊控制规则完成模糊推理
来求解模糊输出。本系统中规则模式如下

if
E
为
A
4
电流偏差百分比为正中
and
C
为
B
1
偏差变化率为正较小

Then
为
U

4

IGBT
导通占空比变化为负中

if
E
为
A
4
电流偏差百分比为正中
and
C
为
B
2
偏差变化率为正小

Then
为
U

5

IGBT
导通占空比变化为负较大

本系统中模糊推理采用
Mamdani
法。如已知
E
0

C
0
则新的隶属度为


54
210



UUU


001
14
EE
BA



0220
4
EE
BA

吉林大学博士学位论文

98

图
521
模糊推理示意图

Fig521thesketchmapoffuzzyinference

图
522
模糊系统控制曲面图

Fig522thecontrolsurfaceoffuzzysystem
上述模糊推理结果是模糊值不能直接用于控制被控对象需要先转化
成一个执行机构可以执行的精确量。此过程为解模糊过程或称为模糊判决
它可以看作模糊空间到清晰空间的一种映射。解模糊的目的是根据模糊推理
的结果求得最能反映控制量的真实分布。本系统采用重心法来实现从模糊
空间到清晰空间的映射。系统模糊推理解模糊方式如图
521
所示。系统控第
5
章

基于
DSP
点焊智能控制器的软件系统设计

99
制曲面如图
522
所示。

0000500100150020025003
15
10
5
0
5
10
15
times
e
r
r




输出信号
干扰信号

图
523
模糊控制系统输出

Fig523theoutputcurveoffuzzycontrolsystem
56系统仿真

应用
Matlab70
对本系统做仿真以测试系统的性能。设定目标控制输出
为
0
干扰信号为
50Hz
的正弦曲线。系统的输出曲线如图
523
所示。


现对恒流智能控制系统控制性能进行计算机仿真逆变电阻点焊模糊控制
仿真系统见图
524
。逆变点焊控制器是通过调整
IGBT
导通占空比来改变变
压器初级的有效电压从而改变次级电压有效值从而改变次级电流。对于次
级回路的简化电路来说相当于一个压控电压源对于本系统设计的逆变点
焊主电源次级回路来说次级输出电压在
7V
左右经过整流管压降从电
阻焊接时的负载端看前级系统相当于一个
5V
的电压源。因此将负载前
系统在仿真设计中简化为
5V
压控电压源。

焊接区阻抗为动态电阻随着焊接材料的动态电阻变化而变化。铝合金电
阻点焊过程的动态电阻变化如下在焊接开始阶段经过急剧下降后就趋于
平缓。其动态电阻图如图
525
所示。电阻点焊电源次级回路阻抗经过计算后
吉林大学博士学位论文

100
subtract
dynamicR
10000
currentset
K
Gain
FuzzyLogic
Controller
Divide
dudt
Derivative
i


CurrentMeasurement
s

5V
K


图
524
逆变点焊模糊控制仿真系统图

Fig524thesimulationsystemofthefuzzycontrolofspotweldinginverter



约在
300
左右故总焊接区动
态电阻变化如图
526
所示。

回路电流经过传感器采样后同
电流设定值进行比较产生的电流
差值同电流设定值相除后乘以
100
得到电流偏差百分比经过微
分后将偏差百分比同其微分偏
差变化率送入模糊控制器输出
IGBT
导通占空比调整百分比从
而调整电压源电压。进而调整回路
电流保持电流恒定。

图
525
电阻点焊过程动态电阻

Fig525thedynamicresistancein
theprocessofRSW第
5
章

基于
DSP
点焊智能控制器的软件系统设计

101
00005001001500200250030035004
300
320
340
360
380
400
420
440
times
R






526
铝合金逆变点焊焊接回路电阻

Fig526theresistanceofsecondarycircuitofAARSAWinverter
00005001001500200250030035004
3
35
4
45
5
times
v
o
l
t
a
g
e

V


图
527
次级电压输出图

Fig527theoutputofthevoltageofsecondarycircuit吉林大学博士学位论文

102
00005001001500200250030035004
0
2000
4000
6000
8000
10000
12000
times
c
u
r
r
e
n
t

A


图
528
电流输出波形

Fig528theoutputcurrentcurve

从图
528
可以看出在电流经过初始的过渡阶段后趋于稳定而且电流
变化范围在电流设定值
10000A
附近波动。在电流开始阶段的急速上升以及
下降为电流开始的冲击在实际焊接时候由于次级回路为感性电路电流
需要
4

5
个周期周期为
0001s
才能上升到电流设定值因此在实际焊接
过程中并不出现这个冲击过程。在排除初始冲击电流后得到控制电流的
输出平均值为
I
o
10072A
而电流设定值为
10000A
控制偏差为
072
。
模糊推理

Ig
Ig
模糊化
e
ec计算
电压比对
U
电流反馈
反模糊化焊接系统
电压检测

图
529
铝合金点焊过程智能控制框图

Fig529theblockoftheintelligentcontrolofprocesscontrolofAARAW第
5
章

基于
DSP
点焊智能控制器的软件系统设计

103
57铝合金电阻点焊过程智能控制算法

系统通过对多次正常情况下焊接过程中电压参数的采集将采集数据经
由通讯模块传输到主计算机中对电压参数进行分析得到相应正常范围的
焊接过程电压数据即为过程电压参照。在其后的焊接过程中在每半个周
波内进行电极间电压测量值同标准值的比对根据其偏差对焊接设定电流
I
g
进行调整从而产生
I
g

作为焊接电流智能控制的参照。通过对电极间电压参数
的监测可以弥补焊接区由于分流产生的热量产生不足。系统总体控制框图见
图
529
。

58本章小结

软件系统是逆变电阻点焊电源智能控制器的核心本章在分析控制器功
能的基础上进行软件系统各功能模块的设计。采用消息产生与响应机制处
理用户输入与响应使人机交互更加灵活。设计了完整的故障诊断与报警机
制使系统工作更加稳定可靠。采用模糊控制技术进行电阻点焊过程控制
对控制参量焊接电流及其变化率提出了相应的模糊划分及模糊控制规则并
提出了结合焊接电流及电极电压相结合的质量控制方法提高了电阻点焊过
程控制的质量。系统仿真结果表明本智能控制系统可以提高铝合金电阻点焊
质量控制精度。吉林大学博士学位论文

104
第6章结论
1
建立了铝合金电阻点焊集散型智能控制系统。在上位机中结合生产实际
广泛收集和整理有关点焊的工艺资料设计了一个集成模糊神经网络基于
规则的推理和基于事例的推理的新型铝合金电阻点焊工艺设计智能系统。该
系统能够模仿人类专家的点焊工艺设计求解模式根据点焊材料的物理特征
进行点焊工艺智能设计在下位机中首次采用
DSP
芯片
TMSLF2407A
作
为主芯片研制了逆变电阻点焊智能控制器采用模糊算法进行铝合金点
焊过程智能控制。

2
在上位机铝合金点焊工艺设计智能系统中提出了混合
CBR

FNN
等多
种人工智能技术的推理机制。在基于事例的推理模块中首次深入的分析了
点焊工艺的事例特征并抽取材料的热物理性质电阻率以及板材厚度
作为在同一供电波形限制下的搜索点焊工艺相似事例的索引以此设计了搜
索算法。以领域专家进行工艺设计的过程为依据以材质自身的热物理性质
电阻率屈服强度为输入以材质的点焊工艺参数中的焊接电流焊接
压力为输出设计了相应的模糊修正算法使基于事例的推理更加符合铝合
金电阻点焊过程的本质特征在基于模糊神经网络的专家系统模块中首先
根据点焊工艺参数的特点将点焊工艺参数的求解过程分成数个不同的求解
子目标在各个子模块中根据点焊工艺参数的不同参数制定不同的求解
策略。引入材质电阻率作为衡量材料点焊工艺的重要参数通过点焊性参
数的引入避免了简单的以材质类别作为点焊工艺问题求解的出发点而更
加符合焊接领域专家的思维过程。

3
首次提出将焊接时间作为求解焊接电流的输入参变量之一以焊接时间来
表征点焊规范强度可以充分体现点焊工艺的复杂性使系统的推理更加灵
活更加符合实际情况。

4
首次将
FNN
引入点焊工艺智能设计领域将基于
RBR
和
FNN
深层次的
结合并辅助以基于事例的推理进行铝合金电阻点焊工艺设计系统对经过
学习训练过的样本有着较高的精度系统输出工艺参数同给定工艺参数最大
偏差不超过
4
而对于没有学习过的样本也可以给出较为接近的工艺参数第
6
章

结

论

105
偏差值也不超过
6
。工艺实例验证表明这种点焊工艺参数的求解策略是成
功的。

5
在集散型铝合金电阻点焊智能控制系统的下位机硬件设计中为提高铝合
金电阻点焊过程控制精度首次采用
DSP
芯片
TMSLF2407A
作为逆变电阻
点焊智能控制器的主芯片并设计了相应的人机交互模块
IGBT
驱动模块
故障检测以及保护等辅助功能模块的硬件组成。硬件设计表明选用
DSP
芯
片
LF2407A
有利于提高铝合金点焊的实施控制精度为进行铝合金点焊质量
控制提供了良好的硬件基础。

6
在集散型铝合金电阻点焊智能控制系统的下位机软件设计中采用消息产
生与响应机制处理用户输入与响应是人机交互更加灵活设计了完整的故
障诊断与报警机制使系统工作更加稳定可靠采用模糊控制技术进行电
阻点焊过程控制对控制参量焊接电流及其变化率提出了相应的模糊划分及
模糊控制规则并提出了结合焊接电流及电极电压相结合的质量控制方法
提高了电阻点焊过程控制的质量。系统仿真结果表明本智能控制系统可以提
高铝合金电阻点焊质量控制精度。吉林大学博士学位论文

106
参考文献
1YChoYKimandSRheeDevelopmentofaqualityestimationmodelusing
multivariateanalysisduringresistancespotweldingProcInstnMechEngrs
2001Vol21515251538
2HaoMOsmanKAetalDevelopmentsincharacterizationofresistancespot
weldingofaluminumWeldingJournal19964
3
尹孝辉

张忠典

赵洪运

闫丽红

点焊质量监控技术的发展与现状

焊
接
200225

9
4
马宏泽

蒋力培

点焊质量优化控制数学模型

焊接学报
199741821
5
冯纯伯等

神经网络控制的现状及问题
J
控制理论与应用
19941103

106
6TaoCWTaurJSRobustfuzzycontrolforaplantwithfuzzylinearmodel

Transactionson

Fuzzy

Systems200523041
7ZhouChanqiuYangYanShengInternationalConferenceonFuzzySystems
2002314711474
8YingHaoAnovelmethodfordiscoveringfuzzysequentialpatternsusing
thesimplefuzzypartitionmethodInternationalJournalofIntelligent
Systems20051103125
9JiangYCXiaZYZhongYPAnadaptiveadjustingmechanismforagent
distributedblackboardarchitectureMicroprocessorsandMicrosystems
20052920
10ChaubDraaBDiqnumFTrendsinagentcommunicationlanguage

ComputationalIntelligencev182002589101
11RestrepoJAMilanAJHarleyRGHabetlerTGCOTANNPWM
singlephasesynchronousrectifierswithoutlinevoltagesensors

Annual
PowerElectronicsSpecialistsConferencev52004IEEE35thAnnual
PowerElectronicsSpecialistsConference2004438593864
12TianGuoFuZhangguozhongSunshuhuietcANNaided参

考

文

献

107
automotivetransmissiondesign

DongbeiDaxueXuebaoJournalof
NortheasternUniversityv2320029903906
13
焦李成

神经网络的应用与实现

西安电子科技大学出版社
1996
14
李士勇

神经控制和智能控制论

哈尔滨工业大学出版社
1996
15FogelAnIntroductiontoSimulatedEvolutionOptimizationIEEETranson
NeuralNetwork19941314
16
方平

黄石生

林一松

吴祥淼

电阻点焊过程智能控制的研究

中国机
械工程
Vol1320023441

445
17LF
蒙多尔福著

王祝堂张振录郑漩译

铝合金的组织与性能

冶金工
业出版社
1988
18
赵熹华

压力焊

机械工业出版社
1988
19LivshitsAGUniversalqualityassurancemethodforresistancespotwelding
basedondynamicalresistanceWeldingJournal199797685
20
李桂中

低碳钢点焊动态过程的模型化控制

焊接学报
1995216
21
中国机械工程学会焊接学会

电阻焊理论与实践电阻焊北京机械工业
出版社
19941
第
1
版

22
刘效方

点焊质量电极位移法控制的模型设计

焊接
19832
23BeatsonEVetcResistanceWeldingControlandMonitoringTheBritish
WeldingInstitute1977
24
扬剑秋

姜以宏

监控电阻焊的新方法。焊接技术
198742426
25
翼殿英等

热膨胀监控微机控制点焊过程研究

电焊机
198623712
1822
26CLTsaietalAnalysisandDevelopmentofaRealTimeControl
MethodologyinResistanceSpotWeldingWeldingJournalDecember
1991pp339s351s
27WaschkiesEckhardTestingtheResistanceSpotWeldingProcesswith
UltrasonicsWeldingCuttingvol49no1ppE5E71997
28
赵熹华徐国成等
LY12CZ
铝合金点焊熔核孕育处理研究

第十次全国焊
接会议论文集

29Commission

resistanceweldingandalliedjoiningDocumentsof
19961997weldingintheworld1999443吉林大学博士学位论文

108
30
方平等

人工神经网络在焊接质量控制中的应用与展望
J
南昌航空工业
学院学报
19981
31
赵熹华

王宸煜

张若冰

严庆光

点焊工艺设计智能混合系统的研究
J
焊
接
200031114
32
陈益平

胡德安

陈鹏展

李唐柏

智能点焊专家系统集成策略的研究

机械工
程学报
200176164
33
赵熹华

王宸煜

张若冰等

汽车点焊工艺参数选择及接头质量预测人工智
能化研究

汽车技术
1998826

29
34
吴林

陈善本

智能化焊接技术

国防工业出版社
2000
35CLTsaiOAJammalJCPapritanModelingofResistanceSpotWeld
NuggetGrowthWeldingjoumal1992247s54s
36CLTsaiWLDaiDWDickinsonJCPapritanAnalysisandDevelopment
ofaRealTimeControlMethodologyinResistanceSpotWeldingWelding
Journal199112339351
37
方平等

人工神经网络在焊接质量控制中的应用与展望

南昌航空工业学
院学报
19981
38MesslerRWJJouMinJamesLCAnIntelligentControlSystemfor
ResistanceSpotWeldingUsingaNeuralNetworkandFuzzyLogic
ConferenceRecordIASAnnualMeeting199517571763
39ChenXingqiaoArakiKenjiFuzzyAdaptiveProcessControlofResistance
SpotWeldingwithaCurrentReferenceModelProceedingsoftheIEEE
InternationalConferenceonIntelligentProcessingSystems
China1997190194
40JouMinAnIntelligentControlSystemforResistanceSpotWeldingUsing
FuzzyLogicandNeuralNetworkTuning1994RensselaerPolytechnic
Institute
41DiltheyBohlmannNeurondeNetzezurQualitassicherungbeimWider
standsprunktschweissenderpraktikerJ20008305

311
42
于有生张旭明陈明清郭建江

基于模糊逻辑的电阻点焊微机控制
器的研究武汉理工大学学报
20023350

353
43HaoMOsmanKAetalDevelopmentsincharacterizationofresistancespot参

考

文

献

109
weldingofaluminumWeldingJournal199675
44
方平

黄石生

林一松等

电阻点焊过程智能控制的研究

中国机械工程
20025
年
3
月

45WeberGertElectrodeWearAssessmentofSpotWeldingbyFuzzy
Classification51
st
AnnualAsssemblyofIIWHamburgGermany1998
46WeberGertNonlinearMethodsinResistanceWeldingtheDynamic
WeldabilityLobeandFuzzyClassification52stAnnualAsssemblyofIIW
LisbonPortugal1999
47
姜孝华

电焊机的单片微机专家智能控制

西南交通大学学报

19945472

476
48
吴祥淼

黄石生

王志强

薛家祥

方平

逆变式点焊电源恒流系统的智
能控制

焊接
200131922
49
杜全营

陈善本

于有生

基于模糊逻辑的电阻点焊恒流控制系统

焊接

200361721
50BONDAHGASSWELAnanalysisofproblemsandresearchinDAI
ReadinginDistributedArtificialIntelligenceDanMateoCAMorgan
kaufmann1988
51KENDALLEAMALKOUNMTJIANGCHAmethodologyfor
developingagentbasedsystemsLecturenotesinartificialintelligence
Computer1995284
52
朴永杰

朱振友

丘涛

陈善本

点焊柔性加工系统多智能体的协调控制

焊
接学报
200351720
53BrownJDJoblingCPOptimizationofSignalInputstoaNeuralNetwork
forModelingSpotWeldingofZincCoatedSteels51
st
AnnualAsssemblyof
IIWHamburgGermany1998
54BrownJDRoddMGApplicationofArtificialIntelligenceTechniquesto
ResistanceSpotWeldingJIronmakingandSteelmaking
1998253199204
55HsuTungLeeMichaelWangRomanMaevElenaMaevaStudyonUsing
ScanningAcousticMicroscopyandNeuralNetworkTechniquestoEvaluate
theQualityofResistanceSpotWeldingJIntJAdvManufTechnol2003吉林大学博士学位论文

110
22727732
56
饶德林

陈立功

倪纯珍
LD10CS
铝合金点焊的神经网络质量估测
J
上
海交通大学学报
20032167170
57YongjoonChoSehunRhee

Newtechnologyformeasuringdynamic
resistanceandestimatingstrengthinresistancespotweldingMeasSci
Technol20001111731178
58ZhangZhongdianLiDongqingZhaohongyunYuYanEffectsofmodeling
meansonpropertiesofmonitoringmodelsofspotweldingqualityCHINA
WELDING200211119123
59
张忠典

建立点焊质量神经网络监测模型时作用函数的选取

焊接学报

200235963
60LeeSRChooYJLeeTYKimMHChoiSKAqualityassurancetechnique
forresistancespotweldingusinganeurofuzzyalgorithmJOURNALOF
MANUFACTURINGSYSTEMS20015320328
61
方平

基于
DSP
的电阻点焊智能控制系统研究

华南理工大学博士学位
论文
20025
62
罗震

铝合金电阻点焊过程质量检测及控制方法的研究

天津大学博士学
位论文
200212
63TShibataTFukudaKKosugeandFAraiSkillbasedcontrolbyusingfuzzy
neuralnetworkforhierarchicalintelligentcontrolProcIJCNN921992

8186
64HTakagiandIHaysshiNNdrivenfuzzyreasoningInternatJApprox
Reasoning51991191212
65TTakagiandMSugenoDerrivationoffuzzycontrolrulesfromhuman
operatorscontrolactionsProcIFACSympOnFuzzyInformation
KnowledgeRepresentationandDecisionAnalysis19835560
66LF
蒙多尔福著

王祝堂张振录郑漩译

铝合金的组织与性能

北京

冶金工业出版社
1988
67
赵熹华

压力焊

北京

机械工业出版社
1988
68
吴祥淼

黄石生

方平

王振民

邓永翔

逆变式电阻焊机的研究进展

电焊机

2000127

11参

考

文

献

111
69
黄石生

逆变理论与弧焊逆变器

北京

机械工业出版社
1995
70
李建国

郭晓敏

刘竹

我国逆变焊机发展浅析

电焊机
1998115
71
李爱文

张承慧

现代逆变技术及其应用

北京科学出版社
2000
72
张青云

电力电子器件的应用及发展

现代电子技术

总第
120
期
3738
73
卢薇

李之中

马新国

逆变焊机的研究与探讨

山西机械
200165458
74
方平

唐国保

黄石生

吴祥淼

逆变技术在电阻焊中应用研究

南昌航空工
业学院学报
200131619
75
张义

逆变式次级整流阻焊电源的研究

电力电子技术
199551517
76
牛云峰
IGBT
电阻缝焊电源

天津理工学院学报
199833134
77
华学明
IGBT
逆变微型点焊电源的保护分析

上海工程技术大学学报

199744347
78
曹彪

逆变式电阻点焊机
8098
单片机控制系统

焊接学报
199723841
79
杨思乾

点焊逆变电源网压补偿的数学模型及网压自动补偿电路

西北工
业大学学报
19992230235
80
张宏杰

逆变电阻焊机主电路设计与仿真

吉林大学硕士学位论
文
200406
81
张军

赵静
DSP
芯片的特点及其应用

现代电子技术
2001117981
82TexasInstrumentTMS320LF2407DigitalsignalProcessors1996
83
张雄伟

曹铁勇
DSP
芯片的原理与开发应用

北京

电子工业出版社
2000
84
许伟
DSP
应用的结构和发展

电子技术应用
199942022
85
刘红梅

彭疆南

基于
DSP
的远程通信系统设计与实现


电子技术
20015
3032
86
吴东晖

田元

叶秀清

基于双
DSP
的实时图像处理系统


电子技术应用

2001106668
87
胡辉

等

基于
TMS320C80
的
FFT
算法的并行实现

哈尔滨工业大学学
报
199938690
88
霍修坤

宋伟

刘政
DSP
芯片
TMS320C31
特点及应用

国外电子元器
件
199944346
89
王洪升

田蔚风

金志华


基于
DSP
的移动机器人的设计与实现

电子工程
师
2004015658
90
高瑞昌

孙昌国
DSP
在电机测速中的应用


今日电子
200423133吉林大学博士学位论文

112
91
林苏斌

缪希仁

张培铭


基于
DSP
与可视化技术的接触器动态测试装置
研究

福州大学学报

自然科学版
200413942
92
王常力等

散型控制系统的选型与应用

清华大学出版社
966
93
李桂青罗持久工程设计专家系统的原理与程序设计方法气象出版
社
1991
94JLAltyandMJ

coombsexpertsystemsconceptsandexamplesNcc
publicationEngland1984
95
吴慧中陈宝方万耀表机械设计专家系统研究与实践中国铁道出
版社
1994
96
张立明人工神经网络的模型及其应用

复旦大学出版社
1993
97ZadehLATowardsaTheoryofFuzzySysteminAspectsofNetworksand
SystemTheoryNewYork1971
98
王士同

模糊系统模糊神经网络用应用程序设计

上海科学技术文献出版
社
1998
99ShiQY

LuAL

ZhaoHY

etalDevelopmentandapplicationofadaptive
meshtechniqueinthreedimensionalnumericalsimulationofwelding
processJActaMetallurgicaSinicaEnglishletter

2000

131

3339
100ZhaoHY

ShiQY

LuAL

etalSimulationofweldingprocessof
TjointsJActaMetallurgicaSinicaEnglishletter

2000

131

205212
101LijunXu

JamilAKhanNumericalstudyofthermalmodelingofresistance
spotweldingutilizingcoupledthermalelectricalmechanicalanalysisA
The1999ASMEInternationalMechanicalEngineeringCongressand
Exposition

2000

395402
102XSunandPDongAnalysisofaluminumresistancespotweldingprocessing
usingcoupledfiniteelementproceduresWeldingJournal

2001

438

215221
103
张贵锋

包亚峰

张建勋

点焊控制方法的发展与动向

电焊机
1999216
104
陆汝钤

人工智能下册北京科学出版社
1996
105PhilipWGetal

FaultDiagnosisforIndustrialPrintersUsingCaseBased
ReasoningEngngApplicArtifIntell199692163172
106
傅积和孙玉林焊接数据资料手册机械工业出版社
1999参

考

文

献

113
107FuLMRuleLearningbySearchingonAdaptedNetsInProceedingofthe
NinthNationalConferenceonArtificialIntelligence1991590595
108SetionoRExtractingRulesfromNeuralnetworksbyPruningand
HiddenunitSplittingNeuralComputation19971205225
109CravenMShavlikJExtractingTreeStructuredRepresentationsofTrained
NetworksInTouretzkyDMozerMHasselmoMetcAdvancesinNeural
InformationProcessingSystemsTheMITPressCambridgeMA1996
2430
110
杨黎峰

铝合金电阻点焊熔核形成过程的数值模拟

吉林大学硕士学位论
文
200506
111
刘和平
TMS320LF240XDSP
结构原理及应用

北京

北京航空航天大学
出版社
2002
112
熊腊森

刘长友
IGBT
驱动保护电路
EXB841
与
M57959L
的研究

电焊机

20001129

31附

录

114
附录

参与研究的科研课题


1
国家自然科学基金资助项目铝合金电阻点焊工艺设计及质量控制的研
究
No50175048


2
通用公司
GM
美国资助项目铝合金电阻点焊熔核孕育处理研究

3
通用公司
GM
美国资助项目激光焊与电阻缝焊复合焊接方法研究


发表的主要论文

1

曹海鹏

赵熹华等基于事例推理的点焊工艺参数选择智能化焊接学
报
20036
。
EI

04158112739


2
曹海鹏

赵熹华等铝合金电阻点焊焊接参数选择的智能化吉林大学学报

工学版


20042
3
曹海鹏

赵熹华等人工智能在电阻点焊过程的应用与发展吉林大学学报

工学版
20044
4
曹海鹏

赵熹华等铝合金点焊工艺设计及质量控制的智能化研究
ICFDM04
西安
2004146
5
曹海鹏赵熹华

赵贺铝合金电阻点焊工艺设计智能化焊接学报
Vol26
No2

2005
6
曹海鹏赵熹华

赵贺人工神经网络在电阻点焊工艺设计中的应用第
十一届全国焊接会议论文集
H50042005

2005
年
5
月上海

7
赵熹华曹海鹏赵贺激光焊电阻缝焊复合焊接方法的研究第十一
届全国焊接会议论文集
H60042005

2005
年
5
月上海致

谢

115
致谢
本论文的研究工作是在导师赵熹华教授的悉心指导和关怀下完成的。导师
严谨求实的科研态度渊博的知识使我在知识的探索运用以及对科学问题的
求解过程中深深受益而且导师朴素坦诚的生活作风也令我十分敬佩。在过
去三年的学习工作生活中导师在学习工作和生活中都给了我无微不至的
关怀和帮助。值此论文完成之际谨向导师致以衷心的感谢和致意。

在论文工作中得到了教研室元哲石副教授殷世强工程师等老师的帮助
和指导本专业张宏杰李永强等硕士研究生给予我工作很大的支持。在此
向众位老师同学表示衷心的感谢。

感谢所有帮助我支持我完成学业的朋友们祝他们顺利。

深深的感谢我的父母和妻子对我学业的支持与精神上的鼓励。摘

要

I
摘要
题目铝合金点焊工艺设计及质量控制智能化研究

专业材料加工工程

导师赵熹华

教授


铝合金点焊在汽车工业和航空航天工业中获得很广泛的应用但是由于铝
合金自身物理性质的特点其电阻点焊焊接性很差其电阻点焊质量控制极为
困难且焊接质量随着焊接参数的变化波动严重。铝合金电阻点焊工艺设计及
质量控制过程是一个复杂的多输入多输出的病态的问题求解过程具有典型
的非线性特点。应用人工智能技术来进行电阻点焊工艺参数规划及其质量的智
能控制是解决这一问题的有效途径。数字信号处理技术是利用计算机或专用处
理设备以数值计算法方法对信号进行采集变换综合估算与识别等加工
处理借以达到提取信息和便于应用目的的一种技术。
DSP
芯片由于具有运算
速度极快精度高接口方便特别适合处理复杂的数字信号处理算法获得
了广泛的应用。

铝合金电阻点焊质量控制过程是个复杂的系统工程从铝合金电阻点焊工
艺设计到电阻点焊过程控制等很多因素子系统都对铝合金电阻点焊质量有
着较大的影响。本文建立一个铝合金电阻点焊智能集散型系统以主控计算机
为中心管理结合分散在工业控制用微控制系统。主控计算机具有丰富的人
机交互资源以及大量的存储空间容易实现友好的人机界面控制管理功能较
强。而下位工业微控制器直接面对工业测控对象执行底层控制以及数据采集
功能。主控计算机和下位工业控制器既可以相互独立工作彼此又具有联系
二者集成一个铝合金电阻点焊智能控制系统。其中主控计算机完成总体控制功
能包括铝合金电阻点焊工艺参数设计模块总体控制对下位控制器采集的
数据进行存储分析等功能。下位机完成铝合金电阻点焊过程实时控制在线
数据采集等功能。本文研究内容为上位机软件控制系统中铝合金电阻点焊工艺
设计智能系统及下位机铝合金电阻点焊过程智能控制器为国家自然科学基金
支持项目项目编号为
50175048
。
吉林大学博士学位论文

II
铝合金电阻点焊工艺设计智能系统由点焊工艺设计机器学习以及点焊知
识咨询三个模块组成。点焊工艺设计模块负责根据用户的输入制定和修改点焊
工艺规范机器学习模块完成事例库的维护推理规则的维护以及神经网络训
练等任务点焊知识咨询模块对用户提供材质点焊焊接性电极知识和点焊缺
陷分析等知识咨询。在点焊工艺设计模块中采用基于事例的推理基于规则
的推理以及模糊神经网络等多种推理方法来充分模拟人类领域专家的思维方
式进行铝合金电阻点焊工艺规范的求解。在基于事例的推理子模块中本系统
结合点焊工艺的特殊性重点分析了点焊工艺参数的事例特征参照提取出的
事例特征和点焊工艺的独特性提出了点焊工艺事例的检索以及修正策略。本
文深入研究了点焊工艺的内在特性制定了在第类事例特征的约束下以材
质的厚度和其热物理性质作为检索的首要条件更加符合人类领域专家的基于
经验的思维方式使得推理过程更加灵活。在搜索到相似事例后系统以领域
专家进行工艺设计的过程为依据以材质自身的热物理性质电阻率屈服
强度为输入以材质的点焊工艺参数中的焊接电流焊接压力为输出设计了
相应的模糊修正算法使基于事例的推理更加符合铝合金电阻点焊过程的本质
特征。

基于模糊神经网络的推理模块设计思想是采用基于模糊神经网络的新型
专家系统通过模糊神经网络技术和专家系统技术的结合充分模拟人类专家
的思维过程提高本系统的求解性能。本模块的主要设计目的为在供电波形
电极选用的限制条件下结合专家系统和模糊神经网络技术设计一个通用推
理模块根据不同铝合金材料的不同的热物理特性求解出相应的工艺规范参
数。通过分析专家系统和模糊神经网络的各自特点将传统专家系统与模糊神
经网络技术相结合的思想用于点焊工艺设计智能系统中。并根据点焊工艺参数
的特点将点焊工艺参数分解细化把点焊工艺求解过程分解为不同的求解子
模块并按照各模块的具体特点具体应用相应的智能技术。在点焊工艺主要
参数的求解子模块中以焊接时间来表征规范强度作为求解焊接电流的模糊
神经子网络的输入参数之一充分适应点焊工艺设计的复杂求解特征。并可根
据焊机的容量限制来灵活的调整焊接电流使之适应用户指定的焊机具有良
好的优化性质。以材质热物理特征作为神经网络输入参数将材质的物理性质对
点焊过程的影响引入到焊接工艺规范的求解过程中深层次模拟了人类专家在
进行点焊工艺设计中的思维过程并以此作为材质的辨识特征改变了以往类摘

要

III
似系统中以材料库中材料名称来识别材质的方式增加了系统的推理灵活性。

在集散型铝合金电阻点焊智能控制系统的下位机系统中为提高铝合金电
阻点焊过程控制精度首次采用
DSP
芯片
TMSLF2407A
作为逆变电阻点焊智
能控制器的主芯片并设计了相应的人机交互模块
IGBT
驱动模块故障检
测以及保护等辅助功能模块的硬件组成为进行铝合金电阻点焊质量控制提供
了硬件基础。人机交互模块由薄膜键盘以及液晶显示模块组成实现用户对焊
接参数的选择功能模块的控制完成用户与系统之间的交流通讯功能。
IGBT
作为电阻点焊逆变电源的主要功率转换元件其是否能够正常的开通与关断直
接关系到焊接电源的工作是否正常工作。
IGBT
的驱动及保护是点焊逆变电源
设计的关键。本系统采用光耦隔离式而且具有封闭性软关断功能能够在
IGBT
短路时软关断
IGBT
从而完成对主电路的保护。

软件系统是逆变电阻点焊电源智能控制器的核心本文在分析控制器功
能的基础上进行软件系统各功能模块的设计。采用消息产生与响应机制处
理用户输入与响应是人机交互更加灵活。设计了完整的故障诊断与报警机
制使系统工作更加稳定可靠。对控制参量焊接电流及其变化率提出了相
应的模糊划分及模糊控制规则采用模糊控制技术进行电阻点焊过程控制。
采用仿真对模糊控制规则划分提取进行优化提高了模糊控制的精度及其鲁
棒性。提出了结合焊接电流及电极电压相结合的质量控制方法系统仿真结
果表明本智能控制系统可以提高铝合金电阻点焊质量控制精度。

本研究能显著提高铝合金电阻点焊工艺设计水平及质量控制精度为智
能工程在焊接领域的应用提供了一条全新的途径具有重要的理论研究意义
和工程实际应用价值。

关键词铝合金电阻点焊工艺设计质量控制人工智能
吉林大学博士学位论文

IV
ABSTRACT
Thespotweldingofaluminumalloyshasgainedmoreandmoreapplicationin
automobileairlineandspaceflightindustriesForitsphysicalcharacteristics
aluminumalloyshavebadweldabilityandqualitycontrolabilityandthequalityof
nuggetfluctuatesaccordingtotheprocessparametersThedesignofprocess
parametersandqualitycontrolofitsresistancespotweldingisaillstructuraltask
withmultiinputsandmultioutputswhichshowstypicalnonlinearityItisa
effectivewaytoemployAItodesigntheparametersandcontroltheprocessquality
DigitalSignalProcessingisanewtechnologythatemploysnumerical
implementationtogatheringsignalstranslatingsynthesizingevaluatingand
identificationtoobtaininformationwithcomputersorspecialprocessingdevices
ForthehighspeedandprecisionandconvenientinterfacesDSPisfittohandle
complexsignalprocessingalgorithmandobtainbroadapplication
Asthequalitycontrolofaluminumalloysresistancespotweldingisa
complicatedsystemsengineeringmanyfactorsandsubsystemsincludingprocess
parametersdesignofaluminumalloysresistancespotweldingsystemandprocess
controlofresistancespotweldingsystemexertaninfluenceonqualityof
aluminumalloyresistancespotweldingThispaperdevelopedaintelligent
distributedcontrollingsystemofaluminumalloyswhichdependingonthe
supervisorCPUmanagedandcontrolledthedistributedmicrocontrollersin
processWithpowerfulabilityofmanmachineinteractionandgreatcapacityfor
RAMROMitisconvenienttobuildamanmachineinteractionsystemandcarry
outthemaincontrolfunctionsontheothersidethemicrocontrollerdirectly
controlstheobjectsonthelineandcarryoutthefunctionsofbottomcontroland
dataaquisitioonThesupervisorandlowerCPUcanworkindependentlywhile
theycanworktogetherboththemconstitutetheintelligentsystemofaluminum
alloysresistancespotweldingThesupervisorCPUcarriesoutthegeneralcontrol
functionswhichincludeprocessparametersdesigngeneralcontrolandstoreandABSTRACT
V
analyzethedatafromthelowerCPUThelowerCPUcompletesthedata
acquisitionandprocesscontrolonlineThispaperfocusesontheintelligent
processparametersdesignsystemIPPDSofaluminumalloysresistancespot
weldingAARSWinthesupervisorandtheintelligentprocesscontrolof
aluminumalloysresistancespotweldinginthelowerCPUsupportedbyNSFC
thenumberis50175048
TheIPPDSofaluminumalloysresistancespotweldingconsistsofthree
partsprocessparametersdesignmachinelearningandspotweldingreferenceThe
taskcompletedinprocessparametersdesignmodulecomprisesuserinput
designingandamendingspotweldingparametersAndthatcompletedinmachine
learningmoduleconsistsofmaintainingdatabasesandrulesdatabasesandtraining
FNNInspotweldingreferencemoduleitissuppliedthatthehelpofrelative
knowledgeofspotweldingincludingmaterialweldabilityelectrodeandanalysis
onflawsInprocessparametersdesignmodulevariousreasoningmethods
includingcasebasedreasoningCBRrulebasereasoningandfuzzyneural
networksFNNareappliedtointimatefullythewaysthatpeopleexpertsinfields
trytodesignspotweldingparametersIntheCBRsubmodulethecasecharacters
areanalyzedindetailsaccordingtoAARSWprocessparticularityandbyreferring
towhichthestrategiesofsearchingandamendingareestablishedInthispaper
interiorofAARSWprocesswasrevealeddeeplyUnderthelimitofthefirstclass
ofcharactersthicknessandthermalphysicalpropertiesofmaterialswereselected
asinitialindexeswhichincreasedtheflexibilityofreasoningprocessandwas
moresimilartothewaybasedonexperiencesthatpeopleexpertsthoughtAfuzzy
inferenceamendingalgorithmwasproposedinwhichelectricresistivityandyield
strengthareusedasinputsandweldingcurrentandelectrodeforceasoutputs
furthermorewhichmeetsinteriorbehaviorofAARSWprocessAllofthat
increasedtheflexibilityandaccuracyofCBR
Thedesignconceptionofreasoningmoduleundertheideaofnewexperts
systembasedonFNNtriedtointimatethethinkingwayofpeopleexpertsand
improvereasoningcapabilityofthesystembyintegratingFNNandESThis
moduleunderthelimitofcurrentwavesandelectrodestylesaimedtosetupa吉林大学博士学位论文

VI
generalreasoningmodulewhichwasabletodeterminecorrespondingAARSW
processparametersintermsofvariousthermalphysicalpropertiesofvariouskinds
ofaluminumalloysByanalyzingFNNandEStheideaofintegratingtraditional
ESandFNNwasappliedtoIPPDSofAARSWAccordingtoprosperitiesof
AARSWparameterstheprocessofreasoningwasdividedintoseveralmodulesby
classifyingprocessparametersandrelativeintelligenttechniqueswereadoptedfor
differentmodulesInthesubsystemformainparameterssolutionweldingcycles
wereusedasoneofinputsinsubnetworkssignofstrengthofweldingprocessto
attainthevalueofweldingcurrentThatappliedtocomplexcharactersofsolution
toIPPDSofAARSWwellOutputvalueofweldingcurrentwasabletobeadjusted
intherangeofcurrentthatpowercansupplytofitthegivenpowerwhichcan
optimizeoutputsTheinfluenceofmaterialphysicalprosperitiesonwelding
processwasaddedtosolutiontoweldingprocedureparametersbymaterial
weldabilitywasservedasoneofinputssoitwaspossibletointimatedeeplythe
wayofpeopleexpertsthinkingAndthatasmaterialdistinguishabilitytookplace
ofthewaytodistinguishmaterialsbynameinsimilarsystembeforeandincreased
reasoningflexibility
TMSLF2407AwasusedasthechiefcoreoftheintelligentcontrollerofRSW
inverterforthefirsttimetoimprovethecontrolprecisioninthelowersystemof
thedistributedintelligentcontrolsystemofAARSWandthehardwaresubsystem
whichcomprisedmanmachineinteractionmoduleIGBTdrivermoduleand
failurediagnosisandprotectionmoduleetcwasdevelopedThemanmachine
interactionmoduleconsistsofLCDdisplaymoduleandmembranekeyboard
carriesoutthefunctionsofprocessparameterssetupshiftofcontrolmodulesasa
wholeitisthecommunicationmodulebetweenusersandsystemThedriverand
protectionmoduleofIGBTisthekeyfactorofdesigningRSWinverterfor
whetherRSWinverterdoesworkornotdirectlydependsontheworkstatusof
IGBTwhichisthemainpowertranslatedcomponentThisdeviceoperatesasan
isolationamplifierforthesemodulesandprovidestherequiredelectricalisolation
betweentheinputandoutputwithanoptocouplerShortcircuitprotectionis
providedbyabuiltindesaturationdetectorAfaultsignalisprovidediftheshortABSTRACT
VII
circuitprotectionisactivated
ThesoftwareisthekerneloftheintelligentcontrollerofRSWinverterBased
onthefunctionanalysisthefunctionalmodulesweredevelopedThemessage
triggeringandrespondingoperatesinputsandresponsesthatincreasethe
flexibilityofcommunicationbetweenusersandsystemThediagnosisand
detectionmoduleimprovethestabilityThecontrollingparameterweldingcurrent
anditsgradientwerefuzzifiedandtheruleoffuzzyinferencewerebuiltthefuzzy
controllerofRSWwasdevelopedTheprecisionandrobustoffuzzycontrollerwas
improvedbyoptimizingfuzzyrulesandfuzzificationwiththesimulationtoolthe
Boththecurrentandvoltagebetweenelectrodetipswereusedasmonitoring
parametersandtheresultsofsimulationandexperimentsprovedthatimprovedthe
precisionofqualitycontrolofAARSW
Thisresearchimprovesmarkedlythedesignofprocessparametersandquality
controlofitsresistancespotweldingandsetupanewwaytotheapplicationofAI
inweldingfieldwhichObtainsnotonlythehighacademicvaluebutalsothe
significantengineeringapplicationvalue

KeywordAARSWProcessDesignQualityControlArtificialIntelligence
